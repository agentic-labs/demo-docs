---
title: "get-emails-directory-metadata.spec.ts"
---

## High-level description
This code is a unit test for the `getEmailsDirectoryMetadata` function. It verifies that the function correctly retrieves metadata about email templates stored in a specific directory structure, including information about subdirectories and email filenames.

## References
The test file references the `getEmailsDirectoryMetadata` function from './get-emails-directory-metadata'.

## Symbols

### `test('getEmailsDirectoryMetadata on demo emails', async () =&gt; {...})`
#### Description
This is a Jest test case that checks the functionality of the `getEmailsDirectoryMetadata` function when applied to a demo emails directory.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| emailsDirectoryPath | string | The absolute path to the demo emails directory |

#### Outputs
The test doesn't have explicit outputs, but it uses Jest's `expect` function to assert the correctness of the `getEmailsDirectoryMetadata` function's return value.

#### Internal Logic
1. Arrange: Sets up the path to the demo emails directory.
2. Act: Calls `getEmailsDirectoryMetadata` with the demo emails directory path.
3. Assert: Compares the result of `getEmailsDirectoryMetadata` with an expected object structure using Jest's `expect().toEqual()`.

The expected structure includes:
- The absolute path, directory name, and relative path of the main emails directory.
- An empty array for `emailFilenames` in the main directory.
- An array of `subDirectories`, each containing:
  - Absolute path, directory name, and relative path.
  - An array of `emailFilenames` specific to that subdirectory.
  - An empty array for further `subDirectories`.

The test checks for seven specific subdirectories: 'magic-links', 'newsletters', 'notifications', 'receipts', 'reset-password', 'reviews', and 'welcome'. Each subdirectory is expected to contain specific email template filenames.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| path | Used to resolve and manipulate file paths |
| getEmailsDirectoryMetadata | The function being tested, imported from './get-emails-directory-metadata' |

## Performance Considerations
This test involves file system operations, which can be slower than in-memory operations. However, as it's a unit test, performance is not a critical concern unless the test suite becomes very large.