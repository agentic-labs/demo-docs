---
title: "page.tsx"
---

## High-level description
This code defines a Next.js page component for previewing email templates. It handles dynamic routing, renders email templates, and provides error handling and metadata generation for the preview page.

## Code Structure
The main `Page` component is an async function that processes the URL slug, retrieves email metadata, renders the email, and returns a `Preview` component. It uses several imported functions for email-related operations and Next.js utilities for routing and metadata.

## Symbols

### Page
#### Description
An async function component that serves as the main page for email preview. It processes the URL parameters, renders the email, and handles potential errors.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | PreviewParams | Object containing the slug for the email template |

#### Internal Logic
1. Decodes the slug from URL parameters
2. Retrieves email directory metadata
3. Gets the email path from the slug
4. Renders the email by path
5. Returns a `Preview` component wrapped in a `Suspense` boundary

#### Error Handling
- Throws an error if the emails directory is not found
- Redirects to home page if the email path is not found
- Throws an error during build if there's an issue rendering the email

### generateMetadata
#### Description
A function that generates metadata for the preview page, specifically the page title.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | { params: PreviewParams } | Object containing the preview parameters |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metadata | Object | Object containing the page title |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| path | For handling file paths |
| Suspense | React component for handling loading states |
| redirect | Next.js function for redirecting |
| getEmailPathFromSlug | Custom function to get email path from slug |
| getEmailsDirectoryMetadata | Custom function to get email directory metadata |
| renderEmailByPath | Custom function to render email by path |
| emailsDirectoryAbsolutePath | Constant for emails directory path |
| Home | Home page component |
| Preview | Preview component for rendering email |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| dynamicParams | boolean | true | Enables dynamic route parameters |
| dynamic | string | 'force-dynamic' | Forces dynamic rendering |

## Error Handling
The code implements error handling for various scenarios:
- Throws an error if the emails directory is not found
- Redirects to the home page if the email path is not found
- Throws an error during build if there's an issue rendering the email

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /preview/[...slug] | GET | URL parameters | HTML | Renders email preview based on slug |

This page component is part of a larger email preview system, utilizing several custom actions and utilities to process and render email templates dynamically.