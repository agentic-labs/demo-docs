---
title: "preview.tsx"
---

Here's a detailed documentation of the provided code:

## High-level description
This code defines a React component called `Preview` that renders an email preview interface. It allows users to view and interact with email content in different formats (desktop, mobile, source code) and provides functionality for hot reloading and error handling.

## Code Structure
The `Preview` component is the main symbol in this code. It uses several hooks and components from React and Next.js, as well as custom hooks and components from the application. The component structure is organized to handle different view modes and rendering states.

## References
- `usePathname`, `useRouter`, `useSearchParams` from Next.js navigation
- `useHotreload`, `useEmails`, `useRenderingMetadata` custom hooks
- `CodeContainer`, `Shell`, `Tooltip`, `RenderingError` custom components

## Symbols

### `Preview`
#### Description
A React functional component that renders an email preview interface with different view modes and error handling.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| slug | string | The slug identifier for the email |
| emailPath | string | The file path of the email |
| pathSeparator | string | The path separator used in the file system |
| renderingResult | EmailRenderingResult | The initial rendering result of the email |

#### Internal Logic
1. Initializes state and retrieves necessary data using hooks
2. Sets up hot reloading if not in build mode
3. Defines handlers for view and language changes
4. Renders different components based on the active view and rendering state
5. Handles error states and displays appropriate messages

## Side Effects
- Uses `useHotreload` hook to handle file changes during development
- Updates URL parameters when changing views or languages

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| next/navigation | Next.js navigation utilities |
| sonner | Toast notification library |

## Error Handling
The component handles rendering errors by displaying a `RenderingError` component when the `renderingResult` contains an error.

## Logging
No explicit logging mechanisms are implemented in this code.

## TODOs
(No TODOs found in the code)