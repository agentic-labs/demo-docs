---
title: "send.tsx"
---

## High-level description
This code defines a React component called `Send` that renders a button and a popover for sending test emails. It allows users to input recipient email and subject, then sends the email using a POST request to a specified API endpoint.

## Code Structure
The `Send` component uses React hooks for state management and Radix UI's Popover component for the UI. It also imports and uses custom components like `Button` and `Text`, as well as utility functions for styling and notifications.

## Symbols

### Send
#### Description
A React component that renders a "Send" button and a popover form for sending test emails.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| markup | string | The HTML content of the email to be sent |

#### Internal Logic
1. Manages state for recipient email, subject, sending status, and popover open state.
2. Handles form submission by sending a POST request to the API.
3. Displays success or error messages using toast notifications.
4. Renders a button that triggers the popover and a form within the popover for email details.

### onFormSubmit
#### Description
An asynchronous function that handles the form submission for sending the test email.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| e | React.FormEvent | The form submission event |

#### Internal Logic
1. Prevents default form submission behavior.
2. Sets the sending state to true.
3. Sends a POST request to the API with email details.
4. Handles rate limiting (429 status) and displays appropriate error message.
5. Displays success message on successful send.
6. Catches and displays any other errors.
7. Resets the sending state to false.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @radix-ui/react-popover | Provides the Popover component for the email form |
| React | Core library for building the component |
| sonner | Used for displaying toast notifications |
| inter | Custom font import |
| Button | Custom button component |
| Text | Custom text component |

## Error Handling
The component handles errors during the email sending process:
- Displays a specific error message for rate limiting (429 status).
- Shows a generic error message for other exceptions.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| https://react.email/api/send/test | POST | JSON with to, subject, and html fields | Success/Error | Sends a test email |

This component provides a user-friendly interface for sending test emails, with error handling and visual feedback through toast notifications. It's designed to be used within a larger React application, likely as part of an email template testing or preview system.