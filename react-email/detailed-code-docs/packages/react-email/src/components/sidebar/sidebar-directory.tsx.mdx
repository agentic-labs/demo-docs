---
title: "sidebar-directory.tsx"
---

## High-level description
This code defines a React component called `SidebarDirectory` that represents a collapsible directory in a sidebar. It displays a folder icon, directory name, and can be expanded to show its contents, including subdirectories and email files.

## Code Structure
The main `SidebarDirectory` component uses the `Collapsible` component from Radix UI to create an expandable/collapsible structure. It renders the directory name and icon, and when expanded, it renders the `SidebarDirectoryChildren` component to display the contents of the directory.

## References
- `EmailsDirectory` type from '../../actions/get-emails-directory-metadata'
- `Heading` component from '../heading'
- Icon components: `IconFolder`, `IconFolderOpen`, `IconArrowDown`
- `SidebarDirectoryChildren` component from './sidebar-directory-children'

## Symbols

### `SidebarDirectory`
#### Description
A React component that renders a collapsible directory in the sidebar.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| emailsDirectoryMetadata | EmailsDirectory | Metadata for the directory |
| className | string (optional) | Additional CSS classes |
| currentEmailOpenSlug | string (optional) | Slug of the currently open email |

#### Internal Logic
1. Determines if the directory contains the currently open email
2. Checks if the directory is empty
3. Manages the open/closed state of the directory
4. Renders the directory name, icon, and expand/collapse arrow
5. Renders the `SidebarDirectoryChildren` component when expanded

## Side Effects
- Updates the `persistedOpenDirectories` Set when the directory is opened or closed

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @radix-ui/react-collapsible | Provides the collapsible functionality |
| react | Core React library |

## Performance Considerations
The component uses `React.useState` to manage the open/closed state, which could potentially cause re-renders. However, the use of `Collapsible.Root` from Radix UI likely optimizes this behavior.

___

This component is part of a larger sidebar structure in a React application, likely for displaying and navigating through email templates or similar content. It provides a hierarchical view of directories and files, with the ability to expand and collapse directories for better organization and navigation.