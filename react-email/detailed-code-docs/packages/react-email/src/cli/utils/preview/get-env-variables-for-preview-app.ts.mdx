---
title: "get-env-variables-for-preview-app.ts"
---

## High-level description
This code defines a function `getEnvVariablesForPreviewApp` that generates environment variables for a preview application. It takes the relative path to an emails directory and the current working directory as inputs, and returns an object with three environment variables.

## Symbols

### `getEnvVariablesForPreviewApp`
#### Description
This function creates an object containing environment variables needed for a preview application. It calculates both relative and absolute paths for the emails directory and includes the user's project location.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| relativePathToEmailsDirectory | string | The relative path to the directory containing email templates |
| cwd | string | The current working directory |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | { EMAILS_DIR_RELATIVE_PATH: string, EMAILS_DIR_ABSOLUTE_PATH: string, USER_PROJECT_LOCATION: string } | An object containing environment variables |

#### Internal Logic
1. Sets `EMAILS_DIR_RELATIVE_PATH` to the provided relative path.
2. Calculates `EMAILS_DIR_ABSOLUTE_PATH` using `path.resolve()` to get the full path.
3. Sets `USER_PROJECT_LOCATION` to the provided current working directory.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| path | Used to resolve the absolute path of the emails directory |

## References
This function is used in the `startDevServer` function from the related file `start-dev-server.ts`. It's called to set up environment variables for the Next.js application used in the preview server.

## Performance Considerations
This function performs simple string operations and a single path resolution, which are generally fast operations. However, if called frequently with different inputs, caching the results might be beneficial.