---
title: "Overview"
---

## High-level description
The `packages/render/src` directory contains the core functionality for rendering React components into HTML or plain text, primarily for email content. It supports both browser and server-side environments, including Node.js and edge runtimes. The directory is structured to provide a flexible and efficient rendering system with shared utilities and environment-specific implementations.

## What does it do?
This codebase enables developers to:
1. Render React components into HTML or plain text for email content.
2. Support different rendering environments (browser, Node.js, edge runtime).
3. Customize the rendering process with options like pretty-printing and plain text conversion.
4. Handle asynchronous rendering, including Suspense boundaries.
5. Provide utilities for HTML beautification and email preview content.

The system adapts to different React DOM server implementations and offers both synchronous and asynchronous rendering methods. It also includes functionality for converting HTML to plain text, which is useful for generating alternative versions of emails.

## Entry points
The main entry points for this directory are:

1. `browser/index.ts`: Exports rendering functions and types for browser environments.
2. `node/index.ts`: Exports rendering functions and types for Node.js and edge environments.

These files export the core rendering functions (`render` and `renderAsync`), configuration options (`Options`), and utility arrays like `plainTextSelectors`.

## Key Files

### packages/render/src/browser/render.ts and packages/render/src/node/render.ts
These files contain the primary `render` function for browser and server environments, respectively. They handle different React DOM server implementations and provide options for customizing the output.

### packages/render/src/shared/options.ts
Defines the `Options` type, which represents configuration options for rendering HTML content, including settings for pretty-printing and plain text conversion.

### packages/render/src/shared/utils/pretty.ts
Exports a utility function `pretty` that beautifies HTML strings using the `js-beautify` library.

### packages/render/src/shared/utils/preview.tsx
Defines a React component `Preview` used for email preview functionality, helping differentiate content visibility between HTML and plain text versions.

## Dependencies
- **react-dom/server:** Provides server-side rendering functionality for React components.
- **html-to-text:** Used for converting HTML content to plain text.
- **js-beautify:** Used for HTML beautification in the `pretty` utility function.
- **react:** Used for defining React components in utility files.
- **vitest:** Used in test files for unit testing and mocking dependencies.

## Configuration
The rendering functions accept an optional `Options` object with the following configurable fields:

- **pretty (boolean):** Determines whether to prettify the HTML output.
- **plainText (boolean):** Determines whether to convert the output to plain text.
- **htmlToTextOptions (HtmlToTextOptions):** Provides options for the `html-to-text` library when converting HTML to plain text.

Additionally, the `plainTextSelectors` array in `shared/plain-text-selectors.ts` provides configuration for HTML-to-plain-text conversion, defining how specific HTML elements should be handled during the conversion process.

This rendering system provides a comprehensive solution for generating email content in both HTML and plain text formats, with flexibility to adapt to different rendering environments and customization options.