---
title: "render-web.spec.tsx"
---

## High-level description
This file contains unit tests for the `render` function in a browser environment. It tests the rendering of React components to HTML and plain text, including handling of Next.js 14 error stubs and various rendering scenarios.

## Code Structure
The test suite uses Vitest and focuses on mocking the `react-dom/server` module to simulate different rendering environments. It tests the `render` function with different components and options.

## References
- `render` function from "./render"
- `Template` component from "../shared/utils/template"
- `Preview` component from "../shared/utils/preview"

## Symbols

### `describe("render on the browser environment", ...)`
#### Description
This is the main test suite for rendering in the browser environment.

#### Internal Logic
1. Sets up mocks for `react-dom/server` before each test.
2. Resets all mocks after each test.
3. Contains individual test cases for different rendering scenarios.

### `it("converts a React component into HTML with Next 14 error stubs", ...)`
#### Description
Tests the rendering of a React component to HTML while simulating Next.js 14 error stubs.

#### Internal Logic
1. Mocks `react-dom/server` to throw errors for legacy rendering methods.
2. Renders a `Template` component with the `render` function.
3. Compares the output to an inline snapshot.

### `it("converts a React component into HTML", ...)`
#### Description
Tests the basic rendering of a React component to HTML.

#### Internal Logic
1. Renders a `Template` component with the `render` function.
2. Compares the output to an inline snapshot.

### `it("converts a React component into PlainText", ...)`
#### Description
Tests the rendering of a React component to plain text.

#### Internal Logic
1. Renders a `Template` component with the `render` function, setting the `plainText` option to true.
2. Compares the output to an inline snapshot.

### `it("converts to plain text and removes reserved ID", ...)`
#### Description
Tests the rendering of a React component to plain text while removing a reserved ID.

#### Internal Logic
1. Renders a `Preview` component with the `render` function, setting the `plainText` option to true.
2. Compares the output to an inline snapshot, expecting the reserved ID to be removed.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| vitest | Testing framework used for running the tests |
| react-dom/server | Server-side rendering functionality for React components |
| react-dom/server.browser | Browser-specific version of react-dom/server |

## Error Handling
The tests include error handling scenarios, particularly for Next.js 14 error stubs. These are simulated by mocking `react-dom/server` to throw specific errors for legacy rendering methods.