---
title: "Overview"
---

## High-level description
The `packages/render/src/shared` directory contains shared utilities and type definitions used across different rendering environments (browser, Node.js, edge) in a React-based rendering system. This directory provides essential functionalities for HTML rendering, configuration options, and email-specific components.

## What does it do?
This directory houses core components and utilities for a flexible rendering system, primarily focused on email content. It includes:

1. Configuration options for rendering, including pretty-printing and plain text conversion.
2. Selector definitions for HTML-to-plain-text conversion, allowing customized handling of specific HTML elements.
3. Type declarations for React DOM server-side rendering in a browser context.
4. Utility functions for HTML beautification and email preview content rendering.
5. A reusable template component for user greetings.

These tools collectively enable developers to render React components as HTML or plain text, with fine-grained control over the output format and content.

## Key Files

### `options.ts`
Defines the `Options` type, which represents configuration options for rendering HTML content. It includes settings for pretty-printing and plain text conversion, with additional options for the HTML-to-text conversion process.

### `plain-text-selectors.ts`
Exports an array of `SelectorDefinition` objects called `plainTextSelectors`. These definitions specify how certain HTML elements (like `&lt;img&gt;`, `&lt;a&gt;`, and elements with specific IDs) should be handled during HTML-to-plain-text conversion.

### `react-internals.d.ts`
A TypeScript declaration file that re-exports all exports from the "react-dom/server" module under the name "react-dom/server.browser". This allows for potential future differentiation between browser-specific and general server-side rendering functionality.

### `utils/pretty.ts`
Exports a utility function `pretty` that beautifies HTML strings using the `js-beautify` library. It allows for customization of formatting options and is used in the rendering process to output well-formatted HTML.

### `utils/preview.tsx`
Defines a React component called `Preview` used for email preview functionality. It helps differentiate content that should be visible only in HTML from content that should be present in both HTML and plain text versions of an email.

### `utils/template.tsx`
Defines a React component called `Template` that acts as a reusable template for greeting users. It takes a user's first name as a prop and renders a welcome message with an image. This component is used in various tests to verify rendering functionality.

## Dependencies
1. `html-to-text`: Used for HTML-to-plain-text conversion and provides types for selector definitions.
2. `react-dom/server`: Provides server-side rendering functionality for React components.
3. `js-beautify`: Used in the `pretty` utility function for HTML beautification.
4. `react`: Used for defining React components in the utility files.

## Configuration
The `Options` type in `options.ts` allows for configuration of the rendering process:

```typescript
type Options = {
  pretty?: boolean;
} & (
  | {
      plainText?: false;
    }
  | {
      plainText: true;
      htmlToTextOptions?: HtmlToTextOptions;
    }
);
```

Key configurable fields:
- `pretty`: Determines if the output should be pretty-printed.
- `plainText`: Determines if the output should be converted to plain text.
- `htmlToTextOptions`: Options for the HTML-to-text conversion process (only available when `plainText` is true).

The `plainTextSelectors` in `plain-text-selectors.ts` provide configuration for HTML-to-plain-text conversion:

```typescript
export const plainTextSelectors: SelectorDefinition[] = [
  { selector: "img", format: "skip" },
  { selector: "#__react-email-preview", format: "skip" },
  { selector: "a", options: { hideLinkHrefIfSameAsText: true } },
];
```

These selectors define how specific HTML elements should be handled during the conversion process.

In summary, the `packages/render/src/shared` directory provides a set of shared utilities and configurations that form the core of a flexible React-based rendering system, with a focus on email content generation in both HTML and plain text formats.