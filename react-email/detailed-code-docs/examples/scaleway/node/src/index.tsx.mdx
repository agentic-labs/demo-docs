---
title: "index.tsx"
---

## High-level description
This code demonstrates how to send a transactional email using Scaleway's SDK and React Email components. It creates a client, sets up email content using React components, and sends the email using Scaleway's Transactional Email API.

## Code Structure
The code imports necessary dependencies, creates a Scaleway client, sets up email content using React components, and then sends the email using the Scaleway Transactional Email API. The main components are the client setup, email content generation, and the API call to send the email.

## Symbols

### `client`
#### Description
Creates a Scaleway client using environment variables for authentication and configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| accessKey | string | Scaleway access key from environment variable |
| secretKey | string | Scaleway secret key from environment variable |
| defaultProjectId | string | Scaleway project ID from environment variable |
| defaultRegion | string | Default region set to "fr-par" |
| defaultZone | string | Default zone set to "fr-par-1" |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| client | Object | Configured Scaleway client |

### `transactionalEmailClient`
#### Description
Creates a Transactional Email API client using the Scaleway client.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| client | Object | Configured Scaleway client |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| transactionalEmailClient | Object | Transactional Email API client |

### `sender`, `userInvited`, `userInvitedBy`
#### Description
Objects containing email sender and recipient information.

### `emailHtml`
#### Description
Generates the HTML content for the email using React components.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | string | URL for the email button |
| invitedByUsername | string | Name of the user who sent the invitation |
| invitedByEmail | string | Email of the user who sent the invitation |
| username | string | Name of the invited user |
| teamName | string | Name of the team |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| emailHtml | string | Rendered HTML content for the email |

### Try-Catch Block
#### Description
Sends the email using the Transactional Email API and handles potential errors.

#### Internal Logic
1. Calls `createEmail` method on the `transactionalEmailClient`.
2. Provides email details including sender, recipient, subject, and HTML content.
3. Logs the response on success.
4. Catches and logs any errors that occur during the process.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @react-email/components | Provides React components for email templates |
| @scaleway/sdk | Scaleway SDK for interacting with Scaleway services |
| react | React library for building user interfaces |

## Error Handling
The code uses a try-catch block to handle potential errors when sending the email. If an error occurs, it is logged to the console using `console.error`.

## Logging
The code uses `console.debug` to log the response from the email creation API call and `console.error` to log any errors that occur during the process.

## TODOs
- The email addresses for `userInvited` and `userInvitedBy` are set to "XXXX@scaleway.com" and should be replaced with actual email addresses before use.
- The `text` field in the `createEmail` call is set to `null`. Consider adding a plain text version of the email for better compatibility.
- Error handling could be improved by adding more specific error messages or implementing a retry mechanism.