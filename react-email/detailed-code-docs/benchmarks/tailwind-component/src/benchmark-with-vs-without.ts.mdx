---
title: "benchmark-with-vs-without.ts"
---

## High-level description
This code is a benchmark script that compares the rendering performance of two email templates: one with Tailwind CSS and one without. It uses the `tinybench` library to measure and compare the execution time of rendering these email templates using the `@react-email/render` package.

## Code Structure
The main function `main()` sets up and runs the benchmark, while the rest of the code imports necessary dependencies and defines the benchmark cases. The results are then logged to the console in a tabular format.

## Symbols

### `main()`
#### Description
This asynchronous function sets up and runs the benchmark using the `Bench` class from `tinybench`.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| bench | Bench | The benchmark instance with results |

#### Internal Logic
1. Creates a new `Bench` instance with a time limit of 100 (presumably milliseconds).
2. Adds two benchmark cases:
   - "without tailwind": Renders `EmailWithoutTailwind`
   - "with current tailwind": Renders `EmailWithTailwind` with the `CurrentTailwind` component
3. Runs the benchmark.
4. Returns the benchmark instance.

### Anonymous function (main execution)
#### Description
This is the main execution flow of the script, which calls `main()`, logs the results, and handles any errors.

#### Internal Logic
1. Calls `main()`.
2. When the promise resolves, it logs the benchmark results in a table format using `console.table(bench.table())`.
3. If an error occurs, it logs the error to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @react-email/render | Used to render the email templates |
| tinybench | Provides the `Bench` class for running benchmarks |
| @react-email/tailwind | Imports the `Tailwind` component (as `CurrentTailwind`) |
| ./emails/without-tailwind.js | Imports the email template without Tailwind |
| ./emails/with-tailwind.js | Imports the email template with Tailwind |

## Performance Considerations
This script is specifically designed to measure and compare the performance of rendering email templates with and without Tailwind CSS. The benchmark is set to run for 100 time units (likely milliseconds) for each case, which should provide a reasonable comparison of rendering speeds.

## TODOs
There is a comment suggesting that the imports are done in a specific way to allow testing of published versions:
```typescript
// import like this instead of installing from the workspace
// to still be able to test versions that are already published
```
This indicates that the import strategy might be subject to change or that there might be alternative ways to import these dependencies in different scenarios.