---
title: "devcontainer.yml"
---

## High-level description
This GitHub Actions workflow builds and pushes a Docker image for a development container used in the project. It runs on a schedule (nightly), on manual dispatch, or when changes are pushed to the 'main' branch. The built image is pushed to the GitHub Container Registry (GHCR).

## References
This workflow uses the `mage bootstrap` command, which is likely defined in the project's Magefile.

## Symbols
### `Build DevContainer`
#### Description
This workflow defines the steps to build and push a Docker image for a development container.

#### Inputs
None. The workflow is triggered by schedule, push to the 'main' branch, or manual dispatch.

#### Outputs
A Docker image named `ghcr.io/${{ github.repository_owner }}/flipt/flipt-devcontainer` is built and pushed to the GitHub Container Registry.

#### Internal Logic
1. **Checkout Code:** The workflow first checks out the code from the repository.
2. **Login to GHCR:** It then logs into the GitHub Container Registry using the `GITHUB_TOKEN`.
3. **Build and Run Dev Container:** The `devcontainers/ci` action builds the development container image using the provided `imageName` and runs the `mage bootstrap` command inside the container.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| actions/checkout@v4 | Checks out the repository's code. |
| docker/login-action@v3 | Logs into the GitHub Container Registry. |
| devcontainers/ci@v0.3 | Builds and runs the development container. |

## Side Effects
- Builds and pushes a Docker image to the GitHub Container Registry.
- The `mage bootstrap` command executed inside the container might have its own side effects depending on its implementation. 
