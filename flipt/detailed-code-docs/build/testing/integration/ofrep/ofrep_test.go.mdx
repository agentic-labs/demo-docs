---
title: "ofrep_test.go"
---

## High-level description
This code implements integration tests for the OpenFeature (OF) Remote Evaluation Protocol (REP) provider in Go. It tests boolean and string flag evaluations using the OFREP provider against a Flipt instance, verifying correct behavior for both existing and non-existent flags across different namespaces.

## Code Structure
The main test function `TestOFREP` is defined within the `ofrep_test` package. It uses the `integration.Harness` function to set up the test environment and runs multiple sub-tests for different flag evaluation scenarios.

## References
- `github.com/open-feature/go-sdk-contrib/providers/ofrep`
- `github.com/open-feature/go-sdk/openfeature`
- `go.flipt.io/build/testing/integration`

## Symbols

### `TestOFREP`
#### Description
This function is the main test function that sets up and runs integration tests for the OFREP provider.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| t | *testing.T | Testing object for managing test state and logging |

#### Internal Logic
1. Uses `integration.Harness` to set up the test environment.
2. Skips the test if the protocol is gRPC.
3. Iterates through different namespaces and runs sub-tests for each.
4. Tests boolean flag evaluation for existing and non-existing flags.
5. Tests string flag evaluation for existing and non-existing flags.

## Side Effects
The test function modifies the test state and logs test results.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| context | Provides context for cancellation and timeouts |
| fmt | String formatting |
| testing | Go testing framework |
| github.com/open-feature/go-sdk-contrib/providers/ofrep | OFREP provider implementation |
| github.com/open-feature/go-sdk/openfeature | OpenFeature SDK |
| github.com/stretchr/testify/assert | Assertion library for testing |
| github.com/stretchr/testify/require | Requirement checks for testing |
| go.flipt.io/build/testing/integration | Integration testing utilities |

## Error Handling
The test uses `require.NotNil` to ensure responses are not nil and `assert` functions to check expected values and error messages.

## Logging
The test uses `t.Logf` to log the current test step being executed.

___

This integration test suite verifies the correct functionality of the OFREP provider when interacting with a Flipt instance. It covers various scenarios including successful flag evaluations and handling of non-existent flags, ensuring the provider behaves correctly across different namespaces.