---
title: "Overview"
---

## High-level description

This directory contains integration tests for the Flipt feature flag management system. It includes comprehensive test suites that cover various aspects of Flipt's functionality, including API operations, authentication, authorization, evaluation, and snapshot retrieval. The tests are designed to ensure the robustness and correctness of Flipt's core features across different configurations and scenarios.

## What does it do?

The integration tests in this directory perform the following tasks:

1. Test core API functionalities such as managing namespaces, flags, variants, segments, constraints, rules, and distributions.
2. Verify authentication and authorization mechanisms, including token-based, Kubernetes, and JWT authentication.
3. Test evaluation and batch evaluation of feature flags.
4. Check import and export functionality.
5. Validate webhook functionality, including template support.
6. Test snapshot and OFREP (Object File REPresentation) features.
7. Ensure proper error handling and expected behavior across different scenarios.
8. Verify the behavior of the evaluation data snapshot API.
9. Test the OpenFeature (OF) Remote Evaluation Protocol (REP) provider.

These tests simulate real-world usage of the Flipt system, ensuring that all components work together correctly and that the API behaves as expected under various conditions and configurations.

## Entry points

The main entry points for the integration tests are:

1. The `API` function in `api/api.go`: Orchestrates the entire API test suite.
2. The `TestAuthn` function in `authn/auth_test.go`: Entry point for authentication tests.
3. The `TestAuthz` function in `authz/auth_test.go`: Entry point for authorization tests.
4. The `TestOFREP` function in `ofrep/ofrep_test.go`: Entry point for OpenFeature REP provider tests.
5. The `TestSnapshot` function in `snapshot/snapshot_test.go`: Entry point for snapshot API tests.

These functions typically set up the test environment using the `integration.Harness` function and then run various test suites within their respective domains.

## Key Files

1. `api/api.go` and `api/api_test.go`: Contain the main API integration test suite and API-specific tests.
2. `authn/auth.go` and `authn/auth_test.go`: Implement authentication-related tests.
3. `authz/auth.go` and `authz/auth_test.go`: Implement authorization-related tests.
4. `integration.go`: Defines the test harness and utility functions for integration testing.
5. `ofrep/ofrep_test.go`: Contains tests for the OpenFeature REP provider.
6. `readonly/readonly_test.go`: Implements tests for read-only operations and includes configuration files in the `testdata` directory.
7. `snapshot/snapshot_test.go`: Contains tests for the evaluation data snapshot API.

## Dependencies

The integration tests rely on several external libraries and frameworks:

1. Go standard library packages: testing, context, crypto, encoding/json, fmt, os, path, runtime, strings, time
2. github.com/stretchr/testify: For test assertions and requirements
3. github.com/google/go-cmp/cmp: For deep equality comparisons
4. github.com/google/uuid: For UUID generation
5. github.com/open-feature/go-sdk-contrib/providers/ofrep: For OpenFeature REP provider
6. github.com/open-feature/go-sdk/openfeature: For OpenFeature SDK
7. go.flipt.io/flipt/rpc/flipt: For Flipt's RPC definitions
8. go.flipt.io/flipt/sdk/go: Flipt's Go SDK
9. google.golang.org/grpc: For gRPC-related functionality

These dependencies are chosen to provide robust testing capabilities, handle various data formats, and interact with different aspects of the Flipt system.

## Configuration

The integration tests use various configuration options to set up different test scenarios. These configurations include:

1. Database backends: SQLite, LibSQL, PostgreSQL, MySQL, CockroachDB
2. Caching options: with and without TLS
3. Storage backends: local filesystem, Git, S3, OCI, Azure Blob Storage
4. Authentication and authorization settings
5. Webhook configurations, including template support

The `integration.TestOpts` struct is used to pass these configuration options to the test functions. Additionally, YAML configuration files in the `testdata` directory provide feature flag definitions for different environments and setups.

In summary, this directory contains a comprehensive set of integration tests that cover various aspects of the Flipt feature flag management system. These tests ensure the reliability, correctness, and security of Flipt across different configurations, authentication methods, and usage scenarios.