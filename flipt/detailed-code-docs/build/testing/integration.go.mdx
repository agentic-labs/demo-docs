---
title: "integration.go"
---

## High-level description
This file contains integration tests for Flipt, a feature flag management system. It defines various test cases to verify the functionality of different components like flags, segments, rules, evaluations, and authentication across multiple namespaces.

## Code Structure
The main function `TestReadOnly` sets up the test environment and runs a series of nested test cases. It uses the `integration.Harness` function to set up the test context and client SDK. The tests are organized into namespaces and cover various API endpoints and functionalities of Flipt.

## Symbols

### TestReadOnly
#### Description
The main test function that sets up the test environment and runs all the integration tests.

#### Internal Logic
1. Sets up the test harness and client SDK
2. Tests namespace-related operations
3. Runs tests for flags, segments, rules, evaluations, and authentication for each namespace
4. Tests custom reference functionality if supported by the backend

### integration.Harness
#### Description
A helper function that sets up the test environment and provides the necessary test options.

### sdk.Flipt()
#### Description
Provides access to the Flipt API client for various operations like getting and listing flags, segments, rules, etc.

### sdk.Evaluation()
#### Description
Provides access to the Evaluation API client for evaluating flags and performing batch evaluations.

### sdk.Auth()
#### Description
Provides access to the Authentication API client for testing authentication-related functionality.

## Dependencies
- github.com/stretchr/testify/assert
- github.com/stretchr/testify/require
- go.flipt.io/build/testing/integration
- go.flipt.io/flipt/rpc/flipt
- go.flipt.io/flipt/rpc/flipt/evaluation

## Error Handling
The tests use `require.NoError` and `assert.EqualError` to handle and verify expected errors in various scenarios.

## Logging
No explicit logging is implemented in this test file.

## TODOs
There are no explicit TODOs in the code.

This integration test suite provides comprehensive coverage of Flipt's functionality, ensuring that the system behaves correctly across different namespaces and with various configurations. It tests both the management API (Flipt) and the evaluation API, as well as authentication mechanisms.