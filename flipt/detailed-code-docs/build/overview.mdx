---
title: "Overview"
---

## High-level description
The `build` directory contains essential components for building, testing, packaging, and releasing the Flipt application. It includes Dockerfiles, build scripts, testing frameworks, and release management tools. This directory serves as the central hub for the Flipt project's build and release processes.

## What does it do?
The `build` directory performs several crucial functions:

1. Defines the Docker image for Flipt using a multi-stage build process.
2. Provides a Go module for building and testing Flipt using Dagger.
3. Implements various test suites, including unit, integration, UI, migration, and load tests.
4. Manages the release process, including version bumping, changelog generation, and Git tagging.
5. Offers utility functions for building the Flipt core application and its UI.
6. Handles the packaging and publishing of container images to different environments.
7. Includes command-line tools for tasks such as data synchronization and load testing.

## Entry points
The main entry points for the build process are:

1. `Dockerfile`: Defines the Docker image for Flipt.
2. `main.go`: Contains Dagger functions for building, packaging, and testing Flipt.
3. `magefile.go`: Defines Mage targets for release management.
4. Various test files in the `testing` subdirectory for different test suites.

## Key Files
1. `Dockerfile`: Multi-stage build process for creating the Flipt Docker image.
2. `main.go`: Dagger functions for building and testing Flipt.
3. `magefile.go`: Mage targets for release management.
4. `internal/flipt.go`: Functions for building the Flipt core application.
5. `internal/ui.go`: Functions for building the Flipt UI.
6. `internal/publish/publish.go`: Functionality for publishing container images.
7. `release/changelog.go` and `release/release.go`: Release management utilities.
8. `testing/integration.go`, `testing/loadtest.go`, `testing/migration.go`, `testing/ui.go`: Various test suites.

## Dependencies
The build process relies on several key dependencies:

1. Dagger: For containerized build and test processes.
2. Docker: For creating and managing container images.
3. Mage: As a build tool for release management.
4. Go-git: For Git operations in release management.
5. Playwright: For UI testing.
6. Various Go libraries for testing, assertions, and utility functions.

## Configuration
Configuration in the build process is handled through:

1. Dockerfile instructions for the Flipt image.
2. Dagger pipeline configurations in `main.go`.
3. Command-line flags and environment variables for various build and test tools.
4. Test configuration files in the `testdata` directory.
5. The `PublishSpec` struct for configuring image publication.

Key configurable aspects include:

- Docker image build process and dependencies.
- Test suite configurations and scenarios.
- Release version management and changelog format.
- Target environments for image publication.
- Build and test parameters for different components of Flipt.

The build process leverages containerization and modern CI/CD practices to ensure consistent environments across different build and test systems. Error handling is implemented using Go's standard error handling patterns, with errors propagated up the call stack and logged or handled appropriately.

In summary, the `build` directory provides a comprehensive set of tools and scripts for building, testing, packaging, and releasing the Flipt application, ensuring a streamlined and consistent development and release process.