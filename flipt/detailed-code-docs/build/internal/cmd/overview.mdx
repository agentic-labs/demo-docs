---
title: "Overview"
---

## High-level description
This directory contains command-line tools and utilities for various tasks related to the Flipt feature flag system and its associated services. The tools include data synchronization for Azure Blob Storage, Google Cloud Storage, and MinIO S3-compatible storage, an OIDC authentication server for Flipt, a Gitea setup and configuration tool, and a load testing tool for Flipt.

## What does it do?
The tools in this directory perform the following functions:

1. Azurite: Syncs data to Azure Blob Storage, creating containers and uploading files from a local directory.
2. Discover: Implements an OIDC authentication server for Flipt, handling the OIDC authorization flow and integrating with Flipt's authentication system.
3. GCS: Syncs data from a local directory to a Google Cloud Storage bucket.
4. Gitea: Sets up and configures a Gitea instance, creates a repository, and populates it with test data.
5. Loadtest: Performs load testing on a Flipt server using the Vegeta HTTP load testing library.
6. MinIO: Syncs data to a MinIO S3-compatible object storage service.

## Entry points
Each tool in this directory has its own `main` function as the entry point. The main functions typically parse command-line flags, set up necessary clients or connections, and execute the primary functionality of the tool.

## Key Files
1. `azurite/main.go`: Implements Azure Blob Storage synchronization.
2. `discover/server.go`: Contains the OIDC authentication server implementation.
3. `gcs/main.go`: Implements Google Cloud Storage synchronization.
4. `gitea/main.go`: Implements Gitea setup and configuration.
5. `loadtest/main.go`: Implements load testing for Flipt.
6. `minio/main.go`: Implements MinIO S3-compatible storage synchronization.

## Dependencies
The tools in this directory rely on various external libraries and SDKs:

1. Azure SDK for Go: Used for Azure Blob Storage operations.
2. Google Cloud Storage Go client library: Used for GCS operations.
3. AWS SDK for Go: Used for MinIO S3-compatible storage operations.
4. Gitea SDK: Used for interacting with Gitea API.
5. Vegeta: Used for HTTP load testing.
6. go-oidc and Hashicorp's OIDC client library: Used for OIDC authentication.

## Configuration
Most tools in this directory use command-line flags for configuration. Common configuration options include:

- URLs or addresses for target services (e.g., Azurite blob service, GCS, MinIO)
- Local directory paths for test data
- Container or bucket names
- Authentication tokens or credentials

Some tools may also rely on environment variables for configuration, such as `STORAGE_EMULATOR_HOST` for the GCS tool.

## Error Handling
The tools generally use a common pattern for error handling:

1. A `fatalOnError` helper function is defined to log fatal errors and terminate the program if an error occurs.
2. Errors are checked throughout the execution of the main functions, and `fatalOnError` is called when an error is encountered.

This approach ensures that the tools fail fast and provide clear error messages when issues arise.

## Performance Considerations
The load testing tool (loadtest) is specifically designed to measure and analyze the performance of a Flipt server under various conditions. It reports metrics such as latency, throughput, and error rates, which can be used to optimize the Flipt server's performance.

For the data synchronization tools (Azurite, GCS, MinIO), performance could potentially be improved by implementing concurrent file uploads, especially when dealing with large numbers of files or large file sizes.

In conclusion, this directory contains a collection of utility tools that support various aspects of the Flipt ecosystem, from data synchronization to authentication and performance testing. These tools are designed to be run from the command line and provide essential functionality for setting up, configuring, and testing Flipt and its associated services.