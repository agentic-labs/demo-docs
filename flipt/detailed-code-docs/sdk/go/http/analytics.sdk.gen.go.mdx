---
title: "analytics.sdk.gen.go"
---

## High-level description
The code defines an HTTP client for the Flipt Analytics service, specifically the `GetFlagEvaluationsCount` method. This client allows querying the number of flag evaluations within a specified time range using HTTP requests.

## References
- `analytics.GetFlagEvaluationsCountRequest`: Defines the request structure for fetching flag evaluation counts.
- `analytics.GetFlagEvaluationsCountResponse`: Defines the response structure containing flag evaluation counts.

## Symbols

### `AnalyticsServiceClient`
#### Description
This struct represents an HTTP client for the Flipt Analytics service. It holds an HTTP client for making requests and the address of the service.

#### Inputs
None

#### Outputs
None

### `AnalyticsServiceClient.GetFlagEvaluationsCount`
#### Description
This method queries the Flipt Analytics service to retrieve the count of flag evaluations for a given flag within a specified time range. It constructs an HTTP GET request to the `/internal/v1/analytics/namespaces/{namespaceKey}/flags/{flagKey}` endpoint, passing the time range as query parameters. The response is then unmarshalled into a `GetFlagEvaluationsCountResponse` object.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ctx | context.Context | The context for the request. |
| v | *analytics.GetFlagEvaluationsCountRequest | The request object containing the namespace key, flag key, and time range. |
| ...grpc.CallOption | []grpc.CallOption | Optional gRPC call options. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| *analytics.GetFlagEvaluationsCountResponse | *analytics.GetFlagEvaluationsCountResponse | The response object containing the flag evaluation counts. |
| error | error | An error object if the request fails. |

#### Internal Logic
1. Constructs the request URL using the provided namespace key and flag key.
2. Sets the query parameters for the time range (`from` and `to`).
3. Makes an HTTP GET request to the constructed URL.
4. Reads and unmarshals the response body into a `GetFlagEvaluationsCountResponse` object.
5. Returns the response object and any errors encountered.

### `Transport.AnalyticsClient`
#### Description
This method is a factory function that returns a new instance of the `AnalyticsServiceClient`.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| analytics.AnalyticsServiceClient | analytics.AnalyticsServiceClient | A new instance of the `AnalyticsServiceClient`. |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| context | Provides a mechanism for carrying request-scoped values across API boundaries and for cancellation. |
| fmt | Implements formatted I/O with functions analogous to C's printf and scanf. |
| analytics |  Provides types for interacting with the Flipt Analytics service. |
| grpc |  Provides support for gRPC. |
| protojson | Provides functionality for encoding and decoding protocol buffer messages in JSON format. |
| io | Provides basic interfaces to I/O primitives. |
| http | Provides HTTP client and server implementations. |
| url |  Provides functionality for parsing URLs. |

## Error Handling
The code uses basic error handling by returning an `error` object from the `GetFlagEvaluationsCount` method if any step in the process fails. It also includes a `checkResponse` function (not shown in the provided code) to check for HTTP error codes and return an appropriate error.
