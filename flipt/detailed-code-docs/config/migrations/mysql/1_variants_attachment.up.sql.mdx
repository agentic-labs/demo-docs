---
title: "1_variants_attachment.up.sql"
---

## High-level description
This SQL migration file adds a new column named 'attachment' of type JSON to the 'variants' table in a MySQL database. The new column is positioned after the 'description' column.

## Symbols

### ALTER TABLE variants ADD COLUMN attachment JSON AFTER description;
#### Description
This SQL statement modifies the structure of the 'variants' table by adding a new column called 'attachment'.

#### Internal Logic
1. The `ALTER TABLE` command is used to modify the structure of an existing table.
2. `variants` is the name of the table being altered.
3. `ADD COLUMN` specifies that a new column is being added to the table.
4. `attachment` is the name of the new column being added.
5. `JSON` is the data type of the new column, allowing for storage of JSON-formatted data.
6. `AFTER description` positions the new column immediately after the existing 'description' column in the table structure.

## Side Effects
- This migration will modify the structure of the 'variants' table in the database.
- Any existing rows in the 'variants' table will have a NULL value in the new 'attachment' column unless a default value is specified (which is not the case in this migration).
- Applications or queries that rely on the structure of the 'variants' table may need to be updated to accommodate the new column.

## Performance Considerations
- Adding a new column to an existing table with a large number of rows can be a time-consuming operation, depending on the size of the table and the database engine's implementation.
- The JSON data type in MySQL allows for efficient storage and querying of JSON data, but may have performance implications for very large JSON objects or frequent updates.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| MySQL | This SQL script is specifically for MySQL databases and uses MySQL-specific syntax for JSON column type. |

Note: This migration file is part of a database versioning system, likely managed by a migration tool. The filename suggests it's an "up" migration (for applying changes) and is specifically for MySQL databases.