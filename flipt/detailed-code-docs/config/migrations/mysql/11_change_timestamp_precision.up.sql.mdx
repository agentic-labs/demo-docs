---
title: "11_change_timestamp_precision.up.sql"
---

## High-level description
This SQL script modifies the precision of timestamp columns in multiple tables within a MySQL database. It specifically alters the `created_at` and `updated_at` columns in six different tables, changing their data type to `TIMESTAMP(6)` with a default value of `CURRENT_TIMESTAMP(6)` and setting them as `NOT NULL`.

## Code Structure
The script consists of a series of `ALTER TABLE` statements, each modifying two columns (`created_at` and `updated_at`) for a specific table. The structure is repetitive, applying the same changes to different tables.

## Symbols

### ALTER TABLE statements
#### Description
Each `ALTER TABLE` statement modifies the `created_at` and `updated_at` columns of a specific table, changing their data type to `TIMESTAMP(6)` with microsecond precision, setting a default value of `CURRENT_TIMESTAMP(6)`, and ensuring they are `NOT NULL`.

#### Internal Logic
1. The `MODIFY` clause is used to change the column definition.
2. `TIMESTAMP(6)` specifies a timestamp with microsecond (6 decimal places) precision.
3. `DEFAULT CURRENT_TIMESTAMP(6)` sets the default value to the current timestamp with microsecond precision.
4. `NOT NULL` ensures that the column cannot contain null values.

## Tables Affected
The following tables are modified by this script:
1. `flags`
2. `segments`
3. `variants`
4. `constraints`
5. `rules`
6. `distributions`

## Performance Considerations
Changing the precision of timestamp columns may have the following impacts:
1. Increased storage requirements due to higher precision.
2. Potential performance impact on queries involving these columns, especially if they are indexed.
3. Temporary table locks during the ALTER TABLE operations, which could affect database performance during migration.

## Dependencies
This script is designed for MySQL databases, as evidenced by the MySQL-specific syntax for timestamp precision.

## Configuration
No explicit configuration options are present in the script. However, the choice of 6-digit precision for timestamps is a configuration decision that affects all modified tables.

## Error Handling
The script does not include explicit error handling. It relies on the database system's default error handling for ALTER TABLE operations.

## TODOs
Consider adding comments to explain the reason for increasing timestamp precision, especially if it's addressing a specific issue or requirement.