---
title: "Overview"
---

## High-level description
This directory contains SQLite3 migration scripts for a feature flag management system. The migrations create and modify tables to support various features such as namespaces, flags, segments, variants, constraints, rules, distributions, rollouts, and authentication.

## What does it do?
These migration scripts evolve the database schema to support the following functionality:

1. Feature flags with variants and distributions
2. User segmentation and targeting
3. Namespaces for organizing flags
4. Rollout management with thresholds and segment-based rules
5. Authentication and operation locking
6. Metadata storage for flags

The migrations progressively add new tables and columns, modify existing structures, and establish relationships between different entities in the system.

## Key Files

1. `0_initial.up.sql`: Creates the initial schema with tables for flags, segments, variants, constraints, rules, and distributions.

2. `6_create_namespaces.up.sql` and `7_namespaces_relationships.up.sql`: Introduce namespaces and update existing tables to support namespace relationships.

3. `10_rollouts.up.sql`: Adds tables for managing rollouts, including thresholds and segment-based rules.

4. `11_segment_anding_tables.up.sql`: Modifies the schema to support logical AND operations between segments in rules and rollouts.

5. `4_create_table_authentications.up.sql`: Creates a table for storing authentication-related information.

6. `5_create_table_operation_lock.up.sql`: Adds a table for managing operation locks.

These migrations collectively build a comprehensive schema for a feature flag management system with advanced targeting and rollout capabilities.

## Dependencies
The migrations are specifically designed for SQLite3 databases and use SQLite3-specific syntax and features.

## Configuration
The migrations don't include explicit configuration options. However, they define the structure of various tables, including column names, data types, and constraints, which effectively serve as the configuration for the database schema.

Key configurable aspects include:
- Namespace keys (VARCHAR(255))
- Flag keys (VARCHAR(255))
- Segment keys (VARCHAR(255))
- Various timestamp fields for tracking creation and updates
- Integer fields for types and ranks
- Boolean fields for enabled/disabled states
- TEXT fields for descriptions and metadata

When implementing the system that uses this database, these field definitions should be considered as they define the data model and constraints of the feature flag management system.