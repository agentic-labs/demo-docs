---
title: "2_segments_match_type.up.sql"
---

## High-level description
This SQL migration file adds a new column called `match_type` to the `segments` table in a PostgreSQL database. The new column is of type INTEGER, has a default value of 0, and is set to NOT NULL.

## Symbols

### ALTER TABLE segments ADD COLUMN match_type INTEGER DEFAULT 0 NOT NULL
#### Description
This SQL statement modifies the structure of the `segments` table by adding a new column named `match_type`.

#### Internal Logic
1. The `ALTER TABLE` command is used to modify the structure of an existing table.
2. `segments` is the name of the table being altered.
3. `ADD COLUMN` specifies that a new column is being added to the table.
4. `match_type` is the name of the new column being added.
5. `INTEGER` defines the data type of the new column, which can store whole numbers.
6. `DEFAULT 0` sets the default value of the column to 0, meaning if no value is specified when inserting a new row, it will automatically be set to 0.
7. `NOT NULL` constraint ensures that this column cannot contain null values, making it a required field for all rows.

## Side Effects
- This migration will modify the structure of the `segments` table in the database.
- All existing rows in the `segments` table will have the new `match_type` column added with a value of 0.
- Any future inserts into the `segments` table will require a value for `match_type` (or will use the default value of 0 if not specified).

## Performance Considerations
- Depending on the size of the `segments` table, this operation may take some time to complete, as it needs to update all existing rows.
- If there are any indexes on the `segments` table, they may need to be rebuilt after this operation.

## Dependencies
This migration assumes the existence of a PostgreSQL database with a `segments` table.