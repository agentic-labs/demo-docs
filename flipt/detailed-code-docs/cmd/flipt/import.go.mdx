---
title: "import.go"
---

## High-level description
The `import.go` file implements a command-line interface for importing Flipt data from a file or stdin. It provides options for importing data into a Flipt instance, either directly to the database or through a remote Flipt server.

## Code Structure
The main structure is the `importCommand` struct, which holds the configuration for the import operation. The `newImportCommand` function creates and configures a Cobra command for the import functionality. The `run` method of `importCommand` executes the actual import process.

## Symbols

### `importCommand` struct
#### Description
Holds the configuration options for the import operation.

#### Internal Logic
- `dropBeforeImport`: Flag to drop the database before import
- `skipExisting`: Flag to only import new data
- `importStdin`: Flag to import from STDIN
- `address`: Address of the Flipt instance
- `token`: Client token for authentication

### `newImportCommand` function
#### Description
Creates and configures a Cobra command for the import functionality.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cmd | *cobra.Command | Configured Cobra command for import |

#### Internal Logic
- Sets up command flags for various import options
- Configures the `RunE` function to execute the `run` method of `importCommand`

### `run` method
#### Description
Executes the import process based on the configured options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cmd | *cobra.Command | The Cobra command being executed |
| args | []string | Command-line arguments |

#### Internal Logic
1. Determines the input source (file or STDIN) and encoding
2. If a remote address is provided, uses a Flipt client for import
3. Otherwise, sets up a direct database connection
4. Performs database operations (drop, migrate) if necessary
5. Executes the import using the `ext.NewImporter` function

## Dependencies
- `github.com/spf13/cobra`: For creating command-line interfaces
- `go.flipt.io/flipt/internal/ext`: For import/export functionality
- `go.flipt.io/flipt/internal/storage/sql`: For database operations

## Error Handling
The code includes error handling for file operations, database connections, and import processes. Errors are returned to the caller for further handling.

## Configuration
The import command can be configured through various command-line flags, allowing users to customize the import process according to their needs.