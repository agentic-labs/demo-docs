---
title: "Overview"
---

## High-level description
This directory contains components and utilities for a console feature in a React-based user interface, likely part of a feature flag system called "flipt-ui". The main components are a JSON context editor and a linter for JSON validation.

## What does it do?
The code in this directory implements a console interface where users can input and edit JSON context for flag evaluation in a feature flag system. It provides a sophisticated code editor with syntax highlighting, error checking, and a custom theme. The editor ensures that users input valid JSON with specific constraints (e.g., root must be an object, all values must be strings). This helps users to correctly format their input for the feature flag evaluation process.

## Key Files

1. ContextEditor.tsx
   - This is the main React component that renders a CodeMirror editor for JSON input.
   - It sets up the editor with JSON language support, linting, and a custom theme.
   - The component is designed to be used within a larger console or debugging interface.

2. lint.ts
   - This file contains the custom linter function for JSON validation in the CodeMirror editor.
   - It checks for valid JSON structure, ensures the root is an object, and verifies that all values are strings.
   - The linter provides specific error messages and positions for various types of parsing errors.

3. ContextEditor.module.css
   - This CSS module defines the basic layout and dimensions for the ContextEditor component.
   - It ensures the editor takes up the full width of its container and has a minimum height of 50% of the viewport.

## Dependencies
The code relies on several external libraries:

1. React (version specified in package.json)
   - Core library for building the user interface components.

2. CodeMirror (via @uiw/react-codemirror)
   - Provides the advanced code editing capabilities.

3. @codemirror/lang-json
   - Adds JSON language support to CodeMirror.

4. @codemirror/lint
   - Enables linting functionality in CodeMirror.

5. @uiw/codemirror-theme-tokyo-night
   - Provides the Tokyo Night theme for the editor.

These dependencies were likely chosen to create a powerful and user-friendly code editing experience specifically tailored for JSON input in the context of feature flag evaluation.

## Configuration
The ContextEditor component uses some hardcoded configuration:

1. Initial value: "{}"
2. Height: "50vh"
3. Theme: Tokyo Night

The linter in lint.ts is configured to enforce specific rules for the JSON input:
1. The root must be an object, not an array.
2. All values in the object must be strings.

These configurations ensure that the JSON context input meets the requirements of the feature flag system.

Here's an example of how the ContextEditor component might be used:

```jsx
import { ContextEditor } from './ContextEditor';

function Console() {
  const handleValueChange = (newValue) =&gt; {
    // Process the new JSON value
    console.log('New context:', newValue);
  };

  return (
    &lt;div&gt;
      &lt;h2&gt;Flag Evaluation Context&lt;/h2&gt;
      &lt;ContextEditor id="flag-context" setValue={handleValueChange} /&gt;
    &lt;/div&gt;
  );
}
```

This setup provides users with a powerful tool for inputting and validating JSON context for feature flag evaluation, enhancing the overall functionality of the flipt-ui system.