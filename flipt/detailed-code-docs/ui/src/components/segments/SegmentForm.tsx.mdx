---
title: "SegmentForm.tsx"
---

## High-level description
This code defines a React component called `SegmentForm` that renders a form for creating or updating a segment in a feature flag management system. It uses Formik for form handling and validation, and includes fields for segment key, name, description, and match type.

## Code Structure
The main component `SegmentForm` uses Formik to manage form state and validation. It interacts with Redux for state management and API calls. The component renders input fields, radio buttons, and submit buttons, handling both creation and update scenarios for segments.

## References
- Redux selectors and API hooks from `metaSlice`, `namespacesSlice`, and `segmentsApi`
- Various UI components like `Button`, `Input`, and `Loading`
- Utility functions from `helpers.ts`
- Validation schemas from `validations.ts`

## Symbols

### `SegmentForm`
#### Description
A React component that renders a form for creating or updating a segment.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| segment | ISegment (optional) | Existing segment data for editing |
| segmentChanged | function (optional) | Callback function when segment is updated |

#### Internal Logic
1. Determines if it's a new segment or an update based on the `segment` prop
2. Uses Redux hooks to get namespace and read-only status
3. Handles form submission, creating or updating the segment via API calls
4. Manages form state and validation using Formik
5. Renders form fields for segment key, name, description, and match type
6. Handles copying segment key to clipboard

## Side Effects
- Makes API calls to create or update segments
- Updates Redux store state
- Navigates to a new route on successful creation
- Copies text to clipboard

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @heroicons/react | Icons for UI elements |
| formik | Form state management and validation |
| react-redux | Redux state management integration |
| react-router-dom | Routing functionality |
| yup | Schema validation |

## Error Handling
Uses `useError` and `useSuccess` hooks to handle and display error and success messages.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /namespaces/{namespaceKey}/segments | POST | ISegmentBase | ISegment | Create a new segment |
| /namespaces/{namespaceKey}/segments/{segmentKey} | PUT | ISegmentBase | ISegment | Update an existing segment |

This component provides a user interface for creating and editing segments in a feature flag management system, handling form state, validation, and API interactions.