---
title: "Rollouts.tsx"
---

## High-level description
This code defines a React component called `Rollouts` that manages and displays rollout rules for a feature flag. It allows users to create, edit, delete, and reorder rollouts, as well as set a default rollout value. The component uses various Redux hooks for state management and API interactions.

## Code Structure
The `Rollouts` component is the main export, which includes a `DefaultRollout` subcomponent. It uses several hooks from Redux and custom hooks for error and success handling. The component renders a list of rollouts using drag-and-drop functionality and provides forms for creating and editing rollouts.

## Symbols

### `DefaultRollout`
#### Description
A subcomponent that renders and manages the default rollout value for a flag.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| flag | IFlag | The flag object containing the current default value |

#### Internal Logic
- Uses Formik for form management
- Submits updates to the flag's default value
- Displays success or error messages on submission

### `Rollouts`
#### Description
The main component that manages and displays all rollouts for a flag.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| flag | IFlag | The flag object for which rollouts are being managed |

#### Internal Logic
- Fetches and displays the list of rollouts
- Manages state for creating, editing, and deleting rollouts
- Implements drag-and-drop functionality for reordering rollouts
- Renders forms for creating and editing rollouts
- Handles API calls for CRUD operations on rollouts

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @dnd-kit/* | Provides drag-and-drop functionality |
| @heroicons/react | Provides icons for the UI |
| formik | Manages form state and validation |
| react-redux | Connects the component to the Redux store |
| ~/app/flags/* | API hooks for flag-related operations |
| ~/app/meta/metaSlice | Provides read-only state |
| ~/app/namespaces/namespacesSlice | Provides current namespace information |
| ~/app/segments/segmentsApi | API hook for fetching segments |
| ~/components/* | Various UI components used in the rollouts interface |
| ~/data/hooks/* | Custom hooks for error and success handling |
| ~/types/* | Type definitions for flags, rollouts, and segments |
| ~/utils/helpers | Utility functions |

## Error Handling
The component uses custom `useError` and `useSuccess` hooks to manage and display error and success messages for various operations.

## API/Interface Reference
The component interacts with several API endpoints through Redux RTK Query hooks:
- `useUpdateFlagMutation`: Updates the flag's default value
- `useDeleteRolloutMutation`: Deletes a rollout
- `useListRolloutsQuery`: Fetches the list of rollouts
- `useOrderRolloutsMutation`: Reorders rollouts
- `useListSegmentsQuery`: Fetches the list of segments

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.