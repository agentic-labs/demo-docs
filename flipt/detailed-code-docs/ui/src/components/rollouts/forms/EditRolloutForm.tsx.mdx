---
title: "EditRolloutForm.tsx"
---

## High-level description
This code defines a React component called `EditRolloutForm` that allows users to edit an existing rollout for a feature flag. It provides a form interface for modifying rollout properties such as type, segment, threshold, and description.

## Code Structure
The main component `EditRolloutForm` uses Formik for form handling and Redux for state management. It interacts with the `useUpdateRolloutMutation` hook to update the rollout data on the server.

## Symbols

### EditRolloutForm
#### Description
A React component that renders a form for editing an existing rollout.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| setOpen | function | Function to control the visibility of the form |
| onSuccess | function | Callback function to be called on successful update |
| flagKey | string | The key of the flag associated with the rollout |
| rollout | IRollout | The current rollout data to be edited |
| segments | ISegment[] | List of available segments |

#### Internal Logic
1. Initializes form values based on the current rollout data.
2. Handles form submission by calling either `handleSegmentSubmit` or `handleThresholdSubmit` based on the rollout type.
3. Renders different form fields based on the rollout type (segment or threshold).
4. Uses various form components like `Input`, `Select`, and `SegmentsPicker` for different form fields.

### handleSegmentSubmit
#### Description
Handles the submission of a segment-based rollout update.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| values | RolloutFormValues | The form values to be submitted |

### handleThresholdSubmit
#### Description
Handles the submission of a threshold-based rollout update.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| values | RolloutFormValues | The form values to be submitted |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @headlessui/react | UI components (Dialog) |
| @heroicons/react | Icons |
| formik | Form handling |
| react-redux | State management |
| ~/app/flags/rolloutsApi | API for updating rollouts |
| ~/app/meta/metaSlice | Readonly state |
| ~/app/namespaces/namespacesSlice | Current namespace |
| ~/components/forms/* | Various form components |
| ~/data/hooks/error | Error handling hook |
| ~/data/hooks/success | Success handling hook |
| ~/types/* | Type definitions |
| ~/utils/helpers | Utility functions |

## Error Handling
The component uses the `useError` and `useSuccess` hooks to handle and display error and success messages respectively.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /namespaces/{namespaceKey}/flags/{flagKey}/rollouts/{rolloutId} | PUT | Updated rollout data | Updated rollout | Updates an existing rollout |

This component provides a user-friendly interface for editing rollouts, handling different rollout types, and managing the update process through API calls and state management.