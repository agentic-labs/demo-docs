---
title: "QuickEditRolloutForm.tsx"
---

## High-level description
This code defines a React component called `QuickEditRolloutForm` that allows users to edit rollout configurations for feature flags. It uses Formik for form handling and Redux for state management. The component supports editing both segment-based and threshold-based rollouts, providing different form fields based on the rollout type.

## Code Structure
The main component `QuickEditRolloutForm` uses Formik to manage form state and submission. It interacts with Redux through hooks like `useSelector` and `useUpdateRolloutMutation`. The component renders different form fields based on the rollout type (segment or threshold) and handles form submission by calling the appropriate API mutation.

## References
- Redux slices: `metaSlice`, `namespacesSlice`
- Redux API: `rolloutsApi`
- Custom hooks: `useError`, `useSuccess`
- Components: `TextButton`, `Input`, `SegmentsPicker`, `Select`, `Loading`

## Symbols

### QuickEditRolloutForm
#### Description
A React component that renders a form for editing rollout configurations. It handles both segment-based and threshold-based rollouts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| flag | IFlag | The feature flag object |
| rollout | IRollout | The rollout configuration to edit |
| segments | ISegment[] | Available segments for segment-based rollouts |
| onSuccess | () =&gt; void | Optional callback function called on successful form submission |

#### Internal Logic
1. Initializes form values based on the rollout type and existing configuration.
2. Renders different form fields for segment-based and threshold-based rollouts.
3. Handles form submission by calling the appropriate API mutation (`updateRollout`).
4. Manages error and success states using custom hooks.

## Side Effects
- Updates the rollout configuration in the backend on form submission.
- Displays success or error messages using custom hooks.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| formik | Form state management and validation |
| react-redux | Redux state management integration |
| @reduxjs/toolkit | Redux toolkit for API calls and state management |

## Error Handling
The component uses custom `useError` and `useSuccess` hooks to manage and display error and success messages.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /namespaces/{namespaceKey}/flags/{flagKey}/rollouts/{rolloutId} | PUT | Updated rollout configuration | Updated rollout | Updates a rollout configuration |

The component uses the `useUpdateRolloutMutation` hook to make the API call for updating the rollout configuration.