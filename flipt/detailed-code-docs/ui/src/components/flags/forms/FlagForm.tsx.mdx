---
title: "FlagForm.tsx"
---

## High-level description
This code defines a React component called `FlagForm` that renders a form for creating or updating a feature flag. It uses Formik for form handling and validation, and includes fields for flag name, key, type, description, and enabled status. The component also handles form submission, including API calls for creating or updating flags.

## Code Structure
The main `FlagForm` component uses several custom hooks and components:
- Redux hooks (`useSelector`, `useDispatch`) for accessing global state
- Custom hooks (`useError`, `useSuccess`) for handling error and success messages
- API mutation hooks (`useCreateFlagMutation`, `useUpdateFlagMutation`) for flag operations
- Form components (`Input`, `Toggle`, `Button`) for rendering form fields

## Symbols

### FlagForm
#### Description
A React component that renders a form for creating or updating a feature flag.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| flag | IFlag (optional) | Existing flag data for editing |

#### Internal Logic
1. Determines if it's a new flag or updating an existing one
2. Sets up form initial values and validation schema
3. Handles form submission, including API calls
4. Renders form fields (name, key, type, description, enabled status)
5. Manages UI state (e.g., copying key to clipboard)

### flagTypes
#### Description
An array of objects defining the available flag types (Variant and Boolean).

### flagValidationSchema
#### Description
A Yup schema object defining validation rules for the flag form fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @heroicons/react | Provides icons for the UI |
| formik | Handles form state and validation |
| react-redux | Connects component to Redux store |
| react-router-dom | Provides navigation functionality |
| yup | Defines form validation schema |

## Error Handling
The component uses custom `useError` and `useSuccess` hooks to handle and display error and success messages during form submission.

## Performance Considerations
The component uses `React.useState` for local state management and `useSelector` for accessing global state, which helps in optimizing re-renders.