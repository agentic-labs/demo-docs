---
title: "TokenForm.tsx"
---

## High-level description
This code defines a React component called `TokenForm` that renders a form for creating a new authentication token. It uses Formik for form handling and validation, and includes fields for token name, description, expiration date, and optional namespace scoping.

## Code Structure
The `TokenForm` component is the main export. It uses various imported components and hooks for form handling, UI elements, and API interactions. The component is structured as a Formik form with custom input fields and validation logic.

## Symbols

### TokenForm
#### Description
A React component that renders a form for creating a new authentication token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| setOpen | function | Function to control the visibility of the form |
| onSuccess | function | Callback function called when token creation is successful |

#### Internal Logic
1. Initializes form state and validation schema
2. Handles form submission, including token creation API call
3. Renders form fields for token name, description, expiration date, and namespace scoping
4. Manages UI state for namespace scoping option

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @headlessui/react | UI components for dialog and transitions |
| @heroicons/react | Icons for UI elements |
| formik | Form handling and validation |
| react-redux | Redux state management integration |
| yup | Schema validation |

## Error Handling
The component uses the `useError` hook to handle and display errors that occur during form submission or API calls.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /method/token | POST | IAuthTokenBase | IAuthTokenSecret | Creates a new authentication token |

This component is part of a larger application for managing authentication tokens and integrates with other components like `NamespaceListbox` for namespace selection.