---
title: "NamespaceForm.tsx"
---

## High-level description
This code defines a React component called `NamespaceForm` that renders a form for creating or editing a namespace. It uses Formik for form handling and validation, and includes fields for namespace name, key, and description. The component also handles form submission, including API calls to create or update namespaces.

## Code Structure
The main component `NamespaceForm` is defined as a forward ref component. It uses several hooks and components from external libraries and local imports. The component renders a Formik form with input fields and buttons for submitting or canceling the form.

## References
- `useCreateNamespaceMutation` and `useUpdateNamespaceMutation` from `namespacesSlice`
- `Button`, `Input`, `Loading`, and `MoreInfo` components
- `useError` and `useSuccess` hooks
- `keyValidation` and `requiredValidation` from validations
- `INamespace` and `INamespaceBase` types
- `stringAsKey` utility function

## Symbols

### NamespaceForm
#### Description
A React component that renders a form for creating or editing a namespace.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| setOpen | function | Function to control the visibility of the form |
| namespace | INamespace (optional) | Existing namespace data for editing |
| onSuccess | function | Callback function to be called on successful form submission |

#### Internal Logic
1. Determines if it's a new namespace or editing an existing one
2. Sets up form validation schema and initial values
3. Handles form submission, including API calls and error handling
4. Renders form fields (name, key, description) and buttons

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @headlessui/react | For Dialog component |
| @heroicons/react | For XMarkIcon |
| formik | For form handling |
| yup | For form validation |
| react | For React hooks and components |

## Error Handling
The component uses `useError` and `useSuccess` hooks to handle and display errors and success messages.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /namespaces | POST | INamespaceBase | INamespace | Create a new namespace |
| /namespaces/{key} | PUT | INamespaceBase | INamespace | Update an existing namespace |

Note: The actual API calls are handled by the `useCreateNamespaceMutation` and `useUpdateNamespaceMutation` hooks from the `namespacesSlice`.