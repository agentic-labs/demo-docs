---
title: "Overview"
---

## High-level description
This code defines a React component called `VariantForm` that renders a form for creating or editing variants in a feature flag system. It uses Formik for form handling, Redux for state management, and various UI components for rendering the form elements.

## Code Structure
The `VariantForm` component is the main export of this file. It uses several hooks and components from external libraries and other parts of the application. The form is built using Formik and includes fields for key, name, description, and attachment of a variant.

## References
- Redux hooks: `useSelector`, `useCreateVariantMutation`, `useUpdateVariantMutation`
- Custom hooks: `useError`, `useSuccess`
- UI components: `Button`, `Input`, `TextArea`, `Loading`, `MoreInfo`
- Validation schemas: `variantValidationSchema`

## Symbols

### VariantForm
#### Description
A React component that renders a form for creating or editing variants.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| setOpen | function | Function to control the visibility of the form |
| flagKey | string | The key of the flag to which the variant belongs |
| variant | IVariant (optional) | The variant to edit, if in edit mode |
| onSuccess | function | Callback function to be called on successful submission |

#### Internal Logic
1. Determines if it's a new variant or editing an existing one
2. Sets up form initial values and validation schema
3. Handles form submission using Redux mutations
4. Renders form fields and buttons using Formik and custom UI components

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @headlessui/react | For Dialog component |
| @heroicons/react | For XMarkIcon |
| formik | For form handling |
| react-redux | For accessing Redux store |
| yup | For form validation |

## Error Handling
The component uses custom `useError` and `useSuccess` hooks to handle and display error and success messages.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /namespaces/${namespace.key}/flags/${flagKey}/variants | POST | Create a new variant |
| /namespaces/${namespace.key}/flags/${flagKey}/variants/${variant?.id} | PUT | Update an existing variant |

This component provides a user interface for creating and editing variants within a feature flag system, integrating with the backend API and providing form validation and error handling.