---
title: "Overview"
---

## High-level description
This directory contains React components responsible for managing and displaying variants within a feature flag system. The main components are `Variants` and `VariantForm`, which handle the listing, creation, editing, and deletion of variants for a given flag.

## What does it do?
The code in this directory implements a user interface for managing variants in a feature flag system. Here's a breakdown of its functionality:

1. Display a list of variants for a specific flag
2. Provide an interface to create new variants
3. Allow editing of existing variants
4. Enable deletion of variants
5. Implement form validation for variant creation and editing
6. Handle API interactions for CRUD operations on variants
7. Manage UI state for modals and slideovers
8. Implement read-only mode based on user permissions

The workflow typically involves:
1. Viewing the list of variants for a flag
2. Creating a new variant by filling out a form
3. Editing an existing variant by modifying its properties
4. Deleting a variant after confirmation

All these operations are performed through an intuitive user interface with appropriate feedback mechanisms for success and error states.

## Key Files

### Variants.tsx
This file contains the `Variants` component, which is responsible for:
- Rendering the list of variants for a given flag
- Providing UI controls for creating, editing, and deleting variants
- Managing the state of modals and slideovers for these operations
- Implementing read-only mode based on user permissions

Key features:
- Uses Redux for state management
- Implements empty state UI when no variants exist
- Utilizes modals and slideovers for form interactions

### forms/VariantForm.tsx
This file defines the `VariantForm` component, which handles:
- Rendering the form for creating and editing variants
- Form validation using Yup schema
- Submission of form data to the API
- Displaying success and error messages

Key features:
- Uses Formik for form handling
- Implements form validation using Yup
- Utilizes custom hooks for error and success handling
- Integrates with Redux for API mutations

## Dependencies
The code relies on several external libraries and frameworks:

1. React: The core library for building the user interface
2. Redux (@reduxjs/toolkit): For state management and API interactions
3. Formik: For form handling in the VariantForm component
4. Yup: For form validation schemas
5. @headlessui/react: Provides accessible UI components like Dialog
6. @heroicons/react: For icons used in the UI

These dependencies were chosen to provide a robust, maintainable, and accessible user interface while simplifying state management and form handling.

## Configuration
The code doesn't explicitly use configuration files or environment variables. However, it relies on the Redux store for certain configurations:

1. Read-only mode: Determined by the `selectReadonly` selector from the Redux store
2. Current namespace: Retrieved using the `selectCurrentNamespace` selector

These configurations affect the behavior of the components, such as disabling edit functionality in read-only mode.

Example of how read-only mode is used:

```typescript
const readOnly = useSelector(selectReadonly);

// ...

{!readOnly && (
  &lt;Button
    onClick={() =&gt; setShowVariantForm(true)}
    data-testid="create-variant-button"
  &gt;
    Create variant
  &lt;/Button&gt;
)}
```

This code snippet demonstrates how the "Create variant" button is only rendered when not in read-only mode.

The components in this directory play a crucial role in managing variants within the feature flag system, providing a user-friendly interface for CRUD operations while ensuring data integrity through form validation and API interactions.