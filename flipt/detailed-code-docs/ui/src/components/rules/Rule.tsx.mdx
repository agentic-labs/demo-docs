---
title: "Rule.tsx"
---

## High-level description
This code defines a React component called `Rule` that represents a single rule in a feature flag system. It displays rule information and provides functionality for editing and deleting rules.

## Code Structure
The `Rule` component is a forwarded ref component that renders a list item (`&lt;li&gt;`) containing rule information and controls. It uses various sub-components and utilities to handle rule display and interactions.

## Symbols

### Rule
#### Description
A forwarded ref React component that renders a single rule for a feature flag.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| flag | IFlag | The feature flag associated with the rule |
| rule | IEvaluatable | The rule object to be displayed |
| segments | ISegment[] | List of available segments |
| onSuccess | () =&gt; void | Callback function called on successful rule update |
| onDelete | () =&gt; void | Callback function called when rule deletion is requested |
| style | React.CSSProperties | Custom styles for the rule component |
| className | string | Additional CSS classes for the rule component |
| readOnly | boolean | Indicates if the rule is in read-only mode |

#### Internal Logic
1. Renders a list item with rule information and controls
2. Displays rule rank and a menu for rule actions
3. Includes a `QuickEditRuleForm` for editing rule properties
4. Applies conditional styling based on read-only status

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @headlessui/react | Provides UI components like Menu and Transition |
| @heroicons/react | Provides icons used in the component |
| react | Core React library |
| ~/types/* | Type definitions for various entities (Flag, Evaluatable, Segment) |
| ~/utils/helpers | Utility functions, specifically `cls` for class name composition |
| QuickEditRuleForm | Sub-component for editing rule properties |

## Error Handling
The component doesn't implement explicit error handling. Error management is likely handled by parent components or the global error handling mechanism.

## Performance Considerations
The component uses `forwardRef` which can have a slight performance impact, but it's negligible in most cases. The use of `memo` or `useMemo` could be considered for optimizing re-renders if performance becomes an issue with a large number of rules.

This component is part of a larger feature flag management system and works in conjunction with other components to provide a complete rule management interface for feature flags.