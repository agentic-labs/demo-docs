---
title: "QuickEditRuleForm.tsx"
---

## High-level description
This code defines a React component called `QuickEditRuleForm` that allows users to quickly edit rules for feature flags. It provides a form for modifying rule properties such as segments, distribution type, and variant rollouts. The component uses Formik for form management and Redux for state management.

## Code Structure
The main component `QuickEditRuleForm` uses several hooks and sub-components to manage its state and render the form. It interacts with the Redux store to fetch and update data, and uses custom hooks for error and success handling.

## References
- Redux slices: `metaSlice`, `namespacesSlice`
- Redux API: `rulesApi`
- Custom hooks: `useError`, `useSuccess`
- Components: `TextButton`, `SegmentsPicker`, `Loading`, `SingleDistributionFormInput`

## Symbols

### `QuickEditRuleForm`
#### Description
The main component that renders a form for quick editing of rules.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| flag | IFlag | The flag object associated with the rule |
| rule | IEvaluatable | The rule object to be edited |
| segments | ISegment[] | Array of available segments |
| onSuccess | () =&gt; void | Callback function to be called on successful update |

#### Internal Logic
1. Initializes form state using Formik
2. Determines the distribution type of the rule
3. Manages the selected variant for single distribution type
4. Handles form submission, updating rule and distribution data
5. Renders form fields based on the distribution type

### `validRollout`
#### Description
A helper function to validate if the sum of rollout percentages is less than or equal to 100.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| rollouts | IVariantRollout[] | Array of variant rollouts |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isValid | boolean | Whether the rollout is valid |

## Side Effects
- Updates the rule and distribution data in the backend when the form is submitted
- Displays success or error messages using custom hooks

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| formik | Form management |
| react-redux | Redux state management |
| @reduxjs/toolkit | Redux toolkit utilities |

## Error Handling
The component uses custom `useError` and `useSuccess` hooks to handle and display error and success messages.

## Performance Considerations
The component uses `enableReinitialize` with Formik, which may cause unnecessary re-renders if the initial values change frequently. Consider optimizing this if performance issues arise.

This documentation provides a comprehensive overview of the `QuickEditRuleForm` component and its related functions. It covers the main functionality, inputs, internal logic, and important considerations for using and maintaining this component.