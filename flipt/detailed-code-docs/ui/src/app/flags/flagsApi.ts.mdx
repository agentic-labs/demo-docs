---
title: "flagsApi.ts"
---

## High-level description
This code defines the `flagsApi` using Redux Toolkit's `createApi` function. It provides various endpoints for managing flags in a namespace, including listing, getting, creating, updating, deleting, and copying flags, as well as managing flag variants.

## Code Structure
The code creates an API slice using `createApi` with a base query and defines multiple endpoints for flag-related operations. Each endpoint specifies the request format and how to handle the response, including cache invalidation. The file also exports custom hooks for each endpoint, generated by RTK Query.

## Symbols

### `flagsApi`
#### Description
This is the main API slice created using `createApi`. It defines the base configuration and endpoints for flag-related operations.

#### Internal Logic
- Sets up the reducer path, base query, and tag types for caching.
- Defines multiple endpoints for various flag operations.
- Each endpoint specifies how to construct the request and handle the response, including cache invalidation.

### Endpoints

#### `listFlags`
##### Description
Retrieves a list of flags for a given namespace.

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace to list flags from |

##### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | IFlagList | List of flags in the namespace |

#### `getFlag`
##### Description
Retrieves a specific flag from a namespace.

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace |
| flagKey | string | The key of the flag to retrieve |

##### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | IFlag | The requested flag |

#### `createFlag`
##### Description
Creates a new flag in the specified namespace.

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace |
| values | IFlagBase | The flag data to create |

##### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | IFlag | The created flag |

#### `deleteFlag`
##### Description
Deletes a flag from the specified namespace.

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace |
| flagKey | string | The key of the flag to delete |

#### `updateFlag`
##### Description
Updates an existing flag in the specified namespace.

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace |
| flagKey | string | The key of the flag to update |
| values | IFlagBase | The updated flag data |

##### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | IFlag | The updated flag |

#### `copyFlag`
##### Description
Copies a flag from one namespace to another.

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| from | { namespaceKey: string; flagKey: string } | Source flag information |
| to | { namespaceKey: string; flagKey: string } | Destination flag information |

#### `createVariant`, `updateVariant`, `deleteVariant`
##### Description
These endpoints manage flag variants (create, update, and delete operations).

##### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace |
| flagKey | string | The key of the flag |
| values | IVariantBase | The variant data (for create and update) |
| variantId | string | The ID of the variant (for update and delete) |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @reduxjs/toolkit/query/react | Provides the `createApi` function for creating the API slice |
| ~/types/Flag | Imports flag-related types |
| ~/types/Variant | Imports variant-related types |
| ~/utils/redux-rtk | Imports the `baseQuery` configuration |

## API/Interface Reference
The file exports custom hooks for each endpoint, which can be used to interact with the API:

| Hook | Description |
|:-----|:------------|
| useListFlagsQuery | Query hook for listing flags |
| useGetFlagQuery | Query hook for getting a specific flag |
| useCreateFlagMutation | Mutation hook for creating a flag |
| useDeleteFlagMutation | Mutation hook for deleting a flag |
| useUpdateFlagMutation | Mutation hook for updating a flag |
| useCopyFlagMutation | Mutation hook for copying a flag |
| useCreateVariantMutation | Mutation hook for creating a variant |
| useUpdateVariantMutation | Mutation hook for updating a variant |
| useDeleteVariantMutation | Mutation hook for deleting a variant |

These hooks can be used in React components to interact with the flag-related API endpoints.