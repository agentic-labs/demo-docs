---
title: "analyticsApi.tsx"
---

## High-level description
This code defines an API slice for analytics using Redux Toolkit's `createApi` function. It creates an endpoint for fetching flag evaluation counts within a specified time range for a given namespace and flag.

## Code Structure
The code exports an `analyticsApi` object created by `createApi`, which defines the API structure and behavior. It also exports a custom hook `useGetFlagEvaluationCountQuery` generated from the API slice for easy use in React components.

## Symbols

### `analyticsApi`
#### Description
This is the main API slice object created using Redux Toolkit's `createApi` function. It defines the structure and behavior of the analytics API.

#### Internal Logic
- Sets the reducer path to 'analytics'
- Uses `internalQuery` as the base query function
- Defines 'Analytics' as a tag type for cache invalidation
- Creates an endpoint `getFlagEvaluationCount` for fetching flag evaluation counts

### `getFlagEvaluationCount`
#### Description
This is a query endpoint defined within the `analyticsApi` for fetching flag evaluation counts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| namespaceKey | string | The key of the namespace |
| flagKey | string | The key of the flag |
| from | string | Start date of the time range |
| to | string | End date of the time range |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | IFlagEvaluationCount | Object containing timestamps and corresponding evaluation count values |

#### Internal Logic
Constructs a query URL and parameters to fetch flag evaluation counts for the specified namespace, flag, and time range.

### `useGetFlagEvaluationCountQuery`
#### Description
This is a generated hook that can be used in React components to easily fetch flag evaluation counts.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @reduxjs/toolkit/query/react | Provides the `createApi` function for creating the API slice |
| ~/types/Analytics | Imports the `IFlagEvaluationCount` interface |
| ~/utils/redux-rtk | Imports the `internalQuery` function used as the base query |

## References
- The `IFlagEvaluationCount` interface is imported from `~/types/Analytics`
- The `internalQuery` function is imported from `~/utils/redux-rtk`

This API slice is used in the `Analytics` component (from the related code snippets) to fetch and display flag evaluation counts over time.