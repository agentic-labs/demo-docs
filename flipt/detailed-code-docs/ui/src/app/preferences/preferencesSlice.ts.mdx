---
title: "preferencesSlice.ts"
---

## High-level description
This code defines a Redux slice for managing user preferences in a React application. It handles theme and timezone settings, providing actions to change these preferences and selectors to access them from the Redux store.

## Code Structure
The code defines a Redux slice using `createSlice` from `@reduxjs/toolkit`. It includes initial state, reducers for changing theme and timezone, and an extra reducer for handling the `fetchConfigAsync` action. The slice also exports action creators and selectors for use in other parts of the application.

## Symbols

### `preferencesSlice`
#### Description
Creates a Redux slice for managing user preferences.

#### Internal Logic
- Defines initial state with default theme and timezone
- Creates reducers for changing theme and timezone
- Adds an extra reducer to handle the `fetchConfigAsync` action, which sets the default theme if not already set

### `themeChanged`
#### Description
Action creator for changing the theme preference.

### `timezoneChanged`
#### Description
Action creator for changing the timezone preference.

### `selectTheme`
#### Description
Selector function to get the current theme from the Redux store.

### `selectTimezone`
#### Description
Selector function to get the current timezone from the Redux store.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @reduxjs/toolkit | Used for creating the Redux slice |
| ~/app/meta/metaSlice | Imports `fetchConfigAsync` action |
| ~/store | Imports `RootState` type |
| ~/types/Preferences | Imports `Theme` and `Timezone` types |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| preferencesKey | string | 'preferences' | Key used for storing preferences in localStorage |

## Side Effects
The extra reducer for `fetchConfigAsync` reads from localStorage and potentially updates the theme in the Redux store.

___

This code provides a centralized way to manage user preferences (theme and timezone) in a React application using Redux. It allows for easy updating and retrieval of these preferences throughout the application.