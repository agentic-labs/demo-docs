---
title: "Preferences.tsx"
---

## High-level description
This code defines a React component called `Preferences` that allows users to manage their UI preferences, specifically the theme and timezone settings. It uses Formik for form management, Redux for state management, and includes UI components from Headless UI and custom components.

## Code Structure
The `Preferences` component uses Redux hooks to access and update the global state for theme and timezone preferences. It renders a form with two main settings: theme selection and UTC timezone toggle. The component uses the `Formik` library for form management and custom UI components like `Select` and `Switch` for user interaction.

## References
- Redux state selectors and actions from `preferencesSlice`
- Custom hooks: `useTimezone`
- Custom components: `Select`
- Utility functions: `cls`
- Types: `Theme`, `Timezone`

## Symbols

### `Preferences`
#### Description
This is the main functional component that renders the preferences UI.

#### Inputs
No direct inputs, but it uses Redux state and dispatch.

#### Outputs
Returns a JSX element representing the preferences form.

#### Internal Logic
1. Retrieves current theme and timezone from Redux state.
2. Sets up initial form values.
3. Uses `useTimezone` hook to get formatted time.
4. Renders a form with theme selection and UTC timezone toggle.
5. Dispatches Redux actions when preferences are changed.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @headlessui/react | Provides the `Switch` component for the timezone toggle |
| formik | Form management library |
| react-redux | Redux hooks for state management |
| ~/components/forms/Select | Custom select component |
| ~/data/hooks/timezone | Custom hook for timezone operations |
| ~/types/Preferences | Type definitions for Theme and Timezone |
| ~/utils/helpers | Utility functions (cls) |

## Error Handling
This component doesn't implement specific error handling mechanisms.

## API/Interface Reference
This component doesn't expose an API but interacts with the Redux store through the following selectors and actions:

| Selector/Action | Purpose |
|:----------------|:--------|
| selectTimezone | Retrieves the current timezone preference |
| selectTheme | Retrieves the current theme preference |
| themeChanged | Action to update the theme preference |
| timezoneChanged | Action to update the timezone preference |

The component renders a form with the following user interface elements:
1. A dropdown to select the theme (Light, Dark, or System)
2. A toggle switch to enable/disable UTC timezone