---
title: "Segments.tsx"
---

## High-level description
This code defines a React component called `Segments` that displays a list of segments in a Flipt application. It provides functionality to view existing segments, create new segments, and handles read-only mode restrictions.

## Code Structure
The `Segments` component uses Redux for state management and React Router for navigation. It fetches segment data using a custom hook `useListSegmentsQuery` and renders either a table of segments or an empty state based on the data received.

## References
- Redux store (selectReadonly, selectCurrentNamespace)
- React Router (Link, useNavigate)
- Custom hooks (useListSegmentsQuery, useError)
- Components (EmptyState, Button, SegmentTable)

## Symbols

### Segments
#### Description
The main functional component that renders the segments page.

#### Internal Logic
1. Fetches the current namespace and read-only status from Redux store
2. Queries the list of segments using `useListSegmentsQuery`
3. Handles error states using `useError` hook
4. Renders a header with a "New Segment" button
5. Conditionally renders either a `SegmentTable` or an `EmptyState` component based on the presence of segments

#### Side Effects
- Calls `setError` or `clearError` when the `error` state changes

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @heroicons/react | Provides icons for the UI |
| react-redux | Connects the component to the Redux store |
| react-router-dom | Provides routing functionality |

## Error Handling
The component uses the `useError` hook to handle and display errors that may occur during the segment list fetching process.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| `/namespaces/${namespace.key}/segments` | GET | Fetches the list of segments for the current namespace |