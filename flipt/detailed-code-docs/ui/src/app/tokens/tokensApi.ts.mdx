---
title: "tokensApi.ts"
---

## High-level description
This code defines a Redux Toolkit Query API for managing authentication tokens in a React application. It provides endpoints for listing, creating, and deleting tokens, utilizing RTK Query's powerful features for efficient data fetching and caching.

## Code Structure
The `tokensApi` is created using `createApi` from RTK Query. It defines three main endpoints: `listTokens`, `createToken`, and `deleteTokens`. These endpoints interact with a backend API to perform CRUD operations on authentication tokens.

## Symbols

### `tokensApi`
#### Description
This is the main API slice created using RTK Query's `createApi`. It configures the base query and defines the endpoints for token-related operations.

#### Internal Logic
- Uses `fetchBaseQuery` with a custom `fetchFn` for making API requests.
- Defines three endpoints: `listTokens`, `createToken`, and `deleteTokens`.
- Uses tag-based invalidation for efficient cache management.

### `listTokens`
#### Description
A query endpoint for fetching a list of authentication tokens.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | IAuthTokenInternalList | List of authentication tokens |

### `createToken`
#### Description
A mutation endpoint for creating a new authentication token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| values | IAuthTokenBase | Token creation parameters |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | IAuthTokenSecret | Created token details |

### `deleteTokens`
#### Description
A mutation endpoint for deleting one or more authentication tokens.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ids | string[] | Array of token IDs to delete |

#### Internal Logic
- Iterates through the provided token IDs and sends a DELETE request for each.
- Returns early if any deletion fails.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @reduxjs/toolkit/query/react | Provides RTK Query functionality |
| ~/data/api | Imports API-related constants and utilities |
| ~/types/auth/Token | Imports token-related type definitions |
| ~/utils/redux-rtk | Imports custom fetch function for API requests |

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /tokens | GET | - | IAuthTokenInternalList | List all tokens |
| /method/token | POST | IAuthTokenBase | IAuthTokenSecret | Create a new token |
| /tokens/:id | DELETE | - | - | Delete a token |

This API slice provides a clean and efficient way to manage authentication tokens in the application, leveraging RTK Query's powerful features for data fetching, caching, and synchronization.