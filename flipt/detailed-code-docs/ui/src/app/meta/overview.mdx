---
title: "Overview"
---

## High-level description
This code defines a Redux slice for managing metadata in a React application. It includes state for application info and configuration, as well as async thunks for fetching this data from an API. The slice also provides selectors for accessing the state in components.

## Code Structure
The main symbols in this code are:
1. `metaSlice`: The Redux slice containing the state and reducers.
2. `fetchInfoAsync` and `fetchConfigAsync`: Async thunks for fetching data.
3. Selectors: `selectInfo`, `selectConfig`, and `selectReadonly`.

These symbols are interconnected, with the async thunks updating the state in the slice, and the selectors accessing this state.

## Symbols

### `metaSlice`
#### Description
Creates a Redux slice for managing metadata state, including application info and configuration.

#### Internal Logic
- Defines initial state for info and config.
- Uses `createSlice` to define the slice with reducers for handling async thunk actions.
- Handles updating state when async thunks are fulfilled.

### `fetchInfoAsync`
#### Description
An async thunk that fetches application info from the API.

#### Internal Logic
- Uses the `getInfo` function to fetch data.
- Updates the `info` state in the slice when fulfilled.

### `fetchConfigAsync`
#### Description
An async thunk that fetches application configuration from the API.

#### Internal Logic
- Uses the `getConfig` function to fetch data.
- Updates the `config` state in the slice when fulfilled, including special handling for analytics and storage settings.

### Selectors
#### Description
Functions that select specific parts of the state for use in components.

1. `selectInfo`: Selects the info state.
2. `selectConfig`: Selects the config state.
3. `selectReadonly`: Selects the readonly status from the config state.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @reduxjs/toolkit | Provides utilities for creating Redux slices and async thunks |
| ~/data/api | Contains API functions for fetching data |
| ~/types/Meta | Defines types used in the slice |
| ~/types/Preferences | Defines the Theme enum used in the config |

## Configuration
The slice handles configuration options defined in the `IConfig` interface, including:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| storage | IStorage | { type: StorageType.DATABASE, readOnly: false } | Defines storage configuration |
| ui | IUI | { defaultTheme: Theme.SYSTEM, topbar: { color: '' } } | Defines UI configuration |
| analyticsEnabled | boolean | false | Indicates if analytics are enabled |

## Error Handling
The slice doesn't implement specific error handling beyond basic Redux toolkit error handling for async thunks.

## API/Interface Reference
The slice exposes the following main interfaces:
| Symbol | Type | Description |
|:-------|:-----|:------------|
| metaSlice.reducer | Reducer | The main reducer for the slice |
| fetchInfoAsync | AsyncThunk | Thunk for fetching info |
| fetchConfigAsync | AsyncThunk | Thunk for fetching config |
| selectInfo | Selector | Selector for info state |
| selectConfig | Selector | Selector for config state |
| selectReadonly | Selector | Selector for readonly status |