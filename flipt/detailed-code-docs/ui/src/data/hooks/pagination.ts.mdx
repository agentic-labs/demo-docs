---
title: "pagination.ts"
---

## High-level description
This code implements a custom React hook called `usePagination` that generates a pagination range based on the total number of items, current page, page size, and the number of sibling pages to display. It's designed to create a flexible pagination system that can handle various scenarios, including showing ellipsis (...) when there are many pages.

## Code Structure
The file contains two main parts: a utility function `range` and the main `usePagination` hook. The hook uses the `useMemo` React hook to memoize the pagination range calculation for performance optimization.

## Symbols

### `range`
#### Description
A utility function that generates an array of numbers within a specified range.

#### Inputs
| Name  | Type   | Description                   |
|:------|:-------|:------------------------------|
| start | number | The starting number of the range |
| end   | number | The ending number of the range   |

#### Outputs
| Name | Type     | Description                                    |
|:-----|:---------|:-----------------------------------------------|
| -    | number[] | An array of numbers from `start` to `end` (inclusive) |

### `usePagination`
#### Description
A custom React hook that calculates and returns a pagination range based on the total count of items, page size, number of sibling pages, and current page.

#### Inputs
| Name         | Type                | Description                                    |
|:-------------|:--------------------|:-----------------------------------------------|
| props        | UsePaginationProps  | An object containing pagination parameters     |

#### Outputs
| Name            | Type               | Description                                    |
|:----------------|:-------------------|:-----------------------------------------------|
| paginationRange | (number \| string)[] | An array representing the pagination range, including page numbers and ellipsis (...) |

#### Internal Logic
1. Calculate the total page count based on total items and page size.
2. Determine if the total pages are less than the desired number of page buttons to show.
3. Calculate the left and right sibling indices.
4. Determine if ellipsis should be shown on the left and/or right side.
5. Handle four different cases:
   - Show all pages without ellipsis
   - Show ellipsis only on the right
   - Show ellipsis only on the left
   - Show ellipsis on both sides
6. Return the appropriate pagination range based on the case.

## Dependencies
| Dependency | Purpose                                         |
|:-----------|:------------------------------------------------|
| react      | Used for the `useMemo` hook for memoization     |

## Performance Considerations
The `usePagination` hook uses `useMemo` to memoize the pagination range calculation. This optimization ensures that the calculation is only performed when the input props change, reducing unnecessary recalculations and improving performance.

## References
The `usePagination` hook is used in the `Pagination` component in `ui/src/components/Pagination.tsx`. This component renders the actual pagination UI based on the range returned by the hook.