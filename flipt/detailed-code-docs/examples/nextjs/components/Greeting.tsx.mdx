---
title: "Greeting.tsx"
---

## High-level description
The `Greeting.tsx` component demonstrates client-side feature flagging with Flipt in a Next.js application. It fetches a greeting message based on the user's language, which is determined by evaluating a feature flag named "language" using the Flipt Evaluation Client.

## References
- `FliptEvaluationClient` from `@flipt-io/flipt-client-browser`

## Symbols
### `Greeting`
#### Description
A functional React component that displays a greeting message based on the user's language. The language is determined by evaluating a feature flag named "language" using the Flipt Evaluation Client.

#### Inputs
This component does not accept any props.

#### Outputs
- Renders a `p` tag with "Loading..." while fetching data.
- Renders an `h1` tag with the greeting message once fetched.

#### Internal Logic
1. **Initialization:**
   - Sets up state variable `data` to hold the greeting message, initially `null`.
2. **useEffect Hook:**
   - Fetches data when the component mounts.
   - **fetchData function:**
     - Initializes the Flipt Evaluation Client with the provided URL.
     - Evaluates the "language" flag for a randomly generated entity ID.
     - Determines the greeting message based on the returned variant key.
     - Updates the `data` state with the greeting message.
     - Logs any errors encountered during the process.
3. **Conditional Rendering:**
   - If `data` is `null` (still loading), renders "Loading...".
   - If `data` is available, renders the greeting message in an `h1` tag.

## Side Effects
- Makes a network request to the Flipt server to evaluate the feature flag.
- Updates the component's state with the fetched greeting message.

## Dependencies
| Dependency                     | Purpose                                                              |
|:--------------------------------|:---------------------------------------------------------------------|
| `react`                         | Provides React hooks (`useState`, `useEffect`) for state management. |
| `uuid`                          | Generates a unique entity ID for feature flag evaluation.            |
| `@flipt-io/flipt-client-browser` | Provides the Flipt Evaluation Client for interacting with Flipt.   |

## Configuration
- `process.env.NEXT_PUBLIC_FLIPT_ADDR`: The URL of the Flipt server. Defaults to `http://localhost:8080`.

## Error Handling
- Errors during the flag evaluation process are caught and logged to the console.

## Logging
- Logs the evaluation result and any errors encountered during the flag evaluation process to the console.
