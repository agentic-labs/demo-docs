---
title: "server.py"
---

## High-level description
This code implements a simple HTTP server in Python that logs incoming GET and POST requests. It listens on a configurable port (defaulting to 8081) and logs the request path, headers, and body (for POST requests).

## Symbols
### `S`
#### Description
This class extends the `BaseHTTPRequestHandler` class from Python's `http.server` module to handle incoming HTTP requests. It overrides the `do_GET` and `do_POST` methods to define custom behavior for GET and POST requests respectively.

#### Inputs
This class inherits inputs from `BaseHTTPRequestHandler`.

#### Outputs
This class sends HTTP responses with a status code of 200, content type 'text/html', and a brief message indicating the type of request and the requested path.

#### Internal Logic
- `_set_response`: This method sets the HTTP response status code, headers, and ends the header section.
- `do_GET`: This method handles GET requests by logging the request path and headers and sending a response message.
- `do_POST`: This method handles POST requests by reading the request body, logging the request path, headers, and body content, and sending a response message.

### `run`
#### Description
This function starts the HTTP server and handles server lifecycle events.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| server_class | class | The class for the HTTP server (defaults to `HTTPServer`) |
| handler_class | class | The request handler class (defaults to `S`) |
| port | int | The port number to listen on (defaults to 8081) |

#### Outputs
This function doesn't return any values but prints log messages to the console.

#### Internal Logic
- Initializes logging.
- Creates an instance of the HTTP server, binding it to the specified port.
- Starts the server and listens for incoming requests indefinitely.
- Handles keyboard interrupts to gracefully shut down the server.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| http.server | Provides classes for creating a simple HTTP server |
| logging | Provides logging functionality |

## Error Handling
The code includes basic error handling by catching `KeyboardInterrupt` to gracefully stop the server. Other exceptions are not explicitly handled.

## Logging
The code uses the `logging` module to log information about incoming requests and server start/stop events. The logging level is set to `INFO`.
