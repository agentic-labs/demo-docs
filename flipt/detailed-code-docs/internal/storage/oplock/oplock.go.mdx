---
title: "oplock.go"
---

## High-level description
The `oplock` package defines an interface for an operation lock service. This service allows locking access to named operations for a specified duration, ensuring that an operation occurs only once within that timeframe across multiple Flipt instances. This is useful for coordinating tasks like background cleanup processes in a distributed environment.

## Code Structure
The `oplock` package defines a single interface `Service` which outlines the methods for interacting with an operation lock service. The `LockEntry` struct represents an entry in the lock service, containing information about the operation, its version, and acquisition timestamps.

## Symbols

### `Operation`
#### Description
`Operation` is a type alias for `string` representing the name of a unique operation.

#### Inputs
None

#### Outputs
None

### `LockEntry`
#### Description
`LockEntry` represents an entry in the operation lock service. It holds information about the locked operation, its version, and the timestamps for last acquisition and expiration.

#### Inputs
None

#### Outputs
None

### `Service`
#### Description
`Service` is an interface defining the methods for an operation lock service. It provides a mechanism to acquire locks for named operations, ensuring exclusive access for a specified duration.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The `TryAcquire` method attempts to acquire a lock for a given operation and duration. It returns a boolean indicating whether the lock was acquired, the `LockEntry` associated with the operation, and an error if any occurred.
