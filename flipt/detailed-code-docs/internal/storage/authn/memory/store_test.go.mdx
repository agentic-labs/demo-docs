---
title: "store_test.go"
---

## High-level description
The code defines a test suite for the `memory` package, specifically for the `NewStore()` function which is an implementation of the `authn.Store` interface. It leverages a test harness from the `authtesting` package to run a series of standard authentication store tests.

## References
- `go.flipt.io/flipt/internal/storage/authn`
- `go.flipt.io/flipt/internal/storage/authn/testing`

## Symbols

### `TestAuthenticationStoreHarness`
#### Description
This function is a test function that checks the functionality of the `NewStore()` function by using the `TestAuthenticationStoreHarness` function from the `authtesting` package.

#### Inputs
N/A - This is a test function and doesn't take any specific inputs.

#### Outputs
N/A - This is a test function and doesn't return any specific outputs. It uses the `testing.T` object for reporting test results.

#### Internal Logic
- It calls the `authtesting.TestAuthenticationStoreHarness` function, passing in a closure that returns a new instance of the `authn.Store` interface created using the `NewStore()` function.
- The `TestAuthenticationStoreHarness` function (defined externally) then executes a predefined set of tests against the provided store implementation.

## Dependencies
| Dependency                                     | Purpose                                                                      |
|:-----------------------------------------------|:-----------------------------------------------------------------------------|
| `go.flipt.io/flipt/internal/storage/authn`     | Provides the interface definition (`authn.Store`) for authentication stores. |
| `go.flipt.io/flipt/internal/storage/authn/testing` | Provides a test harness (`TestAuthenticationStoreHarness`) for authentication stores. |

## Error Handling
The code relies on the standard Go testing framework (`testing.T`) for error handling. Any errors encountered during the test execution will be reported through the `testing.T` object, leading to test failures.
