---
title: "flipt.go"
---

## High-level description
The code defines a `Flipt` struct that holds information about the Flipt service, such as version, build date, and update availability. It also provides a method to serve this information as JSON over HTTP.

## Code Structure
The `Flipt` struct contains data fields about the Flipt service. The `IsDevelopment` method determines if the service is running in development mode. The `ServeHTTP` method handles HTTP requests and serves the Flipt information as JSON.

## Symbols

### `Flipt`
#### Description
The `Flipt` struct represents information about the Flipt service.

#### Inputs
N/A - This is a struct definition, not a function.

#### Outputs
N/A - This is a struct definition, not a function.

### `Flipt.IsDevelopment`
#### Description
This method checks if the Flipt service is running in development mode.

#### Inputs
N/A - This method operates on the `Flipt` struct instance.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| (return value) | `bool` | `true` if the service is in development mode (`Version` is "dev"), `false` otherwise. |

#### Internal Logic
The method simply compares the `Version` field of the `Flipt` struct to the string "dev".

### `Flipt.ServeHTTP`
#### Description
This method handles HTTP requests and serves the Flipt information as JSON.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `w` | `http.ResponseWriter` | The response writer used to write the response. |
| `r` | `*http.Request` | The incoming HTTP request. |

#### Outputs
N/A - The output is written to the `http.ResponseWriter`.

#### Internal Logic
1. It checks the `Accept` header of the request to determine the desired JSON formatting (pretty or compact).
2. It marshals the `Flipt` struct into JSON format.
3. It writes the JSON response to the `http.ResponseWriter`.
4. It handles potential errors during JSON marshaling and writing the response.

## Side Effects
- This code writes data to the provided `http.ResponseWriter` based on the incoming HTTP request.

## Error Handling
The code handles potential errors during JSON marshaling and writing the response by writing a `http.StatusInternalServerError` to the response writer.

## API/Interface Reference
This code defines a simple HTTP endpoint that serves Flipt information as JSON.

| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| N/A | `GET` | N/A | `application/json` | Returns a JSON representation of the `Flipt` struct. |
