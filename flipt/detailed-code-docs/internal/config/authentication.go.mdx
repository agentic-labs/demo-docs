---
title: "authentication.go"
---

Here's a high-level description and documentation of the `internal/config/authentication.go` file:

## High-level description

This file defines the configuration structures and validation logic for Flipt's authentication mechanisms. It includes configurations for various authentication methods such as Token, OIDC, GitHub, Kubernetes, JWT, and Cloud. The file also provides functionality for setting defaults, validating configurations, and handling deprecations.

## Code Structure

The main structure is `AuthenticationConfig`, which contains configurations for different authentication methods and session settings. It's composed of several sub-structures like `AuthenticationMethods`, `AuthenticationSession`, and method-specific configurations.

## Symbols

### AuthenticationConfig

#### Description
Configures Flipt's authentication mechanisms, including whether authentication is required, which API sections to exclude from authentication, and settings for various authentication methods.

#### Internal Logic
- `Enabled()`: Checks if authentication is required or any method is enabled.
- `RequiresDatabase()`: Checks if any enabled method requires a database connection.
- `ShouldRunCleanup()`: Determines if the cleanup background process should be started.
- `SessionEnabled()`: Checks if any enabled method is session-compatible.

### AuthenticationMethods

#### Description
Contains configurations for each available authentication method in Flipt.

#### Internal Logic
- `AllMethods()`: Returns all available authentication method instances.
- `EnabledMethods()`: Returns only the enabled authentication method instances.

### AuthenticationMethod[C AuthenticationMethodInfoProvider]

#### Description
A generic container for authentication methods, describing common properties and method-specific configurations.

### Various method-specific configurations (e.g., AuthenticationMethodTokenConfig, AuthenticationMethodOIDCConfig)

#### Description
These structures define the configuration options specific to each authentication method.

## Dependencies
- `github.com/spf13/viper`
- `go.flipt.io/flipt/rpc/flipt/auth`
- `google.golang.org/protobuf/types/known/structpb`

## Configuration
The file defines various configuration options for each authentication method, including:
- Token lifetime
- Session settings
- Provider-specific settings (e.g., for OIDC, GitHub)
- JWT validation settings

## Error Handling
The code includes validation logic to ensure that configuration values are set correctly and consistently.

## TODOs
There are no explicit TODOs in the code.

This file is crucial for setting up and managing authentication in Flipt, providing a flexible and extensible way to configure various authentication methods and their associated settings.