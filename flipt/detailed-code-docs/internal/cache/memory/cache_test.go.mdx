---
title: "cache_test.go"
---

## High-level description
This file contains unit tests for a memory-based cache implementation in Go. It tests the creation of a new cache, setting values, getting values, and deleting values from the cache.

## Symbols

### TestNewCache
#### Description
This function tests the creation of a new memory cache using the `NewCache` function.

#### Internal Logic
1. Creates a new cache with an empty `CacheConfig`.
2. Asserts that the created cache is not nil.
3. Checks that the cache's string representation is "memory".

### TestSet
#### Description
This function tests the `Set` method of the memory cache.

#### Internal Logic
1. Creates a new cache and a background context.
2. Sets a key-value pair in the cache.
3. Asserts that no error occurred during the set operation.

### TestGet
#### Description
This function tests the `Get` method of the memory cache.

#### Internal Logic
1. Creates a new cache and a background context.
2. Sets a key-value pair in the cache.
3. Retrieves the value for the existing key and asserts its correctness.
4. Attempts to get a non-existent key and verifies the expected behavior.
5. Retrieves the existing key again to ensure it's still present.

### TestDelete
#### Description
This function tests the `Delete` method of the memory cache.

#### Internal Logic
1. Creates a new cache and a background context.
2. Sets a key-value pair in the cache.
3. Retrieves the value to ensure it was set correctly.
4. Deletes the key from the cache.
5. Attempts to retrieve the deleted key and verifies it no longer exists.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| testing | Provides testing functionality in Go |
| context | Used for creating a context for cache operations |
| github.com/stretchr/testify/assert | Provides assertion functions for tests |
| go.flipt.io/flipt/internal/config | Imports the `CacheConfig` type used in cache creation |

## Error Handling
The tests use `assert.NoError(t, err)` to check if any errors occurred during cache operations. This ensures that the cache functions are working correctly without throwing unexpected errors.