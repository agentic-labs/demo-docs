---
title: "Overview"
---

## High-level description
The `internal/cmd` directory contains the core command-line interface (CLI) implementation for Flipt, a feature flag management system. It includes functionality for authentication, gRPC and HTTP server setup, cloud integration, and various utility functions to support the application's operation.

## What does it do?
This directory implements the following key functionalities:

1. Authentication: Configures and sets up various authentication methods for both gRPC and HTTP servers, including token-based, OIDC, GitHub, Kubernetes, and JWT authentication.

2. Server Setup: Implements both gRPC and HTTP servers, handling configuration, middleware setup, and routing for various API endpoints.

3. Cloud Integration: Provides a cloud authentication flow using an OAuth-like Web Application approach, facilitating secure token retrieval and management.

4. CLI Utilities: Offers utility functions for user prompts, configuration management, and application setup.

5. SDK Generation: Includes a custom protocol buffer code generator plugin for creating a Go SDK for Flipt.

## Entry points
The main entry points for the Flipt application are:

1. `grpc.go`: Defines the `GRPCServer` struct and methods for configuring and running the gRPC server.
2. `http.go`: Implements the `HTTPServer` struct and methods for setting up and running the HTTP server.
3. `util/browser.go`: Contains the main functionality for setting up and running the Flipt application, including command-line interface setup and configuration management.

## Key Files

1. `authn.go`: Handles authentication configuration and setup for both gRPC and HTTP servers.

2. `grpc.go` and `http.go`: Implement the gRPC and HTTP servers respectively, including middleware, routing, and service configurations.

3. `cloud/` directory: Contains implementation for cloud authentication flow, including a local server for handling OAuth callbacks.

4. `util/` directory: Provides utility functions for CLI interactions and application setup.

5. `protoc-gen-go-flipt-sdk/` directory: Contains a custom protocol buffer code generator for creating a Go SDK for Flipt.

## Dependencies
The codebase relies on several key dependencies:

1. gRPC and related middleware for RPC communication
2. Chi router for HTTP routing
3. OpenTelemetry for metrics and tracing
4. Zap for logging
5. Cobra for CLI implementation
6. Various internal Flipt packages for storage, authentication, and evaluation

## Configuration
The application uses a flexible configuration system, allowing settings to be specified via:

1. Command-line flags
2. Configuration files (with a defined search order)
3. Environment variables

Key configurable aspects include:
- Authentication methods and settings
- Server configurations (gRPC and HTTP)
- Database and storage options
- Telemetry and logging settings
- Cloud connectivity options

The configuration system allows for easy customization and deployment across different environments.

In summary, the `internal/cmd` directory forms the core of Flipt's CLI and server implementation, providing a comprehensive set of tools for feature flag management, including authentication, API servers, cloud integration, and extensible configuration options.