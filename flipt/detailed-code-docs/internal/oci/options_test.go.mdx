---
title: "options_test.go"
---

## High-level description
This file contains unit tests for the `oci` package, specifically testing the `WithCredentials` and `WithManifestVersion` functions, as well as the `IsValid` method of the `AuthenticationType` type. The tests ensure that these functions and methods behave correctly under various input conditions.

## Symbols

### `TestWithCredentials`
#### Description
This function tests the `WithCredentials` function with different authentication types and credentials.

#### Internal Logic
1. Iterates through a list of test cases with different authentication types, usernames, and passwords.
2. For each test case:
   - Creates a new `StoreOptions` object.
   - Calls `WithCredentials` with the test case parameters.
   - Checks for expected errors or successful execution.
   - If successful, applies the returned option function to the `StoreOptions` object and verifies that the `auth` field is set correctly.

### `TestWithManifestVersion`
#### Description
This function tests the `WithManifestVersion` function to ensure it correctly sets the manifest version in the `StoreOptions` object.

#### Internal Logic
1. Creates a new `StoreOptions` object.
2. Calls `WithManifestVersion` with `oras.PackManifestVersion1_1`.
3. Applies the returned option function to the `StoreOptions` object.
4. Asserts that the `manifestVersion` field is set to the expected value.

### `TestAuthenicationTypeIsValid`
#### Description
This function tests the `IsValid` method of the `AuthenticationType` type.

#### Internal Logic
1. Checks that `AuthenticationTypeStatic` is valid.
2. Checks that `AuthenticationTypeAWSECR` is valid.
3. Checks that an empty `AuthenticationType` is not valid.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| testing | Provides testing framework |
| github.com/stretchr/testify/assert | Provides assertion functions for tests |
| oras.land/oras-go/v2 | Used for `PackManifestVersion1_1` constant |

## Error Handling
The tests check for specific error messages when invalid authentication types are provided to `WithCredentials`.