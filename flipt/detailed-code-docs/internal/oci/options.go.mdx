---
title: "options.go"
---

## High-level description
This code defines options and authentication mechanisms for interacting with OCI (Open Container Initiative) registries. It provides a flexible configuration system for setting up authentication credentials, including static credentials and AWS ECR (Elastic Container Registry) specific authentication.

## Code Structure
The code defines an `AuthenticationType` enum and `StoreOptions` struct, along with several functions to configure these options. The main symbols (`WithCredentials`, `WithStaticCredentials`, `WithAWSECRCredentials`, and `WithManifestVersion`) are used to create and configure `StoreOptions` for OCI operations.

## Symbols

### `AuthenticationType`
#### Description
An enum-like type representing different authentication methods for OCI registries.

#### Inputs
N/A (It's a type definition)

#### Outputs
N/A (It's a type definition)

### `AuthenticationType.IsValid()`
#### Description
Checks if the `AuthenticationType` is valid.

#### Inputs
N/A (It's a method on `AuthenticationType`)

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isValid | bool | Whether the authentication type is valid |

### `StoreOptions`
#### Description
A struct containing configuration options for OCI operations.

#### Inputs
N/A (It's a struct definition)

#### Outputs
N/A (It's a struct definition)

### `WithCredentials`
#### Description
Creates a configuration option for authentication based on the provided authentication type.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| kind | AuthenticationType | The type of authentication to use |
| user | string | Username for authentication |
| pass | string | Password for authentication |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| option | containers.Option[StoreOptions] | A function to configure StoreOptions |
| error | error | An error if the authentication type is unsupported |

### `WithStaticCredentials`
#### Description
Creates a configuration option for static username/password authentication.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user | string | Username for authentication |
| pass | string | Password for authentication |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| option | containers.Option[StoreOptions] | A function to configure StoreOptions |

### `WithAWSECRCredentials`
#### Description
Creates a configuration option for AWS ECR authentication.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| endpoint | string | The ECR endpoint |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| option | containers.Option[StoreOptions] | A function to configure StoreOptions |

### `WithManifestVersion`
#### Description
Creates a configuration option to set the OCI Manifest version.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| version | oras.PackManifestVersion | The OCI Manifest version to use |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| option | containers.Option[StoreOptions] | A function to configure StoreOptions |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| fmt | For error formatting |
| go.flipt.io/flipt/internal/containers | For Option type |
| go.flipt.io/flipt/internal/oci/ecr | For ECR-specific functionality |
| oras.land/oras-go/v2 | For OCI-related types and functions |
| oras.land/oras-go/v2/registry/remote/auth | For authentication-related types and functions |

## Error Handling
The code uses standard Go error handling. The `WithCredentials` function returns an error for unsupported authentication types.