---
title: "mock_credentialFunc.go"
---

## High-level description
The `mockCredentialFunc` is a mock implementation of the `credentialFunc` type, used for testing purposes. It allows simulating the behavior of functions that return an `auth.CredentialFunc` based on a given registry string.

## Code Structure
The `mockCredentialFunc` is a struct that embeds `mock.Mock` from the `github.com/stretchr/testify/mock` package. It has one method, `Execute`, which is a mock implementation of the `credentialFunc` interface. The `newMockCredentialFunc` function creates a new instance of `mockCredentialFunc` and registers it with the provided testing interface.

## References
- `oras.land/oras-go/v2/registry/remote/auth.CredentialFunc`: The type being mocked, representing a function that returns authentication credentials.

## Symbols

### `mockCredentialFunc`
#### Description
A mock implementation of the `credentialFunc` type for testing.

#### Inputs
None

#### Outputs
None

### `Execute`
#### Description
Simulates the execution of a `credentialFunc`, returning a mocked `auth.CredentialFunc` based on the input registry string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| registry | string | The registry string to use for generating the mock credential function. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| auth.CredentialFunc | `oras.land/oras-go/v2/registry/remote/auth.CredentialFunc` | A mocked credential function that can be used in tests. |

#### Internal Logic
- Calls the `Called` method of the embedded `mock.Mock` with the input `registry`.
- Retrieves the mocked return value from the `mock.Mock`.
- If the mocked return value is a function, it calls the function with the input `registry` and returns the result.
- Otherwise, it returns the mocked return value as an `auth.CredentialFunc`.

### `newMockCredentialFunc`
#### Description
Creates a new instance of `mockCredentialFunc` for testing.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| t | interface { mock.TestingT; Cleanup(func()) } | A testing interface that provides access to testing utilities. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| *mockCredentialFunc | `*mockCredentialFunc` | A pointer to the newly created `mockCredentialFunc` instance. |

#### Internal Logic
- Creates a new `mockCredentialFunc`.
- Calls the `Test` method of the embedded `mock.Mock` with the provided testing interface.
- Registers a cleanup function with the testing interface to assert the mock's expectations after the test is completed.
- Returns the newly created `mockCredentialFunc`.
