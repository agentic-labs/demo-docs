---
title: "Overview"
---

## High-level description
The `internal/ext` directory contains code for importing and exporting Flipt configuration data, as well as defining common data structures and encoding utilities. This package is crucial for managing feature flags, segments, and namespaces in the Flipt system.

## What does it do?
This package provides functionality for:

1. Defining core data structures for feature flags, segments, and namespaces.
2. Implementing custom encoding and decoding for YAML and JSON formats.
3. Exporting Flipt configuration data from a storage backend to a structured format.
4. Importing Flipt configuration data from structured formats into a storage backend.
5. Handling version compatibility and data validation during import and export operations.

## Entry points
The main entry points for this package are:

1. `exporter.go`: Defines the `Exporter` struct and `Export` method for exporting Flipt configurations.
2. `importer.go`: Defines the `Importer` struct and `Import` method for importing Flipt configurations.
3. `common.go`: Defines core data structures and interfaces used throughout the package.
4. `encoding.go`: Provides utilities for encoding and decoding data in YAML and JSON formats.

The data flow typically starts with either the `Export` method to retrieve configuration data from storage, or the `Import` method to populate storage with configuration data. These methods use the common data structures defined in `common.go` and the encoding utilities from `encoding.go` to process the data.

## Key Files
1. `common.go`: Defines essential structures like `Document`, `Flag`, `Segment`, and `Namespace`. It also implements custom marshaling and unmarshaling for YAML and JSON formats.

2. `encoding.go`: Provides a unified interface for encoding and decoding data in YAML and JSON formats, abstracting away the differences between underlying libraries.

3. `exporter.go`: Implements the `Exporter` struct and associated methods for exporting Flipt configuration data from a storage backend.

4. `importer.go`: Implements the `Importer` struct and associated methods for importing Flipt configuration data into a storage backend.

## Dependencies
The package relies on several external libraries:

1. `gopkg.in/yaml.v2`: For YAML encoding and decoding.
2. `encoding/json`: For JSON encoding and decoding.
3. `github.com/blang/semver/v4`: For semantic versioning.
4. `go.flipt.io/flipt/rpc/flipt`: For Flipt's RPC definitions.
5. `github.com/gofrs/uuid`: For generating UUIDs.
6. `google.golang.org/protobuf/types/known/structpb`: For working with protobuf structs.

## Configuration
The package uses configuration options defined in the data structures, such as:

1. Version information in the `Document` struct.
2. Encoding types (YAML and JSON) in the `Encoding` type.
3. Import options like `skipExisting` in the `Import` method.

These configurations allow for flexible handling of different data formats and import/export scenarios.

In summary, the `internal/ext` package provides a robust set of tools for managing Flipt configuration data, enabling seamless import and export of feature flags, segments, and namespaces across different formats and versions.