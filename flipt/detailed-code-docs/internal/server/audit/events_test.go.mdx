---
title: "events_test.go"
---

## High-level description
The `TestMarshalLogObject` function is a unit test that verifies the `MarshalLogObject` method of the `Event` struct correctly encodes event data into a `zapcore.ObjectEncoder`. This ensures that events can be properly logged in a structured format.

## Code Structure
The `TestMarshalLogObject` function tests the `MarshalLogObject` method of the `Event` struct, which is defined in the same package. The test creates an `Event` object and a `zapcore.ObjectEncoder`, then calls `MarshalLogObject` to encode the event data. Finally, it asserts that the encoded fields in the encoder match the expected values.

## Symbols

### `TestMarshalLogObject`
#### Description
This function is a unit test for the `MarshalLogObject` method of the `Event` struct. It verifies that the method correctly encodes event data into a `zapcore.ObjectEncoder`.

#### Inputs
This function takes a pointer to `testing.T` as input, which is used for reporting test results and errors.

#### Outputs
The function itself doesn't return any values. It uses the `testing.T` object to report the success or failure of the test assertions.

#### Internal Logic
1. **Arrange:**
    - Defines an `Actor` struct with a sample authentication method.
    - Creates an `Event` struct with sample data, including the defined `Actor`.
    - Creates a new `zapcore.MapObjectEncoder` to simulate a logging encoder.
2. **Act:**
    - Calls the `MarshalLogObject` method of the `Event` object, passing in the created encoder.
3. **Assert:**
    - Uses `require.NoError` to assert that the `MarshalLogObject` call didn't return an error.
    - Uses `assert.Equal` to verify that the encoded fields in the `zapcore.ObjectEncoder` match the expected values from the `Event` object. This includes checking the version, action, type, metadata, payload, timestamp, and status fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| github.com/stretchr/testify/assert | Provides assertion functions for testing. |
| github.com/stretchr/testify/require | Provides assertion functions that halt test execution on failure. |
| go.uber.org/zap/zapcore | Provides a structured logging encoder. |
