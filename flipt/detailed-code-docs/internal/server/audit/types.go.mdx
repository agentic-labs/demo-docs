---
title: "types.go"
---

## High-level description
The `internal/server/audit/types.go` file defines data types representing audit representations of Flipt entities (like flags, variants, segments, etc.). These representations are used for sending audit logs to different sinks. The file also includes helper functions to create these audit representations from their corresponding Flipt gRPC types.

## Code Structure
This file defines several struct types, each representing an audit-ready version of a Flipt entity. Each struct has a corresponding `New{Entity}` function that constructs the audit representation from the Flipt gRPC type.

## References
This code references the `flipt.io/flipt/rpc/flipt` package for Flipt gRPC types.

## Symbols

### `Flag`
#### Description
Represents an audit representation of a Flipt flag.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewFlag`
#### Description
Constructs a new `Flag` audit representation from a `flipt.Flag`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| f | `*flipt.Flag` | Pointer to a Flipt gRPC Flag object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Flag` | Pointer to the newly created `Flag` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Flag` to the `Flag` struct.

### `Variant`
#### Description
Represents an audit representation of a Flipt variant.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewVariant`
#### Description
Constructs a new `Variant` audit representation from a `flipt.Variant`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| v | `*flipt.Variant` | Pointer to a Flipt gRPC Variant object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Variant` | Pointer to the newly created `Variant` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Variant` to the `Variant` struct.

### `Constraint`
#### Description
Represents an audit representation of a Flipt constraint.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewConstraint`
#### Description
Constructs a new `Constraint` audit representation from a `flipt.Constraint`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| c | `*flipt.Constraint` | Pointer to a Flipt gRPC Constraint object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Constraint` | Pointer to the newly created `Constraint` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Constraint` to the `Constraint` struct. Converts the `Type` field from the gRPC enum to its string representation.

### `Namespace`
#### Description
Represents an audit representation of a Flipt namespace.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewNamespace`
#### Description
Constructs a new `Namespace` audit representation from a `flipt.Namespace`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| n | `*flipt.Namespace` | Pointer to a Flipt gRPC Namespace object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Namespace` | Pointer to the newly created `Namespace` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Namespace` to the `Namespace` struct.

### `Distribution`
#### Description
Represents an audit representation of a Flipt distribution.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewDistribution`
#### Description
Constructs a new `Distribution` audit representation from a `flipt.Distribution`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| d | `*flipt.Distribution` | Pointer to a Flipt gRPC Distribution object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Distribution` | Pointer to the newly created `Distribution` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Distribution` to the `Distribution` struct.

### `Segment`
#### Description
Represents an audit representation of a Flipt segment.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewSegment`
#### Description
Constructs a new `Segment` audit representation from a `flipt.Segment`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| s | `*flipt.Segment` | Pointer to a Flipt gRPC Segment object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Segment` | Pointer to the newly created `Segment` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Segment` to the `Segment` struct. Converts the `MatchType` field from the gRPC enum to its string representation. Iterates through the `Constraints` slice and creates `Constraint` audit representations for each.

### `Rule`
#### Description
Represents an audit representation of a Flipt rule.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewRule`
#### Description
Constructs a new `Rule` audit representation from a `flipt.Rule`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| r | `*flipt.Rule` | Pointer to a Flipt gRPC Rule object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Rule` | Pointer to the newly created `Rule` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Rule` to the `Rule` struct. Iterates through the `Distributions` slice and creates `Distribution` audit representations for each.

### `Rollout`
#### Description
Represents an audit representation of a Flipt rollout.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `RolloutThreshold`
#### Description
Represents the threshold information for a rollout.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `RolloutSegment`
#### Description
Represents the segment information for a rollout.

#### Inputs
N/A - This is a struct definition.

#### Outputs
N/A - This is a struct definition.

### `NewRollout`
#### Description
Constructs a new `Rollout` audit representation from a `flipt.Rollout`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| r | `*flipt.Rollout` | Pointer to a Flipt gRPC Rollout object. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
|  | `*Rollout` | Pointer to the newly created `Rollout` audit representation. |

#### Internal Logic
Copies relevant fields from the input `flipt.Rollout` to the `Rollout` struct. Determines the type of rollout rule (segment or threshold) and populates the corresponding fields in the `Rollout` struct.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `go.flipt.io/flipt/rpc/flipt` | Provides the Flipt gRPC types used for constructing the audit representations. |

## Error Handling
This code does not implement specific error handling beyond basic exception raising.

## Logging
This code does not implement logging.

## API/Interface Reference
This code does not expose an API or public interface.
