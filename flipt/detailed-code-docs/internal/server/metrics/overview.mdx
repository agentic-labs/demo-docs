---
title: "Overview"
---

## High-level description
The `metrics.go` file defines Prometheus and OpenTelemetry metrics used within the server package of the Flipt application. It includes metrics for tracking server errors, evaluation requests, errors, results, and latency.

## Code Structure
The code defines several metric variables within the `metrics` package. These variables are initialized using functions from the `internal/metrics` package, which provide a layer of abstraction for creating and managing metrics. The `metrics` package, in turn, uses the `prometheus` and `go.opentelemetry.io/otel` packages for instrumenting and exporting metrics.

## References
- `github.com/prometheus/client_golang/prometheus`: Used for defining and registering Prometheus metrics.
- `go.flipt.io/flipt/internal/metrics`: Provides helper functions for creating and managing metrics.
- `go.opentelemetry.io/otel/attribute`: Used for defining OpenTelemetry attributes.
- `go.opentelemetry.io/otel/metric`: Used for defining OpenTelemetry metrics.

## Symbols
### `namespace`
#### Description
A constant string defining the namespace for all metrics defined in this file.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The namespace is set to "flipt".

### `serverSubsystem`
#### Description
A constant string defining the subsystem for server-related metrics.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The subsystem is set to "server".

### `evaluationsSubsystem`
#### Description
A constant string defining the subsystem for evaluation-related metrics.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The subsystem is set to "evaluations".

### `ErrorsTotal`
#### Description
A Prometheus counter metric that tracks the total number of server errors.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The metric is initialized using the `metrics.MustInt64().Counter()` function, which creates a new Prometheus counter metric with the given name and description. The metric is registered with the default Prometheus registry.

### `EvaluationsTotal`
#### Description
A Prometheus counter metric that tracks the total number of evaluation requests.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The metric is initialized using the `metrics.MustInt64().Counter()` function, which creates a new Prometheus counter metric with the given name and description. The metric is registered with the default Prometheus registry.

### `EvaluationErrorsTotal`
#### Description
A Prometheus counter metric that tracks the total number of evaluation errors.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The metric is initialized using the `metrics.MustInt64().Counter()` function, which creates a new Prometheus counter metric with the given name and description. The metric is registered with the default Prometheus registry.

### `EvaluationResultsTotal`
#### Description
A Prometheus counter metric that tracks the total number of evaluation results.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The metric is initialized using the `metrics.MustInt64().Counter()` function, which creates a new Prometheus counter metric with the given name and description. The metric is registered with the default Prometheus registry.

### `EvaluationLatency`
#### Description
A Prometheus histogram metric that tracks the latency of individual evaluations in milliseconds.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The metric is initialized using the `metrics.MustFloat64().Histogram()` function, which creates a new Prometheus histogram metric with the given name, description, and unit. The metric is registered with the default Prometheus registry.

### `AttributeMatch`
#### Description
An OpenTelemetry attribute key for the "match" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "match".

### `AttributeFlag`
#### Description
An OpenTelemetry attribute key for the "flag" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "flag".

### `AttributeSegment`
#### Description
An OpenTelemetry attribute key for the "segment" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "segment".

### `AttributeReason`
#### Description
An OpenTelemetry attribute key for the "reason" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "reason".

### `AttributeValue`
#### Description
An OpenTelemetry attribute key for the "value" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "value".

### `AttributeNamespace`
#### Description
An OpenTelemetry attribute key for the "namespace" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "namespace".

### `AttributeType`
#### Description
An OpenTelemetry attribute key for the "type" attribute.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The attribute key is set to "type".
