---
title: "BacktestSubsitution.tsx"
---

## High-level description
This code defines a React component called `BacktestSubstitution` that visualizes the results of a backtest substitution experiment. It displays revenue data over time, revenue by metric, and top customer information using various charts and lists.

## Code Structure
The main component `BacktestSubstitution` receives `substitution` data as a prop and renders multiple sections:
1. Revenue Over Time (Line Chart)
2. Revenue By Metric (Pie Charts)
3. Top Customers (Lists)

## Symbols

### `BacktestSubstitution`
#### Description
A functional component that renders visualizations for backtest substitution results.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| substitution | SpecificResults | Contains the results of the backtest substitution experiment |

#### Internal Logic
1. Formats data for display using utility functions.
2. Uses `useState` and `useEffect` hooks to manage and process data for charts.
3. Renders multiple sections with charts and lists using Tremor and Ant Design components.

### Utility Functions
#### `dataFormatter`
Formats a number as a currency string.

#### `dataFormatterNumber`
Rounds a number to two decimal places.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the component |
| @tremor/react | UI components for charts and layout |
| @ant-design/plots | Used for Pie charts |
| SpecificResults | Type definition from local types |

## Configuration
The component includes configuration objects for pie charts (`pieConfigNew` and `pieConfigOld`) that define their appearance and behavior.

## Performance Considerations
The component uses `useEffect` to process data when the `substitution.results.cumulative_revenue` changes, which helps to avoid unnecessary re-computations.

## TODOs
There are no explicit TODOs in the code, but potential improvements could include:
1. Memoization of expensive computations or rendered components.
2. Error handling for missing or incomplete data.
3. Accessibility improvements for charts and lists.