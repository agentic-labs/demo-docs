---
title: "ExperimentDetails.tsx"
---

## High-level description
This code defines a React component called `ExperimentDetails` that displays detailed information about an experiment's results. It includes visualizations for revenue over time, revenue by metric, and top customers for different plans.

## Code Structure
The main `ExperimentDetails` component uses several React hooks (useState, useEffect) to manage state and side effects. It renders multiple sections with charts and data tables based on the provided experiment data.

## Symbols

### ExperimentDetails
#### Description
A React functional component that renders detailed information about an experiment's results.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | components["schemas"]["AnalysisResults"] | The analysis results data for the experiment |
| kpi | string | The key performance indicator being analyzed |

#### Internal Logic
1. Initializes state variables for revenue line graph, revenue per metric, and categories.
2. Uses `useEffect` to process the input data and update the state variables.
3. Renders multiple sections:
   - Revenue over time (Line chart)
   - Revenue by metric (Pie charts)
   - Top Customers (Data tables)

### getPlanData
#### Description
A helper function that retrieves plan-specific data for revenue by metric charts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| planName | string | The name of the plan to retrieve data for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| planData | { metric_name: string; revenue: number }[] | Array of metric names and their corresponding revenue for the specified plan |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the component |
| @tremor/react | UI components for data visualization |
| @ant-design/plots | Chart components (Line, Pie) |

## Performance Considerations
The component processes large datasets and renders multiple charts, which could impact performance for large experiments. Consider implementing pagination or lazy loading for larger datasets to improve initial load times.