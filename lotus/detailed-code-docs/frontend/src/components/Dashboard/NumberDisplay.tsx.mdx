---
title: "NumberDisplay.tsx"
---

## High-level description
The `NumberDisplay` component displays a numeric metric with a percentage change compared to a previous period. It also handles the loading state and optional currency formatting.

## Code Structure
The `NumberDisplay` component uses several helper functions: `computePercentageChange`, `displayMetric`, and `renderMetric`. It also utilizes the `PlaceholderLoader` component for displaying a loading state and the `Paper` component for styling.

## References
- `ContentLoader` from "react-content-loader"
- `LoadingSpinner` from "../LoadingSpinner"
- `Paper` from "../base/Paper"

## Symbols

### `computePercentageChange`
#### Description
Calculates the percentage change between two numbers.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| current | number \| undefined | The current value. |
| previous | number \| undefined | The previous value. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| percentageChange | number | The percentage change between the two values. |

#### Internal Logic
- If the previous value is 0, or either value is undefined, returns 0.
- Otherwise, calculates the percentage change using the formula: `((current - previous) / previous) * 100`.

### `displayMetric`
#### Description
Returns the metric value or 0 if the metric is undefined.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metric | number \| undefined | The metric value. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metric \| 0 | number | The metric value or 0 if undefined. |

### `renderMetric`
#### Description
Formats the metric value with optional currency formatting.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metric | number \| undefined | The metric value. |
| currency | string | Optional currency code (e.g., "USD"). |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formattedMetric | string \| number | The formatted metric value. |

#### Internal Logic
- If the metric is undefined, returns 0.
- If a currency code is provided, formats the metric as currency using `Intl.NumberFormat`.
- Otherwise, returns the metric value as is.

### `PlaceholderLoader`
#### Description
Renders a placeholder loading animation using `ContentLoader`.

#### Inputs
- Uses the props passed to the `ContentLoader` component.

#### Outputs
- Renders a placeholder loading animation.

### `NumberDisplay`
#### Description
Displays a numeric metric with a percentage change compared to a previous period.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metric_1 | number \| undefined | The current metric value. |
| metric_2 | number \| undefined | The previous metric value. |
| isLoadingMetric1 | boolean | Indicates if the current metric is loading. |
| isLoadingMetric2 | boolean | Indicates if the previous metric is loading. |
| title | string | The title of the metric. |
| currency | string | Optional currency code for formatting. |

#### Outputs
- Renders a styled numeric display with loading state and percentage change.

#### Internal Logic
- Uses `useState` to manage the percentage change value.
- Uses `useEffect` to calculate the percentage change when `metric_1` or `metric_2` changes.
- Renders a loading placeholder if `isLoadingMetric1` is true.
- Otherwise, renders the metric value, percentage change, and previous period label.
- Uses `renderMetric` to format the metric value with optional currency.

## Dependencies
- react
- react-content-loader
- ../LoadingSpinner
- ../base/Paper

## Side Effects
- None.

## Error Handling
- The component handles undefined metric values by displaying 0.

## Logging
- No logging implemented.
