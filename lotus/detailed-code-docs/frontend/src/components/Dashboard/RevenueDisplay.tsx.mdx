---
title: "RevenueDisplay.tsx"
---

## High-level description
The `RevenueDisplay` component displays earned revenue metrics, including the current period's value and the percentage change compared to the previous period. It also provides a visual loading state while fetching data.

## Code Structure
The `RevenueDisplay` component utilizes two helper functions, `computePercentageChange` and `displayMetric`, to calculate and format the displayed values. It receives revenue data and a loading state as props and renders a styled card containing the revenue information.

## Symbols

### `computePercentageChange`
#### Description
Calculates the percentage change between two given numbers.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| current | number \| undefined | The current value. |
| previous | number \| undefined | The previous value. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| percentageChange | number | The calculated percentage change. Returns 0 if any input is undefined or previous is 0. |

#### Internal Logic
The function first checks for edge cases where either input is undefined or the previous value is 0. In these cases, it returns 0 to avoid division by zero errors. Otherwise, it calculates the percentage change using the formula: `((current - previous) / previous) * 100`.

### `displayMetric`
#### Description
Handles the display of a metric, returning 0 if the metric is undefined.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metric | number \| undefined | The metric value to display. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| displayedMetric | number | The metric value or 0 if the input is undefined. |

### `RevenueDisplay`
#### Description
A React component that displays earned revenue information, including the current value and percentage change compared to the previous period.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | object | An object containing the following properties: |
| props.total_revenue_1 | number \| undefined | The total revenue for the current period. |
| props.total_revenue_2 | number \| undefined | The total revenue for the previous period. |
| props.earned_revenue_1 | number \| undefined | The earned revenue for the current period. |
| props.earned_revenue_2 | number \| undefined | The earned revenue for the previous period. |
| props.isLoading | boolean | A flag indicating whether data is being loaded. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSX.Element | React component | A styled card displaying the earned revenue information. |

#### Internal Logic
The component uses the `useState` and `useEffect` hooks to manage the percentage change calculation and update it whenever the earned revenue values change. It renders a `Paper` component to display the information in a card format. If `isLoading` is true, it shows a `LoadingSpinner`. Otherwise, it displays the earned revenue for the current period, formatted as US currency, along with the calculated percentage change compared to the previous period. The percentage change is visually styled in green for positive changes and red for negative changes.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Provides React library functions for building the component. |
| react-spinners | Provides the `PropagateLoader` component for displaying a loading spinner. |
| ../LoadingSpinner | Imports the custom `LoadingSpinner` component. |
| ../base/Paper | Imports the custom `Paper` component for styling. |

## Error Handling
The code does not implement specific error handling beyond the default behavior of React for handling errors during rendering.

## Logging
The code does not implement any logging mechanisms.
