---
title: "CustomerTable.tsx"
---

## High-level description
This code defines a React component called `CustomerTable` that displays a table of customer information. It includes functionality for searching, sorting, and displaying customer details such as customer ID, name, subscriptions, outstanding revenue, and subscription renewal status.

## Code Structure
The main `CustomerTable` component uses various hooks (useState, useEffect, useQuery) and Ant Design components (ProTable, Input, Tag) to create an interactive table. It also includes helper functions for data formatting and filtering.

## Symbols

### `CustomerTable`
#### Description
The main functional component that renders the customer table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| customerArray | CustomerSummary[] | Array of customer summary data |
| totals | CustomerTotal[] | Array of customer total data |

#### Internal Logic
1. Initializes state variables for search query, table data, and customer visibility.
2. Uses useEffect to process input data and set table data.
3. Defines table columns with custom rendering for each field.
4. Implements search functionality using the `getFilteredTableData` function.
5. Renders the ProTable component with the processed data and defined columns.

### `getHighlightedText`
#### Description
A helper function that highlights searched text within a given string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| text | string | The text to search within |
| highlight | string | The search query to highlight |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| highlightedText | React.ReactNode | Text with highlighted search query |

### `getFilteredTableData`
#### Description
Filters the table data based on the search query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | CustomerTableItem[] | The original table data |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| filteredData | CustomerTableItem[] | Filtered table data based on search query |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the component |
| @ant-design/pro-components | Provides the ProTable component |
| antd | UI components like Input and Tag |
| @tanstack/react-query | Data fetching and state management |
| react-router-dom | Navigation between routes |

## Performance Considerations
The component uses React Query for efficient data fetching and caching. It also implements client-side searching and filtering to reduce server load for simple queries.