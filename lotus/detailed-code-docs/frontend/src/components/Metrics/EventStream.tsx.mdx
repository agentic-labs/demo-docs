---
title: "EventStream.tsx"
---

## High-level description
This code defines a React component called `EventStream` that displays a stream of events with pagination and search functionality. It utilizes custom hooks for debouncing and managing the event stream, and includes components for rendering individual event instances and copying text to clipboard.

## Code Structure
The main `EventStream` component uses the `useEventStream` hook to manage the event data and pagination. It renders a search input, streaming control button, and a list of `EventInstance` components. The `EventInstance` component displays individual event details using the Ant Design `Collapse` component.

## Symbols

### `timeSince`
#### Description
A utility function that calculates the time elapsed since a given date and returns it in a human-readable format.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| date | Date | The date to calculate the elapsed time from |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| elapsed | string | The elapsed time in a human-readable format (e.g., "5m" for 5 minutes) |

### `EventInstance`
#### Description
A React component that renders an individual event instance using the Ant Design `Collapse` component.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| instance | EventPreviewType | The event data to be displayed |

### `EventStream`
#### Description
The main React component that renders the event stream interface, including search functionality and pagination controls.

#### Internal Logic
1. Uses the `useEventStream` hook to manage event data and pagination
2. Renders a search input for filtering events by customer ID or idempotency ID
3. Displays a button to start/stop streaming events
4. Renders a list of `EventInstance` components for each event in the current page
5. Provides pagination controls to navigate through the event list

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the user interface |
| antd | UI component library for styling and layout |
| useDebounce | Custom hook for debouncing search input |
| useEventStream | Custom hook for managing event stream data and pagination |
| CopyText | Custom component for copying text to clipboard |

## Performance Considerations
The component uses debouncing for the search input to reduce unnecessary API calls. It also implements pagination to limit the number of events rendered at once, improving performance for large datasets.

## Error Handling
The code doesn't explicitly handle errors. Error handling might be implemented in the `useEventStream` hook or at a higher level in the application.

## Logging
There is no explicit logging implemented in this component.

## TODOs
- The commented-out import of `LoadingSpinner` suggests that loading state handling might be a future improvement.

This component provides a comprehensive interface for viewing and searching through event streams, with features like real-time updates, pagination, and easy copying of event details.