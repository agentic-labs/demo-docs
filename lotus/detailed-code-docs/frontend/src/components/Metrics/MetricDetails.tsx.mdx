---
title: "MetricDetails.tsx"
---

## High-level description
This code defines a React component called `MetricDetails` that displays detailed information about a metric in a modal. It allows users to view and interact with metric data, including the option to archive a metric.

## Code Structure
The main component `MetricDetails` uses various Ant Design components and custom hooks. It renders different content based on the metric type (custom or not) and includes functionality to format SQL queries and handle metric archiving.

## References
- `MetricType` from "../../types/metric-type"
- `Metrics` from "../../api/api"
- `colorMap` from "./MetricTable"
- `createShortenedText` from "../../helpers/createShortenedText"
- `CopyText` from "../base/CopytoClipboard"
- `useMediaQuery` from "../../hooks/useWindowQuery"

## Symbols

### MetricDetails
#### Description
A functional component that displays detailed information about a metric in a modal dialog.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metric | MetricType | The metric object to display details for |
| onclose | () =&gt; void | Function to call when closing the modal |

#### Internal Logic
1. Uses `useMutation` hook to handle metric archiving.
2. Formats SQL if the metric is custom.
3. Renders different content based on the metric type (custom or not).
4. Displays various metric properties and filters.
5. Provides an option to archive the metric.

### operatorDisplayMap
#### Description
A Map that translates operator codes to their display symbols.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | For handling API mutations |
| react-toastify | For displaying toast notifications |
| sql-formatter | For formatting SQL queries |
| antd | For UI components (Modal, Tag, Button) |

## Error Handling
The component uses react-toastify to display error messages if the metric archiving fails.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| app/metrics/${metric_id}/ | PATCH | { status: "archived" } | object | Archives a metric |

This component provides a detailed view of a metric, allowing users to inspect various properties and archive the metric if needed. It adapts its display based on the metric type and window size, providing a responsive and informative interface for metric management.