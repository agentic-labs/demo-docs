---
title: "AddCurrencyModal.tsx"
---

## High-level description
This code defines a React component called `AddCurrencyModal` that allows users to add a new currency to a plan version. It uses the Ant Design library for UI components and React Query for data fetching and state management.

## Code Structure
The main component `AddCurrencyModal` uses several hooks and components:
- `useState` for local state management
- `useMutation` and `useQueryClient` from React Query for handling API mutations
- Ant Design's `Modal` and `Button` components for the UI
- A custom `PricingUnitDropDown` component for selecting currencies

## Symbols

### AddCurrencyModal
#### Description
A modal component that allows users to add a new currency to a plan version.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| showModal | boolean | Controls the visibility of the modal |
| version | number | The version number of the plan |
| setShowModal | function | Function to update the modal's visibility |
| plan_id | string | The ID of the plan |
| version_id | string | The ID of the plan version |

#### Internal Logic
1. Uses `useState` to manage the selected currency.
2. Uses `useMutation` to handle the API call for creating a new version with the selected currency.
3. Renders a modal with a currency dropdown and confirmation buttons.
4. On submission, calls the mutation function and closes the modal.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| antd | UI components (Modal, Button) |
| @tanstack/react-query | Data fetching and state management |
| ../../../api/api | API functions for interacting with the backend |
| ../../../gen-types | Type definitions |
| ../../PricingUnitDropDown | Custom component for currency selection |

## Error Handling
The component doesn't implement explicit error handling. Errors from the API call would be handled by React Query's built-in error management.

## Performance Considerations
The component uses React Query for efficient data fetching and caching. The mutation is set up to invalidate related queries on success, ensuring that the UI reflects the updated data.

This component is relatively simple and doesn't have any significant performance concerns. However, for larger applications, consider memoizing the component or its child components if they are re-rendered frequently.