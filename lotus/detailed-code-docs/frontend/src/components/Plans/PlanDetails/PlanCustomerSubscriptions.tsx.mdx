---
title: "PlanCustomerSubscriptions.tsx"
---

## High-level description
This code defines a React component called `PlanCustomerSubscriptions` that displays current subscriptions for a specific plan version. It fetches subscription data using React Query and renders it in a table format using Ant Design components.

## Code Structure
The main component `PlanCustomerSubscriptions` uses React hooks and Ant Design components to fetch and display subscription data. It utilizes the `Plan.subscriptionsPlanVersions` API call to retrieve subscription information.

## Symbols

### PlanCustomerSubscriptions
#### Description
A functional component that displays current subscriptions for a specific plan version.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| plan_id | string | The ID of the plan |
| version_id | string | The ID of the plan version |

#### Internal Logic
1. Uses React Query's `useQuery` hook to fetch subscription data.
2. Stores the fetched data in a `tableData` state.
3. Renders a table with subscription information if data is available, otherwise displays a "No subscriptions" message.

#### Performance Considerations
The component uses `refetchOnMount: "always"` which may cause unnecessary API calls if the component is frequently unmounted and remounted.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| antd | UI components (Typography, Table, Tag) |
| @tanstack/react-query | Data fetching and state management |
| ../../../api/api | API calls (Plan.subscriptionsPlanVersions) |
| ../../../gen-types | Type definitions |
| ../../../helpers/capitalize | Utility function for text capitalization |
| ../../../helpers/createShortenedText | Utility function for shortening text |
| ../../base/Badges/Badges | Custom Badge component |

## Error Handling
The component doesn't implement explicit error handling for the API call. It relies on React Query's default error handling behavior.

This component provides a concise view of current subscriptions for a specific plan version, allowing users to quickly see customer information and subscription status.