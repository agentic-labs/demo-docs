---
title: "SwitchVersions.tsx"
---

## High-level description
This code defines a React component called `SwitchVersions` that allows users to switch between different versions of a plan, view plan details, and manage plan components, features, and subscriptions. It provides functionality to add new versions, currencies, and manage alerts for plan components.

## Code Structure
The main `SwitchVersions` component renders a UI for switching between plan versions and displays various sub-components for plan details. It uses several hooks for state management and API calls. The component interacts with other components like `PlanSummary`, `PlanInfo`, `PlanRecurringCharges`, `PlanComponents`, `PlanFeatures`, and `PlanCustomerSubscriptions` to display different aspects of the plan.

## Symbols

### SwitchVersions
#### Description
The main component that handles version switching and displays plan details.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| versions | components["schemas"]["PlanDetail"]["versions"] | Array of plan versions |
| plan | components["schemas"]["PlanDetail"] | Plan details |
| refetch | VoidFunction | Function to refetch data |
| activeKey | string | Active key for tabs |
| className | string | CSS class name |
| createPlanExternalLink | (link: string) =&gt; void | Function to create external link |
| deletePlanExternalLink | (link: string) =&gt; void | Function to delete external link |

#### Internal Logic
1. Manages state for selected version, dropdown versions, and modals
2. Handles version switching and currency selection
3. Renders version selector UI and plan detail components
4. Manages alerts for plan components

### getPriceAdjustmentEnding
#### Description
Utility function to format price adjustment text based on type and amount.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| type | string | undefined | Type of price adjustment |
| amount | number | undefined | Amount of price adjustment |
| code | string | Currency code |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string | Formatted price adjustment text |

### capitalize
#### Description
Utility function to capitalize the first letter of a word.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| word | string | Input word to capitalize |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | string | Capitalized word |

## Dependencies
- React and various hooks (useCallback, useEffect, useRef, useState)
- React Router DOM
- Ant Design components
- React Query
- Custom components (PlanComponents, PlanFeatures, etc.)
- API functions from "../../../api/api"

## Error Handling
The code uses React Query's error handling mechanisms for API calls. There's no explicit try-catch blocks in the component itself.

## Performance Considerations
- Uses React Query for efficient data fetching and caching
- Implements useCallback and useEffect hooks to optimize re-renders
- Uses memoization for certain functions to prevent unnecessary recalculations

## TODOs
There are commented-out code sections that might indicate potential future improvements or features to be implemented.