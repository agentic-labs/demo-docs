---
title: "DeleteVersionModal.tsx"
---

## High-level description
This code defines a React component called `DeleteVersionModal` that renders a modal dialog for confirming the deletion of a plan version. It uses the Ant Design library for UI components and React Query for data management.

## Code Structure
The `DeleteVersionModal` component is the main export of this file. It uses hooks from React and React Query to manage state and perform API calls. The component renders an Ant Design Modal with confirmation buttons and a checkbox for user confirmation.

## Symbols

### DeleteVersionModal
#### Description
A React functional component that renders a modal dialog for confirming the deletion of a plan version.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| showModal | boolean | Controls the visibility of the modal |
| plan_id | string | The ID of the plan |
| version_id | string | The ID of the version to be deleted |
| setShowModal | (show: boolean) =&gt; void | Function to update the modal's visibility |

#### Internal Logic
1. Uses React Query's `useQueryClient` and `useMutation` hooks to manage the deletion operation.
2. Maintains a local state `checked` to track the confirmation checkbox.
3. Renders an Ant Design Modal with custom footer buttons.
4. Disables the confirm button until the checkbox is checked.
5. On confirmation, calls the `Plan.deletePlanVersion` API and invalidates related queries.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| antd | UI components (Modal, Button) |
| @tanstack/react-query | Data fetching and state management |
| ../../../api/api | API functions for plan operations |

## Error Handling
The component doesn't implement explicit error handling for the API call. It relies on React Query's built-in error handling mechanisms.

## Side Effects
When the deletion is confirmed and successful, the component invalidates several queries to refresh related data:
- 'plan_list'
- ["plan_subscriptions_get", version_id]
- ["plan_detail", plan_id]

This ensures that the UI is updated to reflect the deletion of the plan version.