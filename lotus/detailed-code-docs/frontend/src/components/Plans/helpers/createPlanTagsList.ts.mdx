---
title: "createPlanTagsList.ts"
---

## High-level description
This code defines a function `createPlanTagsList` that combines and processes tags from a plan and organization-level plan types. It creates a list of tags with additional information about their source and handles duplicate tags.

## Code Structure
The main function `createPlanTagsList` takes two parameters: `planTags` and `orgPlanTypes`. It processes these inputs to create a combined list of tags with additional metadata.

## Symbols

### createPlanTagsList
#### Description
This function combines plan-specific tags with organization-level plan types, adding metadata about the source of each tag and handling duplicates.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| planTags | any | Tags specific to a plan |
| orgPlanTypes | components["schemas"]["PlanDetail"]["tags"] | Organization-level plan types |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tags | Array&lt;{ tag_name: string, tag_hex: string, from: string }&gt; | Combined list of tags with metadata |

#### Internal Logic
1. Create `pt` by mapping `planTags` and adding a "from" property set to "plans".
2. Create `flat` by extracting tag names from `planTags`.
3. Create `opt` by mapping `orgPlanTypes` and adding a "from" property set to "org".
4. Combine `pt` and `opt` into `t`.
5. Filter `t` to get `nonDistinctTags` (org tags not in `flat`).
6. Filter `t` to get `distinctTags` (plan tags).
7. Combine `nonDistinctTags` and `distinctTags` into the final `tags` array.

## Dependencies
The code imports types from "../../../gen-types", specifically the `components` type.

Note: The code uses TypeScript and assumes the presence of certain type definitions from the imported module.