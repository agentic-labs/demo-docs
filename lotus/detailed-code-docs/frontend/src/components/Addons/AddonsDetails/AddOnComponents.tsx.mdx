---
title: "AddOnComponents.tsx"
---

## High-level description
The `AddOnComponents` component displays a list of components associated with an add-on plan. It presents the pricing tiers for each component in a table format and allows users to set usage alerts for counter-type metrics.

## Code Structure
The `AddOnComponents` component uses several helper functions: `findAlertForComponent` to retrieve the alert associated with a component, `renderCost` to format the cost display based on the tier type, and `deleteAlert` to handle alert deletion. It also utilizes the `useMutation` hook from `@tanstack/react-query` for creating and deleting alerts.

## Symbols
### `AddOnComponents`
#### Description
This functional component renders the details of components added to an add-on plan. It displays the components in a grid layout, with each component showing its billable metric, pricing tiers, and an option to set usage alerts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| components | `components["schemas"]["AddOnDetail"]["versions"][0]["components"]` | An array of components associated with the add-on plan. |
| plan | `components["schemas"]["AddOnDetail"]` | The add-on plan details. |
| refetch | `VoidFunction` | A function to refetch the add-on plan details. |
| alerts | `AlertType[]` | An array of usage alerts associated with the plan. |
| plan_version_id | `string` | The ID of the plan version. |

#### Outputs
This component renders JSX that represents the add-on components section.

#### Internal Logic
1. **Conditional Rendering:** Checks if `components` exist and have a length greater than 0. If true, renders the components section; otherwise, renders a message indicating no components added.
2. **Component Mapping:** Iterates through the `components` array and renders each component's details.
3. **Pricing Tier Display:** For each component, renders a table displaying its pricing tiers using the `renderCost` helper function to format the cost based on the tier type.
4. **Usage Alert (Commented Out):** The code includes a commented-out section that previously handled setting usage alerts for components. This functionality seems to have been removed or disabled.
5. **Modal for Alert Setting (Commented Out):** The code also includes a commented-out modal component that was likely used for setting and managing usage alerts.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core library for building user interfaces. |
| @tanstack/react-query |  A library for fetching, caching, and updating asynchronous data in React applications. |
| react-toastify | A library for displaying toast notifications. |
| antd | A UI library for React with a set of high-quality components. |
| ../../../api/api | Custom API client for interacting with the backend. |
| ../../../types/alert-type | TypeScript types for alert-related data. |
| ../../../types/plan-type | TypeScript types for plan-related data. |
| ../../base/Select/Select | Custom select component. |
| ../../../types/pricing-unit-type | TypeScript types for pricing unit data. |
| ../../../gen-types | Auto-generated TypeScript types from an OpenAPI specification. |

## TODOs
- The code contains commented-out sections related to usage alerts. It's unclear if this functionality is intended to be removed or re-implemented. Further investigation is needed to determine the intended behavior.
