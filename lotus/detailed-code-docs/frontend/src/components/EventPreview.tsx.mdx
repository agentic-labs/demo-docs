---
title: "EventPreview.tsx"
---

## High-level description
This code defines a React component called `EventPreview` that displays a paginated list of event previews. It fetches event data from an API, allows users to navigate through pages of events, and provides a refresh functionality.

## Code Structure
The main component `EventPreview` uses React hooks (useState, useEffect) and react-query for state management and data fetching. It renders a list of events using Ant Design components (Collapse, Button) and custom components (LoadingSpinner, CustomPagination, CopyText).

## References
- `Events` API from "../api/api"
- `EventPages` and `EventPreviewType` from "../types/event-type"
- Custom components: LoadingSpinner, CustomPagination, CopyText

## Symbols

### EventPreview
#### Description
A functional component that fetches and displays a paginated list of event previews.

#### Internal Logic
1. Initializes state for cursor, current page, next and previous page links.
2. Fetches event data using react-query's `useQuery` hook.
3. Renders loading state, empty state, or list of events based on the fetched data.
4. Implements pagination logic with `handleMovements` function.
5. Provides a refresh button to invalidate and refetch the query.

#### Performance Considerations
Uses react-query for efficient data fetching and caching, with a refetch interval of 30 seconds.

## Side Effects
- Fetches data from an external API
- Updates query client cache on refresh and pagination

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core library for building the component |
| @tanstack/react-query | Data fetching and state management |
| antd | UI components (Button, Collapse, Divider) |
| dayjs | Date formatting |

## Error Handling
The component handles loading and empty states, but there's no explicit error handling for failed API requests.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| app/events/ | GET | cursor (optional) | EventPages | Fetches paginated event previews |

This component provides a user interface for viewing and navigating through event previews, with features like pagination, refresh, and expandable event details. It uses react-query for efficient data fetching and state management, and Ant Design components for the UI.