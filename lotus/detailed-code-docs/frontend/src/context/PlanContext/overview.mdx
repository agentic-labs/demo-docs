---
title: "Overview"
---

## High-level description
The `frontend/src/context/PlanContext` directory contains the implementation of a React context for managing plan-related state in a frontend application. It provides a comprehensive solution for handling plans, plan versions, experiment names, date ranges, and related functionality using React's Context API and the reducer pattern.

## What does it do?
This context manages the state of plans and their versions in a React application. It allows components to:
1. Access the current plan and its version
2. Set and access a replacement plan and its version
3. Manage experiment names and date ranges
4. Handle substitution changes
5. Initialize the plan state

The context provides a centralized state management solution, making it easy for components throughout the application to access and update plan-related data without prop drilling.

## Entry points
The main entry point for this context is the `index.ts` file, which re-exports all the components and types from the other files in the directory. The key components and hooks exposed are:

1. `PlanProvider`: A React component that wraps the application and provides the plan state and updater functions to its children.
2. `usePlanState`: A custom hook for accessing the current plan state.
3. `usePlanUpdater`: A custom hook for accessing functions to update the plan state.

The data flow in this context follows the reducer pattern:
1. Components use the `usePlanUpdater` hook to dispatch actions.
2. These actions are processed by the `planReducer` function in `reducer.ts`.
3. The reducer updates the state based on the action type and payload.
4. Components can then access the updated state using the `usePlanState` hook.

## Key Files
1. `context.tsx`: Defines the `PlanProvider` component and the custom hooks `usePlanState` and `usePlanUpdater`.
2. `reducer.ts`: Implements the `planReducer` function, which handles state updates based on dispatched actions.
3. `actions.ts`: Defines action creator functions for updating various aspects of the plan state.
4. `state.ts`: Specifies the initial state for the plan context.
5. `types.ts`: Contains TypeScript type definitions and enums used throughout the context implementation.

## Configuration
The initial configuration for the plan context is defined in `state.ts`. It sets up default values for various plan-related properties:

```typescript
const initialState: State = {
  currentPlan: null,
  currentPlanVersion: null,
  replacementPlan: null,
  replacementPlanVersion: null,
  onSubstitutionChange: null,
  experimentName: randomName,
  dateRange: null,
};
```

The `experimentName` is initialized with a randomly generated name, while other properties are set to `null` by default.

This context provides a flexible and type-safe way to manage plan-related state in a React application, allowing for easy access and updates to plan data throughout the component tree.