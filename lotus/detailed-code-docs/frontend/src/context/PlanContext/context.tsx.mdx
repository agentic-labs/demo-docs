---
title: "context.tsx"
---

## High-level description
This code defines a React context for managing plan-related state in a frontend application. It provides a PlanProvider component that wraps the application and exposes hooks for accessing and updating the plan state.

## Code Structure
The code defines a PlanProvider component that uses React's Context API to manage and share plan-related state. It also exports custom hooks (usePlanState and usePlanUpdater) for consuming this state and actions to update it.

## Symbols

### PlanProvider
#### Description
A React component that provides the plan state and updater functions to its children using React Context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| children | React.ReactNode | Child components to be wrapped by the provider |

#### Internal Logic
1. Initializes state using React.useReducer with planReducer and initialState
2. Dispatches an INIT action on mount
3. Memoizes action creators
4. Renders PlanStateContext.Provider and PlanUpdaterContext.Provider, passing state and actions respectively

### usePlanState
#### Description
A custom hook that provides access to the current plan state.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| state | State | The current plan state |

#### Internal Logic
Uses React.useContext to access the PlanStateContext and throws an error if used outside of a PlanProvider.

### usePlanUpdater
#### Description
A custom hook that provides access to the plan state updater functions.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| actions | ActionCreators | Object containing functions to update the plan state |

#### Internal Logic
Uses React.useContext to access the PlanUpdaterContext and throws an error if used outside of a PlanProvider.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the UI components |
| planReducer | Reducer function for updating the plan state |
| initialState | Initial state for the plan context |
| State, ActionCreators, ActionTypes | Type definitions for the plan state and actions |
| setCurrentPlan, setCurrentPlanVersion, setReplacementPlanVersion, init, setOnSubstitutionChangeFn, setReplacementPlan, setExperimentName, setDateRange | Action creator functions for updating the plan state |
| PlanType, PlanVersionType | Type definitions for plan and plan version data |

## Error Handling
The usePlanState and usePlanUpdater hooks throw errors if they are used outside of a PlanProvider, ensuring that the context is properly set up before it's accessed.

This code provides a robust state management solution for plan-related data in a React application, allowing for easy access and updates to the plan state throughout the component tree.