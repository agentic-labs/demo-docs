---
title: "plan-type.ts"
---

This code represents a complex React application for managing pricing plans and subscriptions. Here's a high-level description of the main functionality:

The application allows users to create, view, edit, and manage pricing plans for a subscription-based service. It includes features for creating plan versions, setting up components (usage-based pricing), defining recurring charges, adding features, and managing customer subscriptions. The application also supports experimentation with backtests and custom plans.

## Code Structure

The code is organized into several interconnected components and types:

1. Main components:
   - CreatePlan: Handles the creation of new plans
   - EditPlan: Manages editing existing plans and creating new versions
   - ViewPlans: Displays a list of all plans
   - CustomerDetail: Shows detailed information about a customer and their subscriptions

2. Supporting components:
   - UsageComponentForm: Manages the creation and editing of usage-based pricing components
   - FeatureForm: Handles adding features to plans
   - RecurringChargeForm: Manages recurring charges for plans
   - PlanCard: Displays individual plan information in a card format

3. Types:
   - Various interfaces and types are defined to represent plans, components, features, subscriptions, and other related entities

4. API:
   - The `api.ts` file contains functions for making API calls to the backend server

5. Context:
   - PlanContext: Manages global state related to plans

## Symbols

### CreatePlan

#### Description
A component for creating new pricing plans.

#### Internal Logic
1. Manages form state for plan creation
2. Handles adding components, features, and recurring charges
3. Submits the plan creation request to the API

### EditPlan

#### Description
A component for editing existing plans or creating new versions of plans.

#### Internal Logic
1. Loads existing plan data
2. Manages form state for plan editing
3. Handles updating components, features, and recurring charges
4. Submits plan updates or creates new versions

### ViewPlans

#### Description
A component for displaying a list of all plans.

#### Internal Logic
1. Fetches plan data from the API
2. Renders plan cards for each plan
3. Provides filtering and sorting options

### CustomerDetail

#### Description
A component for displaying detailed information about a customer and their subscriptions.

#### Internal Logic
1. Fetches customer data and subscriptions from the API
2. Displays customer information, subscriptions, invoices, and credits
3. Provides options for managing subscriptions and credits

## Dependencies

The application relies on several external libraries:

| Dependency | Purpose |
|:-----------|:--------|
| React | UI framework |
| Ant Design | UI component library |
| React Query | Data fetching and state management |
| Axios | HTTP client for API requests |
| Dayjs | Date manipulation library |
| Lodash | Utility functions |

## Error Handling

The application uses React Query's error handling mechanisms and displays toast notifications for success and error messages.

## API/Interface Reference

The application interacts with a backend API through various endpoints defined in the `api.ts` file. These endpoints cover operations for plans, customers, subscriptions, invoices, and more.

This documentation provides an overview of the main components and functionality of the pricing plan management application. For more detailed information on specific components or functions, refer to the individual file documentation.