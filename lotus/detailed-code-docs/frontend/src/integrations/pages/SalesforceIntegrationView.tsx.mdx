---
title: "SalesforceIntegrationView.tsx"
---

## High-level description
This code defines a React component called `SalesforceIntegrationView` that provides a user interface for managing Salesforce integration settings within a larger application. It allows users to configure the source of truth for customer information and initiate a sync between the application and Salesforce.

## Code Structure
The main component `SalesforceIntegrationView` uses React hooks and external libraries to manage state, handle user interactions, and make API calls. It interacts with a global store (`useGlobalStore`) and uses the `CRM` API module for backend communication.

## Symbols

### SalesforceIntegrationView
#### Description
A functional component that renders the Salesforce integration settings page.

#### Internal Logic
1. Retrieves the organization information from the global store.
2. Manages the state of the toggle switch for setting the customer information source of truth.
3. Provides functionality to sync CRM data.
4. Renders a form with a toggle switch and a sync button.

#### Side Effects
- Makes API calls to update the customer information source of truth and to initiate CRM sync.
- Displays toast notifications for success and error states.

### useEffect
#### Description
A React hook used to initialize the toggle state based on the organization's settings.

### handleToggleChange
#### Description
A function that handles the change event of the toggle switch.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| checked | boolean | The new state of the toggle switch |

#### Internal Logic
1. Calls the `CRM.setCustomerSourceOfTruth` API method.
2. Updates the local state and displays a success or error toast.

### handleSyncCRM
#### Description
A function that initiates the CRM sync process.

#### Internal Logic
1. Calls the `CRM.syncCRM` API method.
2. Displays a success or error toast based on the API response.

## Dependencies
- React
- react-router-dom
- antd
- react-toastify
- @tanstack/react-query
- Custom components: PageLayout
- Custom API module: CRM
- Custom store: useGlobalStore

## Configuration
The component uses a constant `TOAST_POSITION` to set the position of toast notifications.

## Error Handling
The component uses try-catch blocks and displays error toasts when API calls fail.

## API/Interface Reference
The component interacts with the following API endpoints:
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| setCustomerSourceOfTruth | POST | Sets the source of truth for customer information |
| syncCRM | POST | Initiates a sync between the application and Salesforce |

This component provides a user-friendly interface for managing Salesforce integration settings, allowing users to configure data synchronization preferences and initiate manual syncs as needed.