---
title: "BraintreeIntegrationView.tsx"
---

## High-level description
This code defines a React component called `BraintreeIntegrationView` that provides a user interface for integrating Braintree payment processing with the application. It allows users to import Braintree customers, enable/disable automatic customer creation in Braintree, and potentially import payments (though this functionality is currently commented out).

## Code Structure
The component uses React hooks (useState, useEffect) and external libraries like react-query for data fetching and state management. It interacts with a global store (useGlobalStore) to access and update organization information. The component renders a form with buttons and checkboxes for different Braintree integration actions.

## Symbols

### BraintreeIntegrationView
#### Description
This is the main functional component that renders the Braintree integration view. It provides options to import customers from Braintree and toggle automatic customer creation in Braintree.

#### Internal Logic
1. Fetches and sets the current Braintree setting from the global store.
2. Defines mutation functions for importing customers and updating organization settings.
3. Renders a form with buttons and checkboxes for different Braintree integration actions.
4. Handles user interactions and updates the settings accordingly.

### importCustomersMutation
#### Description
A mutation function created using react-query's useMutation hook to import customers from Braintree.

#### Internal Logic
- Calls the `PaymentProcessor.importCustomers` API with the source set to "braintree".
- Displays success or error toast messages based on the API response.

### updateGenCustInBraintreeAfterLotus
#### Description
A mutation function to update the organization's setting for automatically creating customers in Braintree after they are created in Lotus.

#### Internal Logic
- Calls the `Organization.updateOrganization` API with the updated setting.
- Updates the global store and displays a success or error toast message.

### returnToDashboard
#### Description
A function to navigate back to the integrations dashboard.

#### Internal Logic
- Uses the `navigate` function from react-router-dom to go back one step in the navigation history.

## Side Effects
- The component fetches and updates organization settings, which affects the global state.
- It displays toast notifications for success and error messages.

## Dependencies
- React and various hooks (useState, useEffect)
- react-router-dom for navigation
- react-query for data fetching and mutations
- react-toastify for displaying toast notifications
- Custom components (PageLayout, Button)
- API functions from the api.ts file
- Global store (useGlobalStore)

This component is part of a larger application that handles payment processing integrations. It specifically focuses on Braintree integration, providing a user interface for managing Braintree-related settings and actions within the application.