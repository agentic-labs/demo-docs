---
title: "NetsuiteIntegrationView.tsx"
---

## High-level description
This code defines a React component called `NetsuiteIntegrationView` that provides a user interface for generating and downloading invoice CSVs for Netsuite integration. It allows users to select a date range and download invoice data within that range.

## Code Structure
The main component `NetsuiteIntegrationView` uses React hooks and the Ant Design library for UI components. It interacts with the `Netsuite` API to fetch invoice data. The component is wrapped in a `PageLayout` for consistent styling.

## References
- `PageLayout` from "../../components/base/PageLayout"
- `Netsuite` from "../../api/api"

## Symbols

### NetsuiteIntegrationView
#### Description
A functional component that renders the Netsuite Integration view, allowing users to select a date range and download invoice CSVs.

#### Inputs
None (It's a top-level component)

#### Outputs
Returns a JSX element representing the Netsuite Integration view.

#### Internal Logic
1. Uses `useState` to manage `startDate` and `endDate` state.
2. Defines `getInvoicesCSV` function to fetch and download invoice data.
3. Defines `returnToDashboard` function to navigate back.
4. Renders a `PageLayout` with a date range picker and download button.

### downloadFile
#### Description
An asynchronous function that opens a new window with the provided S3 link to download a file.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| s3link | URL | The S3 URL of the file to download |

#### Outputs
None (Opens a new window for file download)

#### Internal Logic
1. Checks if the s3link is provided.
2. If not, shows an error toast.
3. If provided, opens a new window with the S3 link.

## Side Effects
- Uses `toast` for displaying error messages.
- Uses `window.open` to trigger file downloads.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-router-dom | For navigation (useParams, useNavigate) |
| antd | UI components (Button, DatePicker) |
| moment | Date handling |
| @tanstack/react-query | Data fetching and state management |
| react-toastify | Displaying toast notifications |

## Error Handling
The component uses toast notifications to display error messages when file download fails.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| app/netsuite_invoices/ | GET | start_date, end_date | { url: URL } | Fetches invoice CSV download URL |

This component provides a user-friendly interface for Netsuite integration, allowing users to easily generate and download invoice CSVs based on a selected date range. It uses modern React practices and integrates with the Lotus API for data retrieval.