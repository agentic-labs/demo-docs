---
title: "StripeIntegrationView.tsx"
---

## High-level description
This file defines a React component called `StripeIntegrationView` that provides a user interface for integrating Stripe payment processing with the application. It allows users to import Stripe customers and payments, manage Stripe-related settings, and perform other Stripe integration tasks.

## Code Structure
The component uses various React hooks (useState, useEffect, useMutation) and custom hooks (useGlobalStore) to manage state and perform API calls. It renders a form with buttons and checkboxes for different Stripe integration actions, using components from Ant Design and react-toastify for UI elements and notifications.

## Symbols

### StripeIntegrationView
#### Description
A functional component that renders the Stripe integration page.

#### Internal Logic
1. Initializes state variables and retrieves global store data.
2. Defines mutation functions for various Stripe-related actions (importing customers, importing payments, transferring subscriptions, updating settings).
3. Renders a form with buttons for importing customers and payments, and a checkbox for enabling/disabling customer creation in Stripe.
4. Handles user interactions and displays toast notifications for action results.

### importCustomersMutation
#### Description
A mutation function that imports customers from Stripe.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| post | Source | An object containing the source of the import (stripe) |

#### Internal Logic
Calls the `PaymentProcessor.importCustomers` API and handles success/error responses with toast notifications.

### importPaymentsMutation
#### Description
A mutation function that imports payments from Stripe.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| post | Source | An object containing the source of the import (stripe) |

#### Internal Logic
Calls the `PaymentProcessor.importPayments` API and handles success/error responses with toast notifications.

### updateGenCustomerInStripeSetting
#### Description
A mutation function that updates the setting for generating customers in Stripe after Lotus.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| genCustomerInStripeSettingValue | boolean | The new value for the setting |

#### Internal Logic
Calls the `Organization.updateOrganization` API to update the setting and handles success/error responses with toast notifications and state updates.

## Dependencies
- React
- react-router-dom
- @tanstack/react-query
- react-toastify
- antd

## Configuration
The component uses a constant `TOAST_POSITION` for configuring the position of toast notifications.

## Error Handling
Error handling is implemented through the `onError` callbacks in the mutation functions, which display error messages using toast notifications.

## Logging
The component doesn't implement any specific logging mechanisms beyond error notifications.