---
title: "ViewCustomers.tsx"
---

## High-level description
The `ViewCustomers` component displays a list of customers and their associated data in a tabular format. It allows users to create new customers, view customer details, and manage customer subscriptions.

## Code Structure
The `ViewCustomers` component utilizes several other components, including `CustomerTable` for displaying the customer list, `CreateCustomerForm` for creating new customers, `LoadingSpinner` for indicating loading states, and `PageLayout` for the overall page structure. It also interacts with the `Customer` API to fetch and manipulate customer data.

## References
- `CustomerTable`
- `CreateCustomerForm`
- `LoadingSpinner`
- `PageLayout`
- `Customer` API

## Symbols

### `ViewCustomers`
#### Description
This functional component is responsible for rendering the view customers page, fetching customer data, and handling customer creation.

#### Inputs
This is a functional component, it does not take any inputs.

#### Outputs
JSX to render the view customers page.

#### Internal Logic
1. **Fetches customer data:** Uses `useQuery` to fetch a list of customer summaries and their total outstanding revenue from the `Customer` API.
2. **Displays loading state:** While data is being fetched, a `LoadingSpinner` is displayed.
3. **Renders customer table:** Once data is available, it's passed to the `CustomerTable` component for display.
4. **Handles customer creation:**
   - Opens a modal with the `CreateCustomerForm` when the "Create Customer" button is clicked.
   - Uses `useMutation` to call the `createCustomer` method of the `Customer` API when the form is submitted.
   - Invalidates the `customer_list` and `customer_totals` queries in the cache to trigger a refetch and update the displayed data.
   - Displays success or error toasts based on the API response.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core library for building the user interface. |
| @ant-design/icons | Provides icons used in the component. |
| antd | UI library used for buttons, modals, and other components. |
| @tanstack/react-query | Used for data fetching and caching. |
| react-toastify | Used for displaying notifications to the user. |
| react-router-dom | Used for navigation between pages. |

### Configuration
This component does not define any specific configuration options.
