---
title: "DemoSignup.tsx"
---

## High-level description
The `DemoSignup` component renders a demo signup page for the Lotus application. It allows users to create a demo account by providing a username, email, and password. Upon successful signup, the user is redirected to the login page.

## Symbols

### `DemoSignup`
#### Description
A functional React component that renders a demo signup page. It handles user input, form validation, and submits the signup request to the backend API.

#### Inputs
This component does not accept any props.

#### Outputs
This component does not return any value.

#### Internal Logic
1. **Initialization:**
    - Sets up state variables for managing the signup form, navigation, and UI elements.
    - Determines if the user is on a desktop device.
    - Initializes a mutation hook for handling the demo signup API request.
2. **Form Handling:**
    - Defines event handlers for username, email, and password input fields.
    - Updates the corresponding state variables on input change.
3. **Signup Submission:**
    - Defines a `handleSignUp` function that is triggered on form submission.
    - Validates the form fields.
    - Constructs a `register_object` with the user-provided information.
    - Calls the `mutate` function of the `mutation` hook to initiate the demo signup API request.
4. **API Response Handling:**
    - The `mutation` hook handles the API response.
    - On success:
        - Sets the authentication token in cookies.
        - Updates the Axios instance headers with the token.
        - Invalidates the `session` query in the query cache.
        - Redirects the user to the login page after a 15-second delay.
    - On error:
        - Displays an error toast message.
        - Redirects the user to the login page.
5. **Rendering:**
    - Renders a responsive signup form with input fields for username, email, and password.
    - Displays a loading spinner while the API request is in progress.
    - Includes a button for users to navigate to the login page.

## Side Effects
- Sets cookies for authentication upon successful signup.
- Updates the Axios instance headers with the authentication token.
- Invalidates the `session` query in the query cache.
- Redirects the user to the login page upon successful signup or error.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Provides React hooks and components. |
| react-router-dom | Provides navigation and routing functionality. |
| @tanstack/react-query | Provides data fetching and caching utilities. |
| universal-cookie | Provides cookie management functionality. |
| react-toastify | Provides toast notification functionality. |
| antd | Provides UI components. |
| ../api/api | Provides API client functions. |
| ../components/LoadingSpinner | Provides a loading spinner component. |

## References
- `Authentication.registerDemo`: API function for registering a demo account.

## TODOs
There are no TODOs or other notes left in the code.
