---
title: "Overview"
---

## High-level description
The `frontend/src/api/api.ts` file defines a set of functions that encapsulate API requests to the backend server. It uses Axios for making HTTP requests and manages authentication using cookies. The file provides a structured way to interact with various backend resources, such as customers, plans, add-ons, webhooks, and API keys.

## Code Structure
The code is structured as a collection of objects, each representing a specific resource or domain in the backend. Each object contains functions that correspond to different API endpoints for that resource. For example, the `Customer` object contains functions like `getCustomers`, `createCustomer`, and `deleteCustomer`, which map to the respective API endpoints for managing customers.

## References
The code references various types defined in other files, such as `CustomerType`, `PlanType`, `AddOnType`, etc. These types define the structure of the data expected by the API requests and responses.

## Symbols

### `Customer`
#### Description
The `Customer` object provides functions for interacting with the customer-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Customer` object contains functions for various operations related to customers, including:
- `getCustomers`: Retrieves a list of customer summaries.
- `getCustomerDetail`: Retrieves detailed information about a specific customer.
- `createCustomer`: Creates a new customer.
- `getCustomerTotals`: Retrieves total amounts due for all customers.
- `deleteCustomer`: Deletes a customer.
- `updateCustomer`: Updates customer information.
- `getCost`: Retrieves cost analysis for a customer within a specified date range.
- `createSubscription`: Creates a new subscription for a customer.
- `updateSubscription`: Updates an existing subscription.
- `cancelSubscription`: Cancels a subscription.
- `switchPlanSubscription`: Switches the plan of a subscription.
- `changeSubscriptionPlan`: Changes the plan of a subscription.
- `turnSubscriptionAutoRenewOff`: Turns off auto-renewal for a subscription.
- `createSubscriptionAddOns`: Creates add-ons for a subscription.
- `cancelCreateSubscriptionAddOns`: Cancels the creation of add-ons for a subscription.

### `AddOn`
#### Description
The `AddOn` object provides functions for interacting with the add-on related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `AddOn` object contains functions for various operations related to add-ons, including:
- `getAddOns`: Retrieves a list of add-ons.
- `getAddOn`: Retrieves detailed information about a specific add-on.
- `deleteAddOn`: Deletes an add-on.
- `createAddOn`: Creates a new add-on.
- `createAddOnFeatures`: Creates features for an add-on.

### `Plan`
#### Description
The `Plan` object provides functions for interacting with the plan-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Plan` object contains functions for various operations related to plans, including:
- `nextVersion`: Retrieves the next version number for a plan.
- `getPlans`: Retrieves a list of plans.
- `getPlan`: Retrieves detailed information about a specific plan.
- `createPlan`: Creates a new plan.
- `createVersion`: Creates a new version of a plan.
- `createExternalLinks`: Creates external links for a plan.
- `deleteExternalLinks`: Deletes external links for a plan.
- `deletePlan`: Deletes a plan.
- `updatePlan`: Updates plan information.
- `featuresAddPlan`: Adds features to a plan.
- `createTagsPlan`: Creates tags for a plan.
- `removeTagsPlan`: Removes tags from a plan.
- `updatePlanVersionDescription`: Updates the description of a plan version.
- `replacePlanVersionLater`: Replaces a plan version at a later time.
- `replacePlanVersionImmediately`: Replaces a plan version immediately.
- `archivePlanVersion`: Archives a plan version.
- `deletePlanVersion`: Deletes a plan version.
- `featureAddPlanVersion`: Adds a feature to a plan version.
- `makePublicPlanVersion`: Makes a plan version public.
- `subscriptionsPlanVersions`: Retrieves subscriptions for a plan version.
- `makeReplacementPlanVersion`: Makes a plan version a replacement for other versions.
- `setReplacementPlanVersion`: Sets the replacement plan version for other versions.
- `addTargetCustomerPlanVersion`: Adds target customers to a plan version.
- `createAlert`: Creates a usage alert for a plan version.
- `deleteAlert`: Deletes a usage alert.

### `Experiments`
#### Description
The `Experiments` object provides functions for interacting with the experiment-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Experiments` object contains functions for various operations related to experiments, including:
- `getExperiments`: Retrieves a list of experiments.
- `getAnalysis`: Retrieves detailed information about a specific experiment.

### `Webhook`
#### Description
The `Webhook` object provides functions for interacting with the webhook-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Webhook` object contains functions for various operations related to webhooks, including:
- `getEndpoints`: Retrieves a list of webhook endpoints.
- `createEndpoint`: Creates a new webhook endpoint.
- `deleteEndpoint`: Deletes a webhook endpoint.
- `editEndpoint`: Edits an existing webhook endpoint.

### `APIKey`
#### Description
The `APIKey` object provides functions for interacting with the API key-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `APIKey` object contains functions for various operations related to API keys, including:
- `getKeys`: Retrieves a list of API keys.
- `createKey`: Creates a new API key.
- `deleteKey`: Deletes an API key.
- `rollKey`: Rolls an existing API key, generating a new key.

### `Authentication`
#### Description
The `Authentication` object provides functions for interacting with the authentication-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Authentication` object contains functions for various operations related to authentication, including:
- `getSession`: Retrieves the current session information.
- `login`: Logs in a user.
- `demo_login`: Logs in a user to a demo account.
- `logout`: Logs out the current user.
- `registerCreate`: Registers a new user and creates an organization.
- `registerDemo`: Registers a new user for a demo account.
- `resetPassword`: Initiates the password reset process.
- `setNewPassword`: Sets a new password using a reset token.

### `Organization`
#### Description
The `Organization` object provides functions for interacting with the organization-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Organization` object contains functions for various operations related to organizations, including:
- `invite`: Invites a user to an organization.
- `invite_link`: Generates an invite link for an organization.
- `get`: Retrieves a list of organizations.
- `createOrg`: Creates a new organization.
- `switchOrg`: Switches the current organization.
- `getActionStream`: Retrieves the action stream for an organization.
- `updateOrganization`: Updates organization information.

### `GetRevenue`
#### Description
The `GetRevenue` object provides functions for retrieving revenue data.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `GetRevenue` object contains a function for retrieving monthly revenue data:
- `getMonthlyRevenue`: Retrieves monthly revenue data within a specified date range.

### `GetSubscriptions`
#### Description
The `GetSubscriptions` object provides functions for retrieving subscription data.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `GetSubscriptions` object contains a function for retrieving subscription overview data:
- `getSubscriptionOverview`: Retrieves subscription overview data for two specified periods.

### `PlansByCustomer`
#### Description
The `PlansByCustomer` object provides functions for retrieving plan data grouped by customer.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `PlansByCustomer` object contains a function for retrieving plans grouped by customer:
- `getPlansByCustomer`: Retrieves a list of plans and the number of customers subscribed to each plan.

### `Features`
#### Description
The `Features` object provides functions for interacting with the feature-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Features` object contains functions for various operations related to features, including:
- `getFeatures`: Retrieves a list of features.
- `createFeature`: Creates a new feature.

### `Metrics`
#### Description
The `Metrics` object provides functions for interacting with the metric-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Metrics` object contains functions for various operations related to metrics, including:
- `getMetricUsage`: Retrieves metric usage data within a specified date range.
- `getMetrics`: Retrieves a list of metrics.
- `createMetric`: Creates a new metric.
- `deleteMetric`: Deletes a metric.
- `archiveMetric`: Archives a metric.

### `Events`
#### Description
The `Events` object provides functions for interacting with the event-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Events` object contains functions for various operations related to events, including:
- `getEventPreviews`: Retrieves a paginated list of event previews.
- `searchEventPreviews`: Searches for event previews based on customer ID or idempotency ID.
- `getEventProperties`: Retrieves a list of event properties.
- `getEventCount`: Retrieves the event count for two specified periods.

### `APIToken`
#### Description
The `APIToken` object provides functions for generating a new API token.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `APIToken` object contains a function for generating a new API token:
- `newAPIToken`: Generates a new API token.

### `Backtests`
#### Description
The `Backtests` object provides functions for interacting with the backtest-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Backtests` object contains functions for various operations related to backtests, including:
- `getBacktests`: Retrieves a list of backtests.
- `createBacktest`: Creates a new backtest.
- `getBacktestResults`: Retrieves the results of a specific backtest.

### `PaymentProcessor`
#### Description
The `PaymentProcessor` object provides functions for interacting with payment processor-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `PaymentProcessor` object contains functions for various operations related to payment processors, including:
- `importCustomers`: Imports customers from a payment processor.
- `importPayments`: Imports payments from a payment processor.
- `transferSubscriptions`: Transfers subscriptions from a payment processor.
- `cancelStripeSubscriptions`: Cancels Stripe subscriptions.
- `cancelAtPeriodEndStripeSubscriptions`: Cancels Stripe subscriptions at the end of the current period.

### `PaymentProcessorIntegration`
#### Description
The `PaymentProcessorIntegration`### `PaymentProcessorIntegration`
#### Description
The `PaymentProcessorIntegration` object provides functions for managing payment processor integrations.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `PaymentProcessorIntegration` object contains functions for:
- `getPaymentProcessorConnectionStatus`: Retrieves the connection status of payment processors.
- `connectPaymentProcessor`: Connects to a payment processor.

### `Invoices`
#### Description
The `Invoices` object provides functions for interacting with the invoice-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Invoices` object contains functions for:
- `changeStatus`: Changes the payment status of an invoice.
- `sendToPaymentProcessor`: Sends an invoice to the payment processor.
- `getDraftInvoice`: Retrieves the draft invoice for a customer.
- `getInvoiceUrl`: Retrieves the URL for downloading an invoice PDF.

### `Credits`
#### Description
The `Credits` object provides functions for interacting with the credit-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Credits` object contains functions for:
- `createCredit`: Creates a new credit.
- `getCreditsByCustomer`: Retrieves credits for a specific customer.
- `deleteCredit`: Deletes a credit.

### `PricingUnits`
#### Description
The `PricingUnits` object provides functions for interacting with the pricing unit-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `PricingUnits` object contains functions for:
- `create`: Creates a new pricing unit.
- `list`: Retrieves a list of pricing units.

### `Netsuite`
#### Description
The `Netsuite` object provides functions for interacting with Netsuite-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `Netsuite` object contains functions for:
- `invoices`: Generates a CSV file of invoices for a specified date range.
- `customers`: Generates a CSV file of customers for a specified date range.

### `CRM`
#### Description
The `CRM` object provides functions for interacting with CRM-related API endpoints.

#### Inputs
N/A - This is an object containing functions, not a function itself.

#### Outputs
N/A - This is an object containing functions, not a function itself.

#### Internal Logic
The `CRM` object contains functions for:
- `getCRMConnectionStatus`: Retrieves the connection status of CRM integrations.
- `getLinkToken`: Retrieves a link token for connecting to a CRM provider.
- `storePublicToken`: Stores a public token obtained from a CRM provider.
- `setCustomerSourceOfTruth`: Sets the source of truth for customer information (Lotus or CRM).
- `syncCRM`: Synchronizes CRM data with Lotus.

## Dependencies
The code depends on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| axios | Making HTTP requests |
| universal-cookie | Managing cookies for authentication |

## Configuration
The code defines the API host using an environment variable `VITE_API_URL`.

## Error Handling
The code includes basic error handling using `catch` blocks on promises. It also handles 401 Unauthorized errors by redirecting to the login page.

## Logging
The code does not implement any specific logging mechanisms.
