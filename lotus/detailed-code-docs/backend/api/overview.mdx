---
title: "Overview"
---

## High-level description
The `backend/api` directory forms the core of the Lotus application's backend, housing the API endpoints and logic for interacting with the billing and metering system. It leverages the Django REST Framework to expose CRUD (Create, Read, Update, Delete) operations and other functionalities through a RESTful API. 

The directory is structured to handle various aspects of the system:

- **`views.py`**: Contains the API endpoint definitions (viewsets and views) for managing resources like customers, plans, subscriptions, and invoices. It handles requests, processes data, and returns responses.
- **`serializers`**: This subdirectory houses serializers responsible for data serialization and deserialization, converting between Python objects and JSON format for API communication.
- **`apps.py`**:  A standard Django app configuration file, defining settings for the "api" app within the Django project.

## What does it do?
The `backend/api` directory acts as the bridge between the frontend of the Lotus application and its underlying data models and business logic. It allows external applications and users to interact with the system through well-defined API endpoints. 

Here's a simplified workflow:

1. A client (e.g., the Lotus web app or an external integration) sends an HTTP request to a specific API endpoint in `views.py`. For example, to create a new customer, the client would send a POST request to the `/customers/` endpoint.
2. The corresponding view function in `views.py` receives the request and uses the appropriate serializer from the `serializers` directory to validate and deserialize the incoming data.
3. The view function then interacts with the database models (defined elsewhere in the codebase) to perform the requested operation, such as creating a new customer record.
4. The view function uses the serializer again to serialize the response data (e.g., the newly created customer object) into JSON format.
5. The API returns the JSON response to the client, indicating the success or failure of the operation.

## Entry points
The primary entry point for the API is `backend/api/views.py`. This file contains the ViewSets and API views that define the available endpoints and handle incoming requests.

Data flow and control flow:

1.  HTTP requests hit the ViewSets and API views defined in `views.py`.
2.  These views use serializers from the `serializers` directory to validate and process data.
3.  The views interact with database models and other parts of the backend to perform the requested operations.
4.  Responses are serialized back into JSON and sent back to the client.

## Key Files
### backend/api/serializers
This subdirectory contains serializers responsible for data transformation between Python objects and JSON format. It plays a crucial role in ensuring that the API communicates effectively with clients.

### backend/api/views.py
This file is the heart of the API, defining the endpoints and handling requests related to:

- **Customer management:** Creating, retrieving, updating, and deleting customer records.
- **Plan management:** Defining and managing pricing plans for the service.
- **Subscription management:** Handling customer subscriptions to plans, including upgrades, downgrades, and cancellations.
- **Invoice management:** Generating and retrieving invoices for customer subscriptions.
- **Metric and feature access control:** Verifying and managing customer access to specific features and metrics.
- **Webhooks:** Exposing events that occur within the system to external services.
- **System health checks:** Providing endpoints for monitoring the API's status.

It leverages Django REST Framework's functionalities for routing, request parsing, response formatting, and authentication.
