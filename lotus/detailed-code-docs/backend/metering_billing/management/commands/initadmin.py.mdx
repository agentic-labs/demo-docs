---
title: "initadmin.py"
---

## High-level description
This code defines a Django management command called `initadmin` that initializes an admin user, creates a default organization, provisions currencies for all organizations, and manages materialized views for metrics.

## Code Structure
The main functionality is implemented in the `handle` method of the `Command` class, which inherits from Django's `BaseCommand`. It uses environment variables to create a superuser, sets up a default organization, and performs various initialization tasks.

## Symbols

### `Command`
#### Description
A Django management command class that initializes the admin user and performs various setup tasks.

#### Internal Logic
1. Retrieves admin credentials from environment variables.
2. Creates a superuser if one doesn't exist.
3. Creates a default organization and associates it with the admin user.
4. Provisions currencies for all organizations.
5. Provisions or deletes materialized views for metrics based on their status.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | Accessing environment variables |
| django.core.management.base | Base class for management commands |
| dotenv | Loading environment variables from a .env file |
| metering_billing.models | Accessing database models |
| metering_billing.utils.enums | Accessing enum values |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| ADMIN_USERNAME | string | None | Username for the admin account |
| ADMIN_EMAIL | string | None | Email for the admin account |
| ADMIN_PASSWORD | string | None | Password for the admin account |

## Error Handling
The code uses a logger to log information about the admin account initialization.

## TODOs
There are no explicit TODOs in the code.