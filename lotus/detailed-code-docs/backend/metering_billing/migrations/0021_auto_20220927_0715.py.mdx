---
title: "0021_auto_20220927_0715.py"
---

## High-level description
This Django migration script modifies the `Subscription` model by changing the `subscription_uid` field to a `CharField` with a default value of a UUID and making it non-nullable. It also adds a unique constraint on the `organization` and `subscription_uid` fields.

## References
This migration references the `Subscription` model defined in the `metering_billing` app.

## Symbols
### `Migration`
#### Description
This class represents a database migration operation. It modifies the `Subscription` model.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- **dependencies:** Specifies that this migration depends on a previous migration (`0020_auto_20220927_0715`) within the `metering_billing` app.
- **operations:** Defines a list of operations to perform during this migration:
    - **AlterField:** Modifies the `subscription_uid` field of the `Subscription` model:
        - Sets `blank=True` to allow empty values in the database.
        - Sets `default=uuid.uuid4` to automatically generate a UUID if no value is provided.
        - Sets `max_length=100` to limit the length of the UUID string.
        - Sets `null=False` to make the field non-nullable.
    - **AlterUniqueTogether:** Adds a unique constraint on the `Subscription` model:
        - Ensures that each `organization` and `subscription_uid` pair is unique.

## Side Effects
This migration will modify the database schema by altering the `Subscription` table. It will also likely result in data changes as the `subscription_uid` field is updated with UUID values.
