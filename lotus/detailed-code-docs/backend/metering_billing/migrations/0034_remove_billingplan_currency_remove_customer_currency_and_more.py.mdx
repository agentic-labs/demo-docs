---
title: "0034_remove_billingplan_currency_remove_customer_currency_and_more.py"
---

## High-level description
This Django migration file removes the `currency` field from the `BillingPlan` and `Customer` models and adds a new field `external_payment_obj_type` to the `Invoice` model. This change suggests a shift in how currency is handled, likely moving it to a more centralized location or associating it directly with invoices and payments. 

## References
This migration references the `metering_billing` app and a previous migration file (`0033_remove_plancomponent_cost_per_batch_currency_and_more`).

## Symbols

### `Migration`
#### Description
This class defines a new Django migration that modifies the database schema by removing and adding fields to specific models.

#### Inputs
N/A - This is a migration class, not a function, so it doesn't take direct inputs.

#### Outputs
N/A - Migrations don't return output values; they modify the database schema.

#### Internal Logic
1. **`dependencies`**: Specifies a list of migrations that this migration depends on. This ensures that migrations are applied in order.
2. **`operations`**: Defines a list of operations to perform on the database schema. In this case:
    - `RemoveField`: Removes the `currency` field from `BillingPlan` and `Customer` models.
    - `AddField`: Adds the `external_payment_obj_type` field to the `Invoice` model. This field is a character field with limited choices (currently only "stripe") and can be blank or null.

## Side Effects
- **Database Schema Modification**: This migration will alter the structure of the database by removing the `currency` column from the `BillingPlan` and `Customer` tables and adding the `external_payment_obj_type` column to the `Invoice` table.

## Dependencies
- `django.db.migrations`: Provides the necessary tools for defining and applying database migrations in Django.
- `metering_billing.0033_remove_plancomponent_cost_per_batch_currency_and_more`: This migration depends on a previous migration, indicating a series of related changes to the database schema.
