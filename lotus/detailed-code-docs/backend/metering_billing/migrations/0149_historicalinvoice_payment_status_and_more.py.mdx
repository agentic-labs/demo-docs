---
title: "0149_historicalinvoice_payment_status_and_more.py"
---

## High-level description
This Django migration file adds a new field called `payment_status` to both the `HistoricalInvoice` and `Invoice` models. The field is a `PositiveSmallIntegerField` with predefined choices representing different payment statuses, with a default value of 4 (Unpaid).

## Symbols

### Migration
#### Description
This migration class defines the changes to be applied to the database schema. It adds a new field `payment_status` to both the `HistoricalInvoice` and `Invoice` models.

#### Dependencies
The migration depends on the previous migration:
```python
"0148_rename_payment_status_historicalinvoice_payment_status_old_and_more"
```

#### Operations
The migration performs two operations:

1. Add `payment_status` field to `HistoricalInvoice` model
2. Add `payment_status` field to `Invoice` model

Both operations use the same field definition:

```python
models.PositiveSmallIntegerField(
    choices=[(1, "Draft"), (2, "Voided"), (3, "Paid"), (4, "Unpaid")],
    default=4,
)
```

This field is a `PositiveSmallIntegerField` with the following characteristics:
- It has predefined choices: (1, "Draft"), (2, "Voided"), (3, "Paid"), (4, "Unpaid")
- The default value is 4, which corresponds to "Unpaid"

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| django.db.migrations | Provides the Migration class and related tools for defining database schema changes |
| django.db.models | Provides the field types used in the migration |

## Notes
1. This migration is automatically generated by Django, as indicated by the comment at the top of the file.
2. The migration is reversible, as Django can automatically create a reverse migration to remove the added fields if needed.
3. The `HistoricalInvoice` model is likely part of a historical tracking system, possibly using the `django-simple-history` package or a similar solution.
4. The choice to use a `PositiveSmallIntegerField` with integer keys for the choices suggests an optimization for database storage and querying, while still providing human-readable status names.