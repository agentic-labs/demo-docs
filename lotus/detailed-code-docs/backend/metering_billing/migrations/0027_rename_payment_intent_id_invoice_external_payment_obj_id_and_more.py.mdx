---
title: "0027_rename_payment_intent_id_invoice_external_payment_obj_id_and_more.py"
---

## High-level description
This Django migration script renames the `payment_intent_id` field to `external_payment_obj_id` in the `Invoice` model and introduces several new fields related to payment providers and invoice status. It also removes the existing `status` field from the `Invoice` model.

## Code Structure
This code represents a Django migration file, which is responsible for applying changes to the database schema. The main component is the `Migration` class, which contains a list of `operations` to be performed. These operations include renaming a field, adding new fields, and removing an existing field.

## Symbols

### `Migration`
#### Description
This class defines a Django migration that modifies the database schema by renaming, adding, and removing fields in specific models.

#### Inputs
This class doesn't take any explicit inputs. It implicitly relies on the Django migration framework.

#### Outputs
This class doesn't return any explicit outputs. It modifies the database schema as a side effect.

#### Internal Logic
The `operations` list within the `Migration` class defines the changes to be applied to the database schema:
- **`migrations.RenameField`**: Renames the `payment_intent_id` field to `external_payment_obj_id` in the `Invoice` model.
- **`migrations.RemoveField`**: Removes the `status` field from the `Invoice` model.
- **`migrations.AddField`**: Adds several new fields:
    - `payment_provider` to the `Customer` model.
    - `cust_connected_to_payment_provider`, `org_connected_to_cust_payment_provider`, `payment_status` to the `Invoice` model.
    - `payment_provider_ids` to the `Organization` model.

## Side Effects
The main side effect of this migration script is the modification of the database schema. The changes include:
- Renaming the `payment_intent_id` field in the `Invoice` table.
- Removing the `status` field from the `Invoice` table.
- Adding new columns for the newly added fields in the respective tables (`Customer`, `Invoice`, and `Organization`).

## Dependencies
This code depends on Django's migration framework (`django.db.migrations`).
