---
title: "0111_alter_customer_unique_together_customer_unique_email_and_more.py"
---

## High-level description
This Django migration script modifies the `Customer` model by removing its existing unique together constraint and adding two new unique constraints. These constraints ensure that each customer within an organization has a unique email address and a unique customer ID.

## References
This migration references the `metering_billing.Customer` model.

## Symbols
### `Migration`
#### Description
This class defines a Django migration that alters the `Customer` model's unique constraints.

#### Inputs
None

#### Outputs
None

#### Internal Logic
1. **`dependencies`**: Specifies a dependency on a previous migration (`0110_alter_metric_unique_together_and_more`).
2. **`operations`**: Defines a list of database operations to perform during the migration:
    - **`AlterUniqueTogether`**: Removes any existing unique together constraints from the `Customer` model.
    - **`AddConstraint`**: Adds two new unique constraints to the `Customer` model:
        - `unique_email`: Ensures that the combination of `organization` and `email` fields is unique.
        - `unique_customer_id`: Ensures that the combination of `organization` and `customer_id` fields is unique.

## Side Effects
This migration modifies the database schema by altering the constraints on the `Customer` model. 

## Dependencies
- `django.db.migrations`
- `django.db.models`
