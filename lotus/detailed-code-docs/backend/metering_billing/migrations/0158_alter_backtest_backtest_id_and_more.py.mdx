---
title: "0158_alter_backtest_backtest_id_and_more.py"
---

## High-level description
This Django migration script updates multiple model fields to use `UUIDField` with a default value of `uuid.uuid4`, making them universally unique identifiers. This change applies to both primary and foreign key fields across various models related to metering and billing.

## References
This migration file references the previous migration "0157_real_fill_uuids".

## Symbols
### `Migration`
#### Description
This class represents a database migration operation. It alters several model fields to use `UUIDField` with `uuid.uuid4` as the default, ensuring unique IDs.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The `operations` list defines the changes to be applied to the database schema:
- For each model (e.g., `Backtest`, `CustomerBalanceAdjustment`, `Feature`, etc.):
    - The migration targets specific fields (e.g., `backtest_id`, `adjustment_id`, `feature_id`, etc.).
    - It modifies these fields to use `UUIDField`.
    - It sets `default=uuid.uuid4` to generate unique UUIDs for new records.
    - It sets `editable=False` to prevent manual editing of these IDs.
    - For some historical models, it sets `db_index=True` for improved query performance.

## Side Effects
This migration modifies the database schema by changing the data type and default values of multiple fields in various tables. 

## Dependencies
- `django.db.migrations`
- `uuid`
