---
title: "0059_alter_historicalinvoice_invoice_id_and_more.py"
---

## High-level description
This Django migration alters the `invoice_id` field in both the `HistoricalInvoice` and `Invoice` models. It sets a default value for the field using a UUID generator function and adds a unique constraint to the `Invoice` model's `invoice_id` field.

## References
- `metering_billing.utils.utils.invoice_uuid`: A function that generates UUIDs for invoice IDs.

## Symbols
### `Migration`
#### Description
This class represents a database migration operation. It modifies the `invoice_id` field in the `HistoricalInvoice` and `Invoice` models.

#### Internal Logic
The migration does the following:
- **Modifies `HistoricalInvoice.invoice_id`:**
    - Sets the field as blankable (`blank=True`).
    - Adds a database index (`db_index=True`).
    - Sets the default value using the `metering_billing.utils.utils.invoice_uuid` function.
    - Sets the maximum length to 100 characters.
- **Modifies `Invoice.invoice_id`:**
    - Sets the field as blankable (`blank=True`).
    - Sets the default value using the `metering_billing.utils.utils.invoice_uuid` function.
    - Sets the maximum length to 100 characters.
    - Adds a unique constraint (`unique=True`).

## Dependencies
- `django.db.migrations`: Provides the necessary functionality for creating and applying database migrations.
- `metering_billing.utils.utils`: Contains the `invoice_uuid` function used for generating UUIDs.
