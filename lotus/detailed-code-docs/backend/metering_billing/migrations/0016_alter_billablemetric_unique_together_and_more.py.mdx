---
title: "0016_alter_billablemetric_unique_together_and_more.py"
---

## High-level description
This Django migration script modifies the `BillableMetric` model by removing the old `metric_name` field and replacing it with a new field called `billable_metric_name`. It also updates the unique constraint on the model to use the new `billable_metric_name` field along with the `organization` field.

## References
This migration references the `BillableMetric` model defined in the `metering_billing` app.

## Symbols

### `Migration`
#### Description
This class defines a Django migration that alters the `BillableMetric` model.

#### Internal Logic
1. **`dependencies`**: Specifies that this migration depends on a previous migration (`0015_billablemetric_metric_name_and_more`) in the `metering_billing` app.
2. **`operations`**: Defines a list of operations to be performed during this migration:
    - **`AlterUniqueTogether`**: Removes any existing unique constraints on the `BillableMetric` model.
    - **`AddField`**: Adds a new `CharField` field called `billable_metric_name` to the `BillableMetric` model. This field is given a default value of a randomly generated UUID and is allowed to be blank.
    - **`AlterUniqueTogether`**: Adds a new unique constraint on the `BillableMetric` model, ensuring that each `organization` has unique `billable_metric_name` values.
    - **`RemoveField`**: Removes the old `metric_name` field from the `BillableMetric` model.

#### Side Effects
This migration modifies the database schema by altering the `BillableMetric` table. It removes the `metric_name` column and adds a new `billable_metric_name` column. It also updates the unique constraint on the table.
