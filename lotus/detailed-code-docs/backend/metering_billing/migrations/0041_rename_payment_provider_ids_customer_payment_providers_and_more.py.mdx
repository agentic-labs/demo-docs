---
title: "0041_rename_payment_provider_ids_customer_payment_providers_and_more.py"
---

## High-level description
This migration file, `0041_rename_payment_provider_ids_customer_payment_providers_and_more.py`, is a Django migration that makes several changes to the `Customer` and `HistoricalCustomer` models. It renames fields, adds new fields, and modifies existing fields to update the structure of these models.

## Code Structure
The migration consists of a single `Migration` class with a list of operations to be applied to the database schema. These operations include renaming fields, adding new fields, and altering existing fields.

## Symbols

### Migration
#### Description
This class defines the migration operations to be applied to the database schema.

#### Internal Logic
1. Renames `payment_provider_ids` to `payment_providers` in both `Customer` and `HistoricalCustomer` models.
2. Adds a new `sources` field to both `Customer` and `HistoricalCustomer` models.
3. Modifies the `customer_id` field in both `Customer` and `HistoricalCustomer` models.

### operations
#### Description
A list of migration operations to be executed.

#### Internal Logic
1. `RenameField`: Renames `payment_provider_ids` to `payment_providers` in `Customer` and `HistoricalCustomer` models.
2. `AddField`: Adds a new `sources` field to `Customer` and `HistoricalCustomer` models with `JSONField` type.
3. `AlterField`: Modifies the `customer_id` field in `Customer` and `HistoricalCustomer` models to allow null values and increase max length to 40 characters.

## Dependencies
This migration depends on the previous migration `0040_remove_customer_payment_provider_and_more`.

## Configuration
The migration is configured to work with the `metering_billing` app in the Django project.

___

This migration makes significant changes to the `Customer` and `HistoricalCustomer` models, primarily focusing on payment-related fields and customer identification. The renaming of `payment_provider_ids` to `payment_providers` suggests a shift in how payment provider information is stored. The addition of the `sources` field implies new functionality for tracking customer data sources. The modification of the `customer_id` field to allow null values and increase its maximum length provides more flexibility in customer identification.