---
title: "0093_historicalplanversion_day_anchor_and_more.py"
---

## High-level description
This Django migration file adds new fields related to billing anchors and subscription filters to the metering_billing app. It introduces `day_anchor` and `month_anchor` fields to `PlanVersion`, `HistoricalPlanVersion`, and `SubscriptionManager` models. Additionally, it adds a `filters` field to the `Subscription` model and creates a new `SubscriptionManager` model.

## Code Structure
This code defines a Django migration with operations to add new fields and a new model. The operations are executed sequentially to modify the database schema.

## Symbols

### `Migration`
#### Description
This class represents a single Django migration, encapsulating changes to the database schema.

#### Inputs
None

#### Outputs
None

#### Internal Logic
- **dependencies:** Specifies a list of previous migrations that this migration depends on.
- **operations:** Defines a sequence of operations to apply to the database schema. In this case, it includes adding fields to existing models (`AddField`), creating a new model (`CreateModel`), and adding a many-to-many field (`AddField` with `ManyToManyField`).

## Side Effects
This migration modifies the database schema by:
- Adding `day_anchor` and `month_anchor` fields to `PlanVersion`, `HistoricalPlanVersion`, and `SubscriptionManager` models.
- Adding a `filters` field to the `Subscription` model.
- Creating a new `SubscriptionManager` model.

## Dependencies
- **django.core.validators:** Used for defining validation rules for model fields.
- **django.db.models:** Provides classes and functions for defining database models.
- **django.db.models.deletion:** Used for specifying how related objects are handled on deletion.
- **django.db.migrations:** Provides the framework for managing database migrations.
- **metering_billing.models:** References models from the `metering_billing` app, such as `CategoricalFilter`, `Customer`, and `Organization`.
