---
title: "0013_billablemetric_recurring_plancomponent_max_amount_and_more.py"
---

## High-level description
This Django migration file adds new fields to existing models and introduces a new `Alert` model to the `metering_billing` app. It also modifies the default value of the `billing_plan_id` field in the `BillingPlan` model.

## References
This migration references the following models:

* `BillableMetric`
* `PlanComponent`
* `BillingPlan`
* `Organization`
* `Alert`

## Symbols

### `Migration`
#### Description
This class represents a database migration operation. It defines the changes to be applied to the database schema.

#### Inputs
None

#### Outputs
None

#### Internal Logic
This migration performs the following operations:

* **Adds `recurring` field to `BillableMetric` model:**
    * Adds a new boolean field named `recurring` to the `BillableMetric` model with a default value of `False`.
* **Adds `max_amount` field to `PlanComponent` model:**
    * Adds a new decimal field named `max_amount` to the `PlanComponent` model. This field is optional and has a default value of `0.0`.
* **Modifies `billing_plan_id` field in `BillingPlan` model:**
    * Changes the default value of the `billing_plan_id` field in the `BillingPlan` model to a unique UUID generated using `uuid.uuid4()`.
* **Creates `Alert` model:**
    * Introduces a new model named `Alert` with the following fields:
        * `id`: Auto-generated primary key.
        * `type`: Character field with a default value of "webhook".
        * `webhook_url`: Optional character field for storing webhook URLs.
        * `name`: Character field with a default value of " ".
        * `organization`: Foreign key to the `Organization` model.

## Side Effects
This migration will modify the database schema by adding new fields, modifying existing fields, and creating a new table for the `Alert` model.

## Dependencies
This migration depends on the following Django modules:

| Dependency | Purpose |
|:-----------|:--------|
| `django.db.models` | Provides database model definitions and functionalities. |
| `django.db.migrations` | Enables database schema migrations. |
| `uuid` | Used for generating universally unique identifiers (UUIDs). |

### Configuration
This migration does not define any configuration options.
