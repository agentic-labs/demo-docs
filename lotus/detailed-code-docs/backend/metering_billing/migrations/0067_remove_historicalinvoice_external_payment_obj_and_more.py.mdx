---
title: "0067_remove_historicalinvoice_external_payment_obj_and_more.py"
---

## High-level description
This Django migration script removes the `external_payment_obj` field from the `HistoricalInvoice` and `Invoice` models and changes the type of the `customer`, `organization`, and `subscription` fields in both models to `JSONField`.

## References
This migration references the following Django models:

* `metering_billing.HistoricalInvoice`
* `metering_billing.Invoice`

## Symbols
### `Migration`
#### Description
This class represents a database migration operation. It removes a field and modifies the type of several other fields in two database tables related to invoices.

#### Inputs
This class doesn't take any direct inputs.

#### Outputs
This class doesn't return any outputs.

#### Internal Logic
The migration performs the following operations:

1. **Removes `external_payment_obj` field:** This field is removed from both `HistoricalInvoice` and `Invoice` models.
2. **Modifies field types:** The `customer`, `organization`, and `subscription` fields in both `HistoricalInvoice` and `Invoice` models are changed to `JSONField`. This suggests that these fields will now store data in JSON format, allowing for more flexible and complex data structures.

## Side Effects
This migration will modify the database schema by removing a field and changing the type of several other fields in two tables.

## Dependencies
This migration depends on the Django migrations framework.
| Dependency | Purpose |
|:-----------|:--------|
| `django.db.migrations` | Provides the necessary functions and classes for defining and applying database migrations. |
| `django.db.models` | Used for defining the structure of database tables and fields. |

