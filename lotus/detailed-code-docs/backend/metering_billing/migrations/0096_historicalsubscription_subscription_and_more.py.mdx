---
title: "0096_historicalsubscription_subscription_and_more.py"
---

## High-level description
This Django migration file adds two new models, `HistoricalSubscription` and `Subscription`, to the database. It also modifies existing historical models by adding a database index to the `history_date` field and updates the `Meta` options for improved clarity and consistency. Finally, it removes the `SubscriptionManager` model.

## Code Structure
This code defines a Django migration with a single operation: creating two new models (`HistoricalSubscription` and `Subscription`) and modifying several existing historical models. The `HistoricalSubscription` model is based on the `simple_history.models.HistoricalChanges` model and inherits its functionality for tracking historical changes. The `Subscription` model defines the structure for storing subscription data. The modifications to existing historical models primarily involve adding a database index to the `history_date` field and updating the `Meta` options for consistency.

## References
This code references several symbols from the `django.db.models`, `simple_history.models`, and `metering_billing.utils.utils` modules. It also references the `Customer` and `Organization` models within the `metering_billing` app.

## Symbols

### `Migration`
#### Description
This class represents a Django migration that alters the database schema. It defines the dependencies between migrations and the operations to be performed.

#### Inputs
None

#### Outputs
None

#### Internal Logic
This migration performs the following operations:
- Creates the `HistoricalSubscription` and `Subscription` models.
- Alters existing historical models by adding a database index to the `history_date` field and updating the `Meta` options.
- Deletes the `SubscriptionManager` model.

## Dependencies
This code depends on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| django.db.models | Provides database model abstraction and functionality. |
| simple_history.models | Enables tracking historical changes to database models. |
| metering_billing.utils.utils | Provides utility functions for the `metering_billing` app. |
