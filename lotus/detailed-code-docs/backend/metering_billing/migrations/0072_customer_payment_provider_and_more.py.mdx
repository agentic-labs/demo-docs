---
title: "0072_customer_payment_provider_and_more.py"
---

## High-level description
This Django migration file adds a `payment_provider` field to the `Customer` and `HistoricalCustomer` models, allowing for the specification of a payment provider like Stripe. It also modifies the `customer_id`, `customer_name`, and their historical counterparts to use a UUID-based default value and adjust field properties.

## References
This migration file references the `metering_billing.utils.utils` module for the `customer_uuid` function.

## Symbols
### `Migration`
#### Description
This class defines a Django migration that alters the database schema by adding a `payment_provider` field to the `Customer` and `HistoricalCustomer` models. It also modifies existing fields like `customer_id` and `customer_name` to use a UUID-based default and adjust field properties.

#### Inputs
N/A - This is a migration class and doesn't take direct inputs.

#### Outputs
N/A - This is a migration class and doesn't return any outputs. It modifies the database schema.

#### Internal Logic
The migration performs the following operations:

1. **AddField:** Adds the `payment_provider` field to both `Customer` and `HistoricalCustomer` models. This field is a character field with choices limited to "stripe" currently.
2. **AlterField:** Modifies the `customer_id` field in both `Customer` and `HistoricalCustomer` models to use the `customer_uuid` function from `metering_billing.utils.utils` for generating a default UUID-based customer ID.
3. **AlterField:** Modifies the `customer_name` field in both `Customer` and `HistoricalCustomer` models to allow blank values and set a maximum length.

## Side Effects
- **Database Schema Change:** This migration modifies the database schema by adding a new field and altering existing fields in the `Customer` and `HistoricalCustomer` tables.

## Dependencies
- **Django:** This migration depends on the Django framework for database migrations.
- **metering_billing.utils.utils:** This migration uses the `customer_uuid` function from this module. 
