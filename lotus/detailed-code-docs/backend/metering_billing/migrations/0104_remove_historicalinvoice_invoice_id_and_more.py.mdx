---
title: "0104_remove_historicalinvoice_invoice_id_and_more.py"
---

## High-level description
This Django migration script removes the `invoice_id` field and adds `due_date` and `invoice_number` fields to both the `Invoice` and `HistoricalInvoice` models in the `metering_billing` app. This suggests a shift from using a dedicated `invoice_id` to a potentially more informative `invoice_number` system, along with introducing due date tracking for invoices.

## References
This migration references the `metering_billing.Invoice` and `metering_billing.HistoricalInvoice` models.

## Symbols

### `Migration`
#### Description
This class defines a Django migration that alters the structure of the `Invoice` and `HistoricalInvoice` models.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The migration performs the following operations:

1. **Removes `invoice_id` field:** Removes the `invoice_id` field from both `Invoice` and `HistoricalInvoice` models.
2. **Adds `due_date` field:** Adds a `due_date` field to both models. This field is a `DateTimeField` with `blank=True` and `null=True`, allowing for optional due dates.
3. **Adds `invoice_number` field:** Adds an `invoice_number` field to both models. This field is a `CharField` with `blank=True` and `max_length=13`, allowing for optional invoice numbers.

## Side Effects
This migration will modify the database schema by altering the `Invoice` and `HistoricalInvoice` tables. 

## Dependencies
- `django.db.migrations.Migration`: Base class for Django migrations.
- `django.db.models`: Provides database modeling functionalities.
