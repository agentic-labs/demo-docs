---
title: "0054_alter_historicalplan_status_and_more.py"
---

## High-level description
This Django migration script modifies several fields in the `metering_billing` app, including changing the `status` field type in `HistoricalPlan` and `Plan` models, altering the `parent_product` field in the `Plan` model, and modifying the `start_date` and `end_date` fields to `DateTimeField` in `Subscription` and `HistoricalSubscription` models. 

This migration likely reflects updates to the data model, specifically how subscription plans, their historical records, and associated subscriptions are managed within the application.

## References
This migration references the `metering_billing.product` model in the `parent_product` field update.

## Symbols
### `Migration`
#### Description
This class represents a single migration operation within the Django application. It defines changes to the database schema, such as adding, modifying, or deleting tables and fields.

#### Inputs
This class doesn't take any direct inputs.

#### Outputs
This class doesn't return any outputs.

#### Internal Logic
The `operations` list defines the specific database schema changes to be applied:

*   **`AlterField` for `HistoricalPlan.status` and `Plan.status`**: Changes the `status` field in both `HistoricalPlan` and `Plan` models to a `CharField` with specific choices: "active", "archived", and "experimental". The default value is set to "active".
*   **`AlterField` for `HistoricalSubscription.end_date`, `HistoricalSubscription.start_date`, `Subscription.end_date`, and `Subscription.start_date`**: Changes the `end_date` and `start_date` fields in both `HistoricalSubscription` and `Subscription` models to `DateTimeField`, allowing for more precise time representation.
*   **`AlterField` for `Plan.parent_product`**: Modifies the `parent_product` field in the `Plan` model to be a foreign key (`ForeignKey`) referencing the `metering_billing.product` model. This suggests a relationship where a plan can belong to a specific product.

## Side Effects
This migration directly modifies the database schema by altering existing fields and their types.

## Dependencies
This migration depends on Django's migration framework (`django.db.migrations`) and the `models` module within the same application (`metering_billing.models`).
