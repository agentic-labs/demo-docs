---
title: "0052_rename_payment_providers_customer_integrations_and_more.py"
---

## High-level description
This migration file (0052_rename_payment_providers_customer_integrations_and_more.py) contains database schema changes for the metering_billing application. It primarily focuses on renaming fields, adding new fields, and modifying existing fields across various models such as Customer, Invoice, Backtest, and Organization.

## Code Structure
The migration file defines a single Migration class with dependencies and operations. The operations list contains all the database schema changes to be applied.

## Symbols

### Migration
#### Description
This class defines the migration operations to be applied to the database schema.

#### Internal Logic
1. Renames 'payment_providers' field to 'integrations' in Customer and HistoricalCustomer models.
2. Removes 'sources' field from Customer and HistoricalCustomer models.
3. Adds 'external_payment_obj' field to Invoice and HistoricalInvoice models.
4. Modifies 'time_created' field in Backtest and HistoricalBacktest models.
5. Modifies 'external_payment_obj_id' and 'issue_date' fields in Invoice and HistoricalInvoice models.
6. Modifies 'created' field in Organization and HistoricalOrganization models.

## Dependencies
This migration depends on the previous migration '0051_alter_customer_customer_id_and_more'.

## Side Effects
This migration will alter the database schema, potentially affecting existing data and application behavior related to customer payments, invoices, and organization records.

## Performance Considerations
Large-scale migrations can be time-consuming and may temporarily impact database performance. It's recommended to run this migration during off-peak hours or maintenance windows.

## Error Handling
Django's migration system will automatically handle rollbacks if an error occurs during the migration process.

___

This migration file makes significant changes to the database schema, particularly in how customer payment information and invoices are stored and managed. It also updates timestamp fields to use a custom 'now_utc' function, likely to ensure consistent UTC timestamps across the application.