---
title: "0109_alter_event_idempotency_id_and_more.py"
---

## High-level description
This migration file (0109_alter_event_idempotency_id_and_more.py) is a Django migration that modifies the `Event` model and the `Customer` model in the `metering_billing` app. It changes the `idempotency_id` field in the `Event` model and adds a unique constraint to the `Customer` model.

## Symbols

### Migration
#### Description
This is a Django migration class that defines changes to be applied to the database schema.

#### Internal Logic
1. Alters the `idempotency_id` field in the `Event` model:
   - Sets a default value using the `event_uuid` function from `metering_billing.utils.utils`.
   - Sets the maximum length to 255 characters.

2. Adds a unique constraint to the `Customer` model:
   - Creates two unique constraints:
     a. Combination of `organization` and `customer_id`
     b. Combination of `organization` and `email`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| django.db.migrations | Provides the Migration class and operations for defining database changes |
| metering_billing.utils.utils | Provides the `event_uuid` function used as the default for `idempotency_id` |

## Notes
- This migration is part of an ongoing series (109th in the sequence) for the `metering_billing` app.
- The changes suggest that the system is enforcing uniqueness for customers within an organization based on both their `customer_id` and `email`.
- The `idempotency_id` field in the `Event` model is being modified, possibly to ensure unique event tracking or prevent duplicate event processing.