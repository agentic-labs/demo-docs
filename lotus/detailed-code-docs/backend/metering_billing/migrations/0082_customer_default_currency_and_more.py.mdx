---
title: "0082_customer_default_currency_and_more.py"
---

## High-level description
This Django migration script adds a `default_currency` field to the `Customer`, `HistoricalCustomer`, `HistoricalOrganization`, and `Organization` models. It also adds a `pricing_unit` field to the `PlanComponent` model and introduces a new model called `CustomPricingUnitConversion`.

## Code Structure
This migration script primarily focuses on modifying existing models (`Customer`, `HistoricalCustomer`, `HistoricalOrganization`, `Organization`, `PlanComponent`) by adding new fields and creating a new model (`CustomPricingUnitConversion`). The new fields establish foreign key relationships with the `PricingUnit` model.

## References
- `metering_billing.models.PricingUnit`: This model represents a pricing unit (e.g., USD, EUR) and is referenced by the newly added `default_currency` and `pricing_unit` fields.

## Symbols
### `Migration`
#### Description
This class defines a new Django migration that adds a default currency field to various models and introduces a new model for custom pricing unit conversions.

#### Inputs
N/A - This is a migration script, not a function.

#### Outputs
N/A - This is a migration script, not a function.

#### Internal Logic
The migration performs the following operations:

1. **AddField**: Adds the `default_currency` field as a foreign key to `PricingUnit` for `Customer`, `HistoricalCustomer`, `HistoricalOrganization`, and `Organization` models.
2. **AddField**: Adds the `pricing_unit` field as a foreign key to `PricingUnit` for the `PlanComponent` model.
3. **CreateModel**: Creates a new model named `CustomPricingUnitConversion` with fields for defining custom conversions between pricing units within a specific plan version.

## Dependencies
- `django.db.models`: Provides database model functionality.
- `django.db.models.deletion`: Defines actions to take when a referenced object is deleted.

### Configuration
N/A - This migration script does not define any configuration options.

## Error Handling
N/A - This migration script does not implement specific error handling.

## Logging
N/A - This migration script does not implement logging.

## API/Interface Reference
N/A - This migration script does not expose an API.
