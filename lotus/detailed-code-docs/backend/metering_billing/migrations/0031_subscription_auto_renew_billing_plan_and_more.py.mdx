---
title: "0031_subscription_auto_renew_billing_plan_and_more.py"
---

## High-level description
This Django migration script adds a new field `auto_renew_billing_plan` to the `Subscription` model and modifies the existing `billing_plan` field. This suggests a change in how subscriptions handle renewals, likely allowing for a different billing plan to be applied upon automatic renewal.

## References
This migration references the `metering_billing.billingplan` model.

## Symbols

### `Migration`
#### Description
This class defines a Django migration that alters the `Subscription` model.

#### Inputs
N/A - This is a migration class, not a function.

#### Outputs
N/A - This is a migration class, not a function.

#### Internal Logic
This migration performs two operations:

1. **AddField**: Adds a new `auto_renew_billing_plan` field to the `Subscription` model. This field is a foreign key to the `BillingPlan` model, allowing a subscription to be associated with a specific billing plan for automatic renewals. The `related_name` attribute is set to `next_billing_plan`, indicating its purpose.
2. **AlterField**: Modifies the existing `billing_plan` field of the `Subscription` model. The change is in the `related_name` attribute, which is updated to `current_billing_plan`. This suggests a clearer distinction between the current billing plan and the one used for automatic renewal.

## Side Effects
- Alters the database schema by adding a new field and modifying an existing field in the `Subscription` model.

## Dependencies
- `django.db.migrations`
- `django.db.models`
- `metering_billing.0030_alter_billingplan_name` (previous migration)
