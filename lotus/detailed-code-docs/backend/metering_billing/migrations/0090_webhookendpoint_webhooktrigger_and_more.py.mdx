---
title: "0090_webhookendpoint_webhooktrigger_and_more.py"
---

## High-level description
This migration file creates two new models, WebhookEndpoint and WebhookTrigger, and removes the Alert and HistoricalAlert models. It also adds fields to the WebhookEndpoint model for managing webhook endpoints and their associated triggers.

## Code Structure
The migration file defines two new models (WebhookEndpoint and WebhookTrigger) and their fields. It also removes the Alert and HistoricalAlert models. The WebhookEndpoint model is related to the Organization model, while the WebhookTrigger model is related to both Organization and WebhookEndpoint models.

## Symbols

### Migration
#### Description
This is a Django migration class that defines changes to be applied to the database schema.

#### Internal Logic
1. Creates the WebhookEndpoint model with fields for managing webhook endpoints.
2. Creates the WebhookTrigger model for associating triggers with webhook endpoints.
3. Removes the Alert and HistoricalAlert models.

### WebhookEndpoint
#### Description
A model representing a webhook endpoint for an organization.

#### Fields
| Name | Type | Description |
|:-----|:-----|:------------|
| id | BigAutoField | Auto-generated primary key |
| webhook_endpoint_id | CharField | Unique identifier for the webhook endpoint |
| name | CharField | Name of the webhook endpoint |
| webhook_url | CharField | URL of the webhook endpoint |
| webhook_secret | CharField | Secret key for the webhook endpoint |
| organization | ForeignKey | Related Organization model |

### WebhookTrigger
#### Description
A model representing a trigger associated with a webhook endpoint.

#### Fields
| Name | Type | Description |
|:-----|:-----|:------------|
| id | BigAutoField | Auto-generated primary key |
| trigger_name | CharField | Name of the trigger event |
| webhook_endpoint | ForeignKey | Related WebhookEndpoint model |

## Dependencies
This migration depends on the previous migration "0089_alter_metric_unique_together".

## Configuration
The migration uses default Django migration operations and doesn't require additional configuration.

## Error Handling
The migration uses standard Django migration error handling. If an error occurs during the migration process, Django will automatically roll back the changes.

## Performance Considerations
This migration creates new tables and indexes, which may take some time depending on the size of the database. It also removes existing tables, which should be relatively quick.