---
title: "0110_alter_metric_unique_together_and_more.py"
---

## High-level description
This Django migration script modifies the `Metric` model by removing its unique together constraint and adding three new unique constraints. These constraints ensure uniqueness across different combinations of fields like `organization`, `metric_id`, `billable_metric_name`, `event_name`, and more.

## References
This migration references the `metering_billing.0109_alter_event_idempotency_id_and_more` migration, indicating that it should be applied after that migration.

## Symbols
### `Migration`
#### Description
This class defines a Django migration that alters the `Metric` model.

#### Inputs
N/A - This is a migration class and doesn't take direct inputs.

#### Outputs
N/A - This is a migration class and doesn't return any outputs.

#### Internal Logic
This migration performs the following operations:

1. **`AlterUniqueTogether`**: Removes any existing unique together constraint on the `Metric` model.
2. **`AddConstraint` (1st instance)**: Adds a unique constraint named `unique_org_metric_id` to the `Metric` model. This constraint ensures that the combination of `organization` and `metric_id` is unique.
3. **`AddConstraint` (2nd instance)**: Adds a unique constraint named `unique_org_billable_metric_name` to the `Metric` model. This constraint ensures that the combination of `organization` and `billable_metric_name` is unique.
4. **`AddConstraint` (3rd instance)**: Adds a unique constraint named `unique_org_event_name_metric_type_and_other_fields` to the `Metric` model. This constraint ensures that the combination of `organization`, `billable_metric_name`, `event_name`, `metric_type`, `usage_aggregation_type`, `billable_aggregation_type`, `property_name`, `granularity`, and `is_cost_metric` is unique.

## Side Effects
This migration modifies the database schema by altering the constraints on the `Metric` model.

## Dependencies
- **Django**: This migration script depends on the Django migrations framework.

## Error Handling
This migration script does not implement specific error handling beyond the default Django migrations behavior.
