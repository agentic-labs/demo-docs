---
title: "0206_customer_created_historicalcustomer_created_and_more.py"
---

## High-level description
This Django migration adds new fields to several models in the `metering_billing` app, including `Customer`, `HistoricalCustomer`, `PlanComponent`, and `RecurringCharge`. These new fields primarily track creation timestamps and generate unique identifiers for specific entities.

## Symbols

### `Migration`
#### Description
This class represents a database migration operation. It adds new fields to existing database tables within the `metering_billing` app.

#### Inputs
N/A - This is a migration class, not a function, and doesn't accept direct inputs.

#### Outputs
N/A - Migrations enact changes on the database schema and don't return values.

#### Internal Logic
This migration performs the following operations:

1. **Adds `created` field to `Customer` and `HistoricalCustomer`:**
   - Adds a `created` field to both the `Customer` and `HistoricalCustomer` models.
   - This field stores the timestamp when a customer was created.
   - It defaults to the current UTC time using the `metering_billing.utils.utils.now_utc` function.

2. **Adds `usage_component_id` field to `PlanComponent`:**
   - Adds a `usage_component_id` field to the `PlanComponent` model.
   - This field stores a unique UUID for each plan component.
   - It defaults to a randomly generated UUID using `uuid.uuid4`.

3. **Adds `recurring_charge_id` field to `RecurringCharge`:**
   - Adds a `recurring_charge_id` field to the `RecurringCharge` model.
   - This field stores a unique UUID for each recurring charge.
   - It defaults to a randomly generated UUID using `uuid.uuid4`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `django.db.migrations` | Provides the necessary functions and classes for defining and applying database migrations in Django. |
| `metering_billing.utils.utils` | Imports the `now_utc` function to set the default value for the `created` field. |
| `uuid` | Used to generate UUIDs for the `usage_component_id` and `recurring_charge_id` fields. |

## References
- `metering_billing.utils.utils.now_utc`: This function is referenced to provide the default value for the `created` field. It likely returns the current UTC timestamp.
- `Customer`, `HistoricalCustomer`, `PlanComponent`, `RecurringCharge`: These are models defined within the `metering_billing` app. The migration modifies these existing models by adding new fields. 
