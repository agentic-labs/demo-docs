---
title: "0089_alter_metric_unique_together.py"
---

## High-level description
This Django migration file alters the unique constraint for the `Metric` model in the `metering_billing` app. It sets a new unique constraint that ensures the combination of `organization` and `metric_id` fields is unique for each `Metric` instance.

## Symbols

### Migration
#### Description
This migration class defines the changes to be applied to the database schema. It specifically alters the unique constraint for the `Metric` model.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dependencies | list | List of migration dependencies |
| operations | list | List of migration operations to be performed |

#### Internal Logic
1. The migration depends on the previous migration "0088_auto_20221128_2100".
2. It performs a single operation using `migrations.AlterUniqueTogether()` to modify the unique constraint of the `Metric` model.
3. The new unique constraint is set on the combination of `organization` and `metric_id` fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| django.db.migrations | Provides the Migration class and necessary operations for defining database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| dependencies | list | `[("metering_billing", "0088_auto_20221128_2100")]` | Specifies the migration this file depends on |
| operations | list | `[migrations.AlterUniqueTogether(...)]` | Defines the database schema changes to be applied |

## Side Effects
This migration will modify the database schema by adding a unique constraint to the `Metric` model. After applying this migration, it will not be possible to have two `Metric` instances with the same combination of `organization` and `metric_id` values.

## Performance Considerations
Adding a unique constraint may have a small impact on insert and update operations for the `Metric` model, as the database will need to check for uniqueness. However, it can improve query performance when filtering or joining on the `organization` and `metric_id` fields.