---
title: "0239_historicalorganization_gen_cust_in_braintree_after_lotus_and_more.py"
---

## High-level description
This migration file adds new fields to the Organization and HistoricalOrganization models in the metering_billing app. It introduces fields related to customer generation in payment processors and payment grace periods.

## Symbols

### Migration
#### Description
This Django migration adds new fields to the Organization and HistoricalOrganization models and modifies the OrganizationSetting model's setting_name choices.

#### Internal Logic
The migration performs the following operations:
1. Adds four new fields to both Organization and HistoricalOrganization models:
   - gen_cust_in_braintree_after_lotus (BooleanField)
   - gen_cust_in_stripe_after_lotus (BooleanField)
   - lotus_is_customer_source_for_salesforce (BooleanField)
   - payment_grace_period (IntegerField)
2. Modifies the OrganizationSetting model's setting_name field choices to include new options related to the added fields.

## Dependencies
This migration depends on the previous migration '0238_analysis_and_more'.

## Configuration
The migration adds the following configuration options to the Organization model:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| gen_cust_in_braintree_after_lotus | BooleanField | False | Indicates whether to generate a customer in Braintree after creating in Lotus |
| gen_cust_in_stripe_after_lotus | BooleanField | False | Indicates whether to generate a customer in Stripe after creating in Lotus |
| lotus_is_customer_source_for_salesforce | BooleanField | False | Indicates whether Lotus is the customer source for Salesforce |
| payment_grace_period | IntegerField | 0 | Specifies the payment grace period in days |

These options are also added to the HistoricalOrganization model for tracking historical changes.

The OrganizationSetting model's setting_name choices are updated to include:
- 'generate_customer_after_creating_in_lotus'
- 'gen_cust_in_braintree_after_lotus'
- 'payment_grace_period'
- 'crm_customer_source'

This migration enhances the Organization model's capabilities for managing customer generation in different payment processors and introduces a payment grace period feature.