---
title: "0176_remove_addonspecification_billing_frequency_one_time_recurring_flat_fee_timing_isnull_and_more.py"
---

## High-level description
This migration file contains database schema changes for the metering_billing application. It modifies several models, including AddonSpecification, InvoiceLineItem, Invoice, PriceTier, and SubscriptionRecord, by adding new fields, removing constraints, and altering existing fields.

## Symbols

### Migration
#### Description
This is a Django migration class that defines database schema changes for the metering_billing application.

#### Internal Logic
The migration performs the following operations:
1. Removes a constraint from the AddonSpecification model.
2. Removes the 'recurring_flat_fee_timing' field from the AddonSpecification model.
3. Adds 'associated_plan_component' and 'associated_recurring_charge' fields to the InvoiceLineItem model.
4. Modifies the 'payment_status' field in both HistoricalInvoice and Invoice models.
5. Alters the 'flat_fee_behavior' field in both HistoricalSubscriptionRecord and SubscriptionRecord models.
6. Modifies the 'batch_rounding_type' and 'type' fields in the PriceTier model.

## Dependencies
This migration depends on the previous migration '0175_merge_20230202_0606'.

## Side Effects
This migration will alter the database schema, potentially affecting existing data and application behavior. It's important to test thoroughly and consider data migration if necessary.

## Performance Considerations
As this migration involves modifying multiple tables and fields, it may take some time to execute on large databases. Consider running this migration during off-peak hours if dealing with a production database.