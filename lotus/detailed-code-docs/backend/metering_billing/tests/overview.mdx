---
title: "Overview"
---

## High-level description
This directory contains unit tests for various components of a metering and billing system. The tests cover a wide range of functionalities including customer management, event tracking, invoice generation, plan management, subscription handling, and integration with payment processors like Stripe.

## What does it do?
The test suite ensures that the metering and billing system functions correctly across different scenarios. It verifies:

1. Customer creation, retrieval, and deletion
2. Event tracking and metric calculations
3. Invoice generation and PDF creation
4. Plan creation, versioning, and feature management
5. Subscription creation, updating, and cancellation
6. Integration with payment processors (e.g., Stripe)
7. Timezone handling for organizations and customers
8. Access control for metrics and features
9. User registration and authentication

These tests help maintain the reliability and correctness of the billing system as new features are added or existing ones are modified.

## Entry points
The main entry point for running these tests would typically be through a test runner like pytest. Each test file (`test_*.py`) contains multiple test cases grouped into classes. The `conftest.py` file provides common fixtures and setup functions used across multiple test files.

Key test files include:
- `test_customer.py`: Tests customer-related operations
- `test_invoice_gen.py`: Tests invoice generation functionality
- `test_plans.py`: Tests plan management features
- `test_subscription.py`: Tests subscription-related operations
- `test_integrations.py`: Tests integration with payment processors

## Key Files
1. `conftest.py`: Contains pytest fixtures and utility functions for setting up test environments.
2. `test_metrics.py`: Tests metric calculation and usage tracking.
3. `test_invoice_gen.py`: Tests invoice generation and PDF creation.
4. `test_subscription.py`: Tests subscription creation, updating, and cancellation.
5. `test_integrations.py`: Tests integration with payment processors like Stripe.

## Dependencies
The test suite relies on several external libraries and frameworks:
- pytest: For test organization and execution
- Django: As the web framework for the application
- Django REST framework: For API testing
- model_bakery: For generating test data
- stripe: For testing Stripe integration

## Configuration
The tests use various configuration settings, including:
- Django settings for database configuration
- Stripe API keys for integration tests
- Custom settings for features like grace periods and timezone handling

The `conftest.py` file contains setup code that configures the test environment, including setting up dummy cache backends and disabling certain integrations during testing.