---
title: "cypress.yml"
---

## High-level description
This GitHub Actions workflow file, named "Cypress Tests," is designed to run Cypress tests for a web application. It sets up a development environment, including PostgreSQL and Redis services, and runs the tests on pull requests to the main branch.

## Code Structure
The workflow is structured as a single job named "cypress-tests" that runs on an Ubuntu environment. It sets up various services, environment variables, and dependencies before running the Cypress tests.

## Symbols

### `cypress-tests` (job)
#### Description
This job sets up the testing environment and runs the Cypress tests.

#### Internal Logic
1. Sets up PostgreSQL and Redis services
2. Configures environment variables
3. Checks out the code
4. Starts Redpanda (a Kafka-compatible event streaming platform)
5. Sets up Python 3.9
6. Installs Poetry (Python dependency management tool)
7. Caches Poetry dependencies
8. Installs backend dependencies
9. Runs database migrations
10. Sets up demo data
11. Initializes admin user
12. Starts Django server
13. Runs Cypress tests

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| timescale/timescaledb:latest-pg14 | PostgreSQL database service |
| redis | Redis service |
| redpanda-data/github-action@v0.1.3 | Redpanda (Kafka-compatible) service |
| actions/setup-python@v3 | Set up Python environment |
| actions/cache@v1 | Cache Poetry dependencies |
| cypress-io/github-action@v5 | Run Cypress tests |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| DJANGO_SETTINGS_MODULE | string | "lotus.settings" | Django settings module |
| PYTHONPATH | string | "." | Python path |
| DEBUG | boolean | False | Django debug mode |
| KAFKA_URL | string | "localhost:9092" | Kafka URL |
| VITE_API_URL | string | "http://localhost:8000/" | API URL for Vite |

## Error Handling
The workflow does not implement specific error handling mechanisms beyond the default GitHub Actions behavior.

## Logging
No specific logging mechanisms are implemented in this workflow.

## TODOs
The workflow appears to be incomplete, as the last line is cut off:
```yaml
wait-on: "http://localhost:8000/api/healthcheck/, http://localhost:
```
This line should be completed to specify the correct URLs to wait for before running the Cypress tests.