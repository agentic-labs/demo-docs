---
title: "http_error.rb"
---

## High-level description
This code defines a custom error class `HttpError` within the `LagoHttpClient` module. It is designed to handle HTTP errors in the Lago HTTP client, providing a structured way to capture and report error details such as error code, error body, and the URI that caused the error.

## Code Structure
The `HttpError` class inherits from `StandardError` and contains three main components:
1. Initialization with error details
2. A custom `message` method for error reporting
3. A `json_message` method to parse the error body as JSON

## Symbols

### `HttpError`
#### Description
A custom error class for handling HTTP errors in the Lago HTTP client.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| code | Integer | The HTTP error code |
| body | String | The error response body |
| uri | String | The URI that caused the error |

#### Internal Logic
- Initializes instance variables with the provided error details
- Defines a custom `message` method that formats the error information
- Provides a `json_message` method to parse the error body as JSON

### `message`
#### Description
Formats the error information into a human-readable string.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| message | String | Formatted error message |

### `json_message`
#### Description
Parses the error body as JSON.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| parsed_body | Hash | JSON-parsed error body |

## Error Handling
This class itself is part of the error handling mechanism for the Lago HTTP client. It provides a structured way to capture and report HTTP errors, including the error code, body, and the URI that caused the error.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| JSON | Used to parse the error body as JSON in the `json_message` method |

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.