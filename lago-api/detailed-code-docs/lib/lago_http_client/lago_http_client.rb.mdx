---
title: "lago_http_client.rb"
---

## High-level description
This file defines the `LagoHttpClient` module, which is likely used for making HTTP requests in the Lago application. It requires necessary Ruby libraries and other related files to set up the HTTP client functionality.

## Code Structure
The file is relatively simple, consisting of module definition and require statements. It sets up the foundation for the `LagoHttpClient` module, which is then used in other parts of the application for making HTTP requests.

## Symbols

### `LagoHttpClient`
#### Description
This is the main module that encapsulates the HTTP client functionality for the Lago application. It serves as a namespace for related classes and methods.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| net/http | Ruby's built-in HTTP client library |
| json | Ruby's built-in JSON parsing library |
| lago_http_client/client | Custom HTTP client implementation |
| lago_http_client/http_error | Custom HTTP error class |

## References
The `LagoHttpClient` module is used in various parts of the application, including:
- Webhook services
- Integration services
- Jobs (e.g., `SendWebhookJob`, `FetchTaxItemsJob`)
- Authentication flows (e.g., Okta integration)

These references demonstrate that the `LagoHttpClient` is a core component used for making HTTP requests throughout the Lago application, particularly for integrations, webhooks, and external API communications.

The related code snippets show that the `LagoHttpClient::Client` class is instantiated and used for making HTTP requests in various services and jobs. For example:

1. In the `Integrations::Aggregator::BaseService`, it's used to communicate with the Nango API.
2. In the `SendWebhookJob`, it's required for sending webhook notifications.
3. In the Okta authentication flow, it's used to verify tokens and fetch user information.

The `LagoHttpClient::HttpError` class is used for error handling in HTTP requests, as seen in the retry mechanism of the `FetchTaxItemsJob`.

This file sets up the foundation for these HTTP-related functionalities used throughout the application.