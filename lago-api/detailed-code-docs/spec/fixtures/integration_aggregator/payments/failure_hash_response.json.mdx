---
title: "failure_hash_response.json"
---

## High-level description
This JSON file represents a fixture for integration testing, specifically for a payment failure scenario. It contains a structure that simulates a response from a payment processing system, showing an empty list of successful payments and a single failed payment with associated error details.

## Symbols

### Root Object
#### Description
The root object contains two main arrays: `succeededPayment` and `failedPayments`.

#### Internal Logic
- `succeededPayment`: An empty array, indicating no successful payments in this scenario.
- `failedPayments`: An array containing one object representing a failed payment attempt.

### failedPayments Array
#### Description
This array contains objects representing failed payment attempts. In this fixture, there is one failed payment.

#### Internal Logic
The failed payment object contains the following properties:
- `invoice_id`: A UUID representing the invoice associated with the failed payment.
- `credit_note_id`: Set to null, indicating no credit note is associated with this payment.
- `account_code`: A string representing an account code, possibly for accounting purposes.
- `date`: An ISO 8601 formatted date-time string representing when the payment attempt occurred.
- `amount_cents`: An integer representing the payment amount in cents.
- `validation_errors`: An array of error objects, each containing a `Message` field describing the reason for the failure.

## References
This fixture is referenced in the related file `spec/services/integrations/aggregator/payments/create_service_spec.rb`. Specifically, it is used in the context of testing the `Integrations::Aggregator::Payments::CreateService` when a payment creation fails.

## Dependencies
This JSON fixture doesn't have direct dependencies, but it is used in the context of RSpec tests for the Rails application, particularly for testing payment integration scenarios.

## Error Handling
The fixture demonstrates error handling by including a `validation_errors` array in the failed payment object. In this case, the error message indicates that the invoice could not be found.

---

This fixture is crucial for testing how the application handles payment failures, particularly when an invoice cannot be found. It allows developers to simulate and verify the behavior of the payment creation service when faced with error scenarios, ensuring robust error handling in the actual application.