---
title: "success_hash_response.json"
---

## High-level description
This JSON file represents a fixture for integration testing, specifically for a payment aggregator's success response. It contains data for a successful payment and an empty array for failed payments, simulating a scenario where a payment was successfully processed.

## Symbols

### Root Object
#### Description
The root object contains two main properties: `succeededPayment` and `failedPayments`.

#### Internal Logic
- `succeededPayment`: An array containing one successful payment object.
- `failedPayments`: An empty array, indicating no failed payments in this scenario.

### succeededPayment Array
#### Description
This array contains a single object representing a successful payment.

#### Internal Logic
The payment object includes the following properties:
- `id`: A unique identifier for the payment.
- `status`: The current status of the payment (in this case, "AUTHORISED").
- `invoice_id`: The associated invoice identifier.
- `credit_note_id`: Set to null, indicating no associated credit note.
- `account_code`: A code associated with the account (possibly for accounting purposes).
- `date`: The date and time of the payment transaction.
- `amount_cents`: The payment amount in cents.

## References
This fixture is referenced in the related code snippet `spec/services/integrations/aggregator/payments/create_service_spec.rb`. Specifically, it's used in the context of testing the `Integrations::Aggregator::Payments::CreateService` when the response is a hash and the payment is successfully created.

In the test file, this fixture is loaded and used to simulate a successful response from the payment aggregator API:

```ruby
let(:body) do
  path = Rails.root.join('spec/fixtures/integration_aggregator/payments/success_hash_response.json')
  File.read(path)
end
```

The test then verifies that the service correctly interprets this response:

```ruby
it 'returns external id' do
  result = service_call

  aggregate_failures do
    expect(result).to be_success
    expect(result.external_id).to eq('e68f6095-f8d2-4d7a-ac05-7bb919d0330e')
  end
end
```

This test ensures that the service correctly extracts the payment ID from the `succeededPayment` array and returns it as the `external_id`.

## Dependencies
This fixture doesn't have direct dependencies, but it's used in conjunction with the RSpec testing framework and the `Integrations::Aggregator::Payments::CreateService` in the Rails application.