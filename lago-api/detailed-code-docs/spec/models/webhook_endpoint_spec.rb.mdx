---
title: "webhook_endpoint_spec.rb"
---

## High-level description
This code is a RSpec test suite for the WebhookEndpoint model. It verifies the model's associations, validations, and specific behavior related to webhook URL uniqueness and format validation.

## Symbols

### RSpec.describe WebhookEndpoint
#### Description
This is the main test suite for the WebhookEndpoint model. It uses RSpec to define various expectations and scenarios to test the model's behavior.

#### Internal Logic
The test suite is organized into several sections:
1. Association tests
2. Presence validation test
3. Webhook URL uniqueness validation tests
4. Webhook URL format validation tests

### Association tests
#### Description
These tests verify the model's associations with other models.

#### Internal Logic
- Tests that WebhookEndpoint belongs to an organization
- Tests that WebhookEndpoint has many webhooks with a dependent destroy relationship

### Presence validation test
#### Description
This test ensures that the webhook_url attribute is required.

#### Internal Logic
- Validates the presence of webhook_url

### Webhook URL uniqueness validation tests
#### Description
These tests verify that the webhook_url is unique within the scope of an organization.

#### Internal Logic
- Tests the case when the webhook_url is unique within an organization (no error)
- Tests the case when the webhook_url is not unique within an organization (error is present)

### Webhook URL format validation tests
#### Description
These tests ensure that the webhook_url attribute is in a valid format.

#### Internal Logic
- Tests valid http URL format
- Tests valid https URL format
- Tests invalid URL format

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails testing environment and configuration |
| FactoryBot | Used for creating test data |

## References
The test suite references the following models and associations:
- WebhookEndpoint
- Organization
- Webhook

Note: The actual implementation of these models is not provided in the given code snippet.