---
title: "xero_integration_spec.rb"
---

## High-level description
This code is a RSpec test suite for the `Integrations::XeroIntegration` model. It tests various aspects of the model, including validations, attribute assignments, and retrieval of settings related to Xero integration functionality.

## Symbols

### `RSpec.describe Integrations::XeroIntegration, type: :model`
#### Description
This is the main describe block for the `Integrations::XeroIntegration` model tests. It sets up the context for all the tests related to this model.

### `subject(:xero_integration)`
#### Description
This defines the subject of the tests, which is an instance of `XeroIntegration` created using FactoryBot.

### Validation Tests
#### Description
These tests check the presence and uniqueness validations for the `XeroIntegration` model.

#### Internal Logic
- Tests for presence of `name` and `connection_id`
- Tests for uniqueness of `code` scoped to `organization_id`

### `.connection_id`
#### Description
This test ensures that the `connection_id` attribute can be assigned and retrieved correctly.

#### Internal Logic
- Assigns a value to `connection_id`
- Verifies that the assigned value can be retrieved

### `#sync_credit_notes`, `#sync_invoices`, `#sync_payments`
#### Description
These tests check the assignment and retrieval of boolean settings for syncing different types of Xero data.

#### Internal Logic
For each setting:
- Assigns a boolean value to the setting
- Verifies that the assigned value can be retrieved correctly

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails and RSpec configuration |
| FactoryBot | Used for creating test objects |

## References
The test file references the `Integrations::XeroIntegration` model, which is not provided in the given code snippets. However, based on the tests, we can infer that this model likely:

1. Belongs to an organization
2. Has attributes: `name`, `connection_id`, `code`
3. Has boolean settings: `sync_credit_notes`, `sync_invoices`, `sync_payments`
4. Implements validations for presence and uniqueness

The `CreateXeroIntegrationInput` GraphQL input type in the related file `app/graphql/types/integrations/xero/create_input.rb` aligns with the attributes tested in this spec, suggesting a connection between the GraphQL API and the model being tested.

## Notes
The test file uses RSpec's expectation syntax and FactoryBot for object creation, which are common testing practices in Rails applications. The `rails_helper` included at the beginning of the file sets up the testing environment, including SimpleCov for code coverage reporting.