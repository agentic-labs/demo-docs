---
title: "application_controller_spec.rb"
---

## High-level description
This code defines RSpec tests for the ApplicationController in a Rails application. It specifically tests the health check endpoint and the handling of missing resources, ensuring proper responses and JSON structures.

## Symbols

### RSpec.describe ApplicationController
#### Description
This is the main test suite for the ApplicationController. It contains two describe blocks for testing different aspects of the controller.

### GET /health
#### Description
This test case verifies the behavior of the health check endpoint.

#### Internal Logic
1. Sends a GET request to the '/health' endpoint.
2. Uses `aggregate_failures` to group multiple expectations.
3. Checks the response status, message, version, and GitHub URL.

### Missing resources
#### Description
This test case verifies the handling of requests for non-existent resources.

#### Internal Logic
1. Sends a GET request to a non-existent endpoint ('/not_found').
2. Uses `aggregate_failures` to group multiple expectations.
3. Checks the response status, error message, and error code.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails-specific test configurations and helpers |

## References
- The `json` helper method is likely defined in a support file (possibly in `spec/support/api_helper.rb`) to parse the response body as JSON.

## Notes
1. The tests use the `aggregate_failures` RSpec feature to group multiple expectations, allowing all expectations to be evaluated even if one fails.
2. The health check endpoint is expected to return a JSON response with specific keys: message, version, and github_url.
3. The 404 response for missing resources is expected to return a JSON response with specific keys: status, error, and code.
4. The tests are using the `type: :request` metadata, indicating they are request specs that simulate full HTTP requests.

This test file ensures that the ApplicationController correctly handles basic application health checks and properly responds to requests for non-existent resources, which are crucial for maintaining a robust and informative API.