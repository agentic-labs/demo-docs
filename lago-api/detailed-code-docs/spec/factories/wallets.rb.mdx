---
title: "wallets.rb"
---

## High-level description
This file defines a factory for creating `Wallet` objects using FactoryBot, a popular Ruby gem for generating test data. The factory provides default attributes for a wallet and includes a trait for creating terminated wallets.

## Symbols

### `:wallet` factory
#### Description
This factory defines the default attributes for creating a `Wallet` object. It sets up a basic active wallet with various properties such as name, status, rate, currency, and balances.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | This factory doesn't take explicit inputs. It uses FactoryBot's DSL to define attributes. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| wallet | Wallet | An instance of the Wallet model with the defined attributes |

#### Internal Logic
1. Associates a customer with the wallet using the `customer` association.
2. Sets a random name using `Faker::Name.name`.
3. Sets the status to 'active'.
4. Sets the rate_amount to '1.00'.
5. Sets the currency to 'EUR'.
6. Initializes credits_balance, balance_cents, and consumed_credits to 0.

### `:terminated` trait
#### Description
This trait modifies the default wallet factory to create a terminated wallet.

#### Internal Logic
Sets the status attribute to 'terminated'.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Provides the DSL for defining factories |
| Faker | Generates random names for the wallet |

## Notes
1. The factory assumes the existence of a `customer` factory or association.
2. The use of `Faker` for generating names suggests this is primarily used for testing or seeding development data.
3. The factory sets up a basic active wallet by default, with the option to create a terminated wallet using the `:terminated` trait.
4. All monetary values (rate_amount, credits_balance, balance_cents, consumed_credits) are initialized as integers or strings representing decimal values, which is common for handling currency in databases to avoid floating-point precision issues.

This factory provides a convenient way to create Wallet objects with predefined attributes for testing purposes, allowing developers to easily generate consistent test data for their wallet-related tests.