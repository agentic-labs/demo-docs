---
title: "adjusted_fees.rb"
---

## High-level description
This file defines a factory for creating `AdjustedFee` objects using FactoryBot, a popular Ruby gem for creating test data. The factory sets up default attributes for an adjusted fee, including associations with other models and specific fee details.

## Symbols

### `factory :adjusted_fee`
#### Description
This factory defines the blueprint for creating `AdjustedFee` objects with predefined attributes and associations.

#### Inputs
The factory doesn't have explicit inputs, but it defines default values for various attributes of an `AdjustedFee` object.

#### Outputs
When used, this factory produces an `AdjustedFee` object with the specified attributes.

#### Internal Logic
The factory sets up the following attributes and associations:

1. Associations:
   - `invoice`: Associates the adjusted fee with an invoice.
   - `fee`: Associates the adjusted fee with a fee.
   - `subscription`: Associates the adjusted fee with a subscription.

2. Attributes:
   - `charge`: Set to `nil`.
   - `fee_type`: Set to `'subscription'`.
   - `unit_amount_cents`: Set to `200`.
   - `units`: Set to `2`.
   - `adjusted_amount`: Set to `true`.
   - `invoice_display_name`: Set to a random character name from Tolkien's fantasy world using `Faker::Fantasy::Tolkien.character`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to define and create test data objects |
| Faker | Used to generate random fantasy character names for `invoice_display_name` |

## Notes
1. The `frozen_string_literal: true` comment at the top of the file enables frozen string literals, which can improve performance and memory usage in Ruby.
2. This factory is likely used in test suites to create `AdjustedFee` objects with consistent, predefined attributes for testing purposes.
3. The use of associations (`invoice`, `fee`, and `subscription`) suggests that the `AdjustedFee` model has relationships with these other models in the application.
4. The `charge` attribute is explicitly set to `nil`, which might indicate that it's an optional association or attribute.
5. The `adjusted_amount` is set to `true`, implying that this factory creates adjusted fees where the amount has been modified.
6. The use of `Faker` for the `invoice_display_name` provides a random, but consistent way to generate unique names for testing purposes.

This factory provides a convenient way to create `AdjustedFee` objects with realistic data for testing, making it easier to set up test scenarios involving adjusted fees in the application.