---
title: "fee_applied_taxes.rb"
---

## High-level description
This code defines a factory for creating `Fee::AppliedTax` objects using FactoryBot, a popular Ruby gem for creating test data. The factory sets up default attributes for a fee applied tax, including associations with fee and tax objects, as well as specific tax details like code, description, name, rate, and amount.

## Symbols

### `fee_applied_tax` factory
#### Description
This factory defines the attributes and associations for creating `Fee::AppliedTax` objects. It's used to generate test data for unit tests or other testing scenarios where `Fee::AppliedTax` instances are needed.

#### Inputs
The factory doesn't have explicit inputs, but it defines default values for various attributes of the `Fee::AppliedTax` model.

#### Outputs
When used, this factory produces a `Fee::AppliedTax` object with the specified attributes.

#### Internal Logic
The factory sets up the following attributes for each `Fee::AppliedTax` object:

1. Associations:
   - `fee`: Associates with a `fee` object (likely another factory or model)
   - `tax`: Associates with a `tax` object (likely another factory or model)

2. Tax details:
   - `tax_code`: Generates a unique code using "vat-" prefix and a UUID
   - `tax_description`: Sets a default description "French Standard VAT"
   - `tax_name`: Sets the name to "VAT"
   - `tax_rate`: Sets the rate to 20.0 (presumably 20%)

3. Amount:
   - `amount_cents`: Sets the amount to 200 cents
   - `amount_currency`: Sets the currency to "EUR" (Euro)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to define and create test data factories |
| SecureRandom | Used to generate a UUID for the `tax_code` attribute |

## Notes
1. The factory uses the `class: 'Fee::AppliedTax'` option, suggesting that `Fee::AppliedTax` is likely a namespaced model.
2. The `amount_cents` attribute implies that the model probably uses the money-rails gem or a similar approach to handle currency amounts.
3. This factory can be customized when used in tests by overriding any of the default attributes.