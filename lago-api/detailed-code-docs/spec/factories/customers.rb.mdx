---
title: "customers.rb"
---

## High-level description
This file defines a factory for creating `Customer` objects using FactoryBot, a popular Ruby gem for generating test data. The factory includes various attributes with realistic fake data and additional traits for handling shipping addresses.

## Symbols

### `:customer` factory
#### Description
Defines a factory for creating `Customer` objects with a set of default attributes using fake data.

#### Inputs
No explicit inputs, but uses FactoryBot's DSL to define attributes.

#### Outputs
A `Customer` object with populated attributes.

#### Internal Logic
- Uses `Faker` gem to generate realistic fake data for most attributes.
- Associates the customer with an organization.
- Sets a default currency of 'EUR'.
- Generates a UUID for the `external_id`.

### `:with_shipping_address` trait
#### Description
A trait that adds shipping address information to a customer.

#### Internal Logic
Populates shipping address fields with fake data using `Faker`.

### `:with_same_billing_and_shipping_address` trait
#### Description
A trait that sets the shipping address to be the same as the billing address.

#### Internal Logic
Copies the values from the main address fields to the corresponding shipping address fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Defines factories for creating test objects |
| Faker | Generates realistic fake data for various attributes |
| SecureRandom | Generates a UUID for the `external_id` |

## Notes
1. The factory uses various Faker modules to generate realistic data, such as `Faker::TvShows::SiliconValley` for names and `Faker::Address` for address-related fields.
2. The `organization` association suggests that a Customer belongs to an Organization in the application's data model.
3. The factory provides flexibility in creating customers with or without shipping addresses, and with the option to have the same billing and shipping address.
4. The default currency is set to 'EUR', which might indicate a European-focused application or a need to specify a default currency for all customers.
5. The use of `external_id` with a UUID suggests that the application might integrate with external systems or APIs.

This factory is likely used in test suites to generate sample customer data for various scenarios, making it easier to write comprehensive tests for customer-related functionality in the application.