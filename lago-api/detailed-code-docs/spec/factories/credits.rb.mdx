---
title: "credits.rb"
---

## High-level description
This code defines factories for creating `Credit` objects using FactoryBot in a Ruby on Rails application. It provides three different factory definitions: a basic credit, a credit note credit, and a progressive billing invoice credit, each with specific associations and default attributes.

## Symbols

### `factory :credit`
#### Description
Defines a basic factory for creating `Credit` objects.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| invoice | association | Associates the credit with an invoice |
| applied_coupon | association | Associates the credit with an applied coupon |
| amount_cents | integer | Sets the credit amount in cents |
| amount_currency | string | Sets the currency for the credit amount |

#### Internal Logic
- Associates the credit with an invoice and an applied coupon
- Sets a default amount of 200 cents
- Sets a default currency of 'EUR'

### `factory :credit_note_credit`
#### Description
Defines a factory for creating `Credit` objects specifically for credit notes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| invoice | association | Associates the credit with an invoice |
| credit_note | association | Associates the credit with a credit note |
| amount_cents | integer | Sets the credit amount in cents |
| amount_currency | string | Sets the currency for the credit amount |

#### Internal Logic
- Associates the credit with an invoice and a credit note
- Sets a default amount of 200 cents
- Sets a default currency of 'EUR'

### `factory :progressive_billing_invoice_credit`
#### Description
Defines a factory for creating `Credit` objects specifically for progressive billing invoices.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| invoice | association | Associates the credit with an invoice |
| progressive_billing_invoice | association | Associates the credit with a progressive billing invoice |
| amount_cents | integer | Sets the credit amount in cents |
| amount_currency | string | Sets the currency for the credit amount |

#### Internal Logic
- Associates the credit with an invoice
- Associates the credit with a progressive billing invoice (using the invoice factory)
- Sets a default amount of 200 cents
- Sets a default currency of 'EUR'

## References
The factories defined in this file reference the following models:
- `Credit`
- `Invoice`
- `AppliedCoupon`
- `CreditNote`

These references are crucial for understanding the associations and structure of the `Credit` model in the application.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to define factories for creating test objects |

Note: The `FactoryBot.define` block is used to define all the factories in this file.

This factory definition file is likely used in the context of testing, allowing developers to easily create `Credit` objects with different associations and attributes for various test scenarios. The different factory definitions cater to different use cases within the application, such as basic credits, credit note credits, and progressive billing invoice credits.