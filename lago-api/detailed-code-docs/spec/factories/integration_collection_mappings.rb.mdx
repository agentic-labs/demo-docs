---
title: "integration_collection_mappings.rb"
---

## High-level description
This file defines FactoryBot factories for creating test instances of `IntegrationCollectionMappings::NetsuiteCollectionMapping` and `IntegrationCollectionMappings::XeroCollectionMapping`. These factories are used to generate sample data for testing purposes, simulating collection mappings for Netsuite and Xero integrations.

## Symbols

### `netsuite_collection_mapping` factory
#### Description
This factory creates instances of `IntegrationCollectionMappings::NetsuiteCollectionMapping`, which represent collection mappings for Netsuite integrations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration | association | Associated Netsuite integration |
| mapping_type | symbol | Type of mapping (randomly selected from a predefined list) |
| settings | hash | Configuration settings for the mapping |

#### Internal Logic
- Associates the mapping with a Netsuite integration using the `:netsuite_integration` factory.
- Randomly selects a `mapping_type` from a predefined list of symbols.
- Sets `settings` with sample data for `external_id`, `external_account_code`, and `external_name`.

### `xero_collection_mapping` factory
#### Description
This factory creates instances of `IntegrationCollectionMappings::XeroCollectionMapping`, which represent collection mappings for Xero integrations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration | association | Associated Xero integration |
| mapping_type | symbol | Type of mapping (randomly selected from a predefined list) |
| settings | hash | Configuration settings for the mapping |

#### Internal Logic
- Associates the mapping with a Xero integration using the `:xero_integration` factory.
- Randomly selects a `mapping_type` from a predefined list of symbols (includes 'account' in addition to Netsuite types).
- Sets `settings` with sample data for `external_id`, `external_account_code`, and `external_name`.

## References
- `IntegrationCollectionMappings::NetsuiteCollectionMapping` (from app/models/integration_collection_mappings/netsuite_collection_mapping.rb)
- `IntegrationCollectionMappings::XeroCollectionMapping` (from app/models/integration_collection_mappings/xero_collection_mapping.rb)
- `Integrations::NetsuiteIntegration` (from app/models/integrations/netsuite_integration.rb)
- `Integrations::XeroIntegration` (from app/models/integrations/xero_integration.rb)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to define factories for creating test objects |

## Notes
1. Both factories use similar structures but are tailored to their respective integration types (Netsuite and Xero).
2. The `mapping_type` for both factories is randomly selected from a predefined list of symbols, allowing for varied test scenarios.
3. The `settings` hash provides sample external identifiers and names, which can be used to simulate real-world integration data during testing.
4. The Xero factory includes an additional `account` mapping type not present in the Netsuite factory.
5. These factories are likely used in conjunction with the `IntegrationCollectionMappings::Factory` (from app/services/integration_collection_mappings/factory.rb) to create appropriate mapping instances based on the integration type.