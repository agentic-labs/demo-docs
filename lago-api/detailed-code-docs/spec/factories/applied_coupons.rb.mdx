---
title: "applied_coupons.rb"
---

## High-level description
This file defines a factory for creating `AppliedCoupon` objects using FactoryBot, a popular Ruby gem for creating test data. The factory sets up default attributes for an applied coupon, including associations with a customer and a coupon, as well as specific values for amount, currency, status, and frequency.

## Symbols

### `FactoryBot.define`
#### Description
This method is used to define a new factory for the `AppliedCoupon` model. It encapsulates the factory definition and allows for the creation of `AppliedCoupon` instances with predefined attributes.

### `:applied_coupon` factory
#### Description
This factory defines the default attributes for creating an `AppliedCoupon` object. It sets up associations and default values for various attributes.

#### Attributes
| Name | Type | Description |
|:-----|:-----|:------------|
| customer | association | Associates the applied coupon with a customer |
| coupon | association | Associates the applied coupon with a coupon |
| amount_cents | integer | Sets the amount in cents (200) |
| amount_currency | string | Sets the currency ('EUR') |
| status | string | Sets the status ('active') |
| frequency | string | Sets the frequency ('once') |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used for defining and creating test data factories |

## Notes
1. The `frozen_string_literal: true` comment at the top of the file is a Ruby directive that freezes all string literals in the file, potentially improving performance and preventing accidental string modifications.

2. This factory can be used in test files to create `AppliedCoupon` instances with these default attributes. For example:
   ```ruby
   applied_coupon = create(:applied_coupon)
   ```

3. The factory assumes the existence of `customer` and `coupon` factories or models in the application.

4. The amount is set in cents (200) and uses the Euro currency, which suggests that the application might be using the Money gem or a similar approach to handle currency.

5. The default status is set to 'active', and the frequency is set to 'once', indicating that this might be a one-time use coupon by default.

6. Developers can override any of these default attributes when creating an instance, allowing for flexible test data creation.

This factory provides a convenient way to create `AppliedCoupon` objects for testing purposes, ensuring consistent and easily customizable test data across the application's test suite.