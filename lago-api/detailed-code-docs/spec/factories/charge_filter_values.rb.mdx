---
title: "charge_filter_values.rb"
---

## High-level description
This code defines a factory for creating `ChargeFilterValue` objects using FactoryBot. It's primarily used for testing purposes, allowing developers to easily create test data for charge filter values associated with billable metric filters.

## Symbols

### `FactoryBot.define`
#### Description
This method is used to define a new factory for the `ChargeFilterValue` model.

### `factory :charge_filter_value`
#### Description
This defines the factory for creating `ChargeFilterValue` objects.

#### Internal Logic
1. It uses a transient attribute `billable_metric_filter` to create a new `BillableMetricFilter` object.
2. It associates the `ChargeFilterValue` with a `charge_filter`.
3. It sets the `billable_metric_filter_id` to the ID of the created `billable_metric_filter`.
4. It randomly selects one value from the `billable_metric_filter`'s values array and assigns it to the `values` attribute of the `ChargeFilterValue`.

### `transient`
#### Description
This block defines attributes that are used during the object creation process but are not part of the actual `ChargeFilterValue` model.

#### Internal Logic
It creates a new `BillableMetricFilter` object using the `create` method from FactoryBot.

### `charge_filter`
#### Description
This line associates the `ChargeFilterValue` with a `charge_filter`. The actual implementation of creating the `charge_filter` is not shown in this snippet, but it's likely defined in another factory.

### `billable_metric_filter_id`
#### Description
This sets the `billable_metric_filter_id` of the `ChargeFilterValue` to the ID of the transient `billable_metric_filter`.

### `values`
#### Description
This sets the `values` attribute of the `ChargeFilterValue` to an array containing a single randomly selected value from the `billable_metric_filter`'s values.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used for defining and creating test data factories |

## References
This factory references the following models and associations:
- `ChargeFilterValue`
- `BillableMetricFilter`
- `ChargeFilter`

These references can be seen in the related `BillableMetricFilter` model file, which shows the associations between these models.