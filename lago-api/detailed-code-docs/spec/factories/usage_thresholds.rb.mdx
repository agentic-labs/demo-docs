---
title: "usage_thresholds.rb"
---

## High-level description
This file defines a factory for creating `UsageThreshold` objects using FactoryBot, a popular Ruby gem for creating test data. The factory provides default attributes and a trait for creating recurring usage thresholds, which can be used in tests to easily generate sample data.

## Symbols

### `:usage_threshold` factory
#### Description
This factory defines the structure and default values for creating `UsageThreshold` objects. It sets up basic attributes and provides a trait for creating recurring thresholds.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| plan | association | Associated plan object |
| threshold_display_name | string | Display name for the threshold |
| amount_cents | integer | Amount in cents |
| recurring | boolean | Whether the threshold is recurring |

#### Internal Logic
- Associates a `plan` object with the usage threshold.
- Generates a random name for `threshold_display_name` using Faker.
- Sets `amount_cents` to 100 by default.
- Sets `recurring` to `false` by default.
- Defines a `:recurring` trait that sets `recurring` to `true`.

### `:recurring` trait
#### Description
This trait modifies the base `:usage_threshold` factory to create recurring usage thresholds.

#### Internal Logic
Sets the `recurring` attribute to `true`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Defines factories for creating test objects |
| Faker | Generates random data for `threshold_display_name` |

## Notes
- The factory uses the `frozen_string_literal: true` pragma, which helps improve performance and memory usage by freezing all string literals in the file.
- The `plan` association suggests that `UsageThreshold` has a relationship with a `Plan` model, but the exact nature of this relationship is not defined in this factory.
- The use of `amount_cents` implies that the application might be using a money-handling library or pattern to deal with currency amounts.
- The factory provides a flexible way to create both non-recurring (default) and recurring usage thresholds for testing purposes.