---
title: "coupon_targets.rb"
---

## High-level description
This code defines factory definitions for creating test instances of `CouponTarget` objects using FactoryBot. It provides two factories: `coupon_plan` and `coupon_billable_metric`, which are used to create associations between coupons and plans or billable metrics, respectively.

## Symbols

### `FactoryBot.define`
#### Description
This method is used to define factories for creating test objects. It encapsulates the factory definitions for `CouponTarget` objects.

### `factory :coupon_plan`
#### Description
This factory creates a `CouponTarget` object associated with a coupon and a plan.

#### Internal Logic
- Sets the class of the created object to `CouponTarget`
- Associates a coupon with the `CouponTarget` object
- Associates a plan with the `CouponTarget` object

### `factory :coupon_billable_metric`
#### Description
This factory creates a `CouponTarget` object associated with a coupon and a billable metric.

#### Internal Logic
- Sets the class of the created object to `CouponTarget`
- Associates a coupon with the `CouponTarget` object
- Associates a billable metric with the `CouponTarget` object

## References
The code references the following models:
- `CouponTarget`: The main model being created by these factories
- `Coupon`: Associated with both factories
- `Plan`: Associated with the `coupon_plan` factory
- `BillableMetric`: Associated with the `coupon_billable_metric` factory

## Dependencies
This code depends on the FactoryBot gem, which is commonly used for creating test data in Ruby on Rails applications.

## Notes
1. The `CouponTarget` model is not directly visible in the provided code snippets, but it's implied to be a join model that associates coupons with either plans or billable metrics.
2. The factories defined here are likely used in test suites to create test data for scenarios involving coupons applied to specific plans or billable metrics.
3. The use of these factories allows for easy creation of test data with valid associations, which is crucial for testing the relationships between coupons, plans, and billable metrics.