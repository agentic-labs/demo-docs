---
title: "coupons.rb"
---

## High-level description
This file defines a factory for creating `Coupon` objects using FactoryBot, a popular Ruby gem for generating test data. The factory sets up default attributes for a coupon, including its name, code, type, status, and monetary details.

## Symbols

### `factory :coupon`
#### Description
This factory defines the default attributes for creating a `Coupon` object. It uses FactoryBot's DSL to specify various attributes of a coupon, providing a convenient way to generate test data for coupon-related tests.

#### Inputs
This factory doesn't have explicit inputs, but it uses FactoryBot's syntax to define default values for the coupon's attributes.

#### Outputs
When used, this factory will produce a `Coupon` object with the specified attributes.

#### Internal Logic
The factory sets up the following attributes for a coupon:

1. `organization`: Associates the coupon with an organization (likely using another factory).
2. `name`: Generates a random name using Faker.
3. `code`: Generates a random 10-character alphanumeric code using Faker.
4. `coupon_type`: Sets the type to 'fixed_amount'.
5. `status`: Sets the status to 'active'.
6. `expiration`: Sets the expiration to 'no_expiration'.
7. `amount_cents`: Sets the amount to 200 cents.
8. `amount_currency`: Sets the currency to 'EUR'.
9. `frequency`: Sets the frequency to 'once'.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Provides the DSL for defining factories |
| Faker | Generates random data for name and code attributes |

## Notes
1. This factory provides a good starting point for creating coupon objects in tests, but developers may need to override specific attributes for different test scenarios.
2. The use of `Faker` ensures that each created coupon has a unique name and code, which is useful for testing uniqueness constraints or scenarios involving multiple coupons.
3. The monetary amount is set in cents (200) and uses EUR as the currency, which is a common practice to avoid floating-point issues with currency calculations.
4. The factory sets up a 'fixed_amount' coupon type, but other types might exist in the actual implementation.
5. The 'active' status and 'no_expiration' expiration suggest that by default, this factory creates valid, usable coupons.
6. The 'once' frequency implies that this coupon can only be used one time, but other frequency options might be available in the actual model.

This factory definition provides a solid foundation for testing coupon-related functionality in the application, allowing developers to easily create coupon objects with sensible defaults while retaining the flexibility to override any attribute as needed for specific test cases.