---
title: "lifetime_usage.rb"
---

## High-level description
This file defines a factory for creating `LifetimeUsage` objects using FactoryBot, a popular Ruby gem for creating test data. The factory sets up default attributes for a `LifetimeUsage` instance, including associations with an organization and a subscription, and initializes usage amounts and recalculation flags.

## Symbols

### `FactoryBot.define`
#### Description
This method is used to define a new factory for the `LifetimeUsage` model. It encapsulates the factory definition and allows for the creation of `LifetimeUsage` objects with predefined attributes.

### `factory :lifetime_usage`
#### Description
This defines a factory for the `LifetimeUsage` model. It specifies the default attributes and associations that will be used when creating a `LifetimeUsage` object for testing purposes.

#### Inputs
The factory doesn't have explicit inputs, but it defines default attributes for the `LifetimeUsage` model.

#### Outputs
When used, this factory will produce a `LifetimeUsage` object with the specified attributes.

#### Internal Logic
The factory sets up the following attributes for a `LifetimeUsage` object:
1. Associates it with an `organization` (likely using another factory or association)
2. Associates it with a `subscription` (likely using another factory or association)
3. Sets `current_usage_amount_cents` to 0
4. Sets `invoiced_usage_amount_cents` to 0
5. Sets `recalculate_current_usage` to false
6. Sets `recalculate_invoiced_usage` to false

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to define and create test data for the `LifetimeUsage` model |

## Notes
1. The `frozen_string_literal: true` comment at the top of the file is a Ruby directive that freezes all string literals in the file, potentially improving performance and preventing accidental string mutations.
2. The usage amounts are defined in cents, which is a common practice to avoid floating-point arithmetic issues when dealing with currency.
3. The `recalculate_current_usage` and `recalculate_invoiced_usage` flags are set to false by default, indicating that the factory creates objects that don't require immediate recalculation of usage amounts.
4. This factory can be used in test files to create `LifetimeUsage` objects with these default attributes, which can then be customized as needed for specific test scenarios.