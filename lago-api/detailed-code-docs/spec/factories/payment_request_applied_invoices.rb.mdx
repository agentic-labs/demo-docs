---
title: "payment_request_applied_invoices.rb"
---

## High-level description
This code defines a factory for creating `PaymentRequest::AppliedInvoice` objects using FactoryBot, a popular Ruby gem for creating test data. The factory is designed to facilitate testing by providing a convenient way to generate instances of the `PaymentRequest::AppliedInvoice` model with associated `payment_request` and `invoice` objects.

## Symbols

### `factory :payment_request_applied_invoice`
#### Description
This factory definition creates instances of the `PaymentRequest::AppliedInvoice` model. It sets up the basic structure for creating test objects with associated `payment_request` and `invoice` relationships.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| payment_request | association | Associates a `payment_request` object with the created `AppliedInvoice` |
| invoice | association | Associates an `invoice` object with the created `AppliedInvoice` |

#### Outputs
The factory produces instances of `PaymentRequest::AppliedInvoice` with associated `payment_request` and `invoice` objects.

#### Internal Logic
The factory uses FactoryBot's DSL to define a factory named `:payment_request_applied_invoice`. It specifies the class name as `"PaymentRequest::AppliedInvoice"` to ensure the correct model is instantiated. The factory includes associations for `payment_request` and `invoice`, which will be automatically created or associated when the factory is used to build or create instances.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to define and create test data factories |

## References
This factory references the following models and associations:
- `PaymentRequest::AppliedInvoice`: The model for which this factory is defined
- `payment_request`: An association to a `PaymentRequest` model
- `invoice`: An association to an `Invoice` model

Based on the related code snippet provided, we can infer additional information about the `PaymentRequest::AppliedInvoice` model:

1. It is defined as a nested class within `PaymentRequest`.
2. It inherits from `ApplicationRecord`, indicating it's an Active Record model.
3. The actual table name for this model is "invoices_payment_requests".
4. It has `belongs_to` associations with both `invoice` and `payment_request`.
5. The database table has a unique index on the combination of `invoice_id` and `payment_request_id`.

This factory definition aligns with the model structure, providing a simple way to create test instances of `PaymentRequest::AppliedInvoice` with its required associations.