---
title: "rails_helper.rb"
---

## High-level description
The `spec/rails_helper.rb` file is a configuration file for RSpec, a testing framework for Ruby on Rails applications. It sets up the testing environment, including loading the Rails environment, configuring SimpleCov for code coverage analysis, setting up DatabaseCleaner for database management, and defining custom helpers and configurations for RSpec.

## Code Structure
The code in `rails_helper.rb` is primarily a sequence of configurations and setup instructions for the RSpec testing environment. It doesn't have a complex structure with interconnected symbols.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rspec-rails | Provides RSpec integration for Rails applications |
| simplecov | Code coverage analysis tool |
| money-rails | Provides helpers for testing money-related functionality |
| database_cleaner | Database management tool for testing |
| paper_trail | Auditing library for tracking changes to models |
| sidekiq | Background job processing library |
| factory_bot_rails | Factory library for creating test data |

## Symbols

### `pp`
#### Description
A custom helper function that pretty-prints the given arguments using the `ap` (awesome_print) gem. It provides a more readable output than the standard `pp` method.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `*args` | Variable arguments | The arguments to be pretty-printed |

#### Outputs
The function doesn't explicitly return a value. It prints the formatted output to the console.

#### Internal Logic
The function iterates through the given arguments and pretty-prints each argument using the `ap` method with specific options for formatting:
- `sort_vars: false`: Prevents sorting of instance variables.
- `sort_keys: false`: Prevents sorting of hash keys.
- `indent: -2`: Sets the indentation level to -2.

## Configuration
The `RSpec.configure` block defines various configuration options for RSpec:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| `use_transactional_fixtures` | Boolean | `false` | Disables transactional fixtures, meaning each test will run in its own database transaction |
| `infer_spec_type_from_file_location!` | Method call | N/A | Enables automatic inference of spec type (e.g., `:controller`, `:model`) based on the file location |
| `filter_rails_from_backtrace!` | Method call | N/A | Filters lines from Rails gems in backtraces, making them more concise |

## Error Handling
The code includes a check for pending migrations and aborts the test suite if the Rails environment is running in production mode.

## TODOs
There are no TODOs or other notes left in the code.
