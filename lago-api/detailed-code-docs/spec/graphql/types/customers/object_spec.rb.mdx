---
title: "object_spec.rb"
---

## High-level description
This code defines a set of RSpec tests for the `Types::Customers::Object` GraphQL type. It verifies that the customer object has the correct fields with their respective types, ensuring that the GraphQL schema for customers is properly defined.

## Symbols

### `RSpec.describe Types::Customers::Object`
#### Description
This is the main RSpec test suite for the `Types::Customers::Object` GraphQL type. It contains multiple test cases to verify the presence and types of various fields in the customer object.

#### Internal Logic
The test suite uses the `have_field` matcher to check if each expected field is present in the `Types::Customers::Object` and has the correct type. The tests cover a wide range of customer attributes, including basic information, address details, billing configuration, related objects, and metadata.

## Code Structure
The test file is organized as a single RSpec describe block containing multiple individual test cases. Each test case checks for the presence and type of a specific field in the `Types::Customers::Object`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and configuration |

## References
- `Types::Customers::Object`: The GraphQL type being tested
- Various GraphQL types referenced in the field type checks (e.g., `TimezoneEnum`, `CountryCode`, `CurrencyEnum`, etc.)

## Detailed Field Descriptions

The test suite verifies the following fields for the `Types::Customers::Object`:

1. Basic Information:
   - `id`: ID! (non-null ID)
   - `external_id`: String! (non-null string)
   - `name`: String
   - `sequential_id`: String!
   - `slug`: String!

2. Address Information:
   - `address_line1`: String
   - `address_line2`: String
   - `city`: String
   - `state`: String
   - `zipcode`: String
   - `country`: CountryCode

3. Contact Information:
   - `email`: String
   - `phone`: String
   - `url`: String

4. Billing and Payment:
   - `currency`: CurrencyEnum
   - `invoice_grace_period`: Int
   - `net_payment_term`: Int
   - `payment_provider`: ProviderTypeEnum
   - `payment_provider_code`: String

5. Legal Information:
   - `legal_name`: String
   - `legal_number`: String
   - `tax_identification_number`: String

6. Time and Location:
   - `applicable_timezone`: TimezoneEnum!
   - `timezone`: TimezoneEnum

7. External Identifiers:
   - `external_salesforce_id`: String

8. Branding:
   - `logo_url`: String

9. Related Objects:
   - `metadata`: [CustomerMetadata!]
   - `billing_configuration`: CustomerBillingConfiguration
   - `shipping_address`: CustomerAddress
   - `anrok_customer`: AnrokCustomer
   - `netsuite_customer`: NetsuiteCustomer
   - `provider_customer`: ProviderCustomer
   - `subscriptions`: [Subscription!]!
   - `xero_customer`: XeroCustomer
   - `invoices`: [Invoice!]
   - `applied_add_ons`: [AppliedAddOn!]
   - `applied_coupons`: [AppliedCoupon!]
   - `taxes`: [Tax!]
   - `credit_notes`: [CreditNote!]

10. Timestamps:
    - `created_at`: ISO8601DateTime!
    - `updated_at`: ISO8601DateTime!
    - `deleted_at`: ISO8601DateTime

11. Calculated Fields:
    - `active_subscriptions_count`: Int!
    - `credit_notes_balance_amount_cents`: BigInt!
    - `credit_notes_credits_available_count`: Int!
    - `has_active_wallet`: Boolean!
    - `has_credit_notes`: Boolean!
    - `can_edit_attributes`: Boolean!

These tests ensure that the `Types::Customers::Object` GraphQL type correctly defines all the necessary fields for representing a customer in the application's GraphQL API.