---
title: "object_spec.rb"
---

## High-level description
This code defines a set of RSpec tests for the `Types::Wallets::RecurringTransactionRules::Object` GraphQL type. It verifies that the type has the expected fields with the correct types, ensuring the GraphQL schema is correctly defined for recurring transaction rules in the context of wallets.

## Symbols

### `RSpec.describe Types::Wallets::RecurringTransactionRules::Object`
#### Description
This is the main RSpec describe block that groups all the tests for the `Types::Wallets::RecurringTransactionRules::Object` GraphQL type.

#### Internal Logic
The tests use the `have_field` matcher to check for the presence and type of various fields in the GraphQL type. Each test verifies a specific field of the `Object` type.

### Field Tests
#### Description
Each line starting with `it { is_expected.to have_field(...) }` is a separate test case checking for a specific field in the GraphQL type.

#### Internal Logic
- The tests use the `have_field` matcher to verify the presence of a field.
- The `of_type` chained method specifies the expected GraphQL type for each field.
- Some fields are marked as non-nullable with `!` at the end of the type.

Here's a breakdown of the fields being tested:

1. `lago_id`: ID, non-nullable
2. `method`: RecurringTransactionMethodEnum, non-nullable
3. `trigger`: RecurringTransactionTriggerEnum, non-nullable
4. `interval`: RecurringTransactionIntervalEnum, nullable
5. `started_at`: ISO8601DateTime, nullable
6. `target_ongoing_balance`: String, nullable
7. `threshold_credits`: String, nullable
8. `paid_credits`: String, non-nullable
9. `granted_credits`: String, non-nullable
10. `created_at`: ISO8601DateTime, non-nullable

## Dependencies
The code depends on the following:

| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and RSpec configuration |
| RSpec | Testing framework used for writing and running the tests |
| GraphQL | The GraphQL implementation for Ruby, which defines the types being tested |

## Notes
- The tests are focused on the structure of the GraphQL type and do not test any business logic or data retrieval.
- The use of custom enum types (e.g., `RecurringTransactionMethodEnum`) suggests that there are predefined sets of values for certain fields.
- The `ISO8601DateTime` type is used for date-time fields, ensuring standardized date-time representation.
- Some fields like `paid_credits` and `granted_credits` are always expected to have a value (non-nullable), while others like `started_at` and `threshold_credits` are optional.

This test file ensures that the GraphQL schema for recurring transaction rules in wallets is correctly defined, providing a contract for the API consumers and helping to catch any unintended changes to the schema.