---
title: "stripe_spec.rb"
---

## High-level description
This code defines a RSpec test suite for the `Types::PaymentProviders::Stripe` GraphQL type. It verifies the presence and types of specific fields in the Stripe payment provider type, including fields with permission restrictions.

## Symbols

### `RSpec.describe Types::PaymentProviders::Stripe`
#### Description
This is the main RSpec test group that focuses on testing the `Types::PaymentProviders::Stripe` GraphQL type.

#### Internal Logic
The test suite uses RSpec's `have_field` matcher to verify the presence and types of fields in the Stripe payment provider type. It checks for the following fields:

1. `id` of type `ID!` (non-nullable ID)
2. `code` of type `String!` (non-nullable String)
3. `name` of type `String!` (non-nullable String)
4. `secret_key` of type `String` (nullable String) with permission 'organization:integrations:view'
5. `success_redirect_url` of type `String` (nullable String) with permission 'organization:integrations:view'

Each field is tested individually using the `it` block and the `is_expected.to have_field()` expectation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and configuration |
| rspec | Testing framework used for writing and running the tests |

## References
The code references the following:

1. `Types::PaymentProviders::Stripe`: The GraphQL type being tested
2. `have_field` matcher: Likely provided by a GraphQL testing library or custom matcher

## Notes
1. The code uses the `described_class` method, which refers to the class being described in the outer `describe` block (`Types::PaymentProviders::Stripe`).
2. The `with_permission` method is used for fields that require specific permissions, indicating that access to these fields is restricted.
3. The test file follows the convention of ending with `_spec.rb`, which is standard for RSpec test files.
4. The use of `frozen_string_literal: true` at the beginning of the file indicates that string literals in this file are frozen, which can help prevent unintended string mutations and improve performance.

This test suite ensures that the Stripe payment provider GraphQL type has the correct structure and field definitions, including proper typing and permission settings for sensitive fields like `secret_key` and `success_redirect_url`.