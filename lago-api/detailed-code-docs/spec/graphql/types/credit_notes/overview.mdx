---
title: "Overview"
---

## High-level description
This directory contains RSpec test files for GraphQL types related to credit notes in the application. The tests focus on ensuring that the GraphQL schema for credit notes is correctly defined, with the proper fields and types.

## What does it do?
These test files verify the structure and integrity of the GraphQL types used for credit notes in the application. They check that each field in the GraphQL types has the correct name and data type. This is crucial for maintaining a consistent and reliable API for handling credit note-related operations.

The tests cover two main GraphQL types:
1. `Types::CreditNotes::Estimate`: This type represents an estimate for a credit note, including financial information and related items.
2. `Types::CreditNotes::Object`: This type represents a full credit note object, including detailed information about the credit note, its status, and associated data.

By running these tests, developers can ensure that any changes to the credit note GraphQL types do not inadvertently break the API contract or introduce inconsistencies in the data structure.

## Key Files

1. `spec/graphql/types/credit_notes/estimate_spec.rb`
   - This file contains tests for the `Types::CreditNotes::Estimate` GraphQL type.
   - It verifies fields related to currency, tax amounts, totals, and associated items for credit note estimates.

2. `spec/graphql/types/credit_notes/object_spec.rb`
   - This file contains tests for the `Types::CreditNotes::Object` GraphQL type.
   - It checks a comprehensive set of fields including basic information, dates, statuses, financial data, and related objects for full credit note representations.

Both files use RSpec's `have_field` matcher to verify the presence and type of each field in their respective GraphQL types.

## Dependencies
The test files depend on the following:

1. `rails_helper`: This file loads the Rails testing environment and RSpec configuration.
2. RSpec: The testing framework used for writing and running the tests.
3. GraphQL-related types and enums: The tests reference various custom GraphQL types and enums, such as `CurrencyEnum`, `CreditNoteReasonEnum`, and `CreditNoteCreditStatusEnum`.

## Configuration
These test files do not require specific configuration. However, they rely on the proper setup of the Rails testing environment and the GraphQL schema in the main application.

Here's an example of how the tests are structured for the `Types::CreditNotes::Estimate` type:

```ruby
RSpec.describe Types::CreditNotes::Estimate do
  it { is_expected.to have_field(:currency).of_type('CurrencyEnum!') }
  it { is_expected.to have_field(:taxes_amount_cents).of_type('BigInt!') }
  it { is_expected.to have_field(:sub_total_excluding_taxes_amount_cents).of_type('BigInt!') }
  # ... more field checks ...
end
```

And for the `Types::CreditNotes::Object` type:

```ruby
RSpec.describe Types::CreditNotes::Object do
  it { is_expected.to have_field(:id).of_type('ID!') }
  it { is_expected.to have_field(:number).of_type('String!') }
  it { is_expected.to have_field(:sequential_id).of_type('Int!') }
  # ... more field checks ...
end
```

These tests ensure that the GraphQL types for credit notes are correctly defined and maintain their expected structure, which is crucial for the reliability and consistency of the application's API.