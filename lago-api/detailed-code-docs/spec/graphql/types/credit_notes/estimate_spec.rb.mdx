---
title: "estimate_spec.rb"
---

## High-level description
This code defines a RSpec test suite for the `Types::CreditNotes::Estimate` GraphQL type. It verifies that the type has specific fields with the correct data types, ensuring the GraphQL schema for credit note estimates is correctly defined.

## Symbols

### `RSpec.describe Types::CreditNotes::Estimate`
#### Description
This is the main RSpec test group that focuses on testing the `Types::CreditNotes::Estimate` GraphQL type.

#### Internal Logic
The test suite uses a series of expectations to verify the presence and type of various fields in the `Types::CreditNotes::Estimate` GraphQL type. Each expectation checks for a specific field and its corresponding GraphQL type.

### Field Expectations
For each field in the `Types::CreditNotes::Estimate` type, there is an expectation in the following format:

```ruby
it { is_expected.to have_field(:field_name).of_type('GraphQLType!') }
```

#### Description
These expectations verify that the GraphQL type has the specified fields with the correct types.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| field_name | Symbol | The name of the field being tested |
| GraphQLType | String | The expected GraphQL type of the field |

#### Internal Logic
Each expectation uses the `have_field` matcher to check if the field exists in the GraphQL type and the `of_type` matcher to verify the field's GraphQL type.

## Fields Tested
1. `currency` of type `CurrencyEnum!`
2. `taxes_amount_cents` of type `BigInt!`
3. `sub_total_excluding_taxes_amount_cents` of type `BigInt!`
4. `max_creditable_amount_cents` of type `BigInt!`
5. `max_refundable_amount_cents` of type `BigInt!`
6. `coupons_adjustment_amount_cents` of type `BigInt!`
7. `taxes_rate` of type `Float!`
8. `items` of type `[CreditNoteItemEstimate!]!`
9. `applied_taxes` of type `[CreditNoteAppliedTax!]!`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and configuration |

Note: The `rails_helper` file is included in the related code snippets and sets up the testing environment for Rails applications, including RSpec configuration, SimpleCov for code coverage, and various testing helpers.

This test file ensures that the `Types::CreditNotes::Estimate` GraphQL type is correctly defined with all the necessary fields and their appropriate types, which is crucial for maintaining the integrity of the GraphQL schema for credit note estimates in the application.