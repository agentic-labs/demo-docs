---
title: "properties_input_spec.rb"
---

## High-level description
This code defines a set of RSpec tests for the `Types::Charges::PropertiesInput` GraphQL input type. It verifies that the input type accepts various arguments with specific data types, ensuring the correct structure and validation of charge properties in the GraphQL schema.

## Symbols

### `RSpec.describe Types::Charges::PropertiesInput`
#### Description
This RSpec test suite describes the behavior of the `Types::Charges::PropertiesInput` GraphQL input type. It uses a series of expectations to verify that the input type accepts specific arguments with the correct data types.

#### Internal Logic
The test suite uses the `accept_argument` matcher to check if each argument is accepted by the input type and has the correct data type. The tests cover various properties related to charges, such as amount, grouped_by, graduated ranges, free units, package size, and more.

Here's a breakdown of the tested arguments:

1. `amount`: String
2. `grouped_by`: Array of non-null Strings
3. `graduated_ranges`: Array of non-null GraduatedRangeInput
4. `graduated_percentage_ranges`: Array of non-null GraduatedPercentageRangeInput
5. `free_units`: BigInt
6. `package_size`: BigInt
7. `fixed_amount`: String
8. `free_units_per_events`: BigInt
9. `free_units_per_total_aggregation`: String
10. `per_transaction_max_amount`: String
11. `per_transaction_min_amount`: String
12. `rate`: String
13. `volume_ranges`: Array of non-null VolumeRangeInput
14. `custom_properties`: JSON

Each test case follows the structure:

```ruby
it { is_expected.to accept_argument(:argument_name).of_type('DataType') }
```

This ensures that the `PropertiesInput` type correctly defines and accepts all the necessary arguments for charge properties.

## Dependencies
The test file depends on the following:

| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and configuration |
| RSpec | Testing framework used for writing and running the tests |

## References
This test file indirectly references:

1. `Types::Charges::PropertiesInput`: The GraphQL input type being tested
2. `GraduatedRangeInput`: A custom input type for graduated ranges
3. `GraduatedPercentageRangeInput`: A custom input type for graduated percentage ranges
4. `VolumeRangeInput`: A custom input type for volume ranges

These referenced types are likely defined in other parts of the application's GraphQL schema.

Note: The related `spec/rails_helper.rb` file provides the necessary setup for RSpec tests in the Rails environment, including configuration for SimpleCov, DatabaseCleaner, and various test helpers. However, it doesn't directly impact the content of the `properties_input_spec.rb` file beyond providing the testing infrastructure.