---
title: "properties_spec.rb"
---

## High-level description
This code defines a set of RSpec tests for the `Types::Charges::Properties` GraphQL type. It verifies that the type has specific fields with the correct data types, ensuring that the GraphQL schema for charge properties is correctly defined.

## Symbols

### `Types::Charges::Properties`
#### Description
This is the main GraphQL type being tested. It represents the properties of a charge in the system.

#### Internal Logic
The tests use RSpec's `have_field` matcher to verify that each expected field exists in the `Properties` type with the correct data type. The tests cover various fields related to charge properties, including amount, ranges, free units, and custom properties.

## Code Structure
The test file consists of a single `RSpec.describe` block for the `Types::Charges::Properties` type. Within this block, there are multiple test cases, each verifying a specific field of the type.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and RSpec configuration |

## Symbols

### `have_field`
#### Description
This is an RSpec matcher used to test the presence and type of fields in a GraphQL type.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| field_name | Symbol or String | The name of the field being tested |
| of_type | String | The expected GraphQL type of the field |

## Field Descriptions

1. `amount`: String type, likely represents the charge amount.
2. `grouped_by`: Array of non-null Strings, possibly used for grouping charges.
3. `graduated_ranges`: Array of non-null `GraduatedRange` objects, likely used for tiered pricing.
4. `graduated_percentage_ranges`: Array of non-null `GraduatedPercentageRange` objects, possibly for percentage-based tiered pricing.
5. `free_units`: BigInt type, represents the number of free units in a charge.
6. `package_size`: BigInt type, likely represents the size of a package in a charge.
7. `fixed_amount`: String type, represents a fixed charge amount.
8. `free_units_per_events`: BigInt type, possibly represents free units given per event.
9. `free_units_per_total_aggregation`: String type, likely represents free units based on total aggregation.
10. `per_transaction_max_amount`: String type, represents the maximum amount per transaction.
11. `per_transaction_min_amount`: String type, represents the minimum amount per transaction.
12. `rate`: String type, likely represents the rate of the charge.
13. `volume_ranges`: Array of non-null `VolumeRange` objects, possibly used for volume-based pricing.
14. `custom_properties`: JSON type, allows for additional custom properties to be stored.

These tests ensure that the `Types::Charges::Properties` GraphQL type correctly defines all the necessary fields for representing charge properties in the application's GraphQL schema.