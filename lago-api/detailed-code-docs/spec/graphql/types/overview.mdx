---
title: "Overview"
---

## High-level description
This directory contains RSpec test files for various GraphQL types related to the application's data model and API schema. The tests focus on verifying the structure, field definitions, and input/output types for different entities such as add-ons, analytics, billable metrics, charges, customers, invoices, organizations, payment providers, plans, subscriptions, wallets, and webhooks.

## What does it do?
These test files ensure that the GraphQL schema is correctly defined and maintains its expected structure across different parts of the application. They verify that:

1. Object types have the correct fields with appropriate types and nullability.
2. Input types accept the correct arguments with proper types for creating or updating entities.
3. Enum types have the expected values.
4. Custom scalar types are properly implemented.
5. Permissions are correctly applied to certain fields where applicable.

By maintaining these tests, developers can ensure that any changes to the GraphQL schema are intentional and do not break existing functionality or API contracts.

## Entry points
While there isn't a single entry point for these tests, they are organized into subdirectories based on the entity or feature they cover. Key areas include:

1. `add_ons/`: Tests for add-on related types
2. `analytics/`: Tests for analytics data types
3. `billable_metrics/`: Tests for billable metric types
4. `charges/`: Tests for charge-related types
5. `customers/`: Tests for customer and usage types
6. `invoices/`: Tests for invoice and fee types
7. `organizations/`: Tests for organization types
8. `payment_providers/`: Tests for various payment provider types
9. `plans/`: Tests for plan types
10. `subscriptions/`: Tests for subscription-related types
11. `wallets/`: Tests for wallet and recurring transaction types
12. `webhooks/`: Tests for webhook types

Each subdirectory typically contains tests for input types, object types, and sometimes enum types related to that specific domain.

## Key Files
While there are many important files, some key ones include:

1. `spec/graphql/types/organizations/current_organization_type_spec.rb`: Tests the current organization type, which is likely a central part of the application.
2. `spec/graphql/types/customers/object_spec.rb`: Tests the customer object type, which is probably a core entity in the system.
3. `spec/graphql/types/invoices/object_spec.rb`: Tests the invoice object type, another likely core entity.
4. `spec/graphql/types/plans/object_spec.rb`: Tests the plan object type, which is central to subscription-based systems.
5. `spec/graphql/types/subscriptions/charge_overrides_input_spec.rb`: Tests input types for subscription charge overrides, showcasing complex input structures.

## Dependencies
The test files depend on the following:

1. RSpec: The testing framework used for writing and running the tests.
2. Rails: The application framework, as evidenced by the use of `rails_helper`.
3. GraphQL-Ruby: The GraphQL implementation for Ruby, which provides the types being tested.
4. Custom GraphQL testing matchers: The tests use matchers like `have_field` and `accept_argument`, which are likely provided by a GraphQL testing library.

## Configuration
The tests rely on the configuration provided by `rails_helper`, which typically sets up:

1. RSpec configuration
2. SimpleCov for code coverage
3. DatabaseCleaner for managing test database state
4. FactoryBot for test data generation
5. Custom helpers and configurations specific to the application

Each test file uses the `frozen_string_literal: true` pragma to improve performance and prevent string mutation.

In summary, this directory contains a comprehensive set of tests that ensure the integrity and correctness of the GraphQL schema across various domains of the application. These tests play a crucial role in maintaining API consistency and preventing regressions as the application evolves.