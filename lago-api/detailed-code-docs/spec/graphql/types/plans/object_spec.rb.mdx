---
title: "object_spec.rb"
---

## High-level description
This code defines a set of RSpec tests for the `Types::Plans::Object` GraphQL type. It verifies that the type has the correct fields with their respective types, ensuring that the GraphQL schema for the Plan object is correctly defined.

## Symbols

### `RSpec.describe Types::Plans::Object`
#### Description
This is the main RSpec test suite for the `Types::Plans::Object` GraphQL type. It uses the `subject` method to set the described class as the subject of the tests.

#### Internal Logic
The test suite uses a series of expectations to verify that the `Types::Plans::Object` has specific fields with their corresponding types. Each expectation checks for the presence of a field and its type using the `have_field` matcher.

Here's a breakdown of the fields being tested:

1. Basic fields:
   - `id`: ID! (non-nullable ID)
   - `organization`: Organization
   - `amount_cents`: BigInt! (non-nullable BigInt)
   - `amount_currency`: CurrencyEnum! (non-nullable CurrencyEnum)
   - `bill_charges_monthly`: Boolean
   - `code`: String! (non-nullable String)
   - `description`: String
   - `interval`: PlanInterval! (non-nullable PlanInterval)
   - `invoice_display_name`: String
   - `name`: String! (non-nullable String)
   - `pay_in_advance`: Boolean! (non-nullable Boolean)
   - `trial_period`: Float

2. Related objects:
   - `minimum_commitment`: Commitment
   - `parent`: Plan
   - `charges`: [Charge!] (array of non-nullable Charge objects)
   - `taxes`: [Tax!] (array of non-nullable Tax objects)
   - `usage_thresholds`: [UsageThreshold!] (array of non-nullable UsageThreshold objects)

3. Timestamps:
   - `created_at`: ISO8601DateTime! (non-nullable ISO8601DateTime)
   - `updated_at`: ISO8601DateTime! (non-nullable ISO8601DateTime)

4. Count fields:
   - `active_subscriptions_count`: Int! (non-nullable Int)
   - `charges_count`: Int! (non-nullable Int)
   - `customers_count`: Int! (non-nullable Int)
   - `draft_invoices_count`: Int! (non-nullable Int)
   - `subscriptions_count`: Int! (non-nullable Int)

## Dependencies
The test file depends on the following:

| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and configuration |
| rspec | Testing framework used for writing and running the tests |
| graphql-ruby | GraphQL implementation for Ruby, used for defining the types being tested |

## Notes
1. The tests are using the `is_expected.to have_field()` syntax, which is likely provided by a custom RSpec matcher for GraphQL types.
2. The test file is focused solely on verifying the structure of the GraphQL type and does not test any behavior or resolvers associated with these fields.
3. The use of `!` in the type definitions (e.g., `ID!`, `String!`) indicates that these fields are non-nullable in the GraphQL schema.
4. Some fields, like `organization` and `description`, are nullable as they don't have the `!` suffix.
5. The test file ensures that the `Types::Plans::Object` GraphQL type has all the necessary fields to represent a Plan object in the application's GraphQL API.