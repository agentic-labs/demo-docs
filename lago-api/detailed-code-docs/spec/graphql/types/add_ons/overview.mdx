---
title: "Overview"
---

## High-level description
This directory contains RSpec test files for GraphQL types related to add-ons in the application. The tests focus on verifying the structure and field definitions of input types and object types used in the GraphQL API for managing add-ons.

## What does it do?
These test files ensure that the GraphQL schema for add-ons is correctly defined and maintains its integrity. They verify that:

1. The input type for creating add-ons (`CreateInput`) has the correct fields with appropriate types.
2. The input type for updating add-ons (`UpdateInput`) has the correct fields with appropriate types.
3. The object type for representing add-ons (`Object`) has all the necessary fields with correct types.

These tests act as a safeguard against unintended changes to the GraphQL schema, ensuring that the API remains consistent and reliable for clients consuming it.

## Key Files
1. `create_input_spec.rb`: Tests the structure of the input type used for creating add-ons.
2. `update_input_spec.rb`: Tests the structure of the input type used for updating add-ons.
3. `object_spec.rb`: Tests the structure of the object type representing add-ons in the GraphQL API.

Each file focuses on a specific GraphQL type and verifies its field definitions, including field names, types, and nullability.

## Dependencies
The test files depend on the following:

1. RSpec: The testing framework used for writing and running the tests.
2. Rails helper: Loads the Rails testing environment and configuration.
3. Custom GraphQL types: The tests reference custom GraphQL types such as `BigInt`, `CurrencyEnum`, and `ISO8601DateTime`.

## Configuration
The test files use the `frozen_string_literal: true` pragma, which improves performance and memory usage by freezing all string literals in the file.

Here's a breakdown of the key GraphQL types being tested:

1. `Types::AddOns::CreateInput`:
   ```ruby
   it { is_expected.to accept_argument(:amount_cents).of_type('BigInt!') }
   it { is_expected.to accept_argument(:amount_currency).of_type('CurrencyEnum!') }
   it { is_expected.to accept_argument(:code).of_type('String!') }
   it { is_expected.to accept_argument(:description).of_type('String') }
   it { is_expected.to accept_argument(:invoice_display_name).of_type('String') }
   it { is_expected.to accept_argument(:name).of_type('String!') }
   it { is_expected.to accept_argument(:tax_codes).of_type('[String!]') }
   ```

2. `Types::AddOns::UpdateInput`:
   ```ruby
   it { is_expected.to accept_argument(:amount_cents).of_type('BigInt!') }
   it { is_expected.to accept_argument(:amount_currency).of_type('CurrencyEnum!') }
   it { is_expected.to accept_argument(:code).of_type('String!') }
   it { is_expected.to accept_argument(:description).of_type('String') }
   it { is_expected.to accept_argument(:id).of_type('ID!') }
   it { is_expected.to accept_argument(:invoice_display_name).of_type('String') }
   it { is_expected.to accept_argument(:name).of_type('String!') }
   it { is_expected.to accept_argument(:tax_codes).of_type('[String!]') }
   ```

3. `Types::AddOns::Object`:
   ```ruby
   it { is_expected.to have_field(:id).of_type('ID!') }
   it { is_expected.to have_field(:organization).of_type('Organization') }
   it { is_expected.to have_field(:code).of_type('String!') }
   it { is_expected.to have_field(:description).of_type('String') }
   it { is_expected.to have_field(:invoice_display_name).of_type('String') }
   it { is_expected.to have_field(:name).of_type('String!') }
   it { is_expected.to have_field(:amount_cents).of_type('BigInt!') }
   it { is_expected.to have_field(:amount_currency).of_type('CurrencyEnum!') }
   it { is_expected.to have_field(:created_at).of_type('ISO8601DateTime!') }
   it { is_expected.to have_field(:deleted_at).of_type('ISO8601DateTime') }
   it { is_expected.to have_field(:updated_at).of_type('ISO8601DateTime!') }
   it { is_expected.to have_field(:applied_add_ons_count).of_type('Int!') }
   it { is_expected.to have_field(:customers_count).of_type('Int!') }
   it { is_expected.to have_field(:taxes).of_type('[Tax!]') }
   it { is_expected.to have_field(:integration_mappings).of_type('[Mapping!]') }
   ```

These tests ensure that the GraphQL types for add-ons have the correct structure, including required fields (denoted by `!`), optional fields, and appropriate data types. This helps maintain the consistency and reliability of the GraphQL API for managing add-ons in the application.