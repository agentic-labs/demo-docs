---
title: "create_input_spec.rb"
---

## High-level description
This code defines a RSpec test suite for the `Types::BillableMetrics::CreateInput` GraphQL input type. It verifies that the input type accepts specific arguments with their respective types, ensuring the correct structure for creating billable metrics in the GraphQL API.

## Symbols

### `RSpec.describe Types::BillableMetrics::CreateInput`
#### Description
This is the main RSpec test suite for the `Types::BillableMetrics::CreateInput` GraphQL input type. It uses the `subject` method to set the described class as the subject of the tests.

#### Internal Logic
The test suite uses a series of expectations to verify that the `CreateInput` type accepts specific arguments with their correct types. Each expectation checks a different argument of the input type.

### Expectations
#### Description
Each line starting with `it { is_expected.to accept_argument(...) }` is an individual test case checking a specific argument of the `CreateInput` type.

#### Internal Logic
These expectations use the `accept_argument` matcher, which is likely provided by a GraphQL testing library. Each expectation verifies:
1. The argument name (e.g., `:aggregation_type`, `:code`, etc.)
2. The expected type of the argument (e.g., `'AggregationTypeEnum!'`, `'String!'`, etc.)

Here's a breakdown of the expected arguments and their types:

| Argument | Type | Required |
|:---------|:-----|:---------|
| aggregation_type | AggregationTypeEnum | Yes |
| code | String | Yes |
| description | String | Yes |
| field_name | String | No |
| name | String | Yes |
| recurring | Boolean | No |
| weighted_interval | WeightedIntervalEnum | No |
| filters | [BillableMetricFiltersInput!] | No |

Note: The `!` at the end of a type indicates that the argument is required.

## Dependencies
This test file depends on the following:
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and configuration |
| Types::BillableMetrics::CreateInput | The actual GraphQL input type being tested |

## References
The code references the following custom types:
- `AggregationTypeEnum`
- `WeightedIntervalEnum`
- `BillableMetricFiltersInput`

These are likely defined elsewhere in the GraphQL schema.

## Notes
1. The test file uses RSpec's one-liner syntax for concise and readable tests.
2. The tests only verify the structure of the input type and do not test any behavior or validations that might be associated with these inputs.
3. Some arguments (field_name, recurring, weighted_interval, and filters) are optional, as they don't have the `!` suffix in their type definition.

This test suite ensures that the `CreateInput` type for billable metrics has the correct structure, which is crucial for maintaining the integrity of the GraphQL API's contract with its clients.