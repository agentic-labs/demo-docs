---
title: "Overview"
---

## High-level description
This directory contains RSpec test suites for GraphQL mutations related to Netsuite integrations. It specifically focuses on testing the creation and update operations for Netsuite integrations within the context of a premium organization.

## What does it do?
These test suites verify the functionality of creating and updating Netsuite integrations through GraphQL mutations. They ensure that:

1. The mutations can only be executed by users with the correct permissions.
2. The mutations require a current user and organization.
3. The operations are only available for premium organizations.
4. The creation mutation correctly creates a new Netsuite integration with the provided details.
5. The update mutation successfully modifies an existing Netsuite integration.

The tests simulate various scenarios, including successful operations and potential error cases, to ensure the robustness of the Netsuite integration functionality.

## Key Files

1. `create_spec.rb`:
   This file contains tests for the `Mutations::Integrations::Netsuite::Create` GraphQL mutation. It verifies the creation of a new Netsuite integration, checking input handling, permission requirements, and the correctness of the created integration's attributes.

2. `update_spec.rb`:
   This file tests the `Mutations::Integrations::Netsuite::Update` GraphQL mutation. It ensures that existing Netsuite integrations can be updated correctly, verifying permission checks and the accurate modification of integration details.

Both files use similar structures and testing approaches, including shared examples for common checks and specific test cases for their respective operations.

## Dependencies
The test suites rely on the following key dependencies:

1. RSpec: The testing framework used to structure and run the tests.
2. FactoryBot: Used to create test data, such as memberships and integrations.
3. Faker: Generates random data for testing, like URLs and names.

These dependencies are crucial for setting up realistic test scenarios and generating varied test data.

## Configuration
The test suites use the following configuration:

1. Test type: Both test files are configured as GraphQL tests using `type: :graphql`.
2. Premium feature flag: The tests use `lago_premium!` to ensure the premium feature flag is enabled during test execution.

Environment setup:
- The organization is updated to include Netsuite in its premium integrations.
- For update tests, a Netsuite integration is created before running the tests.

Key configurable fields in the mutations:
- `name`: The name of the Netsuite integration
- `code`: A unique code for the integration
- `scriptEndpointUrl`: The URL endpoint for the Netsuite script

These configurations ensure that the tests accurately reflect the expected environment and functionality of the Netsuite integration features.