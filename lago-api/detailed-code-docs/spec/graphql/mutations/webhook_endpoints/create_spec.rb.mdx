---
title: "create_spec.rb"
---

## High-level description
This code is a RSpec test suite for the `Mutations::WebhookEndpoints::Create` GraphQL mutation. It verifies the behavior of creating a webhook endpoint, including permission checks and the correct creation of the endpoint with the provided input.

## Code Structure
The test suite is organized as a single RSpec describe block for the `Mutations::WebhookEndpoints::Create` mutation. It includes shared examples for common checks and a specific test for creating a webhook endpoint.

## Symbols

### RSpec.describe Mutations::WebhookEndpoints::Create
#### Description
This is the main describe block for the test suite, focusing on the Create mutation for webhook endpoints.

#### Internal Logic
1. Sets up necessary test data (membership, webhook URL, input)
2. Defines the GraphQL mutation query
3. Includes shared examples for common checks
4. Tests the creation of a webhook endpoint

### let(:required_permission)
#### Description
Defines the required permission for the mutation.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| required_permission | String | The permission required to execute the mutation |

### let(:membership)
#### Description
Creates a test membership using FactoryBot.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| membership | Membership | A test membership object |

### let(:webhook_url)
#### Description
Generates a fake URL for the webhook endpoint.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhook_url | String | A fake URL for testing |

### let(:input)
#### Description
Defines the input for the GraphQL mutation.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| input | Hash | Input data for creating a webhook endpoint |

### let(:mutation)
#### Description
Defines the GraphQL mutation query string.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | String | GraphQL mutation query |

### it 'creates a webhook_endpoint'
#### Description
Tests the creation of a webhook endpoint using the GraphQL mutation.

#### Internal Logic
1. Executes the GraphQL mutation with the provided input and context
2. Verifies that the returned data matches the expected structure and values

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails testing environment and configurations |
| RSpec | Testing framework used for writing and running tests |
| FactoryBot | Used for creating test data (membership) |
| Faker | Used for generating fake data (webhook URL) |

## Error Handling
The test implicitly checks for errors by expecting the GraphQL mutation to return successful results. Any errors would cause the test to fail.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| createWebhookEndpoint | Mutation | WebhookEndpointCreateInput | WebhookEndpoint | Creates a new webhook endpoint |

Note: This is a GraphQL mutation, not a REST API endpoint.