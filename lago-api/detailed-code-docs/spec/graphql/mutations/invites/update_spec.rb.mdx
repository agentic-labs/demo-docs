---
title: "update_spec.rb"
---

## High-level description
This file contains RSpec tests for the `Mutations::Invites::Update` GraphQL mutation. It verifies the behavior of updating an invite, including permission checks, successful updates, and error handling for invalid scenarios.

## Code Structure
The test suite is organized into several contexts, testing different aspects of the invite update mutation. It uses shared examples for common checks and defines specific test cases for updating invites and handling errors.

## Symbols

### RSpec.describe Mutations::Invites::Update
#### Description
This is the main describe block for the test suite, focusing on the `Mutations::Invites::Update` GraphQL mutation.

#### Internal Logic
- Sets up common let variables for use across tests
- Defines the GraphQL mutation query
- Includes shared examples for common checks
- Contains specific test cases for invite updates and error handling

### let(:required_permission)
#### Description
Defines the required permission for updating invites.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| required_permission | String | The permission required to update invites |

### let(:membership)
#### Description
Creates a membership record for use in tests.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| membership | Membership | A factory-created membership record |

### let(:organization)
#### Description
References the organization associated with the membership.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Organization | The organization associated with the membership |

### let(:user)
#### Description
References the user associated with the membership.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user | User | The user associated with the membership |

### let(:mutation)
#### Description
Defines the GraphQL mutation query for updating an invite.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | String | The GraphQL mutation query for updating an invite |

### describe 'Invite update mutation'
#### Description
Contains specific test cases for the invite update mutation.

#### Internal Logic
1. Tests successful invite update
2. Tests error handling for an accepted invite

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Provides Rails-specific testing utilities |
| rspec | Testing framework |
| factory_bot | Used for creating test data |

## Error Handling
The test suite checks for proper error handling when attempting to update an already accepted invite. It verifies the error message, code, and details returned in the GraphQL response.