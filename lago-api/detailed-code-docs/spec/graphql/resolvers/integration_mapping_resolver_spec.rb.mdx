---
title: "integration_mapping_resolver_spec.rb"
---

## High-level description
This code is a RSpec test suite for the `Resolvers::IntegrationMappingResolver` in a GraphQL API. It verifies the behavior of querying a single integration mapping, including permission checks and error handling for non-existent resources.

## Code Structure
The test suite is organized into several describe blocks and examples, testing different scenarios for the integration mapping resolver. It uses shared examples for common permission checks and defines a GraphQL query to fetch integration mapping details.

## Symbols

### RSpec.describe Resolvers::IntegrationMappingResolver
#### Description
This is the main describe block for the test suite, focusing on the `IntegrationMappingResolver`.

#### Internal Logic
1. Sets up necessary test data (membership, organization, integration, and netsuite_mapping).
2. Defines a GraphQL query to fetch integration mapping details.
3. Includes shared examples for permission checks.
4. Tests the successful retrieval of an integration mapping.
5. Tests error handling for non-existent integration mappings.

### let(:query)
#### Description
Defines the GraphQL query used to fetch integration mapping details.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | String | GraphQL query for fetching integration mapping details |

### it 'returns a single integration mapping'
#### Description
Tests the successful retrieval of an integration mapping.

#### Internal Logic
1. Executes the GraphQL query with valid inputs.
2. Verifies that the returned data matches the expected integration mapping details.

### context 'when integration mapping is not found'
#### Description
Tests the error handling when an integration mapping is not found.

#### Internal Logic
1. Executes the GraphQL query with an invalid integration mapping ID.
2. Verifies that the appropriate error message is returned.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails testing environment and configuration |
| RSpec | Testing framework used for writing and running tests |
| FactoryBot | Used for creating test data (memberships, organizations, etc.) |

## Error Handling
The test suite includes a specific test case for handling errors when an integration mapping is not found, expecting a "Resource not found" error message.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| integrationMapping | QUERY | `id: ID!` | IntegrationMapping object | Fetches a single integration mapping by ID |

Note: The API details are inferred from the GraphQL query used in the test suite.