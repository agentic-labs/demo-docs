---
title: "invite_resolver_spec.rb"
---

## High-level description
This code is a RSpec test suite for the `Resolvers::InviteResolver` GraphQL resolver. It tests the functionality of querying a single invite using a token, verifying the returned data and handling error cases when an invite is not found.

## Code Structure
The test suite defines a GraphQL query, creates necessary test data using FactoryBot, and includes two main test cases: one for successfully retrieving an invite and another for handling the case when an invite is not found.

## Symbols

### RSpec.describe Resolvers::InviteResolver
#### Description
This is the main describe block for the test suite, focusing on the `Resolvers::InviteResolver` GraphQL resolver.

### let(:query)
#### Description
Defines the GraphQL query used to fetch an invite by its token.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | String | A GraphQL query string for fetching an invite |

### let(:membership)
#### Description
Creates a test membership using FactoryBot.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| membership | Membership | A test membership object |

### let(:organization)
#### Description
Retrieves the organization associated with the test membership.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Organization | The organization associated with the test membership |

### let(:invite)
#### Description
Creates a test invite associated with the test organization using FactoryBot.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| invite | Invite | A test invite object |

### it 'returns a single invite'
#### Description
Tests the successful retrieval of an invite using its token.

#### Internal Logic
1. Executes the GraphQL query with the invite's token.
2. Verifies that the returned data matches the expected invite details.

### context 'when invite is not found'
#### Description
A nested context for testing the error case when an invite is not found.

### it 'returns an error'
#### Description
Tests the error handling when an invite is not found.

#### Internal Logic
1. Executes the GraphQL query with an invalid token.
2. Verifies that a GraphQL error is returned with the message "Resource not found".

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails testing environment and configuration |
| FactoryBot | Used for creating test data |
| GraphQLHelper | Provides helper methods for GraphQL testing |

## Error Handling
The test suite includes a specific test case for handling the scenario when an invite is not found, expecting a GraphQL error with the message "Resource not found".