---
title: "integration_resolver_spec.rb"
---

## High-level description
This file contains RSpec tests for the `Resolvers::IntegrationResolver` GraphQL resolver. It tests the functionality of querying a single integration, specifically a Netsuite integration, and verifies the resolver's behavior under different scenarios.

## Code Structure
The test suite is organized into several contexts, testing various aspects of the integration resolver, including permission checks, successful retrieval of integration data, and error handling for non-existent integrations.

## Symbols

### RSpec.describe Resolvers::IntegrationResolver
#### Description
This is the main test suite for the `Resolvers::IntegrationResolver`. It sets up the necessary test data and defines various test cases to ensure the resolver functions correctly.

#### Internal Logic
1. Sets up test data including a membership, organization, customer, and Netsuite integration.
2. Defines a GraphQL query to fetch integration details.
3. Includes shared examples for permission and authentication checks.
4. Tests successful retrieval of integration data.
5. Tests error handling for non-existent integrations.

### let(:query)
#### Description
Defines the GraphQL query used to fetch integration details.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | String | GraphQL query for fetching integration details |

### it 'returns a single integration'
#### Description
Tests the successful retrieval of a single integration's details.

#### Internal Logic
1. Executes the GraphQL query with the necessary context and variables.
2. Verifies that the returned data matches the expected integration details.

### context 'when integration is not found'
#### Description
Tests the error handling when an integration is not found.

#### Internal Logic
1. Executes the GraphQL query with an invalid integration ID.
2. Verifies that the appropriate error message is returned.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails testing environment and configuration |

## Error Handling
The test suite includes a specific test case for handling the scenario when an integration is not found, expecting a "Resource not found" error message.

___

This test file ensures that the `IntegrationResolver` correctly handles authentication, authorization, data retrieval, and error cases when querying for integration details in the GraphQL API.