---
title: "Overview"
---

## High-level description
This directory contains RSpec test files for various services related to integration customers in a Rails application. The services tested include AnrokService, CreateOrUpdateService, CreateService, NetsuiteService, UpdateService, and XeroService. These tests ensure the correct behavior of integration customer creation, updating, and management across different integration platforms.

## What does it do?
The test suite in this directory verifies the functionality of services that handle integration customers. These services are responsible for creating, updating, and managing customer data across different integration platforms such as Netsuite, Anrok, and Xero. The tests ensure that:

1. New integration customers are created correctly with the right attributes.
2. Existing integration customers are updated properly.
3. Integration customers are removed when necessary.
4. The services handle different scenarios, such as premium integrations or the presence/absence of certain parameters.
5. The services interact correctly with other parts of the system, such as aggregator services for contacts.

## Key Files
1. `anrok_service_spec.rb`: Tests the creation of Anrok integration customers.
2. `create_or_update_service_spec.rb`: Tests the service responsible for creating, updating, or removing integration customers based on various input parameters.
3. `create_service_spec.rb`: Tests the creation of integration customers for different integration types, focusing on Netsuite and Anrok.
4. `netsuite_service_spec.rb`: Tests the creation of Netsuite integration customers.
5. `update_service_spec.rb`: Tests the updating of integration customers, particularly for Netsuite premium integration scenarios.
6. `xero_service_spec.rb`: Tests the creation of Xero integration customers.

## Dependencies
The test files depend on the following:

1. RSpec: The testing framework used for writing and running the tests.
2. FactoryBot: Used for creating test data objects.
3. Rails testing environment: Loaded via `rails_helper`.
4. Various service classes being tested, such as `IntegrationCustomers::AnrokService`, `IntegrationCustomers::CreateOrUpdateService`, etc.
5. Mock objects and doubles for isolating the behavior of the services being tested.

## Configuration
The tests use various RSpec configurations and techniques:

1. `type: :service` is used to specify that these are service tests.
2. `aggregate_failures` is used to group multiple expectations together.
3. `around` blocks are used to simulate specific environments (e.g., premium features).
4. `let` statements are extensively used to set up test data and mocks.

The tests cover a wide range of scenarios and edge cases, ensuring robust functionality of the integration customer services across different integration platforms. They focus on verifying the correct creation, updating, and removal of integration customers, as well as the proper handling of various input parameters and integration states.