---
title: "termination_alert_service_spec.rb"
---

## High-level description
This file contains RSpec tests for the `Webhooks::Subscriptions::TerminationAlertService` class. It verifies that the service correctly creates a webhook for subscription termination alerts.

## Symbols

### `RSpec.describe Webhooks::Subscriptions::TerminationAlertService`
#### Description
This is the main RSpec describe block that groups all tests related to the `Webhooks::Subscriptions::TerminationAlertService` class.

#### Internal Logic
The test suite sets up a subject (`webhook_service`) and necessary test data (a subscription and its associated organization) to be used in the tests.

___

### `subject(:webhook_service)`
#### Description
Defines the subject of the test, which is an instance of the `Webhooks::Subscriptions::TerminationAlertService` class.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | Subscription | The subscription object passed to the service |

___

### `let(:subscription)`
#### Description
Creates a test subscription object with an active status.

___

### `let(:organization)`
#### Description
Retrieves the organization associated with the test subscription.

___

### `describe '.call'`
#### Description
Describes the test for the `call` method of the `TerminationAlertService`.

#### Internal Logic
This test uses a shared example `'creates webhook'` to verify that the service creates a webhook with the event type 'subscription.termination_alert' and the resource type 'subscription'.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads the Rails testing environment and RSpec configuration |

## References
- The test references a shared example `'creates webhook'`, which is likely defined in another file.
- It also references the `Webhooks::Subscriptions::TerminationAlertService` class, which is the subject under test.
- The test uses FactoryBot (implied by the `create` method) to create test data.

This test file is concise and focused on verifying the core functionality of the `TerminationAlertService`. It ensures that the service correctly creates a webhook for subscription termination alerts, which is likely an important part of the application's notification system for subscription-related events.