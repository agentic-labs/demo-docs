---
title: "started_service_spec.rb"
---

## High-level description
This code defines a RSpec test suite for the `Webhooks::Subscriptions::StartedService` class. It verifies that the service creates a webhook with the event "subscription.started" when called with a subscription object.

## Symbols

### `RSpec.describe Webhooks::Subscriptions::StartedService`
#### Description
This block describes the test suite for the `Webhooks::Subscriptions::StartedService` class.

### `subject(:webhook_service)`
#### Description
Defines the subject of the test, which is an instance of `Webhooks::Subscriptions::StartedService` initialized with a subscription object.

### `let(:subscription)`
#### Description
Creates a test subscription object using FactoryBot.

### `let(:organization)`
#### Description
Retrieves the organization associated with the test subscription.

### `describe '.call'`
#### Description
Describes the test for the `call` method of the `StartedService` class.

### `it_behaves_like 'creates webhook', 'subscription.started', 'subscription'`
#### Description
Uses a shared example to test if the service creates a webhook with the event "subscription.started" and the object type "subscription".

## Dependencies
The test file depends on the following:
| Dependency | Purpose |
|:-----------|:--------|
| rails_helper | Loads Rails and RSpec configuration |
| FactoryBot | Creates test objects |
| Shared example | Tests webhook creation |

## References
This test file references:
1. `Webhooks::Subscriptions::StartedService` - The class being tested
2. A shared example for testing webhook creation

## Notes
1. The test uses FactoryBot to create a test subscription object.
2. It relies on a shared example to test the webhook creation, which suggests that this behavior is common across multiple webhook services.
3. The test is focused on verifying that the correct event type ("subscription.started") and object type ("subscription") are used when creating the webhook.
4. The actual implementation of the `StartedService` class is not shown in this file, as this is only the test specification.

This test file is part of a larger test suite for webhook services related to subscriptions in the application. It ensures that when a subscription is started, the appropriate webhook is created and sent.