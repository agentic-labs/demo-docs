---
title: "Overview"
---

## High-level description
This directory contains support files for RSpec tests in a Ruby on Rails application. It includes helper modules, custom matchers, shared examples, and configuration files that enhance the testing capabilities and streamline the testing process.

## What does it do?
The support files in this directory provide various functionalities to assist in testing:

1. Helper modules for admin, API, GraphQL, and scenario testing.
2. Custom RSpec matchers for datetime comparisons, GraphQL field permissions, invoice charge fees, and negated expectations.
3. Shared examples for common testing scenarios like webhook creation, GraphQL requirements, integration synchronization, and PaperTrail versioning.
4. Configuration for Shoulda Matchers integration with RSpec and Rails.
5. Utility methods for stubbing PDF generation and manipulating license status for testing purposes.

These support files enable developers to write more expressive, maintainable, and comprehensive tests by providing reusable components and abstractions for common testing patterns.

## Key Files

1. `admin_helper.rb`: Provides helper methods for admin-related tests, including authenticated HTTP requests and JSON parsing.

2. `api_helper.rb`: Contains utility methods for making authenticated API requests with various HTTP methods.

3. `graphql_helper.rb`: Offers helper methods for testing GraphQL queries and mutations, including error assertions.

4. `license_helper.rb`: Provides a method to temporarily set premium license status for testing purposes.

5. `pdf_helper.rb`: Contains functionality to stub PDF generation requests for testing.

6. `scenarios_helper.rb`: Includes helper methods for interacting with various API endpoints in billing system scenarios.

7. `shoulda_matchers.rb`: Configures the Shoulda Matchers gem for use with RSpec and Rails.

8. `matchers/`: A directory containing custom RSpec matchers for specific testing needs.

9. `shared_examples/`: A directory with shared RSpec examples for common testing scenarios.

These files work together to provide a comprehensive set of tools and abstractions for testing various aspects of the application, from API interactions to GraphQL queries and specific business logic.

## Dependencies
The support files rely on several key dependencies:

1. RSpec: The primary testing framework used throughout the support files.
2. Rails: The web application framework that the tests are written for.
3. GraphQL: Used in GraphQL-related helpers and matchers.
4. Shoulda Matchers: Integrated for additional testing capabilities.
5. WebMock (implied): Used for stubbing HTTP requests in some helpers.
6. PaperTrail: Referenced in shared examples for versioning tests.
7. Sidekiq: Used in scenario helpers for background job processing.

These dependencies are crucial for the proper functioning of the support files and should be properly configured in the main application and test environment.

## Configuration
While most of the support files don't require specific configuration, they do make certain assumptions about the application structure and available modules. Key configuration points include:

1. Shoulda Matchers configuration in `shoulda_matchers.rb`.
2. RSpec configuration blocks in various files that set up hooks or include modules.
3. Environment variables like `LAGO_PDF_URL` used in some helpers.

Developers should ensure that these configurations align with the application's structure and requirements when using these support files in their test suites.