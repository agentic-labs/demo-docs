---
title: "data_export_mailer_preview.rb"
---

## High-level description
This code defines a preview class for the DataExportMailer, specifically for the 'completed' email. It's used to generate a sample email for the 'completed' scenario in the mail preview functionality, typically used in development environments to visualize email templates.

## Symbols

### `DataExportMailerPreview`
#### Description
This class inherits from `BasePreviewMailer` and provides a method to preview the 'completed' email for a DataExport.

#### Internal Logic
The `completed` method creates a sample completed data export using FactoryBot and then generates a preview of the 'completed' email for that data export.

### `completed`
#### Description
This method generates a preview of the 'completed' email for a sample data export.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| (implicit) | Mail::Message | The generated email message for the 'completed' scenario |

#### Internal Logic
1. Creates a sample completed data export using FactoryBot with the `:completed` trait.
2. Calls the `completed` method on `DataExportMailer` with the created data export, generating the email message.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FactoryBot | Used to create a sample data export for the email preview |
| DataExportMailer | The mailer class that generates the actual email |

## Notes
- The code uses Ruby 3's shorthand syntax for keyword arguments (`data_export:`) in the `DataExportMailer.with` call.
- The `:completed` trait is used when creating the data export, suggesting that there are different states for a data export, and this preview is specifically for the completed state.
- This preview class is likely used in conjunction with a mail preview tool in the development environment, allowing developers to view and test email templates without actually sending emails.