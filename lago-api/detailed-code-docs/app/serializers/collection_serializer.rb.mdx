---
title: "collection_serializer.rb"
---

## High-level description
The `CollectionSerializer` class is responsible for serializing a collection of models into a JSON structure suitable for API responses. It allows customization of the collection name and includes optional metadata in the serialized output.

## Code Structure
The `CollectionSerializer` class uses a `model_serializer` object to serialize individual models within the collection. It also accepts options for customizing the output, such as the `collection_name` and `meta` attributes.

## References
- `ModelSerializer`: Used to serialize individual models within the collection.

## Symbols

### `CollectionSerializer`
#### Description
Initializes a new `CollectionSerializer` instance.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `collection` | `Array` | The collection of models to serialize. |
| `model_serializer` | `ModelSerializer` | An instance of a `ModelSerializer` class to serialize individual models. |
| `options` | `Hash` | Optional parameters for customizing the serialization output. |

#### Outputs
A new `CollectionSerializer` instance.

### `serialize`
#### Description
Serializes the collection of models into a hash.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `hash` | `Hash` | A hash containing the serialized collection of models and optional metadata. |

#### Internal Logic
1. Creates a hash with the collection name as the key and the serialized models as the value.
2. Adds metadata to the hash if it's present in the options.

### `to_json`
#### Description
Converts the serialized hash into a JSON string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `options` | `Hash` | Optional parameters to pass to the `to_json` method. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `json` | `String` | A JSON string representation of the serialized collection. |

### `collection_name`
#### Description
Returns the collection name to use in the serialized output.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `collection_name` | `Symbol` | The collection name, defaulting to `:data`. |

### `meta?`
#### Description
Checks if metadata is present in the options.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `present?` | `Boolean` | True if metadata is present, false otherwise. |

### `includes?`
#### Description
Checks if includes are present in the options.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `present?` | `Boolean` | True if includes are present, false otherwise. |

### `meta`
#### Description
Returns the metadata from the options.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `meta` | `Object` | The metadata object or nil if not present. |

### `serialize_models`
#### Description
Serializes each model in the collection using the provided `model_serializer`.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| `serialized_models` | `Array` | An array of serialized models. |

#### Internal Logic
Iterates through the collection and calls the `serialize` method of the `model_serializer` for each model, passing in the options.
