---
title: "Overview"
---

## High-level description
The `FeeErrorSerializer` class is a custom serializer responsible for formatting data related to tax provider fee errors into a JSON-compatible structure for API responses. It specifically handles errors encountered during tax calculations by external tax providers.

## References
This serializer is used by the `FeeErrorService` in the `app/services/webhooks/integrations/taxes/fee_error_service.rb` file.

## Symbols

### `FeeErrorSerializer`
#### Description
This class inherits from `ModelSerializer` and overrides the `serialize` method to define a custom serialization format for tax provider fee errors.

#### Inputs
This class doesn't have a defined input interface. It receives data through its initialization and the `options` hash passed to the `serialize` method.

#### Outputs
Returns a hash representing the serialized fee error data.

| Name | Type | Description |
|:-----|:-----|:------------|
| `tax_provider_code` | string | The error code returned by the tax provider. |
| `lago_charge_id` | string | The ID of the charge in Lago. |
| `event_transaction_id` | string | The ID of the event transaction associated with the error. |
| `provider_error` | string | The error message returned by the tax provider. |

#### Internal Logic
The `serialize` method constructs a hash containing the following key-value pairs:
- `tax_provider_code`: The error code from the `model` object.
- `lago_charge_id`: Retrieved from the `options` hash.
- `event_transaction_id`: Retrieved from the `options` hash.
- `provider_error`: Retrieved from the `options` hash.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `ModelSerializer` | Provides the base serialization functionality. |
