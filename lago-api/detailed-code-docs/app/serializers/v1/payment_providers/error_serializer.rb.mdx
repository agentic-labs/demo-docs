---
title: "error_serializer.rb"
---

## High-level description
The `ErrorSerializer` class is responsible for serializing payment provider error objects into a JSON format suitable for API responses. It extracts relevant attributes from the error object and structures them according to the API specification.

## Code Structure
The `ErrorSerializer` inherits from `ModelSerializer` and overrides the `serialize` method to define a custom serialization logic for payment provider errors. It utilizes the `options` hash to access additional context information, such as the provider error details.

## References
- `ModelSerializer`: The parent class providing basic serialization functionality.

## Symbols

### `ErrorSerializer`
#### Description
This class serializes payment provider error objects. It extracts specific attributes like ID, code, name, source, action, and the provider error details, excluding the source and action fields from the nested `provider_error` hash.

#### Inputs
The `ErrorSerializer` class itself doesn't define specific input parameters. However, it receives the following inputs during initialization and usage:

| Name | Type | Description |
|:-----|:-----|:------------|
| model | Object | The payment provider error object to be serialized. |
| options | Hash | A hash containing additional context information, including the `provider_error` details. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| serialize | Hash | A hash representing the serialized payment provider error object. |

#### Internal Logic
The `serialize` method constructs a hash containing the following key-value pairs:
- `lago_payment_provider_id`: The ID of the payment provider.
- `payment_provider_code`: The code of the payment provider.
- `payment_provider_name`: The name of the payment provider.
- `source`: The source of the error, extracted from the `options[:provider_error][:source]`.
- `action`: The action that triggered the error, extracted from `options[:provider_error][:action]`.
- `provider_error`: The remaining details of the provider error, excluding the `source` and `action` fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ModelSerializer | Provides the base serialization functionality. |

### Configuration
This code doesn't define any specific configuration options.
