---
title: "customer_error_serializer.rb"
---

## High-level description
The `CustomerErrorSerializer` class defines how to serialize a `CustomerError` object into a JSON representation for API responses. It includes specific attributes like `lago_customer_id`, `external_customer_id`, payment provider details, and the actual `provider_error`.

## References
This serializer is used by the `CustomerErrorService` in the `app/services/webhooks/payment_providers/customer_error_service.rb` file.

## Symbols
### `CustomerErrorSerializer`
#### Description
This class inherits from `ModelSerializer` and overrides the `serialize` method to define a custom JSON representation for `CustomerError` objects.

#### Inputs
This class doesn't define any specific input parameters. It receives the `model` object (an instance of `CustomerError`) and `options` implicitly through its parent class `ModelSerializer`.

#### Outputs
Returns a hash representing the serialized `CustomerError` object.

#### Internal Logic
The `serialize` method constructs a hash containing the following key-value pairs:
- `lago_customer_id`: The ID of the customer in Lago.
- `external_customer_id`: The ID of the customer in the external payment provider system.
- `payment_provider`: The name of the payment provider.
- `payment_provider_code`: The code of the payment provider.
- `provider_error`: The actual error message received from the payment provider, passed through `options`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ModelSerializer | Provides the base functionality for serializing objects. |
