---
title: "subscription_serializer.rb"
---

## High-level description
The `V1::SubscriptionSerializer` class is responsible for serializing `Subscription` model objects into a JSON-compatible hash structure for API responses. It includes options to include nested data for associated models like `Customer`, `Plan`, and `UsageThreshold`.

## Code Structure
The `serialize` method defines the structure of the serialized subscription data. It selectively includes nested data for `customer`, `plan`, and `usage_threshold` based on the `include?` method, which checks for these keys in the serializer's options. The `customer`, `plan`, and `usage_threshold` methods delegate the serialization of these associated objects to their respective serializers.

## References
- `ModelSerializer`: This serializer inherits from `ModelSerializer`, which provides basic serialization functionality.
- `V1::CustomerSerializer`: Used to serialize the associated `Customer` object.
- `V1::PlanSerializer`: Used to serialize the associated `Plan` object.
- `V1::UsageThresholdSerializer`: Used to serialize the associated `UsageThreshold` object.

## Symbols

### `V1::SubscriptionSerializer`
#### Description
This class serializes a `Subscription` object into a hash representation. It allows for the inclusion of nested data for associated models like `Customer`, `Plan`, and `UsageThreshold`.

#### Inputs
A `Subscription` object and optional `options` hash.

#### Outputs
A hash representation of the `Subscription` object, optionally including nested data for associated models.

#### Internal Logic
The `serialize` method defines the structure of the serialized data. It includes basic subscription attributes and conditionally includes nested data based on the `include?` method, which checks for specific keys in the `options` hash. The `customer`, `plan`, and `usage_threshold` methods delegate the serialization of associated objects to their respective serializers.

## Dependencies
- `ModelSerializer`: Provides basic serialization functionality.
- `V1::CustomerSerializer`: Serializes `Customer` objects.
- `V1::PlanSerializer`: Serializes `Plan` objects.
- `V1::UsageThresholdSerializer`: Serializes `UsageThreshold` objects.
