---
title: "commitment_serializer.rb"
---

## High-level description
The `CommitmentSerializer` class is responsible for serializing `Commitment` model objects into a JSON-compatible hash structure. This structure is specifically tailored for API responses in the V1 API version. The serializer includes options for selectively including nested data, such as associated taxes.

## Code Structure
The `CommitmentSerializer` inherits from `ModelSerializer` and overrides the `serialize` method. It uses the `CollectionSerializer` to serialize nested `Tax` objects when the `:taxes` option is included.

## References
- `ModelSerializer`: Parent class providing basic serialization functionality.
- `CollectionSerializer`: Used to serialize collections of objects, like taxes.
- `TaxSerializer`: Used to serialize individual `Tax` objects.

## Symbols

### `CommitmentSerializer`
#### Description
Serializes a `Commitment` object into a hash representation suitable for JSON output in the V1 API.

#### Inputs
This class does not define any specific input parameters. It inherits the initializer from `ModelSerializer`.

#### Outputs
Returns a hash representing the serialized `Commitment` object.

#### Internal Logic
The `serialize` method constructs a hash containing the attributes of the `Commitment` object. It includes:
- Basic attributes like `lago_id`, `plan_code`, `invoice_display_name`, etc.
- Timestamps (`created_at`, `updated_at`) formatted in ISO 8601 format.
- Conditionally includes nested `taxes` data if the `:taxes` option is provided during initialization.

The `taxes` method uses the `CollectionSerializer` to serialize the associated `Tax` objects using the `TaxSerializer`.

## Dependencies
- `ModelSerializer`: Provides base serialization functionality.
- `CollectionSerializer`: Used for serializing collections.
- `TaxSerializer`: Used for serializing individual `Tax` objects.
