---
title: "adyen.rb"
---

## High-level description
This code defines a GraphQL type for the Adyen payment provider in a Ruby on Rails application. It represents the structure and fields of an Adyen provider object, including sensitive information like API keys and HMAC keys, which are partially obfuscated for security reasons.

## Code Structure
The `Types::PaymentProviders::Adyen` class inherits from `Types::BaseObject` and defines various fields that represent the attributes of an Adyen payment provider. It also includes methods to obfuscate sensitive information.

## References
- `Types::BaseObject`: The base class for GraphQL object types.
- `PaymentProviders::AdyenProvider`: The model class for Adyen providers (referenced in the related code snippets).

## Symbols

### `Types::PaymentProviders::Adyen`
#### Description
This class defines the GraphQL type for an Adyen payment provider, specifying the fields that can be queried and how sensitive information is handled.

#### Inputs
This class doesn't directly take inputs as it's a type definition.

#### Outputs
The class defines several fields that can be queried:

| Name | Type | Description |
|:-----|:-----|:------------|
| code | String | The provider's code |
| id | ID | The provider's unique identifier |
| name | String | The provider's name |
| api_key | String | Obfuscated API key |
| hmac_key | String | Obfuscated HMAC key |
| live_prefix | String | Prefix for live environment |
| merchant_account | String | Merchant account identifier |
| success_redirect_url | String | URL for successful redirects |

#### Internal Logic
The class includes two methods, `api_key` and `hmac_key`, which obfuscate the sensitive information:

1. `api_key`: Returns a string with the first 8 characters replaced by bullet points (â€¢) and only the last 3 characters visible.
2. `hmac_key`: Similar to `api_key`, but only returns a value if `hmac_key` is present.

## Side Effects
The `api_key` and `hmac_key` methods modify the original values to provide obfuscated versions, ensuring sensitive information is not fully exposed.

## Dependencies
This code relies on the `Types::BaseObject` class, which is likely defined in a separate file in the application.

## Error Handling
There's no explicit error handling in this code. Error handling for field resolution would typically be managed by the GraphQL framework.

## Security Considerations
1. The code implements obfuscation for sensitive fields (`api_key` and `hmac_key`) to prevent full exposure of these values.
2. Several fields (including the sensitive ones) are protected by a permission `'organization:integrations:view'`, which suggests that access to these fields is restricted to users with appropriate permissions.

## Related Code Context
1. The `PaymentProviders::AdyenProvider` model (from related snippets) defines the underlying data structure and validations for Adyen providers.
2. The `Types::PaymentProviders::Object` union type (from related snippets) includes `Types::PaymentProviders::Adyen` as one of its possible types, indicating that this Adyen type is part of a larger payment provider type system.
3. The `CurrentOrganizationType` (from related snippets) includes a field for Adyen payment providers, suggesting that organizations can have multiple Adyen providers associated with them.

This GraphQL type definition provides a secure and structured way to expose Adyen payment provider information through a GraphQL API, with careful handling of sensitive data.