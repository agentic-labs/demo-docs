---
title: "Overview"
---

## High-level description
This directory contains GraphQL type definitions related to commitments within the application. It includes an enum type for commitment types, an input type for creating or updating commitments, and an object type representing a commitment entity. These types are crucial for handling commitment-related operations in the GraphQL API.

## What does it do?
This directory provides the necessary GraphQL type definitions to handle commitments in the application's API. It allows:

1. Defining valid commitment types through an enum.
2. Structuring input data for creating or updating commitments.
3. Representing commitment entities in API responses.

These types enable clients to query commitment data, create new commitments, and update existing ones through the GraphQL API. They define the structure and constraints for commitment-related operations, ensuring data consistency and type safety in API interactions.

## Key Files

1. `commitment_type_enum.rb`:
   - Defines the `CommitmentTypeEnum` GraphQL enum type.
   - Dynamically generates enum values from the `COMMITMENT_TYPES` constant in the `Commitment` model.
   - Allows the API to validate and restrict commitment type inputs to predefined values.

2. `input.rb`:
   - Defines the `CommitmentInput` GraphQL input type.
   - Specifies the structure for creating or updating commitments.
   - Includes fields for amount, type, ID, invoice display name, and tax codes.

3. `object.rb`:
   - Defines the `Commitment` GraphQL object type.
   - Represents a commitment entity in the system.
   - Includes fields for various commitment attributes and relationships.

## Dependencies
The code in this directory relies on the following external libraries and internal references:

1. GraphQL gem (version not specified):
   - Provides the framework for defining GraphQL types.
   - Used for creating enums, input objects, and object types.

2. Internal references:
   - `Types::BaseEnum`: A base class for enum types.
   - `Types::BaseInputObject`: A base class for input object types.
   - `Types::BaseObject`: A base class for object types.
   - `Types::Plans::Object`: Represents the associated plan for a commitment.
   - `Types::Taxes::Object`: Represents taxes associated with a commitment.

## Configuration
While there are no explicit configuration files in this directory, the types defined here may be influenced by configurations elsewhere in the application:

1. The `CommitmentTypeEnum` relies on the `COMMITMENT_TYPES` constant defined in the `Commitment` model. Any changes to this constant will affect the available enum values.

2. The `CommitmentInput` and `Commitment` object types define specific fields and their types. These should align with the underlying data model and business logic of the application.

Here's a more detailed look at each file:

### commitment_type_enum.rb

```ruby
module Types
  module Commitments
    class CommitmentTypeEnum &lt; Types::BaseEnum
      graphql_name "CommitmentTypeEnum"

      Commitment::COMMITMENT_TYPES.keys.each do |type|
        value type
      end
    end
  end
end
```

This enum dynamically generates values based on the `COMMITMENT_TYPES` constant in the `Commitment` model. It ensures that only valid commitment types can be used in GraphQL operations.

### input.rb

```ruby
module Types
  module Commitments
    class Input &lt; Types::BaseInputObject
      graphql_name "CommitmentInput"

      argument :amount_cents, GraphQL::Types::BigInt, required: false
      argument :commitment_type, Types::Commitments::CommitmentTypeEnum, required: false
      argument :id, ID, required: false
      argument :invoice_display_name, String, required: false
      argument :tax_codes, [String], required: false
    end
  end
end
```

This input type defines the structure for creating or updating commitments. It includes optional fields for various commitment attributes, allowing flexible API operations.

### object.rb

```ruby
module Types
  module Commitments
    class Object &lt; Types::BaseObject
      graphql_name "Commitment"

      field :id, ID, null: false
      field :amount_cents, GraphQL::Types::BigInt, null: false
      field :commitment_type, Types::Commitments::CommitmentTypeEnum, null: false
      field :invoice_display_name, String, null: true
      field :plan, Types::Plans::Object, null: false
      field :created_at, GraphQL::Types::ISO8601DateTime, null: false
      field :updated_at, GraphQL::Types::ISO8601DateTime, null: false
      field :taxes, [Types::Taxes::Object], null: false
    end
  end
end
```

This object type represents a commitment entity in the GraphQL schema. It defines fields for various commitment attributes and relationships, allowing clients to query detailed commitment information.

These types work together to provide a comprehensive GraphQL interface for handling commitment-related operations in the application. They ensure type safety, data consistency, and proper structure for API interactions involving commitments.