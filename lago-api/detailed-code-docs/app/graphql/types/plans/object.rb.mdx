---
title: "object.rb"
---

## High-level description
The code defines the `Types::Plans::Object` GraphQL type, representing a Plan object in the API. It outlines the structure and fields of a Plan, including its attributes, relationships, and associated counts.

## Code Structure
The `Types::Plans::Object` class inherits from `Types::BaseObject` and defines numerous fields representing the Plan's attributes. It also defines methods like `charges`, `charges_count`, and `subscriptions_count` to fetch and calculate related data.

## References
- `Types::Organizations::OrganizationType`: Used for the `organization` field.
- `Types::CurrencyEnum`: Used for the `amount_currency` field.
- `Types::Plans::IntervalEnum`: Used for the `interval` field.
- `Types::Commitments::Object`: Used for the `minimum_commitment` field.
- `Types::UsageThresholds::Object`: Used for the `usage_thresholds` field.
- `Types::Charges::Object`: Used for the `charges` field.
- `Types::Taxes::Object`: Used for the `taxes` field.

## Symbols

### `Types::Plans::Object`
#### Description
This class defines the GraphQL type for a Plan object, outlining its fields and how they are resolved.

#### Inputs
None. This is a GraphQL type definition, not a function.

#### Outputs
None. This is a GraphQL type definition, not a function.

#### Internal Logic
The class defines several fields representing the Plan's attributes, including:
- `id`: ID of the plan.
- `organization`: The organization the plan belongs to.
- `amount_cents`: The plan's amount in cents.
- `amount_currency`: The currency of the plan's amount.
- `bill_charges_monthly`: Whether the plan bills charges monthly.
- `code`: A unique code for the plan.
- `description`: A description of the plan.
- `interval`: The billing interval of the plan (e.g., monthly, yearly).
- `invoice_display_name`: The name displayed on invoices for this plan.
- `minimum_commitment`: The minimum commitment associated with the plan.
- `name`: The name of the plan.
- `parent`: The parent plan if this is a child plan.
- `pay_in_advance`: Whether the plan requires payment in advance.
- `trial_period`: The trial period duration for the plan.
- `usage_thresholds`: Usage thresholds defined for the plan.
- `charges`: Charges associated with the plan.
- `taxes`: Taxes applied to the plan.
- `created_at`: Timestamp of plan creation.
- `updated_at`: Timestamp of the last plan update.

It also defines fields for various counts related to the plan:
- `active_subscriptions_count`: Number of active subscriptions to the plan.
- `charges_count`: Number of charges associated with the plan.
- `customers_count`: Number of customers subscribed to the plan.
- `draft_invoices_count`: Number of draft invoices for the plan.
- `subscriptions_count`: Total number of subscriptions (including child plan subscriptions) to the plan.

The class implements methods for resolving some of these fields:
- `charges`: Fetches charges associated with the plan, including filters and ordering.
- `charges_count`: Returns the count of charges associated with the plan.
- `subscriptions_count`: Calculates the total number of subscriptions, including those for child plans.

## Side Effects
None. This code defines a GraphQL type and its resolvers, it doesn't have direct side effects.

## Dependencies
- `Types::BaseObject`: The base class for GraphQL object types.
- `GraphQL::Types::BigInt`: Used for integer fields.
- `Types::CurrencyEnum`: Enum type for currencies.
- `Types::Plans::IntervalEnum`: Enum type for plan intervals.
- `Types::Commitments::Object`: GraphQL type for commitments.
- `Types::UsageThresholds::Object`: GraphQL type for usage thresholds.
- `Types::Charges::Object`: GraphQL type for charges.
- `Types::Taxes::Object`: GraphQL type for taxes.
- `GraphQL::Types::ISO8601DateTime`: Scalar type for ISO8601 formatted datetimes.

## Error Handling
No specific error handling is implemented within this code. It relies on the underlying GraphQL library and Rails framework for error management.
