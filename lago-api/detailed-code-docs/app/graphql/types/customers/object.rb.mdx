---
title: "object.rb"
---

## High-level description
The code defines the `Types::Customers::Object` class, which represents a customer object in the GraphQL API. It defines the fields and relationships for a customer, including their details, subscriptions, invoices, and integration data.

## Code Structure
The `Types::Customers::Object` class inherits from `Types::BaseObject` and defines numerous fields representing customer attributes. Some fields are resolved using dedicated resolver classes, like `Resolvers::Customers::SubscriptionsResolver` for the `subscriptions` field.

## References
- `Resolvers::Customers::SubscriptionsResolver`: Used to resolve the `subscriptions` field.
- `CustomersQuery`: Used in the `invoices` method to retrieve invoices.

## Symbols

### `Types::Customers::Object`
#### Description
This class defines the GraphQL type for a Customer object, outlining its attributes and relationships.

#### Inputs
This class does not define any specific inputs.

#### Outputs
This class does not define any specific outputs.

#### Internal Logic
The class defines several methods:
- `invoices`: Retrieves a list of visible invoices for the customer, ordered by creation date in descending order.
- `applied_coupons`: Retrieves a list of active applied coupons for the customer, ordered by creation date in ascending order.
- `applied_add_ons`: Retrieves a list of applied add-ons for the customer, ordered by creation date in descending order.
- `has_active_wallet`: Checks if the customer has any active wallets.
- `has_credit_notes`: Checks if the customer has any finalized credit notes.
- `active_subscriptions_count`: Returns the count of active subscriptions for the customer.
- `provider_customer`: Returns the specific provider customer object (e.g., Stripe, GoCardless) based on the customer's `payment_provider`.
- `credit_notes_credits_available_count`: Returns the count of finalized credit notes with a positive credit amount.
- `credit_notes_balance_amount_cents`: Returns the sum of balance amounts from all finalized credit notes.
- `billing_configuration`: Constructs and returns a billing configuration object with the customer's document locale.
- `editable?`: Checks if the customer's attributes are editable. This method is used for the `can_edit_attributes` field.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `graphql` | Provides the GraphQL implementation and types. |
| `active_support` | Used for time zones and other utilities. |
| `iso3166` | Provides ISO country codes. |

## Side Effects
This code does not have any direct side effects. It primarily defines the structure and behavior of the `Customer` type in the GraphQL API.
