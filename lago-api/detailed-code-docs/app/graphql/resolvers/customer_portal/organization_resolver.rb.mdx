---
title: "organization_resolver.rb"
---

## High-level description
This code defines a GraphQL resolver for querying a customer portal organization. It's part of the `Resolvers::CustomerPortal` module and extends the `BaseResolver` class. The resolver is designed to return the organization associated with an authenticated customer portal user.

## Code Structure
The `OrganizationResolver` class is nested within the `Resolvers::CustomerPortal` module. It includes the `AuthenticableCustomerPortalUser` concern, which likely handles authentication for customer portal users.

## References
- `Resolvers::BaseResolver`: The base class for this resolver
- `AuthenticableCustomerPortalUser`: A concern that's included in this resolver
- `Types::Organizations::OrganizationType`: The GraphQL type returned by this resolver

## Symbols

### `OrganizationResolver`
#### Description
This class defines a GraphQL resolver for querying a customer portal organization. It ensures that the user is authenticated and returns the organization associated with the authenticated user.

#### Inputs
This resolver doesn't accept any arguments.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Types::Organizations::OrganizationType | The organization associated with the authenticated customer portal user |

#### Internal Logic
1. The resolver checks if there's an authenticated customer portal user in the context.
2. If authenticated, it returns the organization associated with that user.

## Side Effects
This resolver doesn't have any side effects. It only reads data from the context and returns it.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableCustomerPortalUser | Provides authentication functionality for customer portal users |

## Error Handling
Error handling is likely managed by the `AuthenticableCustomerPortalUser` concern, which probably raises an unauthorized error if the user is not authenticated.

## API/Interface Reference
This resolver is part of the GraphQL API and can be queried as follows:

| Field | Type | Description |
|:------|:-----|:------------|
| customerPortalOrganization | Types::Organizations::OrganizationType | Returns the organization of the authenticated customer portal user |

Note: The actual field name in the API might be different (likely `customer_portal_organization` based on the query type definition in the related files).