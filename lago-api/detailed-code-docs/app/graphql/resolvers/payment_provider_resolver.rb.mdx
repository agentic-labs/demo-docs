---
title: "payment_provider_resolver.rb"
---

## High-level description
This code defines a GraphQL resolver for querying a single payment provider. It's part of a larger GraphQL API and handles authentication, organization membership, and retrieval of payment provider information based on either an ID or a code.

## Code Structure
The `PaymentProviderResolver` class inherits from `Resolvers::BaseResolver` and includes two modules: `AuthenticableApiUser` and `RequiredOrganization`. It defines the resolver's arguments, return type, and the main `resolve` method.

## References
- `Types::PaymentProviders::Object`
- `Resolvers::BaseResolver`
- `AuthenticableApiUser` module
- `RequiredOrganization` module

## Symbols

### `PaymentProviderResolver`
#### Description
This class is a GraphQL resolver for querying a single payment provider. It ensures the user is authenticated and belongs to the required organization before resolving the query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | ID | Optional. Unique ID of the payment provider |
| code | String | Optional. Code of the payment provider |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| payment_provider | Types::PaymentProviders::Object | The requested payment provider object |

#### Internal Logic
1. Checks for user authentication and organization membership (handled by included modules).
2. If an `id` is provided, finds the payment provider by ID.
3. If a `code` is provided, finds the payment provider by code.
4. Returns a `not_found_error` if the payment provider is not found.

## Side Effects
This resolver doesn't have any notable side effects beyond querying the database.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableApiUser | Ensures the user is authenticated |
| RequiredOrganization | Ensures the user belongs to the required organization |

## Error Handling
- Raises an `unauthorized_error` if the user is not authenticated (handled by `AuthenticableApiUser`).
- Raises an `organization_error` if the organization is missing or the user is not a member (handled by `RequiredOrganization`).
- Returns a `not_found_error` if the requested payment provider is not found.

## API/Interface Reference
| Argument | Type | Required | Description |
|:---------|:-----|:---------|:------------|
| code | String | false | Code of the payment provider |
| id | ID | false | Unique ID of the payment provider |

This resolver is part of the larger GraphQL API and is likely accessed through a field in the `QueryType` (as seen in the related `app/graphql/types/query_type.rb` file).