---
title: "Overview"
---

## High-level description
The `app/graphql` directory contains the core components of a GraphQL API implementation for a SaaS application. It includes the main schema definition, resolvers, mutations, types, and various utility modules and extensions. This directory forms the backbone of the application's GraphQL API, providing a robust and flexible interface for clients to query and manipulate data.

## What does it do?
The code in this directory implements a comprehensive GraphQL API that:

1. Defines the schema structure, including queries, mutations, and types.
2. Handles user authentication and authorization for API access.
3. Implements resolvers for fetching and filtering data across various domains (e.g., customers, invoices, subscriptions).
4. Provides mutations for creating, updating, and deleting data, as well as performing specialized actions.
5. Manages complex business logic related to billing, subscriptions, and customer management.
6. Implements error handling and standardized error responses.
7. Supports pagination, filtering, and sorting of query results.
8. Integrates with external services and payment providers.
9. Handles data export and synchronization operations.

## Entry points
The main entry points for the GraphQL API are:

1. `lago_api_schema.rb`: Defines the overall GraphQL schema, including configuration for query depth, complexity, and object identification.
2. `types/query_type.rb`: Specifies all available top-level queries.
3. `types/mutation_type.rb`: Lists all available mutations.
4. `resolvers/` directory: Contains resolver classes for handling specific queries.
5. `mutations/` directory: Contains mutation classes for handling data modifications and actions.

## Key Files
1. `lago_api_schema.rb`: The main schema definition file.
2. `types/base_*.rb`: Base classes for different GraphQL type definitions.
3. `resolvers/base_resolver.rb`: Base class for query resolvers.
4. `mutations/base_mutation.rb`: Base class for mutations.
5. `concerns/`: Contains modules for authentication, authorization, and error handling.
6. `extensions/field_authorization_extension.rb`: Implements field-level authorization.

## Dependencies
The GraphQL implementation relies on several key dependencies:

1. GraphQL Ruby gem: Provides the core GraphQL functionality.
2. ActiveSupport and ActiveRecord: Used for database interactions and Rails integrations.
3. GlobalID: Used for object identification in the schema.
4. Custom application models and services: Integrated throughout resolvers and mutations.

## Configuration
Configuration for the GraphQL API is distributed across various files:

1. Schema-level configuration in `lago_api_schema.rb` (e.g., max query depth, complexity).
2. Field-level permissions and configurations in type definitions.
3. Authorization rules in the `FieldAuthorizationExtension` and various concern modules.
4. Resolver and mutation-specific configurations, such as required permissions and pagination settings.

The GraphQL implementation in this directory provides a powerful and flexible API for the SaaS application, handling everything from basic CRUD operations to complex business logic and integrations. It's designed with modularity and extensibility in mind, allowing for easy addition of new features and modifications to existing functionality.