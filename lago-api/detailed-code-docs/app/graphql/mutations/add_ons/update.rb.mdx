---
title: "update.rb"
---

## High-level description
This code defines a GraphQL mutation for updating an existing add-on in a subscription management system. It's part of a larger GraphQL API and handles the update operation for add-ons, including authentication and permission checks.

## Code Structure
The `Update` class is defined within the `Mutations::AddOns` module and inherits from `BaseMutation`. It includes the `AuthenticableApiUser` concern for authentication. The class defines the GraphQL mutation structure, including input and output types, and delegates the actual update operation to the `AddOns::UpdateService`.

## References
- `Types::AddOns::UpdateInput`: Defines the input structure for the mutation.
- `Types::AddOns::Object`: Defines the output structure for the mutation.
- `::AddOns::UpdateService`: Service class that handles the actual update logic.

## Symbols

### `Mutations::AddOns::Update`
#### Description
This class defines a GraphQL mutation for updating an existing add-on. It handles authentication, defines the mutation structure, and delegates the update operation to a service class.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| args | Hash | Arguments passed to the mutation, including the add-on ID and update parameters |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Types::AddOns::Object | The updated add-on object if successful |
| error | GraphQL::ExecutionError | Error object if the update fails |

#### Internal Logic
1. Finds the add-on by ID for the current user.
2. Calls the `AddOns::UpdateService` with the found add-on and provided parameters.
3. Returns the updated add-on if successful, or an error if the operation fails.

## Side Effects
- Updates an existing add-on in the database if the operation is successful.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableApiUser | Provides authentication functionality |
| Types::AddOns::UpdateInput | Defines the input structure for the mutation |
| Types::AddOns::Object | Defines the output structure for the mutation |
| AddOns::UpdateService | Handles the actual update logic |

## Error Handling
The mutation uses the `result_error` method (likely defined in a parent class) to handle and return errors from the update service.

## API/Interface Reference
| Field | Type | Description |
|:------|:-----|:------------|
| updateAddOn | Types::AddOns::Object | GraphQL mutation for updating an add-on |

This mutation is part of the larger GraphQL API and can be accessed through the `updateAddOn` field in the `MutationType`.