---
title: "retry_tax_provider_voiding.rb"
---

## High-level description
This code defines a GraphQL mutation for retrying tax provider voiding for an invoice. It's part of the Invoices module and is designed to handle the process of retrying a failed tax voiding operation for a specific invoice.

## Code Structure
The `RetryTaxProviderVoiding` class is a GraphQL mutation that inherits from `BaseMutation`. It includes two modules: `AuthenticableApiUser` and `RequiredOrganization`. The class defines an argument, a return type, and a resolve method to handle the mutation logic.

## Symbols

### `Mutations::Invoices::RetryTaxProviderVoiding`
#### Description
This class represents a GraphQL mutation for retrying tax provider voiding for an invoice. It authenticates the user, ensures the required organization context, and attempts to void the invoice's taxes using a service.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | ID | The ID of the invoice to retry tax provider voiding |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| invoice | Types::Invoices::Object | The updated invoice object after the operation |

#### Internal Logic
1. Finds the invoice in the current organization using the provided ID.
2. Calls the `Invoices::ProviderTaxes::VoidService` to attempt voiding the invoice's taxes.
3. Returns the updated invoice if successful, or an error if the operation fails.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableApiUser | Provides user authentication functionality |
| RequiredOrganization | Ensures the required organization context is present |
| Invoices::ProviderTaxes::VoidService | Service for voiding invoice taxes |

## Error Handling
The mutation uses the `result_error` method to handle and return errors from the `VoidService`. If the service call is not successful, it will return an error instead of the invoice object.

## Permissions
The mutation requires the 'invoices:update' permission to be executed.