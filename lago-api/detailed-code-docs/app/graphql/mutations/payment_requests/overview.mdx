---
title: "Overview"
---

## High-level description
This code defines a GraphQL mutation for creating a payment request. It is part of a larger application that handles payment processing and customer management. The mutation is responsible for validating user authentication, checking required permissions, and delegating the creation of a payment request to a service object.

## Code Structure
The `Mutations::PaymentRequests::Create` class inherits from `BaseMutation` and includes two modules: `AuthenticableApiUser` and `RequiredOrganization`. It defines the GraphQL mutation structure, including input and output types, and delegates the actual creation logic to the `::PaymentRequests::CreateService`.

## Symbols

### `Mutations::PaymentRequests::Create`
#### Description
This class defines a GraphQL mutation for creating a payment request. It handles authentication, permission checking, and delegates the creation process to a service object.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| args | Hash | Arguments passed to the mutation, defined by `Types::PaymentRequests::CreateInput` |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| payment_request | Types::PaymentRequests::Object | The created payment request object |

#### Internal Logic
1. Checks for user authentication and required organization (via included modules).
2. Verifies the user has the required permission "payment_requests:create".
3. Calls the `::PaymentRequests::CreateService` with the current organization and input arguments.
4. Returns the created payment request if successful, or an error result if not.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableApiUser | Provides authentication logic for API users |
| RequiredOrganization | Ensures the presence of a required organization |
| Types::PaymentRequests::CreateInput | Defines the input structure for the mutation |
| Types::PaymentRequests::Object | Defines the output structure for the mutation |
| ::PaymentRequests::CreateService | Service object that handles the actual creation of the payment request |

## Error Handling
The mutation uses the `result_error` method (likely defined in a parent class) to handle and return errors from the service object if the creation process fails.

## References
- `Types::PaymentRequests::CreateInput`: Defines the input structure for the mutation.
- `Types::PaymentRequests::Object`: Defines the output structure for the mutation.
- `::PaymentRequests::CreateService`: Service object that handles the actual creation of the payment request.

This mutation is likely referenced in the `MutationType` class (as seen in the related snippets) to make it available in the GraphQL schema.