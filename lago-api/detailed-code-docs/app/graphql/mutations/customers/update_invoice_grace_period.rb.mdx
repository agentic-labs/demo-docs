---
title: "update_invoice_grace_period.rb"
---

## High-level description
This code defines a GraphQL mutation for updating the invoice grace period of a customer. It's part of a larger application that manages customer data and billing information. The mutation is marked for removal in the future.

## Code Structure
The main symbol in this code is the `UpdateInvoiceGracePeriod` class, which inherits from `BaseMutation` and includes the `AuthenticableApiUser` module. It defines the structure and behavior of the GraphQL mutation.

## References
- `::Customers::UpdateService`: Used to perform the actual update operation.
- `Types::Customers::Object`: Used as the return type for the mutation.

## Symbols

### `Mutations::Customers::UpdateInvoiceGracePeriod`
#### Description
This class defines a GraphQL mutation for updating a customer's invoice grace period. It requires authentication and specific permissions to execute.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | ID | The ID of the customer to update (required) |
| invoice_grace_period | Integer | The new invoice grace period value (optional) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| customer | Types::Customers::Object | The updated customer object |

#### Internal Logic
1. The mutation requires the user to have either 'customers:update' or 'customer_settings:update:grace_period' permission.
2. It uses the `::Customers::UpdateService` to perform the update operation.
3. If the update is successful, it returns the updated customer object.
4. If the update fails, it returns an error result.

## Side Effects
This mutation modifies the invoice grace period of a customer in the database.

## Dependencies
- `AuthenticableApiUser` module: Provides authentication functionality.
- `::Customers::UpdateService`: Handles the actual update operation.
- `Types::Customers::Object`: Defines the structure of the customer object returned by the mutation.

## TODOs
There is a TODO comment indicating that this mutation should be removed in the future. This suggests that the functionality might be deprecated or replaced by another method.

## Error Handling
The mutation uses the `result_error` method (likely defined in a parent class) to handle and return errors from the update service.

## Performance Considerations
There are no specific performance optimizations noted in this code. However, as it deals with database updates, it's important to ensure that the `::Customers::UpdateService` is optimized for performance, especially if dealing with a large number of customers or frequent updates.