---
title: "destroy.rb"
---

## High-level description
This code defines a GraphQL mutation for deleting a webhook endpoint. It's part of the `Mutations::WebhookEndpoints` module and inherits from `BaseMutation`. The mutation authenticates the user, requires an organization context, and uses a service to perform the actual deletion of the webhook endpoint.

## Code Structure
The `Destroy` class is the main symbol in this code. It includes two modules: `AuthenticableApiUser` and `RequiredOrganization`. The class defines the GraphQL mutation structure and delegates the deletion logic to the `WebhookEndpoints::DestroyService`.

## References
- `BaseMutation`: The parent class for this mutation
- `AuthenticableApiUser`: A module for user authentication
- `RequiredOrganization`: A module for ensuring organization context
- `WebhookEndpoints::DestroyService`: A service class for deleting webhook endpoints

## Symbols

### `Mutations::WebhookEndpoints::Destroy`
#### Description
This class defines a GraphQL mutation for deleting a webhook endpoint. It authenticates the user, ensures the presence of an organization context, and uses a service to perform the deletion.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | ID | The ID of the webhook endpoint to be deleted |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | ID | The ID of the deleted webhook endpoint (if successful) |

#### Internal Logic
1. Finds the webhook endpoint in the current organization using the provided ID
2. Calls the `WebhookEndpoints::DestroyService` to delete the webhook endpoint
3. Returns the deleted webhook endpoint if successful, or an error if the operation fails

## Side Effects
- Deletes a webhook endpoint from the database
- Triggers a background job to track the webhook endpoint deletion event

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableApiUser | Provides user authentication functionality |
| RequiredOrganization | Ensures the presence of an organization context |
| WebhookEndpoints::DestroyService | Handles the actual deletion of the webhook endpoint |

## Error Handling
The mutation uses the `result_error` method (likely defined in a parent class) to handle and return errors from the `DestroyService`.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| DestroyWebhookEndpoint | Mutation | `{ id: ID! }` | `{ id: ID }` | Deletes a webhook endpoint and returns its ID if successful |