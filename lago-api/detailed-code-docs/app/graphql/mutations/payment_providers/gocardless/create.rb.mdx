---
title: "create.rb"
---

## High-level description
This code defines a GraphQL mutation for adding or updating a GoCardless payment provider in a Ruby on Rails application. It is part of a larger GraphQL API structure and specifically handles the creation or update of GoCardless integration within the system.

## Code Structure
The `Create` class is nested within the `Mutations::PaymentProviders::Gocardless` module, indicating its role in the overall mutation structure of the application. It inherits from a `Base` class, suggesting common functionality shared among mutations.

## Symbols

### `Mutations::PaymentProviders::Gocardless::Create`
#### Description
This class defines a GraphQL mutation for adding or updating a GoCardless payment provider. It sets up the necessary configuration for the mutation, including permissions, input type, and return type.

#### Inputs
The inputs for this mutation are defined by the `Types::PaymentProviders::GocardlessInput` class, which is not provided in the given code snippets.

#### Outputs
The mutation returns a `Types::PaymentProviders::Gocardless` object, which represents the created or updated GoCardless payment provider.

#### Internal Logic
The class doesn't contain explicit internal logic, suggesting that the actual creation or update process is handled in the parent `Base` class or through GraphQL's default resolver mechanism.

## Side Effects
While not explicitly shown in this code, the mutation likely creates or updates a GoCardless payment provider in the system's database.

## Dependencies
- The mutation depends on the `Types::PaymentProviders::GocardlessInput` for input definition.
- It also depends on `Types::PaymentProviders::Gocardless` for the return type.

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| REQUIRED_PERMISSION | String | 'organization:integrations:create' | Defines the permission required to execute this mutation |

## References
This mutation is referenced in the `MutationType` class (from `app/graphql/types/mutation_type.rb`) as:
```ruby
field :add_gocardless_payment_provider, mutation: Mutations::PaymentProviders::Gocardless::Create
```
This makes the mutation available in the GraphQL API under the name `addGocardlessPaymentProvider`.

The `Types::PaymentProviders::Gocardless` class (from `app/graphql/types/payment_providers/gocardless.rb`) defines the structure of the GoCardless provider object that this mutation returns. It includes fields such as `code`, `id`, `name`, `has_access_token`, `success_redirect_url`, and `webhook_secret`.

## Notes
1. The mutation uses `graphql_name 'AddGocardlessPaymentProvider'` to set a custom name for the mutation in the GraphQL schema.
2. The `description` provides a brief explanation of the mutation's purpose, which will be visible in the GraphQL documentation.
3. The `REQUIRED_PERMISSION` constant suggests that this mutation is protected and requires specific user permissions to be executed.
4. The actual implementation of creating or updating the GoCardless provider is not visible in this code, likely handled in a parent class or through GraphQL's resolver mechanism.