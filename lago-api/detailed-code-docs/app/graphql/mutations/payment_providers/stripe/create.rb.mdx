---
title: "create.rb"
---

## High-level description
This code defines a GraphQL mutation for creating a Stripe payment provider in an organization. It is part of a larger GraphQL API structure and specifically handles the addition of Stripe API keys to an organization's payment provider options.

## Code Structure
The `Create` class is nested within the `Mutations::PaymentProviders::Stripe` module, indicating its role in the larger mutation structure of the application. It inherits from a `Base` class and sets up the necessary GraphQL configuration for the mutation.

## Symbols

### `Mutations::PaymentProviders::Stripe::Create`
#### Description
This class defines a GraphQL mutation for adding Stripe as a payment provider to an organization. It sets up the necessary configuration for the mutation, including permissions, input type, and return type.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| input | Types::PaymentProviders::StripeInput | Input object containing Stripe configuration details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Types::PaymentProviders::Stripe | The created Stripe payment provider object |

#### Internal Logic
The class doesn't contain explicit internal logic, but it sets up the following:
1. Defines the required permission for executing this mutation.
2. Sets the GraphQL name and description for the mutation.
3. Specifies the input object class and return type for the mutation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Types::PaymentProviders::StripeInput | Defines the structure of the input for the mutation |
| Types::PaymentProviders::Stripe | Defines the structure of the return type for the mutation |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| REQUIRED_PERMISSION | String | 'organization:integrations:create' | The permission required to execute this mutation |

## References
This mutation is referenced in the `MutationType` class (app/graphql/types/mutation_type.rb) as:
```ruby
field :add_stripe_payment_provider, mutation: Mutations::PaymentProviders::Stripe::Create
```

This indicates that the mutation is accessible through the GraphQL API as `addStripePaymentProvider`.

The `Types::PaymentProviders::StripeInput` class (app/graphql/types/payment_providers/stripe_input.rb) defines the structure of the input for this mutation, including fields for `code`, `name`, `secret_key`, and `success_redirect_url`.

The `Types::PaymentProviders::Stripe` class (app/graphql/types/payment_providers/stripe.rb) defines the structure of the return type for this mutation, including fields for `code`, `id`, `name`, `secret_key`, and `success_redirect_url`. Note that the `secret_key` is obfuscated for security reasons when returned.