---
title: "base.rb"
---

## High-level description
This code defines a base class for Adyen payment provider mutations in a GraphQL API. It handles the creation or update of Adyen payment providers for an organization, incorporating user authentication and organization validation.

## Code Structure
The `Mutations::PaymentProviders::Adyen::Base` class inherits from `BaseMutation` and includes two modules: `AuthenticableApiUser` and `RequiredOrganization`. It defines a `resolve` method that processes the mutation arguments and interacts with the `PaymentProviders::AdyenService`.

## References
- `BaseMutation` (not provided in the snippets)
- `AuthenticableApiUser` module
- `RequiredOrganization` module
- `PaymentProviders::AdyenService`

## Symbols

### `Mutations::PaymentProviders::Adyen::Base`
#### Description
This class serves as a base for Adyen payment provider mutations. It ensures that the user is authenticated and belongs to a valid organization before processing the mutation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| **args | Hash | Mutation arguments for creating or updating an Adyen payment provider |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| adyen_provider | AdyenProvider | The created or updated Adyen payment provider |
| error | GraphQL::ExecutionError | An error object if the operation fails |

#### Internal Logic
1. Calls the `PaymentProviders::AdyenService` to create or update the Adyen provider.
2. Passes the current user and organization from the context along with the mutation arguments.
3. Returns the created/updated Adyen provider if successful, or an error if the operation fails.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| AuthenticableApiUser | Ensures the current user is authenticated |
| RequiredOrganization | Validates the presence and membership of the current organization |
| PaymentProviders::AdyenService | Handles the creation or update of Adyen payment providers |

## Error Handling
The class relies on the `result_error` method (not shown in the provided code) to handle and format errors returned by the `PaymentProviders::AdyenService`.

## Side Effects
- Creates or updates an Adyen payment provider in the database.
- May raise unauthorized or organization-related errors before processing the mutation.

## Performance Considerations
The performance of this mutation largely depends on the implementation of `PaymentProviders::AdyenService`, which is responsible for database operations and potential API calls to Adyen.