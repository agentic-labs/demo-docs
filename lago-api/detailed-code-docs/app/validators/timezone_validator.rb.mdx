---
title: "timezone_validator.rb"
---

## High-level description
The `TimezoneValidator` is a custom validator class for Ruby on Rails applications. It validates whether a given timezone value is either 'UTC' or a valid timezone recognized by Rails' ActiveSupport::TimeZone.

## Symbols

### `TimezoneValidator`
#### Description
This class inherits from `ActiveModel::EachValidator` and provides custom validation for timezone attributes in Rails models.

#### Internal Logic
The validator checks if the provided value is either 'UTC' or a valid timezone string present in the `ActiveSupport::TimeZone::MAPPING` hash.

___

### `validate_each`
#### Description
This method is called by Rails for each attribute being validated. It adds an error to the record if the timezone is invalid.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| record | ActiveModel::Base | The model instance being validated |
| attribute | Symbol | The name of the attribute being validated |
| value | String | The timezone value to be validated |

#### Internal Logic
The method calls the `valid?` method to check if the timezone is valid. If not, it adds an error to the record with the key `:invalid_timezone`.

___

### `valid?`
#### Description
A protected method that determines whether a given timezone value is valid.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | String | The timezone value to be validated |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Boolean | True if the timezone is valid, false otherwise |

#### Internal Logic
The method checks if the value is either 'UTC' or a valid timezone string present in the `ActiveSupport::TimeZone::MAPPING` hash.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveModel::EachValidator | Base class for custom validators in Rails |
| ActiveSupport::TimeZone | Provides timezone functionality and mapping |

## Error Handling
The validator adds an error to the record with the key `:invalid_timezone` when an invalid timezone is encountered. This error can be customized in the application's localization files.