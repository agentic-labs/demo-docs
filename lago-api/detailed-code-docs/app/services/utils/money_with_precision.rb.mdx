---
title: "money_with_precision.rb"
---

## High-level description
This code defines a custom `MoneyWithPrecision` class within the `Utils` module, extending the `Money` class with infinite precision enabled by default. This class is designed to handle monetary values with high precision calculations.

## Code Structure
The code consists of a single class `MoneyWithPrecision` nested within the `Utils` module. This class inherits from the `Money` class and modifies its default behavior.

## Symbols

### `Utils::MoneyWithPrecision`
#### Description
`MoneyWithPrecision` is a custom class that extends the functionality of the `Money` class. It sets the default infinite precision to true, allowing for more accurate monetary calculations.

#### Internal Logic
The class overrides the `default_infinite_precision` class variable of the `Money` class, setting it to `true`. This ensures that all instances of `MoneyWithPrecision` will use infinite precision by default, which can be crucial for financial calculations where accuracy is paramount.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Money | The base class that `MoneyWithPrecision` extends, likely from the `money` gem |

## References
The `MoneyWithPrecision` class is referenced in the `MoneyHelper.format_with_precision` method in the `app/views/helpers/money_helper.rb` file. This helper method uses `MoneyWithPrecision` to format monetary amounts with high precision.

## Performance Considerations
Using infinite precision can have performance implications for calculations involving large numbers or many operations. However, this trade-off is often necessary for financial applications where accuracy is critical.

## Usage Example
Based on the related `MoneyHelper` class, here's an example of how `MoneyWithPrecision` might be used:

```ruby
amount_cents = 1000_00  # $1000.00
currency = 'USD'
formatted_amount = MoneyHelper.format_with_precision(amount_cents, currency)
```

This would create a `MoneyWithPrecision` object with the given amount and currency, and then format it according to the locale settings.

The `MoneyWithPrecision` class ensures that all monetary calculations maintain high precision, which is particularly important for financial applications where even small rounding errors can lead to significant discrepancies over time or in large-scale operations.