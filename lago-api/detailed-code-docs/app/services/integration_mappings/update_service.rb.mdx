---
title: "update_service.rb"
---

## High-level description
This code defines the `UpdateService` class within the `IntegrationMappings` module. It is responsible for updating an existing integration mapping with new parameters. The service handles the update process, including error handling and result reporting.

## Code Structure
The `UpdateService` class inherits from `BaseService` and contains a single public method `call` that performs the update operation. It uses instance variables to store the integration mapping and update parameters.

## References
This code references the `BaseService` class, which is defined in a separate file and provides common functionality for service objects.

## Symbols

### `UpdateService`
#### Description
A service class that updates an existing integration mapping with new parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_mapping | IntegrationMapping | The existing integration mapping to be updated |
| params | Hash | A hash containing the new values for the integration mapping |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | BaseService::Result | An object containing the result of the update operation |

#### Internal Logic
1. Check if the integration mapping exists
2. Update the integration mapping attributes if corresponding params are provided
3. Save the updated integration mapping
4. Set the updated integration mapping in the result object
5. Handle any validation errors that occur during the save operation

### `initialize`
#### Description
Initializes the UpdateService with the required integration mapping and update parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_mapping | IntegrationMapping | The existing integration mapping to be updated |
| params | Hash | A hash containing the new values for the integration mapping |

### `call`
#### Description
Performs the update operation on the integration mapping.

#### Internal Logic
1. Check if the integration mapping exists, return a not found error if it doesn't
2. Update the integration mapping attributes based on the provided params
3. Save the updated integration mapping
4. Set the updated integration mapping in the result object
5. Handle any validation errors that occur during the save operation

## Side Effects
- Modifies the existing integration mapping in the database
- May raise an `ActiveRecord::RecordInvalid` exception if validation fails

## Error Handling
- Returns a not found error if the integration mapping doesn't exist
- Catches `ActiveRecord::RecordInvalid` exceptions and reports validation failures

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Used for database operations and error handling |

Note: The `BaseService` class, which this service inherits from, likely provides additional error handling and result reporting functionality.