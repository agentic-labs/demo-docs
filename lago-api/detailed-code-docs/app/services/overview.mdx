---
title: "Overview"
---

## High-level description
The `app/services` directory contains a comprehensive collection of service classes that encapsulate the core business logic of the application. These services handle various aspects of the system, including authentication, billing, customer management, event processing, invoicing, payment processing, subscription management, and webhook handling.

## What does it do?
This directory provides a wide range of functionalities:

1. Authentication and User Management: Handles user registration, login, and token generation.

2. Billing and Invoicing: Manages the creation, updating, and processing of invoices, fees, and credit notes.

3. Customer Management: Handles customer creation, updates, and related operations.

4. Subscription Handling: Manages the lifecycle of subscriptions, including creation, updates, and termination.

5. Event Processing: Handles various events in the system, including usage tracking and billing-related events.

6. Payment Processing: Integrates with multiple payment providers and manages payment-related operations.

7. Wallet Management: Handles wallet transactions, balances, and related operations.

8. Webhook Management: Processes and sends webhooks for various system events.

9. Tax Management: Handles tax calculations and applications to invoices and charges.

10. Analytics and Reporting: Provides services for data exports and analytics tracking.

These services work together to provide a robust and flexible system for managing complex billing, subscription, and customer-related operations.

## Entry points
The main entry points for this directory are the various service classes, which are typically called from controllers, background jobs, or other parts of the application. Key entry points include:

1. Authentication: `UsersService` for user-related operations.
2. Billing: `Invoices::CreateService`, `Fees::CreateService` for invoice and fee creation.
3. Subscriptions: `Subscriptions::CreateService`, `Subscriptions::TerminateService` for subscription management.
4. Events: `Events::CreateService` for event processing.
5. Payments: `PaymentProviders::CreateService` for payment provider integration.
6. Webhooks: `Webhooks::SendHttpService` for webhook delivery.

## Key Files
1. `users_service.rb`: Handles user authentication and registration.
2. `invoices/create_service.rb`: Manages invoice creation.
3. `subscriptions/create_service.rb`: Handles subscription creation and management.
4. `events/create_service.rb`: Processes various system events.
5. `payment_providers/create_service.rb`: Integrates with payment providers.
6. `webhooks/send_http_service.rb`: Manages webhook delivery.

## Dependencies
The services in this directory rely on various external libraries and internal components:

1. ActiveRecord: For database operations.
2. JWT: For token generation and authentication.
3. Payment provider libraries (e.g., Stripe, GoCardless).
4. Background job processors (e.g., Sidekiq).
5. PDF generation libraries.
6. Analytics tracking services (e.g., Segment).

## Configuration
While specific configuration files are not mentioned, the services likely rely on various environment variables and application-wide settings for:

1. Database connections
2. API keys for payment providers and external services
3. Webhook URLs and configurations
4. Tax rates and rules
5. Billing and subscription settings

The `app/services` directory forms the core of the application's business logic, providing a comprehensive set of services for managing complex operations related to billing, subscriptions, payments, and customer management. The use of service objects promotes separation of concerns and maintainability in the application architecture.