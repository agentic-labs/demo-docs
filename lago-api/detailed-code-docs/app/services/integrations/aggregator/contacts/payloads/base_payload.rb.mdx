---
title: "base_payload.rb"
---

## High-level description
This code defines a `BasePayload` class within the `Integrations::Aggregator::Contacts::Payloads` module. It is designed to generate payload data for creating and updating customer information in an external integration system. The class provides a structured way to format customer data for API requests.

## Code Structure
The `BasePayload` class inherits from `Integrations::Aggregator::BasePayload` and defines methods for initializing the payload, creating a new customer payload, and updating an existing customer payload.

## Symbols

### `BasePayload`
#### Description
This class is responsible for generating payload data for customer-related operations in an integration system.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration | Object | The integration object |
| customer | Object | The customer object |
| integration_customer | Object | The integration customer object (optional) |
| subsidiary_id | String/Integer | The subsidiary ID (optional) |

#### Internal Logic
The class initializes with the provided inputs and stores them as instance variables. It then defines methods to create payload bodies for creating and updating customer information.

### `initialize`
#### Description
Initializes a new instance of the `BasePayload` class with the given parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration | Object | The integration object |
| customer | Object | The customer object |
| integration_customer | Object | The integration customer object (optional) |
| subsidiary_id | String/Integer | The subsidiary ID (optional) |

### `create_body`
#### Description
Generates a payload body for creating a new customer in the integration system.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Array of Hash | Array | An array containing a single hash with customer information |

#### Internal Logic
Creates a hash with customer details including name, city, zip, country, state, email, and phone.

### `update_body`
#### Description
Generates a payload body for updating an existing customer in the integration system.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Array of Hash | Array | An array containing a single hash with customer information, including the external customer ID |

#### Internal Logic
Similar to `create_body`, but includes the `external_customer_id` for identifying the customer to update.

### `email`
#### Description
Private method to extract and format the customer's email address.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| String | String | The first email address from the customer's email list, stripped of whitespace |

### `phone`
#### Description
Private method to extract and format the customer's phone number.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| String | String | The first phone number from the customer's phone list, stripped of whitespace |

## References
This class references the `Integrations::Aggregator::BasePayload` class, which it inherits from. The exact implementation of this parent class is not provided in the given code snippets.

## Dependencies
The code relies on the `Integrations::Aggregator::BasePayload` class, which is likely defined in another file within the project structure.

## Performance Considerations
The `email` and `phone` methods use string splitting and array access, which could be optimized if dealing with large volumes of data or if these methods are called frequently.

This documentation provides a comprehensive overview of the `BasePayload` class and its functionality within the context of customer data management for integration systems.