---
title: "base_service.rb"
---

## High-level description
This code defines a base class `BaseService` within the `Charges::Validators` module. It serves as a foundation for charge validation services, providing a structure for validating charge properties and managing validation results.

## Code Structure
The `BaseService` class inherits from `BaseValidator` and sets up the basic structure for charge validation. It initializes with a charge and its properties, and provides a `valid?` method that can be overridden by subclasses to implement specific validation rules.

## Symbols

### `Charges::Validators::BaseService`
#### Description
This class serves as a base for charge validation services. It initializes the validation process and provides a framework for implementing specific validation rules in subclasses.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| charge | Object | The charge object to be validated |
| properties | Hash | Optional. The properties of the charge to be validated. Defaults to `charge.properties` if not provided |

#### Internal Logic
1. Initializes instance variables with the provided charge and properties.
2. Creates a new `BaseService::Result` object to store validation results.
3. Calls the superclass initializer with the result object.
4. Provides a `valid?` method that can be overridden by subclasses to implement specific validation rules.
5. If errors are present after validation, it marks the result as a validation failure and returns false.

### `initialize`
#### Description
Initializes the BaseService with a charge and its properties.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| charge | Object | The charge object to be validated |
| properties | Hash | Optional. The properties of the charge to be validated |

### `valid?`
#### Description
A method to be overridden by subclasses to implement specific validation rules.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| valid | Boolean | Returns true if validation passes, false otherwise |

#### Internal Logic
1. This method is meant to be overridden in subclasses to add specific validation rules.
2. If errors are present after validation, it marks the result as a validation failure and returns false.
3. Returns true if no errors are found.

## References
This class references the following:
- `BaseValidator`: The superclass from which `BaseService` inherits.
- `BaseService::Result`: Used to create a result object for storing validation outcomes.

## Dependencies
The code depends on the `BaseValidator` class and the `BaseService::Result` class, which are not shown in the provided code snippets.

## Notes
1. The `valid?` method is designed to be overridden by subclasses to implement specific validation rules.
2. The class uses attr_reader for `result` and `properties`, making them accessible to subclasses.
3. The `charge` instance variable is kept private, accessible only within the class.

This base class provides a foundation for creating specific charge validation services, as demonstrated by the `StandardService` in the related code snippets, which inherits from `BaseService` and implements specific validation rules.