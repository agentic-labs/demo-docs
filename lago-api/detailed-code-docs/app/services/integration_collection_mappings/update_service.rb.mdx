---
title: "update_service.rb"
---

## High-level description
This code defines the `UpdateService` class within the `IntegrationCollectionMappings` module. Its primary purpose is to update an existing integration collection mapping with new parameters. The service handles the update process, including error handling and validation.

## Code Structure
The `UpdateService` class inherits from `BaseService` and contains two main methods: `initialize` and `call`. The `initialize` method sets up the service with the required parameters, while the `call` method performs the actual update operation.

## References
This code references the `BaseService` class, which is defined in the related file `app/services/base_service.rb`.

## Symbols

### `UpdateService`
#### Description
This class is responsible for updating an existing integration collection mapping with new parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_collection_mapping | IntegrationCollectionMapping | The existing mapping to be updated |
| params | Hash | A hash containing the new values for the mapping |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | BaseService::Result | An object containing the updated mapping or error information |

#### Internal Logic
1. Check if the integration_collection_mapping exists
2. Update the mapping attributes if corresponding params are provided
3. Save the updated mapping
4. Set the result object with the updated mapping
5. Handle any validation errors

## Side Effects
The method updates the database record for the given integration collection mapping.

### `initialize`
#### Description
Initializes the service with the required parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_collection_mapping | IntegrationCollectionMapping | The existing mapping to be updated |
| params | Hash | A hash containing the new values for the mapping |

### `call`
#### Description
Performs the update operation on the integration collection mapping.

#### Internal Logic
1. Check if the mapping exists, return a not_found_failure if it doesn't
2. Update the mapping attributes if corresponding params are provided
3. Save the updated mapping
4. Set the result object with the updated mapping
5. Handle any ActiveRecord::RecordInvalid errors

## Error Handling
The service handles two main types of errors:
1. Not found error: When the integration_collection_mapping doesn't exist
2. Validation error: When the updated mapping fails to save due to validation issues

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Used for database operations and error handling |

## Configuration
This code doesn't define any specific configuration options.

## API/Interface Reference
This service is used in the GraphQL mutation `UpdateIntegrationCollectionMapping`, as seen in the related file `app/graphql/mutations/integration_collection_mappings/update.rb`.

| Method | Input | Output | Description |
|:-------|:------|:-------|:------------|
| call | None | Result object | Updates the integration collection mapping and returns a result object |

The service is designed to be called using the class method `call`, which is inherited from `BaseService`. This method initializes the service and calls the instance method `call`.