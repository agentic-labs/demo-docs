---
title: "Overview"
---

## High-level description
This directory contains service classes for managing integration collection mappings within the application. These services handle the creation, updating, and deletion of mappings between integrations and collections, as well as providing a factory for instantiating the appropriate mapping objects based on integration types.

## What does it do?
The services in this directory facilitate the management of integration collection mappings, which are likely used to map data between different systems or services in the application. Here's a breakdown of the main functionalities:

1. Creation: The `CreateService` allows for the creation of new integration collection mappings, associating them with specific integrations and handling optional attributes.

2. Updating: The `UpdateService` enables the modification of existing integration collection mappings, applying new parameters and managing any validation errors.

3. Deletion: The `DestroyService` handles the removal of integration collection mappings from the system, ensuring proper error handling and result reporting.

4. Factory: The `Factory` class provides a centralized mechanism for instantiating the appropriate collection mapping objects based on different integration types (e.g., Netsuite, Anrok, Xero).

These services work together to provide a robust system for managing the relationships between integrations and their associated collection mappings, likely supporting various data synchronization and transformation processes within the application.

## Key Files

1. `create_service.rb`: Defines the `CreateService` class responsible for creating new integration collection mappings.

2. `update_service.rb`: Contains the `UpdateService` class, which handles updating existing integration collection mappings.

3. `destroy_service.rb`: Implements the `DestroyService` class for deleting integration collection mappings.

4. `factory.rb`: Defines the `Factory` class, which creates instances of specific collection mapping classes based on integration types.

Each of these files plays a crucial role in the overall functionality of managing integration collection mappings:

- `create_service.rb` ensures that new mappings are created with proper validation and error handling.
- `update_service.rb` allows for the modification of existing mappings while maintaining data integrity.
- `destroy_service.rb` provides a safe way to remove mappings from the system.
- `factory.rb` centralizes the logic for instantiating the correct mapping objects, making it easier to extend the system with new integration types.

## Dependencies
The services in this directory rely on several external dependencies and internal classes:

1. ActiveRecord: Used for database operations and error handling in the create, update, and destroy services.
2. BaseService: A parent class that likely provides common functionality for service objects in the application.
3. Integrations::BaseIntegration: Referenced in the create service, this model provides the foundation for different types of integrations.
4. IntegrationCollectionMappings::Factory: Used in the create service to instantiate the appropriate mapping objects.
5. Specific mapping classes:
   - IntegrationCollectionMappings::NetsuiteCollectionMapping
   - IntegrationCollectionMappings::AnrokCollectionMapping
   - IntegrationCollectionMappings::XeroCollectionMapping

These dependencies suggest that the application supports multiple integration types and uses a service-oriented architecture to manage business logic.

## Configuration
While there are no explicit configuration files mentioned in the provided summaries, the services use various parameters and attributes that can be considered configurable:

1. In the `CreateService`:
   - `integration_id`: Used to find the associated integration.
   - Optional attributes: `external_id`, `external_account_code`, `external_name`.

2. In the `UpdateService`:
   - `params`: A hash containing the new values for updating the mapping.

3. In the `Factory`:
   - The mapping between integration types and their corresponding collection mapping classes.

These configurable elements allow for flexibility in how the integration collection mappings are created, updated, and instantiated, making it easier to extend the system with new integration types or attributes in the future.

In conclusion, this directory contains a set of well-structured services that work together to provide a comprehensive solution for managing integration collection mappings. The use of service objects and a factory pattern demonstrates good software design principles, promoting maintainability and extensibility of the codebase.