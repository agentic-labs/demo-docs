---
title: "destroy_service.rb"
---

## High-level description
This code defines a `DestroyService` class within the `IntegrationCollectionMappings` module. Its primary purpose is to handle the deletion of an integration collection mapping object, ensuring proper error handling and result reporting.

## Code Structure
The `DestroyService` class inherits from `BaseService` and contains an initializer and a `call` method. The `call` method performs the main logic of destroying the integration collection mapping.

## Symbols

### `IntegrationCollectionMappings::DestroyService`
#### Description
This service class is responsible for destroying an integration collection mapping object. It encapsulates the logic for checking the existence of the mapping and performing the deletion operation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_collection_mapping | Object | The integration collection mapping object to be destroyed |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Object | An object containing the result of the operation, including success status and the destroyed mapping |

#### Internal Logic
1. Check if the integration collection mapping exists.
2. If it doesn't exist, return a not found failure result.
3. If it exists, destroy the mapping.
4. Set the destroyed mapping on the result object.
5. Return the result object.

### `initialize`
#### Description
Initializes the service with the provided integration collection mapping.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_collection_mapping | Object | The integration collection mapping object to be destroyed |

### `call`
#### Description
Executes the main logic of the service, destroying the integration collection mapping if it exists.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Object | An object containing the result of the operation |

#### Internal Logic
1. Check if the integration collection mapping exists using the `integration_collection_mapping` attribute.
2. If it doesn't exist, call `result.not_found_failure!` with the resource name.
3. If it exists, call `destroy!` on the mapping object.
4. Set the destroyed mapping on the `result.integration_collection_mapping`.
5. Return the `result` object.

## References
The code references a `BaseService` class, which it inherits from. This base class likely provides common functionality for service objects in the application.

## Dependencies
The code depends on the `BaseService` class, which is not shown in the provided code snippets.

## Error Handling
The service handles the case where the integration collection mapping is not found by returning a not found failure result. It uses the `result` object to communicate the failure, likely provided by the `BaseService` class.

## Related Information
The related code snippet shows a GraphQL mutation (`Mutations::IntegrationCollectionMappings::Destroy`) that uses this service. The mutation:
1. Requires authentication and organization.
2. Accepts an `id` argument.
3. Finds the integration collection mapping based on the provided id and current organization.
4. Calls the `DestroyService` with the found mapping.
5. Returns the destroyed mapping on success or an error result on failure.

This relationship demonstrates how the `DestroyService` is integrated into the application's GraphQL API, providing a clean separation of concerns between the API layer and the business logic layer.