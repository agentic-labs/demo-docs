---
title: "base_store.rb"
---

## High-level description
This code defines a base class `BaseStore` within the `Events::Stores` module. It serves as a foundation for implementing various event storage and aggregation strategies, providing a common interface and shared functionality for different types of event stores.

## Code Structure
The `BaseStore` class contains initialization logic, accessor methods, and several placeholder methods that are meant to be implemented by subclasses. It also includes helper methods for date calculations and sanitizing queries.

## Symbols

### `BaseStore`
#### Description
This class serves as an abstract base class for different event store implementations. It initializes common attributes and defines a set of methods that subclasses should implement.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| code | String | The code associated with the events |
| subscription | Object | The subscription object related to the events |
| boundaries | Hash | Contains date boundaries for event queries |
| filters | Hash | Optional filters for event queries |

#### Internal Logic
- Initializes instance variables with provided parameters
- Sets up filter-related variables
- Defines placeholder methods for various aggregation operations
- Provides helper methods for date calculations and query sanitization

## Side Effects
The class doesn't have direct side effects, but subclasses implementing its methods may interact with external data stores or resources.

## Dependencies
The class depends on the `Subscriptions::DatesService` for period duration calculations.

## Configuration
The class doesn't define explicit configuration options, but it uses instance variables that can be considered as configuration:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| @aggregation_property | Object | nil | Property used for aggregation |
| @numeric_property | Boolean | false | Indicates if the property is numeric |
| @use_from_boundary | Boolean | true | Whether to use the from boundary in queries |

## Error Handling
The class raises `NotImplementedError` for methods that should be implemented by subclasses.

___

This base class provides a foundation for implementing various event storage and aggregation strategies. Subclasses are expected to implement the specific logic for different types of event stores while adhering to the common interface defined in this base class. The class also includes helper methods for date calculations and query sanitization, which can be useful across different implementations.