---
title: "error_service.rb"
---

## High-level description
This code defines the `ErrorService` class within the `Webhooks::Integrations::Taxes` module. It is responsible for handling and serializing tax provider errors related to customers, and preparing the data for webhook notifications.

## Code Structure
The `ErrorService` class inherits from `Webhooks::BaseService` and overrides several private methods to customize the webhook behavior for tax provider errors.

## References
This code references the following:
- `Webhooks::BaseService`
- `::V1::Integrations::CustomerErrorSerializer`

## Symbols

### `Webhooks::Integrations::Taxes::ErrorService`
#### Description
This class handles the creation of webhooks for tax provider errors related to customers. It customizes the behavior of the base webhook service for this specific use case.

#### Internal Logic
The class overrides four private methods from the base class:
1. `current_organization`: Retrieves the organization associated with the object.
2. `object_serializer`: Creates a new instance of `CustomerErrorSerializer` with specific options.
3. `webhook_type`: Defines the type of webhook as 'customer.tax_provider_error'.
4. `object_type`: Defines the object type as 'tax_provider_customer_error'.

These methods are used by the inherited `call` method from `Webhooks::BaseService` to construct and send the webhook.

### `current_organization`
#### Description
Retrieves and memoizes the organization associated with the object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| @current_organization | Organization | The organization associated with the object |

### `object_serializer`
#### Description
Creates a new instance of `CustomerErrorSerializer` with specific options for serializing the object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| serializer | ::V1::Integrations::CustomerErrorSerializer | Serializer instance for the object |

### `webhook_type`
#### Description
Defines the type of webhook for tax provider errors.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhook_type | String | The type of webhook ('customer.tax_provider_error') |

### `object_type`
#### Description
Defines the object type for tax provider customer errors.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object_type | String | The type of object ('tax_provider_customer_error') |

## Dependencies
This code depends on the following:
| Dependency | Purpose |
|:-----------|:--------|
| Webhooks::BaseService | Parent class providing the main webhook functionality |
| ::V1::Integrations::CustomerErrorSerializer | Serializer for customer error data |

## Error Handling
This class does not implement any specific error handling. It relies on the error handling mechanisms of the parent class `Webhooks::BaseService`.