---
title: "generated_service.rb"
---

## High-level description
This code defines the `GeneratedService` class within the `Webhooks::Invoices` module, which is responsible for handling webhook events related to generated invoices. It extends the `Webhooks::BaseService` class and provides specific implementations for invoice-related webhook functionality.

## Code Structure
The `GeneratedService` class inherits from `Webhooks::BaseService` and defines four methods: `current_organization`, `object_serializer`, `webhook_type`, and `object_type`. These methods work together to provide the necessary information for processing and sending webhook events for generated invoices.

## Symbols

### `Webhooks::Invoices::GeneratedService`
#### Description
This class handles the webhook event for generated invoices. It provides methods to retrieve the current organization, serialize the invoice object, and define the webhook and object types.

#### Internal Logic
The class implements four methods:

1. `current_organization`: Retrieves the organization associated with the invoice object.
2. `object_serializer`: Creates a new instance of `V1::InvoiceSerializer` to serialize the invoice object.
3. `webhook_type`: Returns the string identifier for the webhook event type.
4. `object_type`: Returns the string identifier for the object type.

### `current_organization`
#### Description
Retrieves the organization associated with the invoice object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| @current_organization | Organization | The organization associated with the invoice |

#### Internal Logic
This method uses memoization to store the organization, ensuring it's only retrieved once per instance.

### `object_serializer`
#### Description
Creates a new instance of `V1::InvoiceSerializer` to serialize the invoice object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| serializer | V1::InvoiceSerializer | An instance of the invoice serializer |

#### Internal Logic
This method initializes a new `V1::InvoiceSerializer` with the invoice object, specifying the root name as 'invoice' and including the 'customer' association.

### `webhook_type`
#### Description
Returns the string identifier for the webhook event type.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhook_type | String | The webhook event type identifier |

### `object_type`
#### Description
Returns the string identifier for the object type.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object_type | String | The object type identifier |

## References
- This class is referenced in the `SendWebhookJob` class, specifically in the `WEBHOOK_SERVICES` hash with the key `'invoice.generated'`.
- The `V1::InvoiceSerializer` is used to serialize the invoice object.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Webhooks::BaseService | Parent class that `GeneratedService` inherits from |
| V1::InvoiceSerializer | Used to serialize the invoice object |

This code is part of a larger webhook system for handling various events related to invoices and other objects in the application. The `GeneratedService` class specifically handles the 'invoice.generated' event type, providing the necessary information and serialization for sending webhook notifications when an invoice is generated.