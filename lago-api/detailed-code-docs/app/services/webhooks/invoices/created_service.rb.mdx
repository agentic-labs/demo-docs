---
title: "created_service.rb"
---

## High-level description
This code defines a service class `CreatedService` within the `Webhooks::Invoices` module. It is responsible for handling the creation of webhooks for newly created invoices. The class inherits from `Webhooks::BaseService` and provides specific implementations for invoice-related webhook creation.

## Code Structure
The `CreatedService` class is part of a larger webhook system. It relies on the `BaseService` class for common functionality and overrides specific methods to customize behavior for invoice creation events.

## Symbols

### `Webhooks::Invoices::CreatedService`
#### Description
This class handles the creation of webhooks for newly created invoices. It inherits from `Webhooks::BaseService` and provides specific implementations for invoice-related webhook creation.

#### Internal Logic
The class defines four private methods:

1. `current_organization`: Retrieves the organization associated with the invoice object.
2. `object_serializer`: Creates a serializer for the invoice object with specific includes.
3. `webhook_type`: Defines the type of webhook as 'invoice.created'.
4. `object_type`: Specifies the object type as 'invoice'.

These methods are likely used by the parent `BaseService` class to construct and send the webhook.

### `current_organization`
#### Description
Retrieves the organization associated with the invoice object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| @current_organization | Organization | The organization associated with the invoice |

### `object_serializer`
#### Description
Creates a serializer for the invoice object with specific includes.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| serializer | V1::InvoiceSerializer | Serializer for the invoice object |

#### Internal Logic
Uses the `V1::InvoiceSerializer` to serialize the invoice object, including related data such as customer, subscriptions, fees, credits, and applied taxes.

### `webhook_type`
#### Description
Defines the type of webhook as 'invoice.created'.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhook_type | String | The type of webhook ('invoice.created') |

### `object_type`
#### Description
Specifies the object type as 'invoice'.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object_type | String | The type of object ('invoice') |

## References
- `Webhooks::BaseService`: The parent class from which `CreatedService` inherits.
- `V1::InvoiceSerializer`: Used to serialize the invoice object.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| V1::InvoiceSerializer | Serializes the invoice object for the webhook payload |

This service class is part of a larger webhook system, as evidenced by the related `SendWebhookJob` class. The `CreatedService` is one of many webhook services defined for different events related to invoices, customers, and other entities in the system.