---
title: "error_service.rb"
---

## High-level description
This code defines the `ErrorService` class within the `Webhooks::PaymentProviders` module. It is responsible for handling and serializing payment provider errors, preparing them for webhook notifications.

## Code Structure
The `ErrorService` class inherits from `Webhooks::BaseService` and overrides several private methods to customize the webhook behavior for payment provider errors.

## References
This code references the `::V1::PaymentProviders::ErrorSerializer` class for serializing the error object.

## Symbols

### `Webhooks::PaymentProviders::ErrorService`
#### Description
This class handles the preparation and serialization of payment provider errors for webhook notifications.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | Object | The error object to be processed |
| options | Hash | Additional options, including provider error details |

#### Internal Logic
The class overrides four private methods from the base class:
1. `current_organization`: Retrieves the organization associated with the error object.
2. `object_serializer`: Creates a new instance of the error serializer with the error object and provider error details.
3. `webhook_type`: Defines the type of webhook as 'payment_provider.error'.
4. `object_type`: Defines the object type as 'payment_provider_error'.

### `current_organization`
#### Description
Retrieves the organization associated with the error object.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| @current_organization | Organization | The organization associated with the error object |

### `object_serializer`
#### Description
Creates a new instance of the error serializer with the error object and provider error details.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| serializer | ::V1::PaymentProviders::ErrorSerializer | An instance of the error serializer |

### `webhook_type`
#### Description
Defines the type of webhook for payment provider errors.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| webhook_type | String | The webhook type, set to 'payment_provider.error' |

### `object_type`
#### Description
Defines the object type for payment provider errors.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object_type | String | The object type, set to 'payment_provider_error' |

## Dependencies
This code depends on the `::V1::PaymentProviders::ErrorSerializer` class for serializing the error object.

## Error Handling
This class does not implement any specific error handling mechanisms. It relies on the error handling provided by the base class (`Webhooks::BaseService`).