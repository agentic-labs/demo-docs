---
title: "customer_created_service.rb"
---

## High-level description
This code defines a service class `CustomerCreatedService` within the `Webhooks::PaymentProviders` module. It is responsible for handling webhook events related to customer creation in a payment provider system. The service prepares customer data for webhook delivery using a specific serializer and defines the webhook type.

## Code Structure
The `CustomerCreatedService` class inherits from `Webhooks::BaseService` and defines private methods to provide necessary information for webhook processing. These methods work together to prepare the customer object for serialization and define the webhook type.

## Symbols

### `Webhooks::PaymentProviders::CustomerCreatedService`
#### Description
This class is responsible for handling the webhook event when a customer is created in a payment provider system. It inherits from `Webhooks::BaseService` and provides specific implementations for customer-related webhook processing.

#### Internal Logic
The class defines four private methods:
1. `current_organization`: Retrieves the organization associated with the customer object.
2. `object_serializer`: Creates a new instance of `V1::CustomerSerializer` to serialize the customer object.
3. `webhook_type`: Defines the specific type of webhook event as 'customer.payment_provider_created'.
4. `object_type`: Specifies the object type as 'customer'.

These methods are likely used by the parent `BaseService` class to process the webhook event and prepare the data for delivery.

## References
- `Webhooks::BaseService`: The parent class from which `CustomerCreatedService` inherits.
- `V1::CustomerSerializer`: Used to serialize the customer object for webhook delivery.

## Dependencies
The code relies on the following internal dependencies:
- `Webhooks::BaseService`
- `V1::CustomerSerializer`

Based on the related code snippets provided:

1. The `SendWebhookJob` class in `app/jobs/send_webhook_job.rb` is responsible for dispatching various webhook events, including the 'customer.payment_provider_created' event handled by this service.

2. The `V1::CustomerSerializer` in `app/serializers/v1/customer_serializer.rb` is used to serialize the customer object, including detailed customer information such as billing configuration, metadata, taxes, and integration data.

These dependencies work together to process the customer creation event, serialize the customer data, and send it as a webhook to the configured endpoints.