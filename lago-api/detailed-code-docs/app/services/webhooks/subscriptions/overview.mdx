---
title: "Overview"
---

## High-level description
This directory contains service classes responsible for handling various webhook events related to subscriptions within the application. These services are part of a larger webhook system and are designed to prepare and send notifications for different subscription-related events.

## What does it do?
The services in this directory handle different aspects of subscription lifecycle and usage:

1. Subscription Start: Notifies when a new subscription is started.
2. Subscription Termination: Sends notifications when a subscription is terminated.
3. Termination Alert: Provides alerts before a subscription is terminated.
4. Trial End: Notifies when a subscription's trial period ends.
5. Usage Thresholds: Sends notifications when a subscription reaches certain usage thresholds.

Each service prepares the necessary data for webhook payloads, including serializing subscription objects with relevant information such as associated plans and customers. These services work in conjunction with a job system (SendWebhookJob) to process and dispatch webhook notifications to external systems or listeners.

## Key Files
1. `started_service.rb`: Handles notifications for new subscription starts.
2. `terminated_service.rb`: Manages notifications for subscription terminations.
3. `termination_alert_service.rb`: Prepares alerts for impending subscription terminations.
4. `trial_ended_service.rb`: Handles notifications for when a subscription's trial period ends.
5. `usage_thresholds_reached_service.rb`: Manages notifications for when a subscription reaches usage thresholds.

Each of these files defines a service class that inherits from `Webhooks::BaseService` and overrides specific methods to customize behavior for its respective event type.

## Dependencies
The services in this directory rely on the following key dependencies:

1. `Webhooks::BaseService`: A parent class that likely provides common webhook functionality.
2. `V1::SubscriptionSerializer`: Used to serialize subscription objects for webhook payloads.

These dependencies are crucial for the proper functioning of the webhook system, ensuring consistent behavior across different subscription-related events and proper formatting of data for external consumption.

## Configuration
While there are no explicit configuration files in this directory, the services use a consistent pattern for defining webhook types and object types. These are likely used in conjunction with the broader webhook system to route and process notifications correctly. For example:

- Webhook types: 'subscription.started', 'subscription.terminated', 'subscription.termination_alert', 'subscription.trial_ended', 'subscription.usage_threshold_reached'
- Object type: 'subscription'

These configurations are hardcoded within each service class and play a crucial role in identifying and processing different types of subscription-related events.

In summary, this directory contains a set of specialized services that work together to handle various subscription-related webhook events. They prepare and format data for external notifications, ensuring that relevant information about subscriptions, plans, and customers is included in the webhook payloads. These services are an integral part of the application's subscription management and notification system.