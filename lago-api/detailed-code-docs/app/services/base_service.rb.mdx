---
title: "base_service.rb"
---

The `BaseService` class is a foundational service class in the Lago application. It serves as a base class for other service classes, providing common functionality and structure. Here's a high-level description of its purpose and main functionality:

1. It includes the `AfterCommitEverywhere` module, which allows callbacks to be executed after a database transaction is committed.

2. It defines several custom error classes that inherit from `StandardError`, such as `FailedResult`, `NotFoundFailure`, `MethodNotAllowedFailure`, `ValidationFailure`, `ServiceFailure`, `ForbiddenFailure`, and `UnauthorizedFailure`. These are used to handle different types of errors that may occur during service execution.

3. It provides a `Result` class, which is used to encapsulate the outcome of service operations. The `Result` class includes methods for handling success and failure states, as well as storing error information.

4. The class includes class methods `call` and `call_async` which are used to instantiate and execute the service. These methods are wrapped in a tracing span using `LagoTracer`.

5. It provides an initializer that sets up a `Result` object and handles current user and source context.

6. The class includes placeholder `call` and `call_async` instance methods that are meant to be overridden by subclasses.

7. It includes private helper methods for checking the API and GraphQL contexts, as well as a method for handling time zones.

The `BaseService` class is designed to be inherited by other service classes in the application, providing a consistent structure for service objects and error handling. It also integrates with the application's tracing and context management systems.