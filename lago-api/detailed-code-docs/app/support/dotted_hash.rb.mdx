---
title: "dotted_hash.rb"
---

## High-level description
The code defines a `DottedHash` class that extends the built-in Ruby `Hash` class. Its main functionality is to convert a nested hash into a flat hash where keys are represented as dot-separated strings. 

## Code Structure
The `DottedHash` class has a single instance method `to_dotted_hash` which is called recursively to flatten the input hash. The `separator` attribute determines the character used for separating nested keys.

## Symbols
### `DottedHash`
#### Description
This class extends the Ruby `Hash` class and provides functionality to represent nested hash structures as a flat hash with dot-separated keys.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| hash | Hash | The input hash to be converted to a dotted hash. Defaults to an empty hash. |
| separator | String | The separator to use between keys. Defaults to '.' |

#### Outputs
A `DottedHash` instance representing the flattened hash.

#### Internal Logic
The `to_dotted_hash` method iterates through each key-value pair of the input hash. If the value is itself a hash, the method calls itself recursively with the key appended to the `recursive_key`. Otherwise, the value is assigned to the dotted key in the current `DottedHash` instance.

### `to_dotted_hash`
#### Description
This private method recursively flattens the input hash by concatenating nested keys with the specified separator.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| hash | Hash | The hash to be flattened. |
| recursive_key | String | The accumulated key string from previous recursive calls. |

#### Outputs
This method does not have an explicit return value. It modifies the `DottedHash` instance by adding key-value pairs.

#### Internal Logic
The method iterates through the input `hash`. For each key-value pair:
1. It constructs the `key` by concatenating the `recursive_key` with the current key.
2. If the `value` is a `Hash`, it recursively calls `to_dotted_hash` with the `value` and the updated `key`.
3. If the `value` is not a `Hash`, it assigns the `value` to the `key` in the `DottedHash` instance.
