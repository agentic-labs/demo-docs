---
title: "anrok_integration.rb"
---

## High-level description
The `AnrokIntegration` class represents an integration with Anrok, a tax automation platform. It extends the `BaseIntegration` class and adds specific attributes and relationships relevant to Anrok. This class is responsible for storing Anrok connection details and managing data related to tax errors.

## Code Structure
The `AnrokIntegration` class inherits from `BaseIntegration` and defines a `has_many` association with `ErrorDetail` records. It also defines validations and secrets accessors for Anrok-specific attributes.

## References
- `Integrations::BaseIntegration`: This class inherits from `BaseIntegration`, which provides common functionality for all integrations.
- `ErrorDetail`: This class represents details about errors, and `AnrokIntegration` has a `has_many` association with it, specifically for errors with the code 'tax_error'.

## Symbols

### `AnrokIntegration`
#### Description
This class represents an integration with Anrok and stores Anrok-specific connection details and manages tax error data.

#### Inputs
This class doesn't define any specific input parameters.

#### Outputs
This class doesn't define any specific output values.

#### Internal Logic
- It inherits from `BaseIntegration`, inheriting common integration attributes and behavior.
- It defines a `has_many` association with `ErrorDetail`, scoped to include only errors with the code 'tax_error'.
- It validates the presence of `connection_id` and `api_key`.
- It uses `secrets_accessors` to securely store and access `connection_id` and `api_key`.

## Side Effects
This class doesn't have any notable side effects.

## Dependencies
- `Integrations::BaseIntegration`: This class inherits from `BaseIntegration`.
- `ActiveRecord::Base`: This class inherits from `ActiveRecord::Base` to interact with the database.

## Error Handling
This class relies on ActiveRecord validations to handle errors related to data integrity.
