---
title: "base_mapping.rb"
---

## High-level description
The `BaseMapping` class represents a generic mapping between a resource in Lago and an external integration. It defines common attributes and relationships for all integration mappings.

## Code Structure
The `BaseMapping` class inherits from `ApplicationRecord` and includes the `PaperTrailTraceable` and `SettingsStorable` concerns. It belongs to an `integration` and a polymorphic `mappable`. It defines several settings accessors using the `settings_accessors` method from the `SettingsStorable` concern.

## References
- `IntegrationMappings::BaseMapping::MAPPABLE_TYPES`: A constant array defining the allowed mappable types.
- `Integrations::BaseIntegration`: The class representing a generic integration.
- `PaperTrailTraceable`: A concern for adding PaperTrail versioning to the model.
- `SettingsStorable`: A concern for storing settings as JSON in the `settings` column.

## Symbols

### `BaseMapping`
#### Description
The `BaseMapping` class is an abstract base class for all integration mappings. It defines common attributes and relationships for mapping Lago resources to external integrations.

#### Inputs
This class does not define any inputs.

#### Outputs
This class does not define any outputs.

#### Internal Logic
The class defines the following:
- `belongs_to :integration`: This sets up a relationship with the `Integrations::BaseIntegration` model, indicating that each mapping belongs to a specific integration.
- `belongs_to :mappable, polymorphic: true`: This sets up a polymorphic relationship with other models, allowing different types of Lago resources to be mapped.
- `MAPPABLE_TYPES`: A constant array defining the allowed mappable types.
- `settings_accessors :external_id, :external_account_code, :external_name`: This defines accessor methods for settings stored in the `settings` JSON column.

## Side Effects
This class does not have any significant side effects.

## Dependencies
- `ActiveRecord`: Provides the base class for database-backed models.
- `PaperTrailTraceable`: A concern for adding PaperTrail versioning.
- `SettingsStorable`: A concern for storing settings as JSON.

## Configuration
This class does not define any configuration options.

## Error Handling
This class does not implement specific error handling.

## Logging
This class does not implement logging.

## API/Interface Reference
This class does not expose an API.
