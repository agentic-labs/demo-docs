---
title: "wallet_transaction.rb"
---

## High-level description
The `WalletTransaction` model represents transactions associated with a customer's wallet in a billing system. It tracks various attributes of a transaction, including its status, type, and associated amounts, providing a comprehensive record of wallet-related financial activities.

## Code Structure
The `WalletTransaction` class inherits from `ApplicationRecord` and includes the `PaperTrailTraceable` module. It defines associations, enums, and scopes related to wallet transactions.

## References
- `Wallet` model
- `Invoice` model
- `PaperTrailTraceable` module

## Symbols

### `WalletTransaction` (class)
#### Description
Represents a transaction associated with a customer's wallet.

#### Associations
- `belongs_to :wallet`
- `belongs_to :invoice, optional: true`

#### Enums
- `status`: `:pending`, `:settled`
- `transaction_status`: `:purchased`, `:granted`, `:voided`, `:invoiced`
- `transaction_type`: `:inbound`, `:outbound`
- `source`: `:manual`, `:interval`, `:threshold`

#### Scopes
- `pending`: Returns pending transactions

#### Internal Logic
- Includes `PaperTrailTraceable` for version tracking
- Defines constants for various statuses and types
- Uses enums to define allowed values for status, transaction_status, transaction_type, and source

## Side Effects
- The `PaperTrailTraceable` module adds version tracking to the model, which may create additional database records when changes are made to a `WalletTransaction` instance.

## Schema Information
The schema information at the end of the file provides details about the database table structure, including column names, types, and indexes.

## Dependencies
- `PaperTrailTraceable` module

## Error Handling
No specific error handling is implemented in this model. Standard ActiveRecord validations and error handling would apply.

## Logging
No explicit logging is implemented in this model. However, the `PaperTrailTraceable` module may provide some level of change tracking.

## API/Interface Reference
This model doesn't define a public API but serves as an ActiveRecord model with standard CRUD operations available.