---
title: "base_customer.rb"
---

## High-level description
The `IntegrationCustomers::BaseCustomer` class represents a customer in the context of a specific integration. It acts as a base class for integration-specific customer models, providing common attributes and functionality.

## Code Structure
The `IntegrationCustomers::BaseCustomer` class inherits from `ApplicationRecord` and includes the `PaperTrailTraceable` and `SettingsStorable` concerns. It has a one-to-one relationship with `Customer` and `Integrations::BaseIntegration` models. The `customer_type` class method provides a mapping between integration types and their corresponding customer class names.

## References
- `ApplicationRecord`
- `PaperTrailTraceable`
- `SettingsStorable`
- `Customer`
- `Integrations::BaseIntegration`

## Symbols

### `IntegrationCustomers::BaseCustomer`
#### Description
This class represents a customer in the context of a specific integration. It stores integration-specific customer data and provides methods for managing customer synchronization.

#### Inputs
This class doesn't have any explicit input parameters.

#### Outputs
This class doesn't have any explicit output parameters.

#### Internal Logic
The class defines several scopes and validations:
- `accounting_kind`: This scope returns integration customers of type `IntegrationCustomers::NetsuiteCustomer` and `IntegrationCustomers::XeroCustomer`.
- `customer_id`: This attribute is validated to be unique within the scope of the `type` attribute.

The class also defines a `customer_type` class method that maps integration types to their corresponding customer class names.

## Side Effects
This class interacts with the database to persist integration customer data.

## Dependencies
- `rails`
- `paper_trail`

### Configuration
This class uses the `settings_accessors` method from the `SettingsStorable` concern to define accessors for the `sync_with_provider` setting, which is stored in the `settings` JSONB column.
