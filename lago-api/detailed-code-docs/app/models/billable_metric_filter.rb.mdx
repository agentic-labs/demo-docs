---
title: "billable_metric_filter.rb"
---

## High-level description
The `BillableMetricFilter` model represents a filter that can be applied to a billable metric. It defines a key (representing the filter name) and an array of possible values that can be used to filter charges associated with the billable metric.

## Code Structure
The `BillableMetricFilter` model has a `belongs_to` association with the `BillableMetric` model and `has_many` associations with the `ChargeFilterValue` and `ChargeFilter` models through the `filter_values` association. It also includes the `PaperTrailTraceable` and `Discard::Model` concerns.

## References
- `BillableMetric`
- `ChargeFilterValue`
- `ChargeFilter`
- `PaperTrailTraceable`
- `Discard::Model`

## Symbols

### `BillableMetricFilter`
#### Description
This class represents a filter that can be applied to a billable metric. It defines a key and an array of possible values for filtering charges.

#### Inputs
This class does not define any specific input parameters.

#### Outputs
This class does not define any specific output values.

#### Internal Logic
- It includes the `PaperTrailTraceable` concern for tracking changes to the model.
- It includes the `Discard::Model` concern for soft deleting records.
- It defines validations for the presence of `key` and `values` attributes.
- It sets a default scope to only include records that have not been soft deleted.

## Side Effects
This class does not have any notable side effects.

## Dependencies
- `ActiveRecord::Base`
- `PaperTrail`
- `Discard`

### Configuration
This class does not define any configuration options.

## Error Handling
This class uses ActiveRecord validations for error handling.

## Logging
This class does not implement any specific logging mechanisms.
