---
title: "recurring_transaction_rule.rb"
---

## High-level description
The `RecurringTransactionRule` class represents a rule for automatically creating recurring transactions for a wallet. It defines various attributes like `interval`, `method`, `trigger`, `paid_credits`, `granted_credits`, etc., to control the behavior of recurring transactions.

## Code Structure
The `RecurringTransactionRule` class uses Ruby's `enum` feature to define its attributes `interval`, `method`, and `trigger`. It also defines constants `INTERVALS`, `METHODS`, and `TRIGGERS` to hold the possible values for these enums. The class itself is an `ApplicationRecord`, meaning it inherits from ActiveRecord and represents a table in the database.

## References
- `ApplicationRecord`: The `RecurringTransactionRule` class inherits from `ApplicationRecord`.
- `Wallet`: The `RecurringTransactionRule` class belongs to the `Wallet` model.
- `PaperTrailTraceable`: The `RecurringTransactionRule` class includes the `PaperTrailTraceable` concern.

## Symbols

### `RecurringTransactionRule`
#### Description
This class represents a rule for automatically creating recurring transactions for a wallet. It defines the structure and behavior of these rules.

#### Inputs
This class doesn't have explicit input parameters. However, it's initialized with attributes when creating a new instance or fetching from the database. These attributes are defined in the schema section.

#### Outputs
This class doesn't have explicit output parameters. However, its attributes can be accessed and used by other parts of the application.

#### Internal Logic
The class uses Ruby's `enum` feature to define its attributes `interval`, `method`, and `trigger`. This allows for type-safe usage of these attributes and provides convenient methods for working with them.

## Side Effects
This class doesn't have any direct side effects. However, creating or updating instances of this class will modify the corresponding database table.

## Dependencies
- `ActiveRecord`: This class inherits from `ActiveRecord` for database interaction.
- `PaperTrailTraceable`: This concern adds PaperTrail functionality for tracking changes to the model.

### `INTERVALS`
#### Description
A constant array defining the possible intervals for recurring transactions.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
The constant is defined as a frozen array of symbols, ensuring its immutability.

### `METHODS`
#### Description
A constant array defining the possible methods for calculating recurring transactions.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
The constant is defined as a frozen array of symbols, ensuring its immutability.

### `TRIGGERS`
#### Description
A constant array defining the possible triggers for initiating recurring transactions.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
The constant is defined as a frozen array of symbols, ensuring its immutability.
