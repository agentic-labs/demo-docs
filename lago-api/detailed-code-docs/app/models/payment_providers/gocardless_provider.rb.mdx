---
title: "gocardless_provider.rb"
---

## High-level description
The `GocardlessProvider` class, under the `PaymentProviders` module, represents a GoCardless payment provider within the Lago application. It handles GoCardless-specific logic, including authentication, environment settings, and validation of provider-specific attributes.

## Code Structure
The `GocardlessProvider` class inherits from `BaseProvider` and defines constants, validations, and methods related to GoCardless. It utilizes the `secrets_accessors` macro to securely store and access sensitive information like the access token.

## References
- `PaymentProviders::BaseProvider`: The parent class providing shared functionality for all payment providers.
- `Rails.env`: Used to determine the current environment (production or otherwise) and configure the GoCardless environment accordingly.

## Symbols

### `GocardlessProvider`
#### Description
This class represents a GoCardless payment provider and inherits from `BaseProvider`. It defines constants, validations, and methods specific to GoCardless.

#### Inputs
This class does not have explicit inputs.

#### Outputs
This class does not have explicit outputs.

#### Internal Logic
- **`SUCCESS_REDIRECT_URL`**: A constant defining the default success redirect URL for GoCardless.
- **`validates`**: Defines validations for the `access_token` and `success_redirect_url` attributes.
- **`secrets_accessors :access_token`**: Defines methods to securely store and access the `access_token` attribute.
- **`auth_site`**: A class method that returns the appropriate GoCardless authentication site URL based on the Rails environment.
- **`environment`**: An instance method that returns the GoCardless environment (:live or :sandbox) based on the Rails environment.

## Side Effects
This class does not have any notable side effects.

## Dependencies
- `Rails`: Used to access environment information.
- `GoCardlessPro`: Used for interacting with the GoCardless API.

## Configuration
This class does not define any explicit configuration options.

## Error Handling
This class relies on ActiveRecord validations to handle errors related to attribute values.

## Logging
This class does not implement any specific logging mechanisms.

## API/Interface Reference
This class does not expose any API endpoints.
