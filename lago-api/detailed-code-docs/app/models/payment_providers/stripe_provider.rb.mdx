---
title: "stripe_provider.rb"
---

## High-level description
The `StripeProvider` class represents a Stripe payment provider within the Lago application. It inherits from the `BaseProvider` class and defines specific attributes and validations for Stripe.

## Code Structure
The `StripeProvider` class inherits from `BaseProvider` and defines constants for success redirect URL and webhook events. It also defines validations for its attributes and uses `settings_accessors` and `secrets_accessors` for managing settings and secrets.

## References
- `PaymentProviders::BaseProvider`: The parent class providing shared functionality for payment providers.

## Symbols

### `StripeProvider`
#### Description
This class represents a Stripe payment provider and inherits from `BaseProvider`. It defines constants for the success redirect URL and webhook events specific to Stripe. It also defines validations for the `secret_key` and `success_redirect_url` attributes.

#### Inputs
This class does not have explicit inputs.

#### Outputs
This class does not have explicit outputs.

#### Internal Logic
- **`SUCCESS_REDIRECT_URL`**: A constant defining the default redirect URL after a successful Stripe payment.
- **`WEBHOOKS_EVENTS`**: A constant array listing the Stripe webhook events that the application listens to.
- **Validations**:
    - `validates :secret_key, presence: true`: Ensures the `secret_key` attribute is present.
    - `validates :success_redirect_url, url: true, allow_nil: true, length: { maximum: 1024 }`: Ensures the `success_redirect_url` is a valid URL, allows it to be nil, and limits its length to 1024 characters.
- **`settings_accessors :webhook_id`**: Defines an accessor for the `webhook_id` setting.
- **`secrets_accessors :secret_key`**: Defines an accessor for the `secret_key` secret.

## Side Effects
This class does not have any notable side effects.

## Dependencies
- This class inherits from `PaymentProviders::BaseProvider`.

## Configuration
This class does not define any specific configuration options.

## Error Handling
This class relies on Active Record validations for error handling.

## Logging
This class does not implement any specific logging mechanisms.

## API/Interface Reference
This class does not expose any API endpoints.
