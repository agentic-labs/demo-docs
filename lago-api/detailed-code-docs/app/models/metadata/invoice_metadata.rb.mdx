---
title: "invoice_metadata.rb"
---

## High-level description
The `InvoiceMetadata` class represents arbitrary key-value metadata associated with an invoice. It allows storing up to 5 key-value pairs per invoice.

## Code Structure
The `InvoiceMetadata` class is a simple Active Record model that belongs to an `Invoice`. It has validations on the `key` and `value` attributes.

## References
- `Invoice`: The `InvoiceMetadata` belongs to an `Invoice` object.

## Symbols
### `InvoiceMetadata`
#### Description
This class represents a key-value pair of metadata associated with an invoice.

#### Inputs
N/A - This is a database model, it doesn't have explicit inputs.

#### Outputs
N/A - This is a database model, it doesn't have explicit outputs.

#### Internal Logic
The class uses Active Record validations to ensure:
- `key` is present, unique within an invoice, and has a maximum length of 20 characters.
- `value` is present.

## Side Effects
N/A

#### Performance Considerations
N/A

## Dependencies
- `ActiveRecord`: Provides the ORM framework for database interaction.

## Configuration
- `COUNT_PER_INVOICE`: A constant defining the maximum number of metadata entries allowed per invoice (5).

## Error Handling
Standard ActiveRecord validations are used to handle invalid data.

## Logging
N/A

## API/Interface Reference
N/A
