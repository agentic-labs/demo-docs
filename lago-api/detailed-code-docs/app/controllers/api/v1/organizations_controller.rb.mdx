---
title: "organizations_controller.rb"
---

## High-level description
This code defines the `OrganizationsController` within the `Api::V1` namespace, which handles API requests related to organizations. It provides endpoints for showing organization details, updating organization information, and generating a gRPC token for authentication.

## Code Structure
The `OrganizationsController` inherits from `Api::BaseController` and contains three main actions: `show`, `update`, and `grpc_token`. It also includes a private method `input_params` for parameter validation and filtering.

## References
- `Api::BaseController`
- `::V1::OrganizationSerializer`
- `Organizations::UpdateService`
- `JWT`
- `RsaPrivateKey`

## Symbols

### `OrganizationsController`
#### Description
This controller manages API endpoints for organization-related operations.

#### Internal Logic
1. `show`: Renders the organization details using the `V1::OrganizationSerializer`.
2. `update`: Uses the `Organizations::UpdateService` to update the organization and renders the updated details or error response.
3. `grpc_token`: Generates a JWT token for gRPC authentication.

### `show`
#### Description
Renders the current organization's details.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| json | JSON | Serialized organization details |

### `update`
#### Description
Updates the current organization with provided parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| input_params | Hash | Permitted parameters for updating the organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| json | JSON | Serialized updated organization details or error response |

### `grpc_token`
#### Description
Generates a JWT token for gRPC authentication.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| json | JSON | Object containing the generated gRPC token |

### `input_params` (private)
#### Description
Defines and filters permitted parameters for organization updates.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ActionController::Parameters | Object | Filtered parameters for organization update |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| JWT | Used for encoding the gRPC token |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| RsaPrivateKey | OpenSSL::PKey::RSA | Configured in initializer | Used for signing the JWT token |

## Error Handling
The controller uses the `render_error_response` method (likely defined in a parent controller) to handle and render error responses when the update operation fails.