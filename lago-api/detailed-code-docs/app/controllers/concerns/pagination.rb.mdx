---
title: "pagination.rb"
---

## High-level description
The `Pagination` module is a Ruby concern that provides pagination functionality for Rails controllers. It defines a constant for the number of items per page and a method to generate pagination metadata for a collection of records.

## Code Structure
The `Pagination` module is defined as an `ActiveSupport::Concern`, which allows it to be easily included in Rails controllers. It contains a private constant `PER_PAGE` and a private method `pagination_metadata`.

## References
This module is referenced in the `Api::BaseController` class, which includes the `Pagination` module.

## Symbols

### `Pagination`
#### Description
A module that encapsulates pagination-related functionality, designed to be included in Rails controllers.

#### Internal Logic
- Extends `ActiveSupport::Concern` to make it easily includable in Rails controllers.
- Defines a private constant `PER_PAGE` set to 100, which can be used to limit the number of records per page.
- Provides a private method `pagination_metadata` to generate pagination information for a collection of records.

### `PER_PAGE`
#### Description
A private constant that defines the number of items to be displayed per page.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| PER_PAGE | Integer | The number of items per page, set to 100 |

### `pagination_metadata`
#### Description
A private method that generates a hash containing pagination metadata for a given collection of records.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| records | ActiveRecord::Relation | A collection of database records |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Hash | Hash | A hash containing pagination metadata |

#### Internal Logic
1. Checks if the `records` collection is present (not empty).
2. If records are present:
   - Retrieves pagination information from the `records` object, including current page, next page, previous page, total pages, and total count.
3. If records are not present:
   - Returns a hash with default values indicating an empty result set.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveSupport::Concern | Provides a way to create modules that can be easily included in Rails classes with proper method and constant inheritance |

## API/Interface Reference
While not an API endpoint itself, this module provides a method that can be used in API controllers to include pagination metadata in responses:

| Method | Input | Output | Description |
|:-------|:------|:-------|:------------|
| pagination_metadata | ActiveRecord::Relation | Hash | Generates pagination metadata for a collection of records |

The output hash contains the following keys:
- `current_page`: The current page number
- `next_page`: The next page number (or nil if there is no next page)
- `prev_page`: The previous page number (or nil if there is no previous page)
- `total_pages`: The total number of pages
- `total_count`: The total number of records

This pagination metadata can be included in API responses to help clients navigate through paginated results.