---
title: "Overview"
---

## High-level description
The `app` directory contains the core components of a Ruby on Rails application, including models, controllers, views, jobs, mailers, and various other modules that implement the application's business logic, data management, and user interface. This directory forms the heart of the application, encompassing all the custom code that defines its functionality and behavior.

## What does it do?
The `app` directory serves multiple crucial functions:

1. Data Management: Models in `app/models` define the structure and relationships of the application's data.
2. Request Handling: Controllers in `app/controllers` process incoming HTTP requests and coordinate responses.
3. User Interface: Views in `app/views` generate the HTML output sent to users' browsers.
4. Background Processing: Jobs in `app/jobs` handle asynchronous tasks and long-running processes.
5. Email Communication: Mailers in `app/mailers` manage email generation and sending.
6. Business Logic: Services in `app/services` encapsulate complex business processes and calculations.
7. API Interfaces: GraphQL components in `app/graphql` define the structure and resolvers for the GraphQL API.
8. Data Serialization: Serializers in `app/serializers` format data for API responses.
9. Input Validation: Validators in `app/validators` ensure data integrity and consistency.
10. Helper Functions: Various helper modules provide utility functions for views and other components.

Together, these components create a comprehensive system for managing a SaaS application, handling everything from user authentication and billing to complex data processing and API interactions.

## Entry points
The main entry points for the application are:

1. `app/controllers/application_controller.rb`: The base controller from which all other controllers inherit.
2. `app/models/application_record.rb`: The base model class for ActiveRecord models.
3. `app/graphql/lago_api_schema.rb`: The main schema definition for the GraphQL API.
4. `app/jobs/application_job.rb`: The base job class for background processing.
5. `app/mailers/application_mailer.rb`: The base mailer class for email handling.

These files serve as the foundation for their respective components, defining shared behavior and configurations.

## Key Files
1. `app/controllers/api/v1/base_controller.rb`: Handles API authentication and common API functionality.
2. `app/models/customer.rb`: Defines the core Customer model and its associations.
3. `app/services/invoices/create_service.rb`: Manages the complex process of invoice creation.
4. `app/graphql/types/query_type.rb`: Defines the available GraphQL queries.
5. `app/jobs/bill_subscription_job.rb`: Handles the asynchronous billing process for subscriptions.
6. `app/serializers/v1/invoice_serializer.rb`: Formats invoice data for API responses.

## Dependencies
The application relies on several key dependencies:

1. Ruby on Rails: The web application framework
2. ActiveRecord: ORM for database interactions
3. GraphQL: For implementing the GraphQL API
4. Sidekiq: For background job processing
5. JWT: For API authentication
6. Money-Rails: For handling currency and monetary calculations
7. PaperTrail: For model versioning and auditing

## Configuration
While specific configuration files are not present in the `app` directory, the application's behavior is influenced by various configuration elements:

1. Environment variables: Used for sensitive information and environment-specific settings.
2. Initializers: Located in `config/initializers`, they set up various gems and application-wide settings.
3. Database configuration: Defined in `config/database.yml`.
4. Routes: Configured in `config/routes.rb`.
5. Locales: Internationalization files in `config/locales`.

The `app` directory forms the core of a sophisticated SaaS application, providing a comprehensive set of components for managing subscriptions, billing, customer data, and API interactions. The modular structure and separation of concerns allow for maintainability and scalability as the application grows and evolves.