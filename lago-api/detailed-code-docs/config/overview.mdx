---
title: "Overview"
---

## High-level description
This `config` directory contains configuration files for a Ruby on Rails application, specifically for the LagoApi project. It includes settings for the application, database connections, environment-specific configurations, internationalization, and various initializers for different components of the system.

## What does it do?
The configuration files in this directory serve several key purposes:

1. Define the application's core settings and behavior (application.rb, boot.rb, environment.rb)
2. Configure database connections for different environments (database.yml)
3. Set up environment-specific settings for development, test, production, and staging (environments directory)
4. Manage internationalization and localization (i18n-tasks.yml, locales directory)
5. Initialize and configure various components and services used by the application (initializers directory)
6. Set up routing for the API and admin interfaces (routes.rb)
7. Configure background job processing with Sidekiq (sidekiq.yml, sidekiq_events.yml, sidekiq_pdfs.yml)
8. Manage file storage settings for different environments (storage.yml)
9. Track version history and associated database migrations (versions.yml)

These configurations work together to set up a robust environment for the LagoApi application, ensuring proper functionality, security, and scalability across different deployment scenarios.

## Entry points
The main entry points for the configuration are:

1. `application.rb`: Sets up the core Rails application configuration.
2. `environment.rb`: Loads the Rails application and initializes it.
3. `routes.rb`: Defines the routing structure for the API and admin interfaces.
4. `database.yml`: Configures database connections for different environments.
5. `environments` directory: Contains environment-specific configurations.

## Key Files

1. `application.rb`: Configures the Rails application, including autoloading, API mode, job queues, encryption, and internationalization.

2. `database.yml`: Sets up database connections for PostgreSQL and ClickHouse across different environments.

3. `routes.rb`: Defines API endpoints, admin routes, and mounts external services like Sidekiq and Karafka.

4. `environments/production.rb`, `environments/development.rb`, `environments/test.rb`, `environments/staging.rb`: Configure environment-specific settings for caching, logging, SSL, and external services.

5. `initializers/` directory: Contains various initialization scripts for components like Sidekiq, Sentry, GraphQL, and OpenTelemetry.

6. `locales/` directory: Stores translation files for multiple languages, supporting the application's internationalization.

7. `storage.yml`: Configures file storage options for different environments, including local disk, Amazon S3, and Google Cloud Storage.

## Dependencies
The configuration files indicate the use of several external libraries and services:

1. PostgreSQL and ClickHouse for databases
2. Sidekiq for background job processing
3. Redis for caching and Sidekiq backend
4. AWS S3 and Google Cloud Storage for file storage
5. Sentry for error tracking
6. OpenTelemetry for distributed tracing
7. GraphQL for API functionality
8. Various Rails-specific gems for features like internationalization and encryption

## Configuration
The configuration files make extensive use of environment variables to allow flexible deployment across different environments. Key configuration areas include:

1. Database connections and pools
2. Caching strategies (Redis, Memcached)
3. Job processing with Sidekiq
4. File storage (local, S3, GCS)
5. API and admin routing
6. Internationalization and localization
7. Error tracking and monitoring
8. SSL and security settings

These configurations allow the application to be easily adapted to different deployment scenarios while maintaining security, scalability, and functionality.