---
title: "enable_yjit.rb"
---

## High-level description
This code initializes and enables YJIT (Yet Another Just-In-Time Compiler) for a Ruby on Rails application if specific conditions are met. It's designed to improve the performance of the application by enabling YJIT, which is a feature introduced in Ruby 3.1 to enhance runtime execution speed.

## Symbols

### Rails.application.config.after_initialize
#### Description
This method is used to register a block of code that will be executed after the Rails application is fully initialized. In this case, it's used to enable YJIT at the appropriate time in the application's lifecycle.

#### Internal Logic
The block passed to `after_initialize` contains the code to enable YJIT using `RubyVM::YJIT.enable`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Rails | The Ruby on Rails framework, which provides the `config.after_initialize` method |
| RubyVM::YJIT | Ruby's YJIT module, used to enable the Just-In-Time compiler |

### Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| LAGO_ENABLE_YJIT | Environment Variable | Not set | When set to 'true', enables YJIT for the application |

## Error Handling
This code includes an implicit error handling mechanism by checking if `RubyVM::YJIT.enable` is defined before attempting to use it. This prevents errors in environments where YJIT is not available.

## Performance Considerations
Enabling YJIT can significantly improve the performance of Ruby applications by compiling frequently executed code paths to machine code. However, it may increase memory usage and initial startup time.

## TODOs
There are no explicit TODOs in this code.