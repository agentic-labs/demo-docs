---
title: "version.rb"
---

## High-level description
This code initializes a global constant `LAGO_VERSION` by calling the `LagoUtils::Version.call` method with the default value set to the current Rails environment. It's used to determine and store the version information of the Lago application.

## Symbols

### `LAGO_VERSION`
#### Description
`LAGO_VERSION` is a global constant that stores the version information of the Lago application. It's initialized by calling the `LagoUtils::Version.call` method.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| default | String | The default value for the version, set to `Rails.env` |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| LAGO_VERSION | OpenStruct | An object containing version information |

#### Internal Logic
The `LagoUtils::Version.call` method is invoked with the current Rails environment as the default value. This method returns an OpenStruct object containing version information, including the version number and a GitHub URL.

## References
- `LagoUtils::Version`: This class is defined in `lib/lago_utils/lago_utils/version.rb` and contains the logic for determining the version information.
- The `LAGO_VERSION` constant is used in other parts of the application, such as `app/jobs/segment_track_job.rb` and `app/jobs/segment_identify_job.rb`, to include version information in analytics tracking.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Rails | Used to access the current environment (`Rails.env`) |
| LagoUtils::Version | Provides the version determination logic |

## Notes
1. The version information is determined based on the content of a `LAGO_VERSION` file in the project root.
2. If the file contains a git hash (40 characters), the version is set to the file's creation date.
3. If the file is not found or there's an error reading it, the default value (Rails environment) is used.
4. The version information includes both a version number and a GitHub URL pointing to the specific version or commit.

This initialization is crucial for tracking the application version across different parts of the system, particularly in analytics and error reporting.