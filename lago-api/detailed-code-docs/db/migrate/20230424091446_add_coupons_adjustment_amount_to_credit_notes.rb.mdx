---
title: "20230424091446_add_coupons_adjustment_amount_to_credit_notes.rb"
---

## High-level description
This migration adds a new column `coupons_adjustment_amount_cents` to the `credit_notes` table in the database. The column is designed to store the amount of coupon adjustments in cents for credit notes.

## Symbols

### `AddCouponsAdjustmentAmountToCreditNotes`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It adds a new column to the `credit_notes` table.

#### Internal Logic
The migration uses the `add_column` method to add a new column to the `credit_notes` table with the following specifications:
- Column name: `coupons_adjustment_amount_cents`
- Data type: `bigint` (big integer)
- Constraints: `null: false` (not nullable) and `default: 0` (default value is 0)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for defining database schema changes |

## Configuration
The migration is configured to work with Rails version 7.0, as indicated by `ActiveRecord::Migration[7.0]`.

## Side Effects
When this migration is run, it will modify the database schema by adding the new column `coupons_adjustment_amount_cents` to the `credit_notes` table. This change is permanent and will affect the structure of the `credit_notes` table.

## Performance Considerations
Using `bigint` as the data type ensures that the column can store large integer values, which is suitable for monetary amounts in cents. This choice allows for a wide range of values without the risk of overflow.

The `null: false` and `default: 0` constraints ensure data integrity by preventing null values and providing a default value, which can help maintain consistency in the database and potentially improve query performance.