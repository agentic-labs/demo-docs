---
title: "20220801101144_add_consumed_amount_to_wallets.rb"
---

## High-level description
This migration file adds a new column called `consumed_amount` to the `wallets` table in the database. The column is designed to store decimal values with a default of 0 and a precision of 5 digits.

## Symbols

### `AddConsumedAmountToWallets`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0 migration standards.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. Inside this method, it calls `add_column` to add a new column to the `wallets` table.

### `change`
#### Description
This method defines the changes to be applied (and potentially reversed) by the migration.

#### Internal Logic
The method uses `add_column` to add a new column with the following specifications:
- Table: `:wallets`
- Column name: `:consumed_amount`
- Data type: `:decimal`
- Default value: `0`
- Precision: `5`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework and database interaction capabilities |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| precision | integer | 5 | Specifies the total number of digits for the decimal column |

## Notes
1. The migration is marked as `# frozen_string_literal: true`, which is a Ruby optimization that prevents the file from modifying string literals.
2. The precision of 5 means the column can store up to 5 total digits, including both before and after the decimal point.
3. This migration is reversible by default, meaning Rails can automatically generate the code to undo this change if needed.
4. The file name includes a timestamp (20220801101144) which helps maintain the order of migrations.