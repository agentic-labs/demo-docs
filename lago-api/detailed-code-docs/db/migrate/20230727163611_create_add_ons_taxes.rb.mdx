---
title: "20230727163611_create_add_ons_taxes.rb"
---

## High-level description
This migration file creates a join table `add_ons_taxes` in the database to establish a many-to-many relationship between add-ons and taxes. It sets up the necessary foreign key references and indexes for efficient querying.

## Symbols

### `CreateAddOnsTaxes`
#### Description
This class is an ActiveRecord migration that defines the structure for the `add_ons_taxes` table. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0.

#### Internal Logic
The migration uses the `change` method to define the table creation:

1. Creates a new table named `add_ons_taxes` with UUID as the primary key type.
2. Adds two foreign key columns: `add_on_id` and `tax_id`, both of type UUID and non-nullable.
3. Sets up foreign key constraints for both columns.
4. Creates indexes on both foreign key columns for improved query performance.
5. Adds timestamp columns (`created_at` and `updated_at`) automatically.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework and database abstraction |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| id | symbol | :uuid | Sets the primary key type to UUID |

## Performance Considerations
The migration creates indexes on both foreign key columns (`add_on_id` and `tax_id`), which can significantly improve query performance when joining or filtering based on these columns.