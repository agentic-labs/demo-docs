---
title: "20230127140904_add_pending_deletion_to_plans.rb"
---

## High-level description
This migration adds a `pending_deletion` boolean column to the `plans` table in the database. The column is set to be non-nullable with a default value of `false`.

## Symbols

### `AddPendingDeletionToPlans`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It adds a new column to the `plans` table.

#### Internal Logic
The migration uses the `add_column` method to add the `pending_deletion` column to the `plans` table with the following specifications:
- Column name: `pending_deletion`
- Data type: `boolean`
- Constraints: `null: false` (not nullable)
- Default value: `false`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for defining database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| version | Float | 7.0 | Specifies the version of ActiveRecord migrations being used |

## Side Effects
This migration will modify the database schema by adding a new column to the `plans` table. When run, it will alter the table structure, which may briefly lock the table during the operation.

## Performance Considerations
Adding a column with a default value to an existing table can be a fast operation in most databases, as it doesn't require updating existing rows. However, the performance impact may vary depending on the size of the `plans` table and the specific database system being used.

---

This migration is part of a larger application that deals with plans, possibly in a subscription or product management context. The addition of the `pending_deletion` column suggests that the application is implementing a soft delete feature or a way to mark plans for future deletion without immediately removing them from the database.