---
title: "20240816075711_add_negative_amount_cents_to_invoice.rb"
---

## High-level description
This migration adds a new column called `negative_amount_cents` to the `invoices` table in the database. The column is designed to store large integer values representing negative amounts in cents, with a default value of 0 and a not-null constraint.

## Symbols

### `AddNegativeAmountCentsToInvoice`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.1]`, indicating it's compatible with Rails 7.1 migration framework.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column to the `invoices` table with the following specifications:
- Column name: `negative_amount_cents`
- Data type: `bigint` (big integer)
- Constraints: 
  - `null: false` (the column cannot contain null values)
  - `default: 0` (if no value is specified, it defaults to 0)

The use of `bigint` suggests that this column is intended to store large integer values, which is appropriate for financial amounts represented in cents.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework for database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| negative_amount_cents | bigint | 0 | Stores negative amount values in cents for invoices |

## Error Handling
This migration does not implement any specific error handling. If the migration fails, ActiveRecord will raise an exception and roll back any changes made during the migration process.

Note: The `# frozen_string_literal: true` comment at the top of the file is a Ruby directive that helps improve performance by preventing the modification of string literals within the file.