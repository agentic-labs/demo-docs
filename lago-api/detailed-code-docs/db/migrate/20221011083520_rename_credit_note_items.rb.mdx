---
title: "20221011083520_rename_credit_note_items.rb"
---

## High-level description
This migration renames two columns in the `credit_note_items` table. It changes `amount_cents` to `credit_amount_cents` and `amount_currency` to `credit_amount_currency`. The migration is designed to be run safely within a Rails 7.0 application.

## Symbols

### `RenameCreditNoteItems`
#### Description
This class is an ActiveRecord migration that inherits from `ActiveRecord::Migration[7.0]`. It defines the changes to be applied to the database schema, specifically renaming columns in the `credit_note_items` table.

#### Internal Logic
The migration uses the `change` method to define reversible database changes. Inside this method, it employs the `safety_assured` block to bypass certain safety checks, allowing the renaming of columns.

Two `rename_column` operations are performed:
1. Renames `amount_cents` to `credit_amount_cents`
2. Renames `amount_currency` to `credit_amount_currency`

Both operations are performed on the `credit_note_items` table.

## Side Effects
This migration will modify the schema of the `credit_note_items` table, changing the names of two columns. This could potentially affect any code or queries that rely on the old column names.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework and database interaction capabilities |

## Error Handling
The migration uses `safety_assured` to bypass certain safety checks. This should be used with caution, as it may override important safeguards put in place by the Strong Migrations gem or similar tools.

## TODOs
There are no explicit TODOs in this code.

Note: The use of `safety_assured` suggests that this migration might be potentially dangerous or violate some safety checks. It's important to ensure that this renaming operation is indeed safe and won't cause issues with existing data or application functionality.