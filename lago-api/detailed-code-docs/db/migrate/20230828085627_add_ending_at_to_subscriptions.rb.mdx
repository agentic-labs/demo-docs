---
title: "20230828085627_add_ending_at_to_subscriptions.rb"
---

## High-level description
This migration adds an `ending_at` column to the `subscriptions` table in the database. The new column is of type `datetime` and allows null values, potentially used to track when a subscription ends or expires.

## Symbols

### `AddEndingAtToSubscriptions`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0 migration framework.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column named `ending_at` to the `subscriptions` table using the `add_column` method.

### `change`
#### Description
This method defines the changes to be applied to the database schema when the migration is run.

#### Internal Logic
1. Calls `add_column` method to add a new column to the `subscriptions` table.
2. Specifies the following parameters for the new column:
   - Table name: `:subscriptions`
   - Column name: `:ending_at`
   - Data type: `:datetime`
   - Constraint: `null: true` (allows null values)

## Dependencies
This migration relies on the ActiveRecord framework, which is part of Ruby on Rails.

## Configuration
The migration is timestamped (20230828085627), which determines the order in which it will be run relative to other migrations.

## Notes
1. This migration is reversible by default. Rails can automatically figure out how to undo the `add_column` operation if needed.
2. The `# frozen_string_literal: true` comment at the top of the file is a Ruby optimization that prevents the creation of new string objects for string literals in this file.
3. The `ending_at` column allows null values, which means subscriptions are not required to have an end date set.