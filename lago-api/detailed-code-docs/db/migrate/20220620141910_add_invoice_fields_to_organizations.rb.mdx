---
title: "20220620141910_add_invoice_fields_to_organizations.rb"
---

## High-level description
This migration adds various invoice-related fields to the `organizations` table in a Ruby on Rails application. It extends the organization model with additional attributes necessary for generating invoices, such as address details, legal information, and customization options.

## Symbols

### `AddInvoiceFieldsToOrganizations`
#### Description
This class is a Rails migration that adds multiple columns to the `organizations` table. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0.

#### Internal Logic
The migration uses the `change` method to define the changes to be applied to the database schema. It employs the `safety_assured` block and `change_table` method with the `bulk: true` option for efficient schema modification.

The following columns are added to the `organizations` table:
- `country`: string
- `address_line1`: string
- `address_line2`: string
- `state`: string
- `zipcode`: string
- `email`: string
- `city`: string
- `logo`: string
- `legal_name`: string
- `legal_number`: string
- `invoice_footer`: text

#### Performance Considerations
The use of `bulk: true` in the `change_table` method optimizes the migration by combining multiple column additions into a single ALTER TABLE statement, which can improve performance, especially for larger tables.

## Side Effects
This migration will modify the `organizations` table schema in the database, adding the specified columns. Existing rows in the table will have these new columns with NULL values unless default values are specified (which is not the case in this migration).

## Dependencies
This migration relies on the `ActiveRecord::Migration` class from the Ruby on Rails framework.

## Error Handling
The `safety_assured` block is used, which is likely from the `strong_migrations` gem. This indicates that the migration has been reviewed and deemed safe to run, bypassing certain safety checks that the gem might otherwise enforce.

## TODOs
There are no explicit TODOs in this migration file.