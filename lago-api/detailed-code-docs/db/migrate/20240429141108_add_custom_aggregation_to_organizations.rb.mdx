---
title: "20240429141108_add_custom_aggregation_to_organizations.rb"
---

## High-level description
This migration file adds a new boolean column `custom_aggregation` to the `organizations` table with a default value of `false`. It also defines an attribute `regroup_paid_fees` for the `Charge` class.

## Code Structure
The code consists of two main parts:
1. A modification to the `Charge` class, adding a new attribute.
2. A database migration class `AddCustomAggregationToOrganizations` that adds a new column to the `organizations` table.

## Symbols

### `Charge`
#### Description
This class represents a charge in the system. The code snippet adds a new attribute to the existing `Charge` class.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| regroup_paid_fees | integer | An attribute to store information about regrouping paid fees |

### `AddCustomAggregationToOrganizations`
#### Description
This is a Rails migration class that adds a new boolean column to the `organizations` table.

#### Internal Logic
The migration uses the `change` method to define the changes to be made to the database schema. It adds a new column named `custom_aggregation` of type boolean to the `organizations` table, with a default value of `false`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for modifying the database schema |

## References
This migration file references the `organizations` table, which is not shown in the provided code snippets but is assumed to exist in the database schema.

The `Charge` class modification is related to the `app/models/charge.rb` file provided in the related code snippets. The addition of the `regroup_paid_fees` attribute aligns with the `REGROUPING_PAID_FEES_OPTIONS` and the corresponding enum definition in the `Charge` model.

## Side Effects
- This migration will modify the database schema by adding a new column to the `organizations` table.
- The `Charge` class will now have a new attribute `regroup_paid_fees`, which can be used to store and retrieve values related to regrouping paid fees.

## Performance Considerations
Adding a new column to an existing table can be a potentially slow operation on large tables. However, since this is adding a boolean column with a default value, it should be relatively quick in most cases.