---
title: "20240424124802_add_depleted_ongoing_balance_to_wallets.rb"
---

## High-level description
This migration adds a new boolean column called `depleted_ongoing_balance` to the `wallets` table in the database. The column is set to be non-nullable with a default value of `false`.

## Symbols

### `AddDepletedOngoingBalanceToWallets`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0 migration framework.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column to the `wallets` table using the `add_column` method.

### `change`
#### Description
This method specifies the changes to be made to the database schema. In this case, it adds a new column to the `wallets` table.

#### Internal Logic
The method calls `add_column` with the following parameters:
- `:wallets`: The name of the table to modify
- `:depleted_ongoing_balance`: The name of the new column
- `:boolean`: The data type of the new column
- `null: false`: Specifies that the column cannot contain null values
- `default: false`: Sets the default value for the column to `false`

## Dependencies
This migration relies on the ActiveRecord migration framework, which is part of the Ruby on Rails ecosystem.

## Configuration
The migration is configured to work with ActiveRecord version 7.0, as indicated by `ActiveRecord::Migration[7.0]`.

## Error Handling
No explicit error handling is implemented in this migration. ActiveRecord will handle any database-related errors that may occur during the migration process.

## Notes
1. This migration will automatically create a reverse migration (for rolling back) that removes the `depleted_ongoing_balance` column from the `wallets` table.
2. After running this migration, all existing rows in the `wallets` table will have their `depleted_ongoing_balance` set to `false`.
3. Any new wallet records created after this migration will have `depleted_ongoing_balance` set to `false` by default unless explicitly set otherwise.