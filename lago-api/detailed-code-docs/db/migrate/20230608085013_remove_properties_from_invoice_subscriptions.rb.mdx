---
title: "20230608085013_remove_properties_from_invoice_subscriptions.rb"
---

## High-level description
This migration file removes the `properties` column of type `jsonb` from the `invoice_subscriptions` table in a Rails application. It uses the `safety_assured` method to bypass certain safety checks, indicating that the developer has confirmed the safety of this operation.

## Symbols

### `RemovePropertiesFromInvoiceSubscriptions`
#### Description
This class is a Rails migration that inherits from `ActiveRecord::Migration[7.0]`. Its purpose is to define a database schema change, specifically the removal of the `properties` column from the `invoice_subscriptions` table.

#### Internal Logic
The migration uses the `change` method to define the schema modification. Inside this method:

1. It wraps the column removal operation in a `safety_assured` block. This method is likely provided by a gem like `strong_migrations` to bypass certain safety checks.
2. It calls `remove_column` to remove the `properties` column from the `invoice_subscriptions` table. The column type is specified as `:jsonb`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the base class for defining database migrations in Rails |

## Error Handling
This migration does not implement any specific error handling. If an error occurs during the migration, it will be handled by the Rails migration framework.

## Performance Considerations
Removing a column can be a potentially slow operation on large tables, as it may require a table rewrite depending on the database system. The use of `safety_assured` suggests that the developers have considered the implications and deemed it safe to proceed without additional safeguards.

## TODOs
There are no explicit TODOs in this migration file.