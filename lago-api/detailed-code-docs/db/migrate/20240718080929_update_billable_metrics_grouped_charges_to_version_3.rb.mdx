---
title: "20240718080929_update_billable_metrics_grouped_charges_to_version_3.rb"
---

## High-level description
This migration updates the `billable_metrics_grouped_charges` view to version 3. It drops the existing view and creates a new one with the updated version.

## Symbols

### `UpdateBillableMetricsGroupedChargesToVersion3`
#### Description
This class is an ActiveRecord migration that updates the `billable_metrics_grouped_charges` view to version 3. It inherits from `ActiveRecord::Migration[7.1]`, indicating it's compatible with Rails 7.1.

#### Internal Logic
The migration performs two main steps:
1. Drops the existing `billable_metrics_grouped_charges` view.
2. Creates a new `billable_metrics_grouped_charges` view with version 3.

### `change`
#### Description
This method defines the changes to be applied (or reverted) when running the migration.

#### Internal Logic
1. Calls `drop_view` to remove the existing `billable_metrics_grouped_charges` view.
2. Calls `create_view` to create a new `billable_metrics_grouped_charges` view, specifying version 3.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for defining database schema changes |

## Notes
- The actual SQL definition for the new view (version 3) is not included in this migration file. It's likely defined in a separate SQL file or through a view builder in the Rails application.
- This migration is reversible by default, as ActiveRecord can automatically reverse the `drop_view` and `create_view` operations.
- The use of versioned views suggests that the application is using a system to manage different versions of database views, which can be helpful for maintaining backwards compatibility or gradually rolling out changes.