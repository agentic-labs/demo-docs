---
title: "20231114092154_add_amount_details_to_fees.rb"
---

## High-level description
This migration adds a new column called `amount_details` to the `fees` table in the database. The column is designed to store JSON data, allowing for flexible storage of fee-related amount information.

## Symbols

### AddAmountDetailsToFees
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It adds a new column to the `fees` table.

#### Internal Logic
The migration uses the `add_column` method to add the new `amount_details` column to the `fees` table. The column has the following characteristics:
- Name: `amount_details`
- Type: `jsonb` (JSON Binary)
- Constraints: 
  - `null: false`: The column cannot contain null values
  - `default: '{}'`: The default value is an empty JSON object

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for defining database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| version | Float | 7.0 | Specifies the version of ActiveRecord migrations being used |

## Notes
1. The use of `jsonb` type allows for efficient storage and querying of JSON data in PostgreSQL databases.
2. Setting `null: false` ensures that every row in the `fees` table will have an `amount_details` value, even if it's just an empty JSON object.
3. The default value of `'{}'` (an empty JSON object) is used when no specific value is provided during record creation.
4. This migration is reversible by default, as Rails can automatically figure out how to undo the addition of a column.