---
title: "20240820125840_add_progressive_billing_credit_amount_cents_to_invoices.rb"
---

## High-level description
This migration adds a new column `progressive_billing_credit_amount_cents` to the `invoices` table in the database. The column is designed to store the amount of progressive billing credit in cents as a big integer, with a default value of 0 and a not-null constraint.

## Symbols

### `AddProgressiveBillingCreditAmountCentsToInvoices`
#### Description
This class is a Rails migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.1]`, indicating it's compatible with Rails 7.1 migration framework.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column to the `invoices` table using the `add_column` method.

### `change`
#### Description
This method specifies the changes to be made to the database schema. In this case, it adds a new column to the `invoices` table.

#### Internal Logic
The method calls `add_column` with the following parameters:
- `:invoices`: The target table name
- `:progressive_billing_credit_amount_cents`: The name of the new column
- `:bigint`: The data type of the new column (big integer)
- `default: 0`: Sets the default value of the column to 0
- `null: false`: Specifies that the column cannot contain null values

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for defining database schema changes in Rails applications |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| default | integer | 0 | The default value for the new column |
| null | boolean | false | Specifies whether the column can contain null values |

Note: This migration will automatically be reversed by Rails when rolling back, removing the added column from the `invoices` table.