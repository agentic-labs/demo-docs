---
title: "20240822080031_add_historical_usage_to_lifetime_usage.rb"
---

## High-level description
This migration adds a new column `historical_usage_amount_cents` to the `lifetime_usages` table in the database. The column is designed to store historical usage data in cents as a large integer (bigint) with a default value of 0 and a not-null constraint.

## Symbols

### AddHistoricalUsageToLifetimeUsage
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.1]`, indicating it's compatible with Rails 7.1 migration framework.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column to the `lifetime_usages` table using the `add_column` method.

### change
#### Description
This method specifies the changes to be made to the database schema. In this case, it adds a new column to the `lifetime_usages` table.

#### Internal Logic
The method calls `add_column` with the following parameters:
1. `:lifetime_usages` - the table name
2. `:historical_usage_amount_cents` - the name of the new column
3. `:bigint` - the data type of the new column (big integer)
4. `default: 0` - sets the default value of the column to 0
5. `null: false` - specifies that the column cannot contain null values

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework for database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| historical_usage_amount_cents | bigint | 0 | Stores historical usage data in cents |

Note: The configuration here refers to the new column being added to the database table.