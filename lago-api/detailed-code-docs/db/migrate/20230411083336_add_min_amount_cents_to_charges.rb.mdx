---
title: "20230411083336_add_min_amount_cents_to_charges.rb"
---

## High-level description
This migration adds a new column `min_amount_cents` to the `charges` table in the database. The column is designed to store the minimum amount in cents for a charge, with a default value of 0 and a not-null constraint.

## Symbols

### `AddMinAmountCentsToCharges`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0 migration framework.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column named `min_amount_cents` to the `charges` table using the `add_column` method.

The new column has the following characteristics:
- Name: `min_amount_cents`
- Table: `charges`
- Data type: `bigint` (large integer)
- Constraints: 
  - `null: false` (column cannot contain null values)
  - `default: 0` (default value is 0 if not specified)

This migration ensures that all existing and new records in the `charges` table will have a `min_amount_cents` value, defaulting to 0 if not explicitly set.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework and database abstraction |

## Notes
1. The use of `bigint` suggests that the application expects to handle large monetary values or a high volume of transactions.
2. Storing the amount in cents is a common practice to avoid floating-point precision issues when dealing with currency.
3. The migration is reversible by default, meaning Rails can automatically generate the code to undo this change if needed.
4. The file name includes a timestamp (20230411083336) which helps maintain the order of migrations and prevents conflicts in collaborative environments.