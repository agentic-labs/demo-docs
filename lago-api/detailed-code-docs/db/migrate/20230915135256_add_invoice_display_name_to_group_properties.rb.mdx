---
title: "20230915135256_add_invoice_display_name_to_group_properties.rb"
---

## High-level description
This migration file adds an 'invoice_display_name' column to the 'group_properties' table and removes the 'invoice_value' column from the 'groups' table. It's part of a database schema change, likely to reorganize how invoice-related information is stored for groups.

## Symbols

### AddInvoiceDisplayNameToGroupProperties
#### Description
This class is a Rails migration that modifies the database schema. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0 migrations.

#### Internal Logic
The migration defines two methods:

1. `up`: This method is called when migrating the database forward.
   - It removes the 'invoice_value' column from the 'groups' table.
   - It adds an 'invoice_display_name' column of type string to the 'group_properties' table.

2. `down`: This method is called when rolling back the migration.
   - It adds back the 'invoice_value' column of type string to the 'groups' table.
   - It removes the 'invoice_display_name' column from the 'group_properties' table.

Both methods are wrapped in a `safety_assured` block, which is likely a custom method to bypass certain safety checks during the migration process.

## Side Effects
- The 'groups' table will lose the 'invoice_value' column and any data it contained.
- The 'group_properties' table will gain a new 'invoice_display_name' column.
- Any code or queries relying on the 'invoice_value' column in the 'groups' table will need to be updated to use the new 'invoice_display_name' column in the 'group_properties' table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for modifying the database schema |

## Error Handling
This migration does not implement any specific error handling. If an error occurs during the migration process, it will likely be handled by the Rails migration framework.

## TODOs
There are no explicit TODOs in this migration file.