---
title: "20240514081110_create_integration_resources.rb"
---

## High-level description
This migration file creates a new table called `integration_resources` in the database. The table is designed to store information about external resources that are synced with the application's internal models, using a polymorphic association.

## Symbols

### `CreateIntegrationResources`
#### Description
This is a Rails migration class that inherits from `ActiveRecord::Migration[7.0]`. It defines the structure for creating the `integration_resources` table in the database.

#### Internal Logic
The migration uses the `change` method to define the table creation:

1. Creates a new table named `integration_resources` with UUID as the primary key.
2. Adds a polymorphic reference column named `syncable`.
3. Adds a string column named `external_id`.
4. Adds timestamp columns (`created_at` and `updated_at`).

## Code Structure

### `change` method
#### Description
This method defines the changes to be applied to the database schema.

#### Internal Logic
1. Uses `create_table` to create the `integration_resources` table with UUID as the primary key.
2. Adds columns to the table:
   - `syncable`: A polymorphic reference column for associating with other models.
   - `external_id`: A string column to store external identifiers.
   - Timestamp columns (automatically added by Rails).

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord::Migration | Provides the framework for defining database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| id | symbol | :uuid | Sets the primary key type to UUID |

## Notes
1. The `syncable` reference is polymorphic, allowing the `integration_resources` to be associated with multiple types of models.
2. The `external_id` column is likely used to store identifiers from external systems or APIs.
3. The use of UUID as the primary key type provides better uniqueness and distribution for distributed systems.
4. This migration is part of Rails 7.0, as indicated by the version number in the class inheritance.