---
title: "20230425130239_change_default_invoice_version.rb"
---

## High-level description
This migration file changes the default value of the `version_number` column in the `invoices` table from 2 to 3. It's part of a Rails database migration, specifically using ActiveRecord Migration version 7.0.

## Symbols

### `ChangeDefaultInvoiceVersion`
#### Description
This class is a Rails migration that modifies the default value of the `version_number` column in the `invoices` table. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0 migration framework.

#### Internal Logic
The migration uses the `change_column_default` method to update the default value of the `version_number` column in the `invoices` table. It explicitly specifies both the old default value (2) and the new default value (3).

```ruby
change_column_default :invoices, :version_number, from: 2, to: 3
```

This method call does the following:
1. Targets the `invoices` table
2. Specifies the `version_number` column
3. Changes the default value from 2 to 3

## Side Effects
When this migration is run, it will modify the database schema for the `invoices` table. Specifically:
- New rows inserted into the `invoices` table will have a default `version_number` of 3 instead of 2, unless explicitly specified.
- Existing rows in the `invoices` table will not be affected; only the default for new entries is changed.

## Performance Considerations
This migration should be relatively quick to execute as it only modifies the default value of a column and doesn't involve data manipulation. However, if the `invoices` table is very large or heavily used, it's advisable to run this migration during a low-traffic period to minimize potential disruptions.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework and database abstraction |

Note: The specific version of ActiveRecord being used is 7.0, as indicated by the migration class inheritance.