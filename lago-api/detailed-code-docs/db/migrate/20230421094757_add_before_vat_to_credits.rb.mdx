---
title: "20230421094757_add_before_vat_to_credits.rb"
---

## High-level description
This migration file adds a new boolean column called `before_vat` to the `credits` table in the database. The column is set to be non-nullable with a default value of `false`.

## Symbols

### `AddBeforeVatToCredits`
#### Description
This class is an ActiveRecord migration that defines a change to be applied to the database schema. It inherits from `ActiveRecord::Migration[7.0]`, indicating it's compatible with Rails 7.0.

#### Internal Logic
The migration uses the `change` method to define a reversible database change. It adds a new column to the `credits` table using the `add_column` method.

### `change`
#### Description
This method specifies the changes to be made to the database schema when the migration is run.

#### Internal Logic
The method calls `add_column` with the following parameters:
- `:credits`: The name of the table to modify
- `:before_vat`: The name of the new column
- `:boolean`: The data type of the new column
- `null: false`: Specifies that the column cannot contain null values
- `default: false`: Sets the default value for the column to `false`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ActiveRecord | Provides the migration framework and database abstraction |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| before_vat | boolean | false | Indicates whether a credit is calculated before VAT |

This migration adds a new configuration option to the `credits` table. The `before_vat` column allows for distinguishing between credits that are calculated before or after VAT (Value Added Tax) is applied.