---
title: "docker-compose-testing.yml"
---

## High-level description
This Docker Compose file defines a set of database services for running unit tests. It includes MySQL, PostgreSQL, MongoDB, and Microsoft SQL Server, each configured with specific versions, credentials, and exposed ports.

## Code Structure
The file defines a Docker Compose configuration (version 3.2) with four services: mysql, postgres, mongodb, and mssql. Each service is configured with its respective Docker image, environment variables, and port mappings.

## Symbols

### `services`
#### Description
The `services` section defines the different database containers that will be run as part of this Docker Compose configuration.

#### Internal Logic
Each service is defined with the following components:
- `image`: Specifies the Docker image to use for the container
- `restart`: Set to "always" for all services, ensuring they restart if they crash
- `environment`: Defines environment variables specific to each database service
- `ports`: Maps container ports to host ports for access

### `mysql`
#### Description
Defines a MySQL 8.0 database service.

#### Internal Logic
- Uses the `mysql:8.0` image
- Sets the root password to "supersecret"
- Exposes port 3306

### `postgres`
#### Description
Defines a PostgreSQL 15 database service.

#### Internal Logic
- Uses the `postgres:15` image
- Sets the postgres user password to "supersecret"
- Exposes port 5432

### `mongodb`
#### Description
Defines a MongoDB 6 database service.

#### Internal Logic
- Uses the `mongo:6` image
- Sets the root username to "test_user" and password to "supersecret"
- Exposes port 27017

### `mssql`
#### Description
Defines a Microsoft SQL Server 2022 database service.

#### Internal Logic
- Uses the `mcr.microsoft.com/mssql/server:2022-latest` image
- Sets the SA password to "admin5678@"
- Accepts the EULA
- Exposes port 1433

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| MySQL 8.0 | Provides a MySQL database for testing |
| PostgreSQL 15 | Provides a PostgreSQL database for testing |
| MongoDB 6 | Provides a MongoDB database for testing |
| Microsoft SQL Server 2022 | Provides an MSSQL database for testing |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| MYSQL_ROOT_PASSWORD | string | supersecret | Root password for MySQL |
| POSTGRES_PASSWORD | string | supersecret | Password for PostgreSQL |
| MONGO_INITDB_ROOT_USERNAME | string | test_user | Root username for MongoDB |
| MONGO_INITDB_ROOT_PASSWORD | string | supersecret | Root password for MongoDB |
| MSSQL_SA_PASSWORD | string | admin5678@ | SA password for MSSQL |
| ACCEPT_EULA | string | Y | Accepts the EULA for MSSQL |

This Docker Compose file is designed to quickly set up a suite of databases for testing purposes. It provides a consistent and isolated environment for running unit tests against different database systems. The use of specific image versions ensures reproducibility across different environments.