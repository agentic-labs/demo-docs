---
title: "check_version.py"
---

## High-level description
This script checks the validity of a version string against predefined patterns for release and pre-release versions. It also ensures that the provided version matches the one defined in the `__about__.py` file of the MindsDB project.

## Symbols

### Main Script
#### Description
The script performs version validation and comparison. It takes command-line arguments for the version string and whether it's a pre-release version.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| sys.argv[1] | string | Version string to be validated |
| sys.argv[2] | string | "true" if it's a pre-release version, otherwise assumed to be a release version |

#### Internal Logic
1. Import required modules and the `__version__` from MindsDB's `__about__.py`.
2. Define regex patterns for release and pre-release versions.
3. Process the input version string by removing the 'v' prefix if present.
4. Determine if it's a pre-release version based on the second command-line argument.
5. Validate the version string against the appropriate regex pattern.
6. Compare the input version string with the `__version__` from `__about__.py`.
7. If all checks pass, print the validated version string.

#### Error Handling
The script raises exceptions with descriptive messages for the following cases:
- Invalid pre-release version format
- Invalid release version format
- Version mismatch between the input and `__about__.py`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| re | For regular expression operations |
| sys | For accessing command-line arguments |
| mindsdb.__about__ | To import the `__version__` |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| RELEASE_PATTERN | string | "^\d+(\.\d+)*$" | Regex pattern for release versions |
| PRERELEASE_PATTERN | string | "^\d+(\.\d+)*(a|b|rc)\d+$" | Regex pattern for pre-release versions |

## TODOs
The code includes two `noqa: W605` comments, indicating that the linter should ignore the W605 warning (invalid escape sequence) for the regex patterns. This might be addressed in future updates to use raw strings instead.