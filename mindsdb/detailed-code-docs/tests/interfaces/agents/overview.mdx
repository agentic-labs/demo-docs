---
title: "Overview"
---

## High-level description
This directory contains unit tests for the agents interface in MindsDB. It focuses on testing the AgentsController and the SQLAgent class, particularly its caching mechanism. The tests ensure that the agents' functionality, including completion generation and table information retrieval, works as expected.

## What does it do?
The tests in this directory verify two main aspects of the agents interface:

1. Completion Generation: It checks if the AgentsController can correctly process input messages and return the expected completion response. This is crucial for the agent's ability to understand and respond to user queries.

2. SQL Agent Caching: It tests the caching mechanism of the SQLAgent, specifically for the `get_table_info` method. This ensures that the agent efficiently retrieves table information, using the cache when possible to avoid unnecessary database queries.

These tests help maintain the reliability and efficiency of the agents interface, which is vital for MindsDB's ability to interact with databases and provide accurate responses to user queries.

## Key Files

1. `test_agents_controller.py`:
   This file contains tests for the AgentsController class. It focuses on the `get_completion` method, which is responsible for processing input messages and generating responses. The test uses mock objects to simulate dependencies and verifies that the method returns the expected completion response.

2. `test_sql_agent_cache.py`:
   This file tests the caching mechanism of the SQLAgent class. It contains two main tests:
   - A test for cache misses, ensuring that the agent fetches information from the database when it's not in the cache.
   - A test for cache hits, verifying that the agent retrieves information from the cache when available, avoiding unnecessary database queries.

## Dependencies
The tests rely on several external libraries and internal MindsDB modules:

1. pytest: Used as the primary testing framework.
2. unittest.mock: Utilized for creating mock objects and patching methods, allowing for isolated testing of components.
3. pandas: Used in the AgentsController test for creating and manipulating DataFrames.
4. mindsdb.interfaces.storage: Accessed for the `db` module in the AgentsController test.
5. mindsdb.interfaces.agents.agents_controller: Contains the AgentsController class being tested.
6. mindsdb.interfaces.skills.sql_agent: Contains the SQLAgent class being tested.

These dependencies allow for comprehensive testing of the agents interface, simulating various scenarios and ensuring the correct behavior of the components.

## Configuration
While there are no explicit configuration files mentioned, the tests use various mock objects and fixtures to set up the testing environment. This includes:

- Mock objects for ProjectDataNode, InformationSchemaDataNode, and ModelController in the AgentsController test.
- A pytest fixture `sql_agent_setup` in the SQLAgent cache test, which creates a mock SQLAgent instance with a mock cache.

These configurations allow the tests to isolate the components being tested and control the behavior of dependencies, ensuring accurate and reliable test results.