---
title: "test_webz_handler.py"
---

## High-level description
This file contains unit tests for the WebzHandler, specifically testing the WebzPostsTable and WebzReviewsTable classes. The tests cover various scenarios including column retrieval, query execution with different parameters, and error handling for invalid queries.

## Code Structure
The code is structured into two main test classes: `WebzPostsTableTest` and `WebzReviewsTableTest`. Each class contains multiple test methods that verify different aspects of the corresponding table classes. The tests use mock objects to simulate the behavior of the WebzHandler and its API calls.

## Symbols

### `WebzPostsTableTest`
#### Description
A test class for the WebzPostsTable, containing methods to test various functionalities of the posts table.

#### Internal Logic
1. `test_get_columns_returns_all_columns`: Verifies that the `get_columns` method returns the expected list of columns.
2. `test_select_with_query_order_by_and_limit`: Tests the `select` method with a query including filtering, ordering, and limiting.
3. `test_select_with_targets`: Checks the `select` method when specific columns are requested.
4. `test_select_with_invalid_order_by_field_fails`: Ensures that an error is raised when an invalid order by field is used.

### `WebzReviewsTableTest`
#### Description
A test class for the WebzReviewsTable, containing methods to test various functionalities of the reviews table.

#### Internal Logic
1. `test_get_columns_returns_all_columns`: Verifies that the `get_columns` method returns the expected list of columns.
2. `test_select_with_query_order_by_and_limit`: Tests the `select` method with a query including filtering, ordering, and limiting.
3. `test_select_with_targets`: Checks the `select` method when specific columns are requested.
4. `test_select_with_invalid_order_by_field_fails`: Ensures that an error is raised when an invalid order by field is used.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides testing framework |
| unittest.mock | Used for creating mock objects |
| pandas | Used for data manipulation and analysis |
| mindsdb_sql | Used for parsing SQL queries |
| mindsdb.integrations.handlers.webz_handler.webz_handler | Contains the WebzHandler class |
| mindsdb.integrations.handlers.webz_handler.webz_tables | Contains the WebzPostsTable and WebzReviewsTable classes |

## Constants
| Constant | Type | Description |
|:---------|:-----|:------------|
| COLUMNS_POST | list | Contains the column names for the posts table |
| SAMPLE_POST | dict | A sample post data used for testing |
| COLUMNS_REVIEW | list | Contains the column names for the reviews table |
| SAMPLE_REVIEW | dict | A sample review data used for testing |

These constants are used throughout the tests to verify the correct behavior of the WebzPostsTable and WebzReviewsTable classes.