---
title: "conftest.py"
---

## High-level description
This code defines pytest fixtures and utility functions for loading test data in CSV format for machine learning handlers. It specifically prepares data for LightFM interactions and item data, which are likely used in recommendation system tests.

## Code Structure
The code consists of a utility function `get_df` and two pytest fixtures: `lightfm_interaction_data` and `lightfm_item_data`. These fixtures use `get_df` to load and return specific datasets with predefined data types.

## Symbols

### `TEST_DATA_PATH`
#### Description
A constant that defines the path to the test data directory.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| TEST_DATA_PATH | Path | Path to the test data directory |

### `get_df`
#### Description
A utility function that reads a CSV file from the test data directory and returns it as a pandas DataFrame.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| file_name | str | Name of the CSV file to read |
| dtype | dict | Optional dictionary specifying data types for columns |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| DataFrame | pd.DataFrame | Pandas DataFrame containing the CSV data |

### `lightfm_interaction_data`
#### Description
A pytest fixture that provides interaction data for LightFM tests.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| DataFrame | pd.DataFrame | Pandas DataFrame containing interaction data |

#### Internal Logic
Calls `get_df` with "ratings.csv" and specifies data types for userId, movieId, and rating columns.

### `lightfm_item_data`
#### Description
A pytest fixture that provides item data for LightFM tests.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| DataFrame | pd.DataFrame | Pandas DataFrame containing item data |

#### Internal Logic
Calls `get_df` with "movies.csv" and specifies data types for movieId, title, and genres columns.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pathlib | Used for handling file paths |
| pandas | Used for reading CSV files and working with DataFrames |
| pytest | Used for defining test fixtures |

## Performance Considerations
The code uses pandas' `read_csv` function, which can be memory-intensive for large datasets. If the test data files are large, it might impact the performance of the tests.