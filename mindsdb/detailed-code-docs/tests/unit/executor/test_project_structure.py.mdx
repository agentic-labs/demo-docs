---
title: "test_project_structure.py"
---

## High-level description
This file contains unit tests for the project structure functionality in MindsDB, focusing on version management of models. It tests various aspects of creating, retraining, and managing different versions of a model within a project.

## Code Structure
The main class `TestProjectStructure` inherits from `BaseExecutorDummyML` and contains a single test method `test_version_managing`. This method tests various scenarios related to model versioning, including creation, retraining, and management of different versions.

## Symbols

### TestProjectStructure
#### Description
A test class that inherits from `BaseExecutorDummyML` to test project structure functionality, particularly version management of models.

#### Internal Logic
The `test_version_managing` method performs the following key steps:
1. Sets up initial data
2. Creates a project and a model
3. Tests model creation with tags
4. Retrains the model multiple times with different tags
5. Tests using different versions of the model
6. Tests version management commands (show models, set active, drop version)
7. Tests retraining without parameters
8. Tests dropping the entire model

### test_project_names_duplicate
#### Description
A test method to ensure that project and database names cannot be duplicated.

#### Internal Logic
1. Creates a project named 'proj1'
2. Creates a database named 'db1'
3. Attempts to create a project with the same name as the database (should raise an exception)
4. Attempts to create a database with the same name as the project (should raise an exception)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pytest | Testing framework |
| pandas | Data manipulation |
| datetime | Date and time operations |

## Error Handling
The code uses pytest's `raises` context manager to test for expected exceptions in certain scenarios, such as trying to use non-existent model versions or attempting to delete active versions.

## Notes
- The tests make extensive use of SQL-like commands, suggesting that the system being tested provides a SQL interface for managing machine learning models.
- The tests cover various aspects of model versioning, including creation, retraining, activation, and deletion of versions.
- The code uses a dummy ML engine for testing purposes, as indicated by the `dummy_ml` engine specification in the SQL commands.