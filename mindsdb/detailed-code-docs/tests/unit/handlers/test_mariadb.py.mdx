---
title: "test_mariadb.py"
---

## High-level description
This code defines a unit test class `TestMariaDBHandler` for testing the MariaDBHandler. It inherits from `BaseDatabaseHandlerTest` and `unittest.TestCase`, providing a structured approach to testing the MariaDB integration handler in the MindsDB framework.

## Code Structure
The `TestMariaDBHandler` class extends `BaseDatabaseHandlerTest` and `unittest.TestCase`, implementing abstract methods and properties required for testing database handlers. It sets up mock connection data, error handling, and SQL queries specific to MariaDB for testing purposes.

## Symbols

### TestMariaDBHandler
#### Description
This class is a test suite for the MariaDBHandler, providing specific implementation details for testing MariaDB connections and queries.

#### Internal Logic
The class overrides several properties and methods from its parent classes to provide MariaDB-specific test configurations:

1. `dummy_connection_data`: Defines mock connection parameters for MariaDB.
2. `err_to_raise_on_connect_failure`: Specifies the error to be raised on connection failure.
3. `get_tables_query`: Provides the SQL query to retrieve table information.
4. `get_columns_query`: Provides the SQL query to describe a table's columns.
5. `create_handler`: Creates an instance of MariaDBHandler for testing.
6. `create_patcher`: Creates a patch for the MySQL connector's connect function.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| unittest.mock | Used for mocking objects in tests |
| mysql.connector | MariaDB/MySQL database connector (for error types) |
| base_handler_test | Provides base classes for database handler testing |
| mindsdb.integrations.handlers.mariadb_handler.mariadb_handler | The handler being tested |

## Error Handling
The test class uses `MySQLError` from `mysql.connector` to simulate connection failures in tests.

## References
- `BaseDatabaseHandlerTest`: The parent class providing common test methods for database handlers.
- `MariaDBHandler`: The handler class being tested.

This test file ensures that the MariaDBHandler correctly implements the required functionality for connecting to and querying MariaDB databases within the MindsDB framework. It tests connection success and failure scenarios, as well as the correct formation of SQL queries for retrieving table and column information.