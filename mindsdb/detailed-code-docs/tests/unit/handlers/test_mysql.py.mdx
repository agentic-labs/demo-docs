---
title: "test_mysql.py"
---

## High-level description
This code defines a unit test class `TestMySQLHandler` for testing the `MySQLHandler` class. It inherits from `BaseDatabaseHandlerTest` and `unittest.TestCase`, providing specific implementations and configurations for testing MySQL database connections and operations.

## Code Structure
The `TestMySQLHandler` class extends `BaseDatabaseHandlerTest` and `unittest.TestCase`, implementing abstract methods and properties required for testing MySQL-specific functionality. It sets up dummy connection data, error handling, and SQL queries for testing various database operations.

## References
This code references the following external symbols:
- `BaseDatabaseHandlerTest` from `base_handler_test`
- `MySQLHandler` from `mindsdb.integrations.handlers.mysql_handler.mysql_handler`
- `MySQLError` from `mysql.connector`

## Symbols

### TestMySQLHandler
#### Description
A test class for the MySQLHandler, providing MySQL-specific implementations of abstract methods from BaseDatabaseHandlerTest.

#### Internal Logic
The class defines several properties and methods:
1. `dummy_connection_data`: Provides mock connection details for MySQL.
2. `err_to_raise_on_connect_failure`: Specifies the error to be raised on connection failure.
3. `get_tables_query`: Defines the SQL query to retrieve table information.
4. `get_columns_query`: Defines the SQL query to describe a table's columns.
5. `create_handler`: Creates an instance of MySQLHandler for testing.
6. `create_patcher`: Creates a patch for the MySQL connector's connect function.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| unittest.mock | Used for mocking objects in tests |
| mysql.connector | MySQL database connector (for error handling) |
| collections.OrderedDict | Used to create ordered dictionary for connection data |

## Error Handling
The class defines `err_to_raise_on_connect_failure` property to specify the `MySQLError` to be raised when a connection fails. This is used in the parent class's connection failure tests.

## API/Interface Reference
The class doesn't expose an API but implements the following abstract properties and methods from `BaseDatabaseHandlerTest`:

| Property/Method | Description |
|:----------------|:------------|
| dummy_connection_data | Provides mock MySQL connection details |
| err_to_raise_on_connect_failure | Specifies the MySQL-specific error for connection failures |
| get_tables_query | SQL query to retrieve table information |
| get_columns_query | SQL query to describe a table's columns |
| create_handler | Creates a MySQLHandler instance |
| create_patcher | Creates a patch for mysql.connector.connect |

These implementations allow the parent class's tests to run with MySQL-specific configurations and behaviors.