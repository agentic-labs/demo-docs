---
title: "test_oracle.py"
---

## High-level description
This code defines a unit test class `TestOracleHandler` for testing the `OracleHandler` class. It inherits from `BaseDatabaseHandlerTest` and `unittest.TestCase`, providing a structured way to test the Oracle database handler's functionality.

## Code Structure
The `TestOracleHandler` class extends `BaseDatabaseHandlerTest` and `unittest.TestCase`, implementing abstract methods and properties required for testing the Oracle database handler. It sets up dummy connection data, error handling, and SQL queries for testing purposes.

## Symbols

### TestOracleHandler
#### Description
A test class for the OracleHandler, inheriting from BaseDatabaseHandlerTest and unittest.TestCase.

#### Internal Logic
- Implements abstract properties and methods required by the parent classes.
- Defines dummy connection data, error handling, and SQL queries for testing.
- Uses unittest.mock.patch to mock the database connection.

### dummy_connection_data
#### Description
A property that returns dummy connection data for testing purposes.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dummy_connection_data | OrderedDict | Contains dummy user, password, and dsn for testing |

### err_to_raise_on_connect_failure
#### Description
A property that returns the error to be raised when connection fails.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| err_to_raise_on_connect_failure | DatabaseError | An Oracle DatabaseError with the message "Connection Failed" |

### get_tables_query
#### Description
A property that returns the SQL query for getting tables.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| get_tables_query | str | SQL query to select table names from user_tables |

### get_columns_query
#### Description
A property that returns the SQL query for getting columns of a table.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| get_columns_query | str | SQL query to select column names and data types from USER_TAB_COLUMNS for a specific table |

### create_handler
#### Description
A method that creates and returns an instance of OracleHandler for testing.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| handler | OracleHandler | An instance of OracleHandler with dummy connection data |

### create_patcher
#### Description
A method that creates and returns a mock patcher for the database connection.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| patcher | unittest.mock.patch | A patch for the 'connect' function in the oracle_handler module |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| unittest.mock | Used for mocking the database connection |
| oracledb | Imported for the DatabaseError exception |
| base_handler_test | Provides the BaseDatabaseHandlerTest class |
| mindsdb.integrations.handlers.oracle_handler.oracle_handler | Provides the OracleHandler class being tested |

## Error Handling
The test class defines `err_to_raise_on_connect_failure` to simulate a database connection error during testing.

This test file is designed to work with the unittest framework and can be run as a standalone script or as part of a larger test suite.