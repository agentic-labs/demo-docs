---
title: "test_http.py"
---

## High-level description
This file contains integration tests for the HTTP API of MindsDB. It tests various functionalities including authentication, file operations, SQL queries, predictor creation, and tab management. The tests are designed to ensure the correct behavior of the HTTP API endpoints and their responses.

## Code Structure
The main test class `TestHTTP` inherits from `HTTPHelperMixin` and is decorated with pytest fixtures. It contains multiple test methods that cover different aspects of the HTTP API. The class uses helper methods for common operations like executing SQL queries via HTTP and making API requests.

## Symbols

### TestHTTP
#### Description
A test class that contains integration tests for the MindsDB HTTP API. It covers various functionalities including authentication, file operations, SQL queries, predictor creation, and tab management.

#### Internal Logic
The class uses pytest fixtures and helper methods to set up the testing environment and execute HTTP requests. It contains multiple test methods, each focusing on a specific aspect of the API:

1. `test_utils`: Tests utility endpoints like ping and config vars.
2. `test_auth`: Tests authentication-related endpoints and functionality.
3. `test_gui_is_served`: Checks if the GUI is properly served.
4. `test_files`: Tests file upload and deletion operations.
5. `test_sql_general_syntax`: Tests various SQL query syntaxes.
6. `test_context_changing`: Tests database context switching.
7. `test_special_queries`: Tests special SQL queries like SHOW commands.
8. `test_show_tables`: Tests the SHOW TABLES command.
9. `test_sql_create_database`: Tests database creation and deletion for different database types.
10. `test_sql_select_from_file`: Tests SELECT queries on uploaded files.
11. `test_sql_create_predictor`: Tests predictor creation and usage.
12. `test_tabs`: Tests tab-related operations (create, update, delete, list).

### get_files_list (static method)
#### Description
Retrieves the list of files from the API.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response_data | list | List of files returned by the API |

### show_databases
#### Description
Executes a 'SHOW DATABASES' query and returns the list of database names.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| database_names | list | List of database names |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| requests | Making HTTP requests to the API |
| pytest | Test framework and decorators |
| pandas | Data manipulation for CSV files |
| json | JSON parsing and encoding |
| typing | Type hinting |
| pathlib | File path operations |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| OVERRIDE_CONFIG | dict | {'tasks': {'disable': True}, 'jobs': {'disable': True}} | Configuration override for the MindsDB app |
| API_LIST | list | ["http"] | List of APIs to be tested |
| HTTP_API_ROOT | str | 'http://127.0.0.1:47334/api' | Root URL for the HTTP API |
| USE_GUI | bool | True | Flag to indicate whether to use GUI |

## Error Handling
The test methods use assertions to check for expected responses and status codes. If any assertion fails, the test will raise an AssertionError.

## Logging
No explicit logging is implemented in this file. However, pytest captures and reports test results, including any failures or errors.

## TODOs
- There is a FIXME comment in the `test_sql_create_predictor` method regarding the rental price being a string instead of a float.

This test suite provides comprehensive coverage of the MindsDB HTTP API functionality, ensuring that various components work correctly and interact properly with each other.