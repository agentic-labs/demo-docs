---
title: "Overview"
---

## High-level description
This directory contains utility classes for handling Google OAuth2 authentication in the MindsDB integrations package. It provides two main classes: `GoogleUserOAuth2Manager` for user-based authentication and `GoogleServiceAccountOAuth2Manager` for service account-based authentication. These classes manage the OAuth2 flow, credential retrieval, and storage for Google services.

## What does it do?
The code in this directory facilitates secure authentication with Google services for MindsDB integrations. It handles two main scenarios:

1. User-based authentication: This allows individual users to authenticate with their Google accounts, granting the application permission to access specific Google services on their behalf. The process involves generating an authorization URL, exchanging an authorization code for credentials, and managing token refresh.

2. Service account authentication: This enables server-to-server interactions with Google services using a service account. It involves managing and using service account credentials to authenticate API requests without user intervention.

Both authentication methods support various ways of providing credentials, including URLs, local files, and JSON strings or dictionaries. The code also handles credential storage, refresh, and reuse to minimize the need for repeated authentication.

## Key Files

### google_user_oauth_utilities.py
This file contains the `GoogleUserOAuth2Manager` class, which manages the OAuth2 flow for user-based authentication. Key features include:
- Downloading or copying OAuth2 client secret files
- Executing the Google Auth flow
- Saving and loading credentials
- Refreshing expired tokens

### google_service_account_oauth_utilities.py
This file defines the `GoogleServiceAccountOAuth2Manager` class, which handles service account-based authentication. Key features include:
- Retrieving service account credentials from various sources (URL, file, JSON)
- Parsing and validating credential information
- Creating OAuth2 credentials for service accounts

### __init__.py
This file serves as the entry point for the Google authentication utilities, importing and exposing the main classes from the other two files.

## Dependencies
The code relies on several external libraries and modules:

1. google-auth (google.oauth2, google.auth): For core OAuth2 functionality
2. google-auth-oauthlib: For the OAuth2 flow implementation
3. requests: For making HTTP requests to download credentials
4. flask: Used in the user authentication flow
5. json: For parsing and manipulating JSON data

## Configuration
The authentication process can be configured through various parameters passed to the manager classes:

- `credentials_url`: URL to download credentials
- `credentials_file`: Path to a local credentials file
- `credentials_json`: Credentials as a JSON string or dictionary
- `scopes`: List of OAuth2 scopes required for the application
- `handler_storage`: Storage handler for managing configuration files

The code also interacts with the MindsDB logging system and custom exceptions defined in the auth_utilities package.

In summary, this directory provides a comprehensive solution for handling Google OAuth2 authentication in MindsDB integrations, supporting both user-based and service account-based authentication methods with flexible credential management options.