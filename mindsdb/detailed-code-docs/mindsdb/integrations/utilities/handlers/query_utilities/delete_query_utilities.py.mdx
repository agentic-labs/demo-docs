---
title: "delete_query_utilities.py"
---

## High-level description
This code defines two classes, `DELETEQueryParser` and `DELETEQueryExecutor`, which are used to parse and execute DELETE SQL queries, respectively. These classes are part of a larger system for handling various SQL operations on a custom database or data storage system.

## Code Structure
The `DELETEQueryParser` inherits from `BaseQueryParser`, while `DELETEQueryExecutor` inherits from `BaseQueryExecutor`. Both base classes are imported from the `base_query_utilities` module. The `DELETEQueryParser` is responsible for parsing the WHERE clause of a DELETE query, while the `DELETEQueryExecutor` is designed to filter out records based on the parsed WHERE conditions.

## Symbols

### DELETEQueryParser
#### Description
This class parses a DELETE SQL query, specifically extracting the WHERE conditions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ast.Delete | The DELETE SQL query to be parsed |

#### Internal Logic
The `parse_query` method calls `parse_where_clause` (inherited from `BaseQueryParser`) to extract the WHERE conditions from the query.

### DELETEQueryExecutor
#### Description
This class is designed to execute a DELETE query by filtering out records based on the WHERE conditions. However, it doesn't actually delete the records but returns the records that would be deleted.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| df | pd.DataFrame | The DataFrame containing all records |
| where_conditions | List[List[Text]] | The WHERE conditions extracted from the query |

#### Internal Logic
This class is expected to filter the input DataFrame based on the WHERE conditions. The actual implementation of this filtering is not shown in the provided code snippet.

## Performance Considerations
The `DELETEQueryExecutor` class is noted to be computationally inefficient as it requires all records to be loaded into memory as a DataFrame. It's recommended not to use this class if the API/SDK being used supports bulk deletion operations.

## TODOs
- Implement the actual filtering logic in the `DELETEQueryExecutor` class.
- Consider optimizing the `DELETEQueryExecutor` for better performance with large datasets.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| mindsdb_sql.parser | Provides the ast module for SQL query parsing |
| pandas | Used for DataFrame operations (implied by the docstring) |

Note: The actual implementation of the `execute_query` method in `DELETEQueryExecutor` is not provided in this code snippet. It's likely implemented in a parent class or expected to be overridden in a subclass.