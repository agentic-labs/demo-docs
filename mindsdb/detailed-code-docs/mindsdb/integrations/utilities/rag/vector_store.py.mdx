---
title: "vector_store.py"
---

## High-level description
This code defines a `VectorStoreOperator` class that manages the addition of documents to a vector store with rate limiting. It also includes a utility function `load_vector_store` to load a vector store based on provided configuration and embeddings model.

## Code Structure
The main class `VectorStoreOperator` encapsulates the logic for managing a vector store, including initialization, document addition, and rate limiting. The `load_vector_store` function serves as a utility to create a vector store instance based on given parameters.

## References
This code references:
- `VectorStore` and `Embeddings` from langchain_core
- `Document` from langchain_core.documents
- `VectorStoreConfig` from mindsdb.integrations.utilities.rag.settings
- `VectorStoreLoader` from mindsdb.integrations.utilities.rag.loaders.vector_store_loader.vector_store_loader

## Symbols

### VectorStoreOperator
#### Description
This class manages the operation of adding documents to a vector store with rate limiting functionality.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| vector_store | VectorStore | The vector store to operate on |
| embedding_model | Embeddings | The embedding model to use |
| documents | List[Document] | Optional list of documents to add |
| vector_store_config | VectorStoreConfig | Optional configuration for the vector store |
| token_per_minute_limit | int | Rate limit for token usage per minute |
| rate_limit_interval | timedelta | Interval for rate limiting |

#### Internal Logic
1. Initializes the vector store and related parameters.
2. Implements rate limiting based on token usage.
3. Provides methods to add documents to the vector store.
4. Verifies and initializes the vector store based on input parameters.

### load_vector_store
#### Description
A utility function that loads a vector store based on the provided embedding model and configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| embedding_model | Embeddings | The embedding model to use |
| config | VectorStoreConfig | Configuration for the vector store |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| vector_store | VectorStore | The loaded vector store instance |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| langchain_core | Provides core components like VectorStore, Embeddings, and Document |
| mindsdb.integrations.utilities.rag | Provides VectorStoreConfig and VectorStoreLoader |

## Error Handling
The code includes basic error handling, such as verifying the vector store type and handling potential errors during vector store initialization.

## Performance Considerations
The class implements rate limiting to manage token usage, which is crucial for performance and adhering to API limits when working with large document sets or frequent operations.