---
title: "test_mendeley_handler.py"
---

## High-level description
This file contains unit tests for the MendeleyHandler class, which is responsible for interacting with the Mendeley API. The tests cover various aspects of the handler's functionality, including connection, query execution, and error handling.

## Code Structure
The code defines a single test class, `MendeleyHandlerTest`, which inherits from `unittest.TestCase`. This class contains multiple test methods that check different aspects of the MendeleyHandler's functionality.

## Symbols

### `MendeleyHandlerTest`
#### Description
This class contains unit tests for the MendeleyHandler. It sets up a test instance of the handler and runs various tests on its methods.

#### Internal Logic
- Sets up a MendeleyHandler instance with test credentials in the `setUpClass` method.
- Tests connection, query execution, and error handling through various test methods.

### `test_0_connect`
#### Description
Tests the `connect` method of the MendeleyHandler.

#### Internal Logic
Calls the `connect` method and expects no exceptions to be raised.

### `test_1_check_connection`
#### Description
Tests the `check_connection` method of the MendeleyHandler.

#### Internal Logic
Calls the `check_connection` method and expects no exceptions to be raised.

### `test_2_select` to `test_9_select`
#### Description
These methods test the `native_query` method of the MendeleyHandler with various SELECT queries.

#### Internal Logic
- Executes a SELECT query using the `native_query` method.
- Asserts that the result type is `RESPONSE_TYPE.TABLE`.

### `test_10_call_mendeley_api_invalid_method_name`
#### Description
Tests the handler's behavior when an invalid method name is provided to the `call_mendeley_api` method.

#### Internal Logic
- Attempts to call `call_mendeley_api` with an invalid method name.
- Expects a `NotImplementedError` to be raised.

### `test_11_select_invalid_condition_name` to `test_13_select_invalid_column_name`
#### Description
These methods test the handler's behavior when invalid SQL queries are provided.

#### Internal Logic
- Attempts to execute invalid SQL queries using the `native_query` method.
- Expects specific exceptions to be raised (NotImplementedError, KeyError).

### `test_14_get_columns`
#### Description
Tests the `get_columns` method of the `catalog_search_data` attribute.

#### Internal Logic
- Calls the `get_columns` method.
- Asserts that the returned columns match the expected list of columns.

### `test_15_select_invalid_condition_name`
#### Description
Tests the handler's behavior when a SELECT query without conditions is provided.

#### Internal Logic
- Attempts to execute a SELECT query without conditions.
- Expects a `ValueError` to be raised.

## Dependencies
The test file depends on the following modules and classes:
- `unittest`: Python's built-in unit testing framework
- `MendeleyHandler`: The main class being tested
- `RESPONSE_TYPE`: An enumeration used to check the type of response from queries

## Error Handling
The tests include several cases to check error handling:
- Invalid method names
- Invalid SQL queries
- Missing conditions in SELECT queries

These tests ensure that the MendeleyHandler raises appropriate exceptions when encountering invalid inputs or unsupported operations.