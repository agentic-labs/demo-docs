---
title: "Overview"
---

## High-level description
This directory contains unit tests for the TDEngineHandler, which is responsible for managing connections and operations with a TDEngine database. The tests cover various functionalities such as establishing connections, creating tables, inserting data, querying data, and retrieving metadata from the TDEngine database.

## What does it do?
The test suite in this directory verifies the correct functioning of the TDEngineHandler. It simulates a typical workflow of interacting with a TDEngine database, including:

1. Establishing a connection to the database
2. Creating a new table
3. Inserting data into the table
4. Querying the inserted data
5. Retrieving metadata about tables and columns

These tests ensure that the TDEngineHandler correctly interfaces with the TDEngine database and performs all necessary operations without errors.

## Key Files
The main file in this directory is:

1. `test_tdengine_handler.py`: This file contains the `TDEngineHandlerTest` class, which is a comprehensive test suite for the TDEngineHandler. It includes multiple test methods, each focusing on a specific aspect of the handler's functionality.

## Dependencies
The test suite relies on the following dependencies:

1. `unittest`: The standard Python testing framework used to structure and run the tests.
2. `mindsdb.integrations.handlers.tdengine_handler.tdengine_handler`: Contains the TDEngineHandler class that is being tested.
3. `mindsdb.api.executor.data_types.response_type`: Provides the RESPONSE_TYPE enum for asserting query result types.

## Configuration
The tests use hardcoded configuration values for connecting to the TDEngine database:

```python
connection_data = {
    "token": "your_token_here",
    "url": "http://localhost:6041",
    "database": "temp"
}
```

These values are used to create a TDEngineHandler instance for testing. In a production environment, these credentials should be stored securely and not in the source code.

The tests assume the existence of a 'temp' database and create a 'hari' table within it for testing purposes.

## Key Aspects of the Test Suite

1. **Connection Testing**: The suite begins by testing the basic connection functionality, ensuring that the handler can successfully connect to the TDEngine database.

2. **Table Creation**: It tests the ability to create a new table in the database, which is a fundamental operation for data management.

3. **Data Insertion**: The suite verifies that the handler can correctly insert data into the created table.

4. **Data Querying**: It checks if the handler can execute SELECT queries and retrieve data from the database.

5. **Metadata Retrieval**: The suite tests the handler's ability to fetch metadata about tables and columns in the database.

6. **Error Handling**: While the error handling in the tests is minimal, it does check for non-error responses from the various operations.

Here's an example of how the suite tests data insertion:

```python
def test_3_insert(self):
    query = "INSERT INTO hari (ts, temperature, humidity) VALUES (NOW, 25.0, 60)"
    result = self.handler.native_query(query)
    self.assertFalse(isinstance(result, RESPONSE_TYPE.ERROR))
```

This test executes an INSERT query and checks that the result is not an error, indicating successful data insertion.

The test methods are numbered, suggesting they should be run in a specific order. This ordering ensures that operations like table creation are performed before attempting to insert or query data.

In conclusion, this test suite provides comprehensive coverage of the TDEngineHandler's functionality, ensuring its reliability and correctness when interacting with a TDEngine database. It serves as a crucial component in maintaining the quality and stability of the TDEngine integration within the larger system.