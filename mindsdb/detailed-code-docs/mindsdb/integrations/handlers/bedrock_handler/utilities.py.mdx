---
title: "utilities.py"
---

## High-level description
This code defines a utility function `create_amazon_bedrock_client` that creates and returns an Amazon Bedrock client using the boto3 library. The function is designed to simplify the process of creating a client for interacting with Amazon Bedrock services, handling authentication and configuration.

## Symbols

### `create_amazon_bedrock_client`
#### Description
This function creates and returns an Amazon Bedrock client using the boto3 library. It handles the authentication and configuration process for connecting to Amazon Bedrock services.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| client | Text | The type of client to create, either 'bedrock' or 'bedrock-runtime' |
| aws_access_key_id | Text | The AWS access key ID for authentication |
| aws_secret_access_key | Text | The AWS secret access key for authentication |
| region_name | Text | The AWS region name where the Bedrock service is located |
| aws_session_token | Optional[Text] | The AWS session token for temporary security credentials (optional) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | boto3.client | An authenticated Amazon Bedrock client |

#### Internal Logic
1. The function first checks if the provided `client` parameter is valid (either 'bedrock' or 'bedrock-runtime'). If not, it raises a `ValueError`.
2. It then uses boto3.client to create and return a client with the specified parameters.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| boto3 | AWS SDK for Python, used to create the Amazon Bedrock client |
| typing | Provides type hinting support |

## Error Handling
The function includes basic error handling by validating the `client` parameter. If an invalid client type is provided, it raises a `ValueError` with an appropriate error message.

## API/Interface Reference
This utility function is likely used internally by other parts of the MindsDB integration with Amazon Bedrock. It provides a consistent way to create authenticated Bedrock clients across the integration.

| Function | Parameters | Return | Description |
|:---------|:-----------|:-------|:------------|
| create_amazon_bedrock_client | client, aws_access_key_id, aws_secret_access_key, region_name, aws_session_token | boto3.client | Creates and returns an authenticated Amazon Bedrock client |