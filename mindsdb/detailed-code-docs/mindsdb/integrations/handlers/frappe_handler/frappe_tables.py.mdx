---
title: "frappe_tables.py"
---

## High-level description
The code defines the `FrappeDocumentsTable` class, which extends the `APITable` class and is responsible for handling interactions with Frappe API for document-related operations. It implements methods for selecting, inserting, and retrieving column information from Frappe documents.

## Code Structure
The `FrappeDocumentsTable` class interacts with the `APITable` class it inherits from. It utilizes the `extract_comparison_conditions` function from `mindsdb.integrations.utilities.sql_utils` module and the `ast` module from `mindsdb_sql.parser` for query parsing.

## References
- `mindsdb.integrations.libs.api_handler.APITable`
- `mindsdb.integrations.utilities.sql_utils.extract_comparison_conditions`
- `mindsdb_sql.parser.ast`

## Symbols

### `FrappeDocumentsTable`
#### Description
This class handles interactions with the Frappe API for document-related operations, such as selecting, inserting, and retrieving column information.

#### Inputs
This class does not have explicit inputs.

#### Outputs
This class does not have explicit outputs.

#### Internal Logic
The class defines three main methods:
- `select`: This method takes an SQL SELECT query as input, parses it to extract conditions and filters, and calls the Frappe API to retrieve the corresponding documents. It then constructs and returns a pandas DataFrame from the API response.
- `insert`: This method takes an SQL INSERT query as input, extracts the column names and values from the query, and calls the Frappe API to create new documents with the provided data.
- `get_columns`: This method returns a list of columns to be included in pandas DataFrame responses, which are 'doctype' and 'data' in this case.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pandas | Used for creating and manipulating DataFrames. |
| mindsdb.integrations.libs.api_handler | Provides the base `APITable` class. |
| mindsdb.integrations.utilities.sql_utils | Provides utility functions for SQL query parsing. |
| mindsdb_sql.parser | Provides tools for parsing SQL queries. |
