---
title: "test_altibase_handler.py"
---

## High-level description
This code defines a unit test class `AltibaseHandlerTest` for testing the functionality of the `AltibaseHandler` class. It includes tests for connecting to an Altibase database, performing various SQL operations, and checking the handler's methods.

## Code Structure
The `AltibaseHandlerTest` class inherits from `unittest.TestCase` and contains multiple test methods that sequentially test different aspects of the `AltibaseHandler`. The tests are designed to be run in a specific order, as indicated by their numeric prefixes.

## References
- `mindsdb.integrations.handlers.altibase_handler.altibase_handler.AltibaseHandler`
- `mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE`

## Symbols

### AltibaseHandlerTest
#### Description
A test class for the AltibaseHandler, containing methods to test various functionalities of the handler.

#### Internal Logic
1. Sets up a connection to an Altibase database in the `setUpClass` method.
2. Runs a series of tests to verify the handler's functionality, including:
   - Connecting to the database
   - Dropping a table
   - Creating a table
   - Inserting data
   - Selecting data
   - Checking the connection
   - Getting tables and columns
   - Disconnecting from the database

### test_0_connect
#### Description
Tests the connection to the Altibase database.

#### Internal Logic
Calls the `connect` method of the handler and asserts that it returns `True`.

### test_1_drop_table
#### Description
Tests dropping a table from the database.

#### Internal Logic
Executes a DROP TABLE query and asserts that the response type is `RESPONSE_TYPE.OK`.

### test_2_create_table
#### Description
Tests creating a new table in the database.

#### Internal Logic
Executes a CREATE TABLE query and asserts that the response type is `RESPONSE_TYPE.OK`.

### test_3_insert
#### Description
Tests inserting data into the created table.

#### Internal Logic
Executes an INSERT query with multiple values and asserts that the response type is `RESPONSE_TYPE.OK`.

### test_4_select
#### Description
Tests selecting data from the table.

#### Internal Logic
Executes a SELECT query and asserts that the response type is `RESPONSE_TYPE.TABLE`.

### test_5_check_connection
#### Description
Tests the `check_connection` method of the handler.

#### Internal Logic
Calls the `check_connection` method and asserts that it returns `True`.

### test_6_get_tables
#### Description
Tests retrieving the list of tables from the database.

#### Internal Logic
Calls the `get_tables` method and asserts that the response type is `RESPONSE_TYPE.TABLE`.

### test_7_get_columns
#### Description
Tests retrieving the columns of a specific table.

#### Internal Logic
Calls the `get_columns` method with the table name "TEST_TABLE" and asserts that the response type is `RESPONSE_TYPE.TABLE`.

### test_8_disconnect
#### Description
Tests disconnecting from the database.

#### Internal Logic
Calls the `disconnect` method of the handler and asserts that it returns `True`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.altibase_handler.altibase_handler | Contains the AltibaseHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Defines the RESPONSE_TYPE enum used in assertions |

## Configuration
The test class uses the following configuration for connecting to the Altibase database:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| host | str | "127.0.0.1" | The host address of the Altibase server |
| port | int | 20300 | The port number for the Altibase server |
| database | str | "mydb" | The name of the database to connect to |
| user | str | "sys" | The username for authentication |
| password | str | "manager" | The password for authentication |

## Error Handling
The test methods use assertions to check for expected outcomes. If any assertion fails, the test will raise an `AssertionError`.

## TODOs
- The comment "Not supported 'IF EXISTS' syntax" in the `test_1_drop_table` method suggests that the Altibase database might not support the 'IF EXISTS' clause in DROP TABLE statements. This could be a point for future improvement or handling in the AltibaseHandler.