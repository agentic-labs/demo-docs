---
title: "Overview"
---

## High-level description
This directory contains the implementation of the Twelve Labs handler for MindsDB, which provides an interface to interact with the Twelve Labs API for video indexing, search, and summarization tasks. The handler allows users to create ML engines, create models for different tasks, and make predictions using these models.

## What does it do?
The Twelve Labs handler enables MindsDB to:
1. Create ML engines that connect to the Twelve Labs API.
2. Create models for video indexing, search, and summarization tasks.
3. Index videos from URLs or local files.
4. Perform video searches based on text queries.
5. Generate video summaries, chapters, or highlights.
6. Retrieve information about indexed videos.

Users can interact with the Twelve Labs API through SQL-like queries in MindsDB, making it easy to integrate video analysis capabilities into their workflows.

## Entry points
The main entry point for the Twelve Labs handler is the `TwelveLabsHandler` class in `twelve_labs_handler.py`. This class implements the MindsDB interface for interacting with the Twelve Labs API and handles the creation, prediction, and description of models.

The workflow typically follows these steps:
1. Create an ML engine using the `CREATE ML_ENGINE` SQL statement.
2. Create a model using the `CREATE MODEL` SQL statement, specifying the task (search or summarization) and other parameters.
3. Make predictions using the `SELECT` SQL statement on the created model.

## Key Files
1. `twelve_labs_handler.py`: Contains the `TwelveLabsHandler` class, which is the main implementation of the handler. It manages the creation of models, prediction tasks, and interaction with the Twelve Labs API.

2. `twelve_labs_api_client.py`: Implements the `TwelveLabsAPIClient` class, which handles direct communication with the Twelve Labs API. It encapsulates methods for creating indexes, indexing videos, performing searches, and generating summaries.

3. `settings.py`: Defines the `TwelveLabsHandlerModel` and `TwelveLabsHandlerConfig` classes using Pydantic. These classes handle parameter validation and default configurations for the handler.

4. `__init__.py`: Exports the handler information and makes the `TwelveLabsHandler` class available for use in MindsDB.

5. `README.md`: Provides documentation on how to use the Twelve Labs handler, including examples of creating ML engines, models, and making predictions.

## Dependencies
The Twelve Labs handler relies on the following main external libraries:
- `requests`: For making HTTP requests to the Twelve Labs API.
- `requests_toolbelt`: For handling multipart form data in file uploads.
- `pandas`: For data manipulation and creating DataFrames for prediction results.
- `pydantic`: For data validation and settings management.

Internal dependencies include various MindsDB utilities and base classes for integration handlers.

## Configuration
The handler uses the following configuration options:
- `BASE_URL`: The base URL for the Twelve Labs API (default: "https://api.twelvelabs.io/v1.2").
- `DEFAULT_ENGINE`: The default engine ID for Twelve Labs (default: "marengo2.6").
- `DEFAULT_WAIT_DURATION`: The default wait duration in seconds when polling video indexing tasks (default: 5).

These configurations are defined in the `TwelveLabsHandlerConfig` class in `settings.py`.

The handler supports various parameters for creating models, including:
- `task`: The task to perform (search or summarization).
- `engine_id`: The ID of the Twelve Labs engine to use.
- `index_name`: The name of the index to use or create.
- `index_options`: Types of information to process within the video.
- `video_urls` or `video_files`: Sources of videos to index.
- `search_options`: Sources of information to use when performing a search.
- `summarization_type`: The type of summarization to perform.

These parameters are validated using the `TwelveLabsHandlerModel` class in `settings.py`.