---
title: "google_search_tables.py"
---

## High-level description
This code defines two table classes, `SearchAnalyticsTable` and `SiteMapsTable`, for handling Google Search Console data. These classes provide methods to select, insert, and delete data from the Google Search Console API, interpreting SQL-like queries and translating them into API calls.

## Code Structure
The file contains two main classes: `SearchAnalyticsTable` and `SiteMapsTable`, both inheriting from `APITable`. Each class implements methods to interact with different aspects of the Google Search Console API, such as retrieving search analytics data and managing sitemaps.

## Symbols

### SearchAnalyticsTable
#### Description
This class handles interactions with the Google Search Console Search Analytics data.

#### Methods

##### select
###### Description
Retrieves traffic data from the Search Console based on the provided SQL-like query.

###### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ast.Select | SQL query to parse |

###### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| traffic_data | DataFrame | Pandas DataFrame containing the retrieved traffic data |

###### Internal Logic
1. Parses the query conditions and extracts relevant parameters.
2. Handles date parsing for 'startDate' and 'endDate'.
3. Processes 'group_by' and 'order_by' clauses.
4. Calls the API to get traffic data.
5. Formats the response into a Pandas DataFrame.

##### get_columns
###### Description
Returns the list of columns for the SearchAnalyticsTable.

###### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| columns | list | List of column names |

### SiteMapsTable
#### Description
This class handles interactions with the Google Search Console Sitemaps data.

#### Methods

##### select
###### Description
Retrieves sitemap data from the Search Console based on the provided SQL-like query.

###### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ast.Select | SQL query to parse |

###### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| sitemaps | DataFrame | Pandas DataFrame containing the retrieved sitemap data |

##### insert
###### Description
Submits a sitemap for a site.

###### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ast.Insert | SQL query to parse |

##### delete
###### Description
Deletes a sitemap for a site.

###### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ast.Delete | SQL query to parse |

##### get_columns
###### Description
Returns the list of columns for the SiteMapsTable.

###### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| columns | list | List of column names |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pandas | Data manipulation and analysis |
| mindsdb_sql.parser | SQL query parsing |
| mindsdb.integrations.libs.api_handler | Base APITable class |
| mindsdb.integrations.libs.response | Response handling |
| mindsdb.integrations.utilities.date_utils | Date parsing utilities |
| mindsdb.integrations.utilities.sql_utils | SQL utility functions |

## Error Handling
The code implements basic error handling by raising `NotImplementedError` for unsupported operations or parameters. It also uses `ValueError` for unknown query targets.

## API/Interface Reference
The classes in this file are designed to work with SQL-like queries, translating them into Google Search Console API calls. The main interfaces are the `select`, `insert`, and `delete` methods of each table class, which accept AST representations of SQL queries.