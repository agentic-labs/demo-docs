---
title: "test_cloud_sql_mysql_handler.py"
---

## High-level description
The `test_cloud_sql_mysql_handler.py` file contains unit tests for the `CloudSQLHandler` class, specifically focusing on its interaction with a MySQL database instance on Google Cloud SQL. These tests cover connection validation, query execution, and schema retrieval.

## Code Structure
The code defines a single test class, `CloudSQLMySQLHandlerTest`, which houses multiple test methods. Each test method targets a specific functionality of the `CloudSQLHandler` when used with a MySQL database.

## References
This code references the following symbols from other modules:
- `mindsdb.integrations.handlers.cloud_sql_handler.cloud_sql_handler.CloudSQLHandler`
- `mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE`

## Symbols

### `CloudSQLMySQLHandlerTest`
#### Description
This class contains unit tests for the `CloudSQLHandler` class, specifically for MySQL interactions.

#### Inputs
This class doesn't have explicit inputs. It uses the `setUpClass` method to initialize shared resources for testing.

#### Outputs
This class doesn't return any values. It's used for running test cases.

#### Internal Logic
The class initializes a `CloudSQLHandler` instance with connection parameters pointing to a MySQL database. Each test method then interacts with this handler, asserting expected behaviors and responses.

### `test_0_check_connection`
#### Description
This test method verifies the connection to the MySQL database using the `check_connection` method of the `CloudSQLHandler`.

#### Inputs
This method doesn't have explicit inputs. It uses the `self.handler` initialized in `setUpClass`.

#### Outputs
This method doesn't return any values. It asserts that the `check_connection` call returns True.

#### Internal Logic
- It calls the `check_connection` method of the `self.handler` (CloudSQLHandler instance).
- It asserts that the result of the call is True, indicating a successful connection.

### `test_1_native_query_select`
#### Description
This test method executes a simple SELECT query against the MySQL database using the `native_query` method of the `CloudSQLHandler`.

#### Inputs
This method doesn't have explicit inputs. It uses the `self.handler` initialized in `setUpClass`.

#### Outputs
This method doesn't return any values. It asserts that the query execution returns a TABLE response type.

#### Internal Logic
- It defines a simple SELECT query.
- It calls the `native_query` method of the `self.handler` with the defined query.
- It asserts that the `type` attribute of the result is `RESPONSE_TYPE.TABLE`, indicating a successful query execution returning tabular data.

### `test_2_get_tables`
#### Description
This test method retrieves the list of tables from the MySQL database using the `get_tables` method of the `CloudSQLHandler`.

#### Inputs
This method doesn't have explicit inputs. It uses the `self.handler` initialized in `setUpClass`.

#### Outputs
This method doesn't return any values. It asserts that the retrieved table list is not an error response.

#### Internal Logic
- It calls the `get_tables` method of the `self.handler`.
- It asserts that the `type` attribute of the result is not `RESPONSE_TYPE.ERROR`, indicating a successful retrieval of table information.

### `test_3_get_columns`
#### Description
This test method retrieves the columns of a specific table ('person') from the MySQL database using the `get_columns` method of the `CloudSQLHandler`.

#### Inputs
This method doesn't have explicit inputs. It uses the `self.handler` initialized in `setUpClass`.

#### Outputs
This method doesn't return any values. It asserts that the retrieved column list is not an error response.

#### Internal Logic
- It calls the `get_columns` method of the `self.handler`, passing 'person' as the table name.
- It asserts that the `type` attribute of the result is not `RESPONSE_TYPE.ERROR`, indicating a successful retrieval of column information for the specified table.


## Dependencies
This code depends on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the framework for writing and running the unit tests. |
| mindsdb.integrations.handlers.cloud_sql_handler.cloud_sql_handler | Provides the `CloudSQLHandler` class, which is the subject of these tests. |
| mindsdb.api.executor.data_types.response_type | Provides the `RESPONSE_TYPE` enum, used for checking the type of responses from the handler. |
