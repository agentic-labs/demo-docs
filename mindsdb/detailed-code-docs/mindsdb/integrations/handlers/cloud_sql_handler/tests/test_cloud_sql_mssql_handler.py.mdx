---
title: "test_cloud_sql_mssql_handler.py"
---

## High-level description
This file contains unit tests for the `CloudSQLMSSQLHandler` class, which is responsible for connecting to and interacting with a Cloud SQL instance running Microsoft SQL Server. The tests cover connecting to the database, executing queries, and retrieving schema information.

## Code Structure
The code defines a single test class `CloudSQLMSSQLHandlerTest` that inherits from `unittest.TestCase`. This class contains several test methods, each testing a specific functionality of the `CloudSQLMSSQLHandler` class. The test methods are named according to the functionality they test and are executed in a specific order defined by their numerical prefixes.

## References
- `mindsdb.integrations.handlers.cloud_sql_handler.cloud_sql_handler.CloudSQLHandler`: This is the class being tested, responsible for handling Cloud SQL connections.
- `mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE`: This enum defines the types of responses returned by the handler.

## Symbols

### `CloudSQLMSSQLHandlerTest`
#### Description
This class contains unit tests for the `CloudSQLMSSQLHandler` class, specifically targeting a Microsoft SQL Server instance.

#### Inputs
This class doesn't have explicit inputs. It uses the `setUpClass` method to initialize the `CloudSQLHandler` with predefined connection parameters.

#### Outputs
This class doesn't return any values. It uses the `assert` statements within its test methods to verify the expected behavior of the `CloudSQLMSSQLHandler`.

#### Internal Logic
This class defines several test methods, each testing a specific aspect of the `CloudSQLMSSQLHandler`:

- `test_0_check_connection`: Tests the connection to the Cloud SQL instance using `check_connection` and asserts that the connection is successful.
- `test_1_native_query_select`: Executes a simple SELECT query using `native_query` and asserts that the response type is `RESPONSE_TYPE.TABLE`.
- `test_2_get_tables`: Retrieves the list of tables using `get_tables` and asserts that the response type is not an error (`RESPONSE_TYPE.ERROR`).
- `test_3_get_columns`: Fetches the columns of the 'person' table using `get_columns` and asserts that the response type is not an error (`RESPONSE_TYPE.ERROR`).

## Dependencies
- `unittest`: This standard library module provides the framework for writing and running the tests.
- `mindsdb.integrations.handlers.cloud_sql_handler.cloud_sql_handler.CloudSQLHandler`: This is the class being tested.
- `mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE`: This enum is used to verify the response types from the handler.
