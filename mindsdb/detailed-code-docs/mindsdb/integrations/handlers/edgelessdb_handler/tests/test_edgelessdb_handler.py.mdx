---
title: "test_edgelessdb_handler.py"
---

## High-level description
This code defines a unit test suite for the EdgelessDBHandler class, which is responsible for handling connections and executing statements for EdgelessDB. The test suite covers various operations such as connecting to the database, creating tables, inserting data, querying data, and checking database metadata.

## Code Structure
The code defines a single class `EdgelessDBHandlerTest` that inherits from `unittest.TestCase`. It contains multiple test methods that sequentially test different functionalities of the EdgelessDBHandler.

## Symbols

### EdgelessDBHandlerTest
#### Description
This class is a test suite for the EdgelessDBHandler. It sets up a test environment, executes various database operations, and verifies the results.

#### Internal Logic
1. Sets up a test environment with connection data in `setUpClass`.
2. Executes a series of tests that perform database operations and check their results.
3. Tests include connecting, creating tables, inserting data, querying data, and retrieving metadata.

### test_0_connect
#### Description
Tests the connection to the EdgelessDB database.

#### Internal Logic
Calls the `connect` method of the handler and asserts that it returns True.

### test_1_drop_table
#### Description
Tests dropping a table if it exists.

#### Internal Logic
Executes a DROP TABLE query and asserts that the response type is OK.

### test_2_create_table
#### Description
Tests creating a new table.

#### Internal Logic
Executes a CREATE TABLE query and asserts that the response type is OK.

### test_3_insert
#### Description
Tests inserting data into the created table.

#### Internal Logic
Executes an INSERT query with multiple values and asserts that the response type is OK.

### test_4_select
#### Description
Tests selecting data from the table.

#### Internal Logic
Executes a SELECT query and asserts that the response type is TABLE.

### test_5_check_connection
#### Description
Tests the check_connection method of the handler.

#### Internal Logic
Calls the `check_connection` method and asserts that it returns True.

### test_6_get_tables
#### Description
Tests retrieving the list of tables from the database.

#### Internal Logic
Calls the `get_tables` method and asserts that the response type is TABLE.

### test_7_get_columns
#### Description
Tests retrieving the columns of a specific table.

#### Internal Logic
Calls the `get_columns` method with "TEST_TABLE" as an argument and asserts that the response type is TABLE.

### test_8_disconnect
#### Description
Tests disconnecting from the database.

#### Internal Logic
Calls the `disconnect` method and asserts that it returns True.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.edgelessdb_handler.edgelessdb_handler | Contains the EdgelessDBHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Provides the RESPONSE_TYPE enum for checking query results |

## Error Handling
The test suite uses assertions to verify the expected behavior of the EdgelessDBHandler methods. If any assertion fails, the test will raise an AssertionError, indicating a failure in the tested functionality.

## Notes
1. The tests are numbered to ensure they run in a specific order, which is important for the logical flow of creating, populating, and querying the test table.
2. The test suite assumes that the EdgelessDBHandler is correctly implemented and that a EdgelessDB instance is available at the specified host and port.
3. The test database and table are hardcoded, which might need to be adjusted if running in different environments.
4. The test suite does not include cleanup operations (e.g., dropping the test table after all tests), which might be considered for a more comprehensive test suite.