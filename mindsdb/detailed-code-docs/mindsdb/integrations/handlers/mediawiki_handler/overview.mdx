---
title: "Overview"
---

## High-level description
This directory contains the implementation of the MediaWiki handler for MindsDB. The handler provides an interface to connect to the MediaWiki API and retrieve data from MediaWiki sites. It allows users to query MediaWiki pages as if they were a database table, supporting SQL-like operations such as SELECT with WHERE clauses, ORDER BY, and LIMIT.

## What does it do?
The MediaWiki handler enables MindsDB to interact with MediaWiki sites, such as Wikipedia, as if they were databases. It allows users to:

1. Connect to a MediaWiki site using the MediaWiki API.
2. Query pages from the MediaWiki site using SQL-like syntax.
3. Retrieve page information including ID, title, content, summary, URL, and categories.
4. Filter pages based on title or page ID.
5. Order and limit the results of queries.

This functionality allows data analysts and developers to easily integrate MediaWiki data into their MindsDB workflows, treating MediaWiki content as a queryable data source.

## Key Files

### mediawiki_handler.py
This file contains the `MediaWikiHandler` class, which is the main entry point for the MediaWiki integration. It handles:
- Establishing and checking connections to the MediaWiki API.
- Processing and executing queries.
- Registering the `PagesTable` for handling page-related data.

Key methods include:
- `connect()`: Establishes a connection to the MediaWiki API.
- `check_connection()`: Verifies the connection status.
- `native_query()`: Processes raw SQL queries by parsing and executing them.

### mediawiki_tables.py
This file implements the `PagesTable` class, which is responsible for handling MediaWiki page data. It provides the following functionality:
- Selecting and retrieving page information based on SQL-like queries.
- Supporting filtering by title or page ID.
- Returning query results as a pandas DataFrame.

Key methods include:
- `select()`: Executes SELECT queries on MediaWiki page data.
- `get_pages()`: Retrieves pages from MediaWiki based on given criteria.
- `convert_page_to_dict()`: Converts MediaWiki page objects to dictionaries.

## Dependencies
The MediaWiki handler relies on the following main dependencies:
- `mediawikiapi`: A Python wrapper for the MediaWiki API, used for interacting with MediaWiki sites.
- `mindsdb_sql`: Used for parsing SQL queries.
- `pandas`: Used for data manipulation and creating DataFrames from query results.

## Configuration
The MediaWiki handler does not require specific configuration parameters to be initialized. However, users need to create a database with the 'mediawiki' engine before using the handler:

```sql
CREATE DATABASE mediawiki_datasource
WITH ENGINE = 'mediawiki'
```

## Example Usage
After setting up the MediaWiki database, users can query MediaWiki pages using SQL-like syntax:

```sql
SELECT * 
FROM mediawiki_datasource.pages
WHERE title = 'Barack'
ORDER BY pageid
LIMIT 5
```

This query would return up to 5 pages with 'Barack' in the title, ordered by their page ID.

## Limitations
- The handler currently only supports SELECT operations on pages.
- Only page ID, title, original title, content, summary, URL, and categories are returned for each page.
- The WHERE clause only supports filtering by page ID and title.
- If no WHERE clause is specified, the handler returns 20 random pages.

Future improvements could include support for INSERT, UPDATE, and DELETE operations, as well as expanding the available columns and filter options for queries.