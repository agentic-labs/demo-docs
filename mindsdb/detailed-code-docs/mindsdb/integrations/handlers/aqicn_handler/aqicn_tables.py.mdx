---
title: "aqicn_tables.py"
---

## High-level description
This code defines several API table classes for handling air quality data from the AQICN (Air Quality Index China) API. It provides functionality to query air quality data based on user location, city, latitude/longitude, and network station name.

## Code Structure
The code defines four main classes: `AQByUserLocationTable`, `AQByCityTable`, `AQByLatLngTable`, and `AQByNetworkStationTable`. Each class inherits from `APITable` and implements methods to select data from the AQICN API based on different parameters.

## Symbols

### `AQByUserLocationTable`
#### Description
This class handles air quality data based on the user's location.

#### Methods
##### `select(query: ast.Select) -&gt; pd.DataFrame`
Pulls data from the AQICN API for the user's location.

##### `check_res(res)`
Checks the response from the API and raises an exception if there's an error.

##### `get_columns() -&gt; List[str]`
Returns a list of column names for the air quality data.

### `AQByCityTable`
#### Description
This class handles air quality data for a specific city.

#### Methods
##### `select(query: ast.Select) -&gt; pd.DataFrame`
Pulls data from the AQICN API for a specified city.

##### `check_res(res)`
Checks the response from the API and raises an exception if there's an error.

##### `get_columns() -&gt; List[str]`
Returns a list of column names for the air quality data.

### `AQByLatLngTable`
#### Description
This class handles air quality data for a specific latitude and longitude.

#### Methods
##### `select(query: ast.Select) -&gt; pd.DataFrame`
Pulls data from the AQICN API for specified latitude and longitude.

##### `check_res(res)`
Checks the response from the API and raises an exception if there's an error.

##### `get_columns() -&gt; List[str]`
Returns a list of column names for the air quality data.

### `AQByNetworkStationTable`
#### Description
This class handles air quality data for a specific network station.

#### Methods
##### `select(query: ast.Select) -&gt; pd.DataFrame`
Pulls data from the AQICN API for a specified network station name.

##### `check_res(res)`
Checks the response from the API and raises an exception if there's an error.

##### `get_columns() -&gt; List[str]`
Returns a list of column names for the air quality data.

## Dependencies
- pandas
- mindsdb_sql
- mindsdb.integrations.libs.api_handler
- mindsdb.integrations.utilities.handlers.query_utilities
- mindsdb.utilities

## Error Handling
Each class implements a `check_res` method to handle API response errors. If the response code is not 200, an exception is raised with the error message from the API.

## Performance Considerations
The code uses pandas for data manipulation, which can be memory-intensive for large datasets. Consider optimizing data processing for large result sets if needed.