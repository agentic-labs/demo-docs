---
title: "test_google_calendar_handler.py"
---

## High-level description
This code defines a unit test class `GoogleCalendarHandlerTest` for testing the functionality of the `GoogleCalendarHandler` class. It includes tests for various operations such as checking connection, getting tables, executing select queries, inserting, updating, and deleting events in Google Calendar.

## Code Structure
The `GoogleCalendarHandlerTest` class inherits from `unittest.TestCase` and contains several test methods, each testing a specific functionality of the `GoogleCalendarHandler`. The tests are designed to be run sequentially, as indicated by the numbering in the method names.

## Symbols

### `GoogleCalendarHandlerTest`
#### Description
This class is a test suite for the `GoogleCalendarHandler` class, containing methods to test various functionalities of the handler.

#### Internal Logic
- In `setUpClass`, it initializes a `GoogleCalendarHandler` instance with test credentials.
- Each test method checks a specific functionality of the handler, asserting that the operations do not result in errors.

### `test_0_check_connection`
#### Description
Tests the connection to the Google Calendar API.

#### Internal Logic
Asserts that the `check_connection` method of the handler returns a truthy value.

### `test_1_get_tables`
#### Description
Tests the retrieval of tables from the Google Calendar API.

#### Internal Logic
Calls the `get_tables` method and asserts that the response type is not an error.

### `test_2_select_query`
#### Description
Tests the execution of a SELECT query on the calendar events.

#### Internal Logic
Executes a native query to select the summary of an event with ID 1 and asserts that the response type is a table.

### `test_3_get_columns`
#### Description
Tests the retrieval of columns for a specific table.

#### Internal Logic
Calls the `get_columns` method for the 'id' table and asserts that the response type is not an error.

### `test_4_insert`
#### Description
Tests the insertion of a new event into the calendar.

#### Internal Logic
Executes a native query to insert a new event and asserts that the response type is not an error.

### `test_5_update`
#### Description
Tests the updating of an existing event in the calendar.

#### Internal Logic
Executes a native query to update the summary of the event with ID 100 and asserts that the response type is not an error.

### `test_6_delete`
#### Description
Tests the deletion of a single event from the calendar.

#### Internal Logic
Executes a native query to delete the event with ID 100 and asserts that the response type is not an error.

### `test_7_delete_multiple`
#### Description
Tests the deletion of multiple events from the calendar.

#### Internal Logic
Executes a native query to delete events with IDs between 1 and 20 and asserts that the response type is not an error.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.google_calendar_handler.google_calendar_handler | Contains the GoogleCalendarHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Provides the RESPONSE_TYPE enum for checking response types |

## Configuration
The test suite uses a configuration dictionary `kwargs` with the following structure:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| connection_data | dict | - | Contains the path to the credentials file |
| credentials | str | file path | Path to the Google Calendar API credentials file |

## Notes
1. The tests assume that the Google Calendar API credentials are valid and located at the specified path.
2. The tests are designed to run sequentially, as later tests may depend on the actions of earlier tests.
3. The test data (e.g., event IDs) is hardcoded and may need to be adjusted based on the actual data in the connected Google Calendar.
4. Error handling is minimal, with tests primarily checking that operations do not result in error responses.
5. The tests do not verify the actual content of the responses beyond checking the response type, which may limit the thoroughness of the testing.

This test suite provides a basic framework for testing the `GoogleCalendarHandler`, but could be expanded to include more detailed assertions and error checking for a more comprehensive test coverage.