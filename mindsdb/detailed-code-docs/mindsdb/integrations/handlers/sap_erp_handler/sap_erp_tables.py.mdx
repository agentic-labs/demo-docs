---
title: "sap_erp_tables.py"
---

## High-level description
This code defines a set of custom API tables for interacting with SAP ERP data. It provides a structured way to query and manipulate various business partner-related data entities through a unified interface. The code leverages the MindsDB framework to create a handler for SAP ERP integration.

## Code Structure
The code defines multiple `CustomAPITable` subclasses, each representing a specific SAP ERP data entity. These tables inherit from a base `APITable` class and implement methods for selecting data. The `SAPERPHandler` class acts as the main handler, registering all the custom tables and managing the connection to the SAP ERP system.

## Symbols

### CustomAPITable
#### Description
A base class for all custom SAP ERP tables, providing common functionality for data selection and query parsing.

#### Internal Logic
- Initializes a connection to the SAP ERP system
- Implements methods for parsing and executing SELECT queries
- Applies query parameters to filter and format the retrieved data

### Specific Table Classes (e.g., AddressEmailAddressTable, CustomerTable, etc.)
#### Description
Individual classes representing different SAP ERP data entities, each with its own set of columns and data retrieval logic.

#### Internal Logic
- Defines the table name and columns specific to each entity
- Implements a `select` method to retrieve data from the corresponding SAP ERP API endpoint
- Applies query parameters to filter and format the retrieved data

### SAPERPHandler
#### Description
The main handler class for the SAP ERP integration, managing connections and table registrations.

#### Internal Logic
- Initializes the connection to the SAP ERP system
- Registers all the custom table classes
- Implements methods for checking connections and executing native queries

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pandas | Data manipulation and analysis |
| mindsdb_sql | SQL parsing and query handling |
| mindsdb.integrations.utilities.handlers.query_utilities | Query parsing and execution utilities |
| mindsdb.integrations.libs.api_handler | Base classes for API handling |
| mindsdb.integrations.utilities.sql_utils | SQL utility functions |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| api_key | str | None | API Token for accessing SAP ERP |
| base_url | str | None | Base URL of the SAP ERP host |

## Error Handling
The code implements basic error handling, primarily through raising exceptions for unimplemented methods or when required parameters are missing.

## API/Interface Reference
The main interface is provided through the `SAPERPHandler` class, which allows for:
- Connecting to the SAP ERP system
- Executing queries on various SAP ERP data entities
- Checking connection status

Each custom table class provides a `select` method for querying data specific to that entity.