---
title: "sap_erp_handler.py"
---

## High-level description
This code defines the `SAPERPHandler` class, which is an API handler for interacting with SAP ERP systems. It provides functionality to connect to SAP ERP, register various tables, and execute queries against those tables.

## Code Structure
The `SAPERPHandler` class inherits from `APIHandler` and initializes a connection to SAP ERP. It registers multiple table classes, each representing a different entity in the SAP ERP system. The handler also defines methods for checking connections, connecting to the API, and executing native queries.

## Symbols

### SAPERPHandler
#### Description
This class serves as the main handler for interacting with SAP ERP systems. It initializes the connection and registers various tables for querying.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The name of the handler |
| **kwargs | dict | Additional keyword arguments including connection data |

#### Internal Logic
1. Initializes the connection with API key and base URL from the provided connection data.
2. Registers multiple table classes, each representing a different SAP ERP entity.
3. Establishes a connection to the SAP ERP system.

### check_connection
#### Description
Checks if the connection to the SAP ERP system is established and valid.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| resp | StatusResponse | A response object indicating the success or failure of the connection check |

### connect
#### Description
Establishes a connection to the SAP ERP system using the provided API key and base URL.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | SAPERP | An instance of the SAPERP connection |

### native_query
#### Description
Executes a native SQL query against the SAP ERP system.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | The SQL query to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | The result of the query execution |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| mindsdb_sql | For parsing SQL queries |
| mindsdb.integrations.libs.const | For handler connection argument types |
| mindsdb.integrations.handlers.sap_erp_handler.api | For the SAPERP API client |
| mindsdb.integrations.handlers.sap_erp_handler.sap_erp_tables | For various SAP ERP table classes |
| mindsdb.integrations.libs.api_handler | For the base APIHandler class |
| mindsdb.integrations.libs.response | For the HandlerStatusResponse class |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| api_key | str | None | API Token for accessing SAP ERP |
| base_url | str | None | Base URL of the SAP ERP host |

## API/Interface Reference
This handler doesn't explicitly define an API but provides methods to interact with SAP ERP:
| Method | Description |
|:-------|:------------|
| check_connection | Checks the connection status |
| connect | Establishes a connection to SAP ERP |
| native_query | Executes a native SQL query |

The handler also registers multiple table classes, each representing a different SAP ERP entity, which can be queried using SQL.