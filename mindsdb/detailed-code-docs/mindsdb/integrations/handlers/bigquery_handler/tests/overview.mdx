---
title: "Overview"
---

## High-level description
This directory contains test files for the BigQuery handler in MindsDB. It includes a SQL seed file for setting up test data and a Python file with unit tests for the BigQueryHandler class. The tests cover various functionalities such as connecting to BigQuery, retrieving tables and columns, executing queries, and performing table operations.

## What does it do?
The test suite in this directory ensures that the BigQuery handler in MindsDB works correctly. It sets up a test environment by creating a schema and table with sample data in BigQuery. Then, it runs a series of tests to verify that the handler can:

1. Connect to BigQuery successfully
2. Retrieve tables and their column information
3. Execute queries and return results correctly
4. Create and delete tables
5. Handle various edge cases and error conditions

These tests help maintain the reliability and functionality of the BigQuery integration in MindsDB, ensuring that users can interact with BigQuery data sources effectively through the MindsDB platform.

## Key Files

1. `seed.sql`:
   - Purpose: Sets up the test environment in BigQuery
   - Content: SQL statements to create a schema, table, and insert sample data
   - Importance: Provides a consistent starting point for all tests

2. `test_bigquery_handler.py`:
   - Purpose: Contains unit tests for the BigQueryHandler class
   - Content: Multiple test classes and utility functions to test various aspects of the handler
   - Importance: Ensures the correct functionality of the BigQuery integration in MindsDB

## Dependencies
The test suite relies on the following external libraries and frameworks:

1. pytest (version not specified): Used as the testing framework
   - Chosen for its simplicity and powerful features for writing and organizing tests

2. pandas (version not specified): Used for data manipulation and analysis
   - Chosen for its powerful data structures and operations for manipulating numerical tables and time series

3. google.cloud.bigquery (version not specified): Google BigQuery client library
   - Essential for interacting with BigQuery services

4. mindsdb.integrations.handlers.bigquery_handler.bigquery_handler: Contains the BigQueryHandler class being tested

5. mindsdb.integrations.utilities.handlers.auth_utilities: Provides authentication utilities for BigQuery

6. mindsdb.integrations.libs.response: Offers response handling utilities for MindsDB integrations

## Configuration
The tests use a configuration dictionary `HANDLER_KWARGS` with the following fields:

```python
HANDLER_KWARGS = {
    "project_id": "your_project_id",
    "dataset": "your_dataset",
    "service_account_json": "path/to/your/service_account.json"
}
```

These configuration options are essential for connecting to the BigQuery service and specifying the target dataset for testing.

Additionally, the tests use environment variables for sensitive information:

- `BIGQUERY_PROJECT_ID`: The Google Cloud project ID
- `BIGQUERY_DATASET`: The BigQuery dataset name
- `BIGQUERY_SERVICE_ACCOUNT_JSON`: Path to the service account JSON file for authentication

It's important to set these environment variables correctly before running the tests to ensure proper authentication and access to the BigQuery resources.

The `seed.sql` file also contains configuration in the form of SQL statements:

```sql
DROP SCHEMA IF EXISTS MDB_DB_HANDLER_TEST;
CREATE SCHEMA IF NOT EXISTS MDB_DB_HANDLER_TEST;
CREATE TABLE IF NOT EXISTS MDB_DB_HANDLER_TEST.TEST (
    COL_ONE INT64,
    COL_TWO INT64,
    COL_THREE FLOAT64,
    COL_FOUR STRING
);
```

This configuration sets up the test schema and table structure in BigQuery, providing a consistent environment for all tests.

In summary, this test directory provides a comprehensive suite of tests for the BigQuery handler in MindsDB, ensuring its reliability and correct functionality across various operations and scenarios.