---
title: "Overview"
---

## High-level description
This directory contains unit tests for the DruidHandler class, which is responsible for interacting with Apache Druid databases in the MindsDB integration framework. The tests are designed to verify the functionality of various methods provided by the DruidHandler, ensuring that it can properly connect to a Druid database, execute queries, and retrieve schema information.

## What does it do?
The test suite in this directory performs the following tasks:

1. Checks if the DruidHandler can successfully establish a connection to a Druid database.
2. Verifies that the handler can execute a native SELECT query on a Druid table.
3. Tests the ability to retrieve a list of tables from the Druid database.
4. Ensures that the handler can fetch column information for a specific table in the database.

These tests help ensure that the DruidHandler functions correctly and can interact with a Druid database as expected, which is crucial for the overall functionality of the MindsDB integration with Apache Druid.

## Key Files
The main file in this directory is:

### test_druid_handler.py
This file contains the `DruidHandlerTest` class, which is a subclass of `unittest.TestCase`. It defines four test methods:

1. `test_0_check_connection`: Verifies that the DruidHandler can successfully connect to the database.
2. `test_1_native_query_select`: Tests the execution of a native SELECT query on the 'wikipedia' table.
3. `test_2_get_tables`: Checks if the handler can retrieve a list of tables from the database.
4. `test_3_get_columns`: Ensures that the handler can fetch column information for the 'wikipedia' table.

The file also includes a `setUpClass` method that initializes the test environment by creating a DruidHandler instance with test connection parameters.

## Dependencies
The test suite relies on the following dependencies:

1. `unittest`: The Python standard library's testing framework, used as the base for the test class.
2. `mindsdb.integrations.handlers.druid_handler.druid_handler`: Contains the DruidHandler class being tested.
3. `mindsdb.api.executor.data_types.response_type`: Provides the RESPONSE_TYPE enum for asserting response types.

## Configuration
The tests use a hardcoded configuration for connecting to a local Druid instance. The connection parameters are defined in the `setUpClass` method:

```python
kwargs = {
    "connection_data": {
        "host": "127.0.0.1",
        "port": "8082",
        "user": "admin",
        "password": "password",
        "database": "druid"
    }
}
```

These parameters are used to create a DruidHandler instance for testing. In a real-world scenario, these values would typically be replaced with actual connection details for the Druid database being used.

The tests assume the existence of a 'wikipedia' table in the Druid database, which is used in the `test_1_native_query_select` and `test_3_get_columns` methods. If you're running these tests against a different Druid setup, you may need to modify the table name to match an existing table in your database.

Overall, this test suite provides a basic set of checks to ensure the core functionality of the DruidHandler is working as expected, covering connection establishment, query execution, and schema information retrieval.