---
title: "pypi_handler.py"
---

## High-level description
This code defines a PyPIHandler class that serves as an interface for interacting with PyPI (Python Package Index) data. It provides functionality to connect to PyPI, check the connection status, and execute queries on various PyPI-related tables.

## Code Structure
The PyPIHandler class inherits from APIHandler and initializes several table classes. It implements methods for checking connections, connecting to PyPI, and executing native queries.

## References
This code references other parts of the codebase, including:
- `mindsdb_sql.parse_sql`
- `mindsdb.integrations.handlers.pypi_handler.api.PyPI`
- Various table classes from `mindsdb.integrations.handlers.pypi_handler.pypi_tables`
- `mindsdb.integrations.libs.api_handler.APIHandler`
- `mindsdb.integrations.libs.response.HandlerStatusResponse`

## Symbols

### PyPIHandler
#### Description
A handler class for interacting with PyPI data, providing methods to connect, check connection status, and execute queries.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The name of the handler |
| **kwargs | dict | Additional keyword arguments |

#### Internal Logic
1. Initializes the parent APIHandler with the given name.
2. Sets up connection-related attributes.
3. Registers various PyPI-related tables.

### check_connection
#### Description
Checks the connection status to PyPI.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | The status of the connection attempt |

#### Internal Logic
1. Creates a StatusResponse object.
2. Calls PyPI.is_connected() to check the connection.
3. Updates the response based on the connection check result.
4. Sets the is_connected attribute to True.

### connect
#### Description
Establishes a connection to PyPI.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | PyPI | The PyPI connection object |

#### Internal Logic
1. Sets the connection attribute to the PyPI class.
2. Returns the connection object.

### native_query
#### Description
Executes a native query on the PyPI data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | The native query string to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | The result of the query execution |

#### Internal Logic
1. Parses the input query string using parse_sql.
2. Calls the query method with the parsed AST.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| mindsdb_sql | For parsing SQL queries |
| mindsdb.integrations.handlers.pypi_handler.api | For PyPI API interaction |
| mindsdb.integrations.handlers.pypi_handler.pypi_tables | For PyPI-related table definitions |
| mindsdb.integrations.libs.api_handler | For base APIHandler class |
| mindsdb.integrations.libs.response | For HandlerStatusResponse class |

This code provides a structured interface for interacting with PyPI data, allowing for connection management and query execution across various PyPI-related tables. It leverages the PyPI API and custom table implementations to fetch and process package-related information.