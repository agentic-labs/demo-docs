---
title: "notion_table.py"
---

## High-level description
This code defines several table classes for interacting with the Notion API, including NotionDatabaseTable, NotionPagesTable, NotionBlocksTable, and NotionCommentsTable. These classes extend the APITable class and implement methods for selecting, inserting, and retrieving data from Notion's various resources.

## Code Structure
The main classes (NotionDatabaseTable, NotionPagesTable, NotionBlocksTable, NotionCommentsTable) inherit from APITable. They implement select, insert, and get_columns methods specific to their respective Notion resources. The NotionHandler class, which is not shown in this file but is referenced, manages these table classes and handles the API connection.

## Symbols

### NotionDatabaseTable
#### Description
Handles operations related to Notion databases.

#### Methods
1. select
   - Inputs: query (ast.Select)
   - Outputs: pd.DataFrame
   - Description: Executes a SELECT query on Notion databases.

2. insert
   - Inputs: query (ast.Insert)
   - Outputs: None
   - Description: Inserts data into a Notion database.

3. get_columns
   - Outputs: list
   - Description: Returns the column names for Notion databases.

### NotionPagesTable
#### Description
Handles operations related to Notion pages.

#### Methods
1. select
   - Inputs: query (ast.Select)
   - Outputs: pd.DataFrame
   - Description: Executes a SELECT query on Notion pages.

2. insert
   - Inputs: query (ast.Insert)
   - Outputs: None
   - Description: Creates a new Notion page.

3. get_columns
   - Outputs: list
   - Description: Returns the column names for Notion pages.

### NotionBlocksTable
#### Description
Handles operations related to Notion blocks.

#### Methods
1. select
   - Inputs: query (ast.Select)
   - Outputs: pd.DataFrame
   - Description: Executes a SELECT query on Notion blocks.

2. insert
   - Inputs: query (ast.Insert)
   - Outputs: None
   - Description: Appends a new block to an existing Notion block.

3. get_columns
   - Outputs: list
   - Description: Returns the column names for Notion blocks.

### NotionCommentsTable
#### Description
Handles operations related to Notion comments.

#### Methods
1. select
   - Inputs: query (ast.Select)
   - Outputs: pd.DataFrame
   - Description: Executes a SELECT query on Notion comments.

2. get_columns
   - Outputs: list
   - Description: Returns the column names for Notion comments.

## Dependencies
- pandas
- mindsdb_sql.parser
- mindsdb.integrations.libs.api_handler
- mindsdb.integrations.utilities.sql_utils
- mindsdb.utilities (for logging)
- mindsdb.integrations.libs.response

## Error Handling
The code uses try-except blocks and raises NotImplementedError for unsupported operations. It also uses the logging module to log errors and debug information.

## Performance Considerations
The code implements pagination for API requests to handle large datasets efficiently. It also applies filters on the server-side where possible to reduce data transfer.

## TODOs
There are no explicit TODOs in the code.

This code provides a structured way to interact with various Notion resources through SQL-like queries, abstracting the complexities of the Notion API and providing a familiar interface for database operations.