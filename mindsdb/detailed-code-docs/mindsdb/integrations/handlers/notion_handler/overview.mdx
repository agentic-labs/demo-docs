---
title: "Overview"
---

## High-level description
This directory contains the implementation of the Notion handler for MindsDB, which allows integration with the Notion API. The handler provides functionality to connect to Notion, execute queries, and interact with Notion databases, pages, blocks, and comments.

## What does it do?
The Notion handler enables MindsDB to interact with Notion's cloud-based productivity platform. It allows users to:

1. Connect to a Notion workspace using an API token.
2. Query and retrieve data from Notion databases.
3. Fetch and create pages within Notion.
4. Interact with blocks (content elements) in Notion pages.
5. Retrieve comments associated with blocks.
6. Execute native Notion API queries.

The handler translates SQL-like queries into appropriate Notion API calls, allowing users to interact with Notion data using familiar database operations.

## Entry points
The main entry point for the Notion handler is the `NotionHandler` class defined in `notion_handler.py`. This class manages the connection to the Notion API and orchestrates operations on different Notion objects (databases, pages, blocks, and comments) through specialized table classes.

The data flow typically follows this pattern:
1. User issues a SQL query to MindsDB.
2. MindsDB routes the query to the Notion handler.
3. The handler parses the query and determines which Notion object to interact with.
4. The appropriate table class (`NotionDatabaseTable`, `NotionPagesTable`, etc.) processes the query.
5. The table class makes API calls to Notion using the `notion_client` library.
6. Results are formatted and returned to MindsDB, which presents them to the user.

## Key Files
1. `notion_handler.py`: Contains the `NotionHandler` class, which is the main interface for the Notion integration. It handles connection management, query execution, and API calls.

2. `notion_table.py`: Defines specialized table classes for different Notion objects:
   - `NotionDatabaseTable`: Handles operations on Notion databases.
   - `NotionPagesTable`: Manages interactions with Notion pages.
   - `NotionBlocksTable`: Deals with Notion blocks (content elements).
   - `NotionCommentsTable`: Handles retrieval of comments.

3. `__init__.py`: Sets up the handler metadata and handles imports.

4. `__about__.py`: Contains metadata about the Notion handler package.

## Dependencies
The Notion handler relies on the following key external libraries:

1. `notion-client` (version not specified): A Python client for the Notion API, used for making API calls to Notion.
2. `pandas`: Used for data manipulation and creating DataFrames from API responses.
3. `mindsdb_sql`: Utilized for parsing SQL queries into Abstract Syntax Trees (ASTs).

These dependencies were chosen to simplify interaction with the Notion API (`notion-client`), handle data processing (`pandas`), and integrate with MindsDB's SQL parsing capabilities (`mindsdb_sql`).

## Configuration
The Notion handler requires the following configuration:

1. `api_token`: The API token for accessing the Notion workspace. This is the primary authentication method.

Users can set up a connection to Notion in MindsDB using the following SQL-like syntax:

```sql
CREATE DATABASE notion_source
WITH
engine='notion',
parameters={
    "api_token": "&lt;notion-api-token&gt;",
};
```

The handler also uses several identifiers for Notion objects:
- `database_id`: Identifier for a specific Notion database.
- `page_id`: Identifier for a specific Notion page.
- `block_id`: Identifier for a specific Notion block.

These identifiers are typically provided in queries to specify which Notion object to interact with.

The Notion handler implements pagination for API requests to handle large datasets efficiently. It also applies filters on the server-side where possible to reduce data transfer.

In summary, the Notion handler provides a bridge between MindsDB and Notion, allowing users to interact with Notion data using SQL-like queries. It abstracts the complexities of the Notion API, providing a familiar interface for database operations while leveraging Notion's unique features and structure.