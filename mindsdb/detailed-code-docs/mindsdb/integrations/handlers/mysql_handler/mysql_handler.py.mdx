---
title: "mysql_handler.py"
---

## High-level description
The `MySQLHandler` class is a database handler for MySQL databases in the MindsDB ecosystem. It provides methods for connecting to a MySQL database, executing queries, and retrieving information about tables and columns. The handler implements the `DatabaseHandler` interface and uses the `mysql.connector` library for database operations.

## Code Structure
The `MySQLHandler` class inherits from `DatabaseHandler` and implements various methods for database operations. It uses a `ConnectionConfig` class for validating connection parameters and manages the database connection through the `mysql.connector` library.

## Symbols

### `MySQLHandler`
#### Description
This class handles connection and execution of MySQL statements. It provides methods for connecting to a MySQL database, executing queries, and retrieving database information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The name of the handler instance |
| kwargs | dict | Additional keyword arguments, including connection data |

#### Internal Logic
- Initializes connection data and parser
- Manages database connection
- Implements methods for connecting, disconnecting, checking connection, and executing queries
- Provides methods for retrieving table and column information

### `_unpack_config`
#### Description
Unpacks and validates the connection configuration.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | dict | Validated connection parameters |

### `connect`
#### Description
Establishes a connection to the MySQL database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | MySQLConnection | An active connection to the database |

### `disconnect`
#### Description
Closes the connection to the MySQL database if it's currently open.

### `check_connection`
#### Description
Checks the status of the connection to the MySQL database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | StatusResponse | Connection status and error message if applicable |

### `native_query`
#### Description
Executes a SQL query on the MySQL database and returns the result.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | The SQL query to be executed |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query result or error message |

### `query`
#### Description
Retrieves data from the SQL statement represented as an AST node.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ASTNode | SQL query represented as an AST |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query result or error message |

### `get_tables`
#### Description
Retrieves a list of all tables in the selected MySQL database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Response | List of tables |

### `get_columns`
#### Description
Shows details about the specified table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table_name | str | Name of the table |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Response | Table column details |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| mysql.connector | MySQL database operations |
| mindsdb_sql | SQL parsing and rendering |
| pandas | Data manipulation and analysis |

## Error Handling
The code implements error handling for database connection and query execution, logging errors and returning appropriate error responses.

## Logging
The code uses the `log` module from `mindsdb.utilities` for logging error messages and connection issues.