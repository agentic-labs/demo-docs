---
title: "settings.py"
---

## High-level description
This code defines a Pydantic model `CompletionParameters` that represents the configuration parameters for making API calls to language models, particularly focusing on OpenAI-like APIs. It includes various optional parameters to customize the behavior of the language model and the API request.

## Symbols

### `CompletionParameters`
#### Description
A Pydantic model that encapsulates all the parameters needed for making a completion request to a language model API. It includes both required and optional fields that control various aspects of the API call and the model's behavior.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| model | str | The model to be used for the API call (required) |
| api_key | str | API key for authentication (required) |
| prompt_template | Optional[str] | Template for the prompt to be used |
| timeout | Optional[Union[float, int]] | Timeout for the API request |
| temperature | Optional[float] | Controls randomness in responses |
| top_p | Optional[float] | Controls diversity in responses (nucleus sampling) |
| n | Optional[int] | Number of completions to generate |
| stream | Optional[bool] | Whether to stream responses or not |
| stop | Optional[str] | Sequence to stop token generation |
| max_tokens | Optional[float] | Maximum number of tokens to generate |
| presence_penalty | Optional[float] | Penalty for token presence in text |
| frequency_penalty | Optional[float] | Penalty for token frequency in text |
| logit_bias | Optional[Dict] | Adjusts likelihood of specified tokens |
| user | Optional[str] | Identifier for the end-user |
| response_format | Optional[Dict] | Format of the response |
| seed | Optional[int] | Random seed for deterministic completions |
| tools | Optional[List[str]] | List of additional tools or features |
| tool_choice | Optional[str] | Specific tool to be used |
| deployment_id | Optional[str] | Identifier for the deployment |
| base_url | Optional[str] | Base URL of the API |
| api_version | Optional[str] | Version of the API to be used |

#### Internal Logic
The model uses Pydantic's `BaseModel` as its base class, which provides automatic validation and serialization. The `Config` inner class sets additional options:
- `extra = Extra.forbid`: Prevents additional fields not defined in the model
- `arbitrary_types_allowed = True`: Allows for arbitrary types in the model
- `use_enum_values = True`: Uses enum values instead of enum objects

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| typing | Provides type hinting support |
| pydantic | Used for data validation and settings management |

## Notes
1. The model is designed to be flexible, accommodating various parameters used by different language model APIs, with a focus on OpenAI-like interfaces.
2. Many fields are optional, allowing for customization of the API request based on specific needs.
3. The model includes fields for both older and newer versions of OpenAI's API, as indicated by the comments.
4. The `Config` class ensures strict validation of the input data, preventing unexpected fields and allowing for arbitrary types.

This model serves as a comprehensive configuration object for making language model API calls, ensuring type safety and providing clear documentation of available options.