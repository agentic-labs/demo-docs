---
title: "hubspot_tables.py"
---

## High-level description
This code defines three classes: `CompaniesTable`, `ContactsTable`, and `DealsTable`, which are subclasses of `APITable`. These classes implement CRUD operations (Create, Read, Update, Delete) for HubSpot's Companies, Contacts, and Deals APIs, respectively. The code uses various query parsers and executors to handle SQL-like queries and interact with the HubSpot API.

## Code Structure
The three main classes (`CompaniesTable`, `ContactsTable`, and `DealsTable`) have similar structures, each implementing methods for selecting, inserting, updating, and deleting data. They use the HubSpot API client to interact with the corresponding HubSpot objects (companies, contacts, and deals).

## Symbols

### `CompaniesTable`
#### Description
Handles operations related to HubSpot Companies.

#### Methods
1. `select(query: ast.Select) -&gt; pd.DataFrame`
   - Pulls HubSpot Companies data based on the given SQL SELECT query.
2. `insert(query: ast.Insert) -&gt; None`
   - Inserts data into HubSpot Companies using the given SQL INSERT query.
3. `update(query: ast.Update) -&gt; None`
   - Updates HubSpot Companies data using the given SQL UPDATE query.
4. `delete(query: ast.Delete) -&gt; None`
   - Deletes HubSpot Companies data using the given SQL DELETE query.
5. `get_columns() -&gt; List[Text]`
   - Returns a list of column names for the Companies table.
6. `get_companies(**kwargs) -&gt; List[Dict]`
   - Retrieves companies data from HubSpot API.
7. `create_companies(companies_data: List[Dict[Text, Any]]) -&gt; None`
   - Creates new companies in HubSpot.
8. `update_companies(company_ids: List[Text], values_to_update: Dict[Text, Any]) -&gt; None`
   - Updates existing companies in HubSpot.
9. `delete_companies(company_ids: List[Text]) -&gt; None`
   - Deletes companies from HubSpot.

### `ContactsTable`
#### Description
Handles operations related to HubSpot Contacts.

#### Methods
Similar to `CompaniesTable`, but for Contacts.

### `DealsTable`
#### Description
Handles operations related to HubSpot Deals.

#### Methods
Similar to `CompaniesTable`, but for Deals.

## Dependencies
- pandas
- hubspot.crm.objects
- mindsdb_sql.parser
- mindsdb.integrations.utilities.handlers.query_utilities
- mindsdb.integrations.libs.api_handler
- mindsdb.utilities

## Error Handling
The code uses try-except blocks to handle exceptions that may occur during API operations. Specific error messages are logged and raised for different types of failures (e.g., creation, update, deletion).

## Logging
The code uses a logger (from `mindsdb.utilities`) to log information about successful operations and errors.

This code provides a structured way to interact with HubSpot's API for Companies, Contacts, and Deals, allowing for SQL-like querying and manipulation of HubSpot data within the MindsDB framework.