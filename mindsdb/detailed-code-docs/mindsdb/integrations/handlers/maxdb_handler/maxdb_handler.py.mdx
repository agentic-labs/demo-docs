---
title: "maxdb_handler.py"
---

## High-level description
This code defines a `MaxDBHandler` class that implements a database handler for SAP MaxDB. It provides functionality to connect to a MaxDB database, execute queries, and retrieve data. The handler is designed to work within the MindsDB framework, implementing methods for connection management, query execution, and data retrieval.

## Code Structure
The `MaxDBHandler` class inherits from `DatabaseHandler` and implements various methods to interact with a MaxDB database. It uses the `jaydebeapi` library to establish JDBC connections to the database. The class manages connection state, executes queries, and formats results into pandas DataFrames.

## References
- `mindsdb_sql`: Used for SQL parsing and rendering
- `mindsdb.integrations.libs.base.DatabaseHandler`: Base class for database handlers
- `mindsdb.utilities.log`: Logging utility
- `mindsdb.integrations.libs.response`: Response types and classes
- `pandas`: Used for data manipulation and storage

## Symbols

### MaxDBHandler
#### Description
A handler class for interacting with SAP MaxDB databases within the MindsDB framework.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | Name of the handler instance |
| connection_data | dict | Connection parameters for the database |

#### Internal Logic
- Initializes connection parameters and state
- Implements methods for connecting, disconnecting, checking connection, and executing queries
- Formats query results into pandas DataFrames

### connect
#### Description
Establishes a connection to the SAP MaxDB database using JDBC.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | jaydebeapi.Connection | JDBC connection object |

### disconnect
#### Description
Closes the existing database connection.

### check_connection
#### Description
Verifies the database connection by attempting to connect and disconnect.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Connection status response |

### native_query
#### Description
Executes a raw SQL query on the database and returns the results.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | SQL query to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | HandlerResponse | Query execution response with results |

### query
#### Description
Executes a query represented as an AST (Abstract Syntax Tree) on the database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ASTNode | SQL query as an AST |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | HandlerResponse | Query execution response with results |

### get_tables
#### Description
Retrieves a list of table names in the database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | HandlerResponse | Response containing table names |

### get_columns
#### Description
Retrieves a list of column names for a specified table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table_name | str | Name of the table |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | HandlerResponse | Response containing column information |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| jaydebeapi | JDBC connection handling for MaxDB |
| pandas | Data manipulation and storage |
| mindsdb_sql | SQL parsing and rendering |

## Error Handling
The code implements basic error handling, catching exceptions during connection and query execution. Errors are logged and returned as part of the response objects.

## Logging
The code uses the MindsDB logging utility to log error messages.