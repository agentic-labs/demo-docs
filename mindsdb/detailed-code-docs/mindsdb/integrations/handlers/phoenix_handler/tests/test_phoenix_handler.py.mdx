---
title: "test_phoenix_handler.py"
---

## High-level description
This code defines a unit test class `PhoenixHandlerTest` for testing the `PhoenixHandler` class, which is responsible for handling connections and queries to a Phoenix database. The tests cover basic functionality such as checking the connection, executing a native query, and retrieving tables and columns.

## Code Structure
The `PhoenixHandlerTest` class contains four test methods, each testing a different aspect of the `PhoenixHandler`. The tests are designed to be run sequentially, as indicated by their numeric prefixes.

## Symbols

### `PhoenixHandlerTest`
#### Description
A test class that inherits from `unittest.TestCase`, containing methods to test the functionality of the `PhoenixHandler`.

#### Internal Logic
1. Sets up a `PhoenixHandler` instance with test configuration in the `setUpClass` method.
2. Defines four test methods to check different functionalities of the handler.

### `setUpClass`
#### Description
A class method that sets up the test environment by creating a `PhoenixHandler` instance with test configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cls | class | The test class itself |

#### Internal Logic
1. Defines a dictionary `kwargs` with connection parameters for the Phoenix database.
2. Creates an instance of `PhoenixHandler` with a test name and the `kwargs`.

### `test_0_check_connection`
#### Description
Tests the `check_connection` method of the `PhoenixHandler`.

#### Internal Logic
Asserts that the `check_connection` method returns `True`.

### `test_1_native_query_select`
#### Description
Tests the `native_query` method of the `PhoenixHandler` with a SELECT query.

#### Internal Logic
1. Executes a SELECT query on the USERS table.
2. Asserts that the result type is `RESPONSE_TYPE.TABLE`.

### `test_2_get_tables`
#### Description
Tests the `get_tables` method of the `PhoenixHandler`.

#### Internal Logic
1. Calls the `get_tables` method.
2. Asserts that the result type is not `RESPONSE_TYPE.ERROR`.

### `test_3_get_columns`
#### Description
Tests the `get_columns` method of the `PhoenixHandler` for the USERS table.

#### Internal Logic
1. Calls the `get_columns` method with 'USERS' as the table name.
2. Asserts that the result type is not `RESPONSE_TYPE.ERROR`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.phoenix_handler.phoenix_handler | Contains the PhoenixHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Defines the RESPONSE_TYPE enum used in assertions |

## Notes
1. The tests assume that there is a Phoenix database running at `http://127.0.0.1:8765` with a table named 'USERS'.
2. The tests are designed to be run in order, as indicated by their numeric prefixes.
3. The `RESPONSE_TYPE` enum is used to check the type of responses returned by the handler methods.
4. Error handling is implicit in the tests, as they assert that the response types are not errors.