---
title: "tripadvisor_handler.py"
---

## High-level description
This code defines the `TripAdvisorHandler` class, which is responsible for handling connections and interactions with the TripAdvisor Content API. It provides methods to connect to the API, check the connection status, and make various API calls to retrieve data such as location search results, location details, reviews, photos, and nearby locations.

## Code Structure
The `TripAdvisorHandler` class inherits from `APIHandler` and initializes various table objects for different types of TripAdvisor data. It manages the API connection, authentication, and provides methods to call different TripAdvisor API endpoints and process the returned data into pandas DataFrames.

## Symbols

### TripAdvisorHandler
#### Description
This class handles connections and interactions with the TripAdvisor Content API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | Optional name for the handler |
| **kwargs | dict | Additional keyword arguments |

#### Internal Logic
- Initializes connection arguments from various sources (args, environment variables, config)
- Creates and registers table objects for different types of TripAdvisor data
- Provides methods to connect to the API, check connection status, and make API calls

### connect
#### Description
Establishes a connection with the TripAdvisor API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| api_version | int | API version (default: 2) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| api | TripAdvisorAPI | The connected API object |

### check_connection
#### Description
Evaluates if the connection to the TripAdvisor API is alive and healthy.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Object containing connection status and error message if any |

### call_tripadvisor_searchlocation_api
#### Description
Calls the TripAdvisor API to search for locations and processes the JSON data into a pandas DataFrame.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| method_name | str | Optional method name |
| params | dict | Parameters for the API call |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pd.DataFrame | DataFrame containing search results |

### call_tripadvisor_location_details_api
#### Description
Calls the TripAdvisor API to get location details and processes the JSON data into a pandas DataFrame.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| method_name | str | Optional method name |
| params | dict | Parameters for the API call |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pd.DataFrame | DataFrame containing location details |

### call_tripadvisor_reviews_api
#### Description
Calls the TripAdvisor API to get reviews and processes the JSON data into a pandas DataFrame.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| method_name | str | Optional method name |
| params | dict | Parameters for the API call |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pd.DataFrame | DataFrame containing reviews |

### call_tripadvisor_photos_api
#### Description
Calls the TripAdvisor API to get photos and processes the JSON data into a pandas DataFrame.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| method_name | str | Optional method name |
| params | dict | Parameters for the API call |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pd.DataFrame | DataFrame containing photo information |

### call_tripadvisor_nearby_location_api
#### Description
Calls the TripAdvisor API to get nearby locations and processes the JSON data into a pandas DataFrame.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| method_name | str | Optional method name |
| params | dict | Parameters for the API call |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pd.DataFrame | DataFrame containing nearby location information |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pandas | Data manipulation and analysis |
| mindsdb.utilities | Logging and configuration |
| mindsdb.integrations.libs.api_handler | Base class for API handlers |
| mindsdb.integrations.libs.response | Response handling |

## Error Handling
The code implements basic error handling, particularly in the `check_connection` method, where exceptions are caught and logged. Other methods may raise exceptions that are not explicitly handled within this file.

## Logging
The code uses the `log` module from `mindsdb.utilities` for logging. A logger is initialized at the beginning of the file.