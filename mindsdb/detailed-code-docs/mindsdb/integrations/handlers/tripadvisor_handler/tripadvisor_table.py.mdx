---
title: "tripadvisor_table.py"
---

## High-level description
This code defines several table classes for handling TripAdvisor API data within the MindsDB framework. It includes tables for search locations, location details, reviews, photos, and nearby locations. Each table class implements methods to select and retrieve data from the TripAdvisor API based on SQL-like queries.

## Code Structure
The code defines five main classes: `SearchLocationTable`, `LocationDetailsTable`, `ReviewsTable`, `PhotosTable`, and `NearbyLocationTable`. Each class inherits from `APITable` and implements a `select` method to handle data retrieval and a `get_columns` method to define the table structure.

## Symbols

### SearchLocationTable
#### Description
Handles queries for searching locations on TripAdvisor.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ast.Select | SQL-like query object |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pandas.DataFrame | DataFrame containing the selected data |

#### Internal Logic
1. Extracts conditions from the query
2. Builds parameters for the API call
3. Calls the TripAdvisor API
4. Processes and filters the result based on the query

### LocationDetailsTable
#### Description
Handles queries for retrieving detailed information about a specific location.

#### Inputs and Outputs
Similar to SearchLocationTable

#### Internal Logic
Similar to SearchLocationTable, but uses a different API endpoint

### ReviewsTable
#### Description
Handles queries for retrieving reviews for a specific location.

#### Inputs and Outputs
Similar to SearchLocationTable

#### Internal Logic
Similar to SearchLocationTable, but uses a different API endpoint

### PhotosTable
#### Description
Handles queries for retrieving photos for a specific location.

#### Inputs and Outputs
Similar to SearchLocationTable

#### Internal Logic
Similar to SearchLocationTable, but uses a different API endpoint

### NearbyLocationTable
#### Description
Handles queries for finding nearby locations based on latitude and longitude.

#### Inputs and Outputs
Similar to SearchLocationTable

#### Internal Logic
Similar to SearchLocationTable, but uses a different API endpoint and requires latitude and longitude parameters

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pandas | Data manipulation and storage |
| mindsdb_sql.parser | SQL query parsing |
| mindsdb.integrations.libs.api_handler | Base class for API handling |
| mindsdb.integrations.utilities.sql_utils | Utility for extracting SQL conditions |

## Error Handling
The code raises `NotImplementedError` for unsupported operations (e.g., 'OR' conditions) and unknown operators in query conditions.

## Performance Considerations
The code uses pandas DataFrames for efficient data manipulation and filtering. API calls are made only when necessary, based on the provided query conditions.

This code provides a flexible interface for querying TripAdvisor data through SQL-like syntax, abstracting the complexities of direct API interactions.