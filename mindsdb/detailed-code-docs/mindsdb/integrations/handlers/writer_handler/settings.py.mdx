---
title: "settings.py"
---

## High-level description
This file defines settings and parameters for the Writer Handler, which is part of a RAG (Retrieval-Augmented Generation) system. It includes configurations for evaluation metrics, LLM (Language Model) parameters, and other settings specific to the Writer integration in MindsDB.

## Code Structure
The file defines several constants and classes that are used to configure and validate parameters for the Writer Handler. The main classes are `WriterLLMParameters` and `WriterHandlerParameters`, which inherit from `RAGBaseParameters`.

## Symbols

### `EVAL_COLUMN_NAMES`
#### Description
A tuple containing the names of columns used for evaluation.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| EVAL_COLUMN_NAMES | tuple | Contains "question", "answers", and "context" |

### `SUPPORTED_EVALUATION_TYPES`
#### Description
A tuple defining the supported types of evaluation.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| SUPPORTED_EVALUATION_TYPES | tuple | Contains "retrieval" and "e2e" |

### `GENERATION_METRICS`
#### Description
A tuple listing the metrics used for evaluating generation tasks.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| GENERATION_METRICS | tuple | Contains "rouge", "meteor", "cosine_similarity", and "accuracy" |

### `RETRIEVAL_METRICS`
#### Description
A tuple listing the metrics used for evaluating retrieval tasks.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| RETRIEVAL_METRICS | tuple | Contains "cosine_similarity" and "accuracy" |

### `WriterLLMParameters`
#### Description
A Pydantic model defining parameters for the Writer LLM API interface.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| writer_api_key | str | API key for Writer |
| writer_org_id | str | Optional organization ID for Writer |
| base_url | str | Optional base URL |
| model_id | str | Model ID, default is "palmyra-x" |
| callbacks | List[StreamingStdOutCallbackHandler] | Callbacks for streaming output |
| max_tokens | int | Maximum number of tokens, default is 1024 |
| temperature | float | Temperature for sampling, default is 0.0 |
| top_p | float | Top-p sampling parameter, default is 1 |
| stop | List[str] | Stop sequences, default is an empty list |
| best_of | int | Number of completions to generate, default is 5 |
| verbose | bool | Verbosity flag, default is False |

### `WriterHandlerParameters`
#### Description
A Pydantic model defining parameters for the Writer Handler, inheriting from RAGBaseParameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| llm_params | WriterLLMParameters | Parameters for the Writer LLM |
| generation_evaluation_metrics | List[str] | Metrics for evaluating generation, default is GENERATION_METRICS |
| retrieval_evaluation_metrics | List[str] | Metrics for evaluating retrieval, default is RETRIEVAL_METRICS |
| evaluation_type | str | Type of evaluation, default is "e2e" |
| n_rows_evaluation | int | Number of rows for evaluation, optional |
| retriever_match_threshold | float | Threshold for retriever matching, default is 0.7 |
| generator_match_threshold | float | Threshold for generator matching, default is 0.8 |
| evaluate_dataset | Union[List[dict], str] | Dataset for evaluation, default is "squad_v2_val_100_sample" |

#### Internal Logic
The class includes field validators to ensure that the evaluation metrics and evaluation type are supported.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| typing | Provides type hinting |
| langchain.callbacks.streaming_stdout | Provides StreamingStdOutCallbackHandler |
| pydantic | Provides BaseModel and validation utilities |
| mindsdb.integrations.handlers.rag_handler.settings | Imports RAGBaseParameters and DEFAULT_EMBEDDINGS_MODEL |

This file serves as a configuration hub for the Writer Handler, defining the necessary parameters and validation logic for both the LLM interface and the overall handler functionality.