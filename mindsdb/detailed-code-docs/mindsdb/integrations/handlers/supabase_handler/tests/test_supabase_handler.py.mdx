---
title: "test_supabase_handler.py"
---

## High-level description
This code defines a unit test suite for the SupabaseHandler class, which is part of the MindsDB integration with Supabase. The tests cover basic functionality such as connecting to the database, checking the connection, executing native queries, and retrieving table information.

## Code Structure
The code defines a single test class `SupabaseHandlerTest` that inherits from `unittest.TestCase`. It contains several test methods that exercise different functionalities of the `SupabaseHandler` class.

## Symbols

### SupabaseHandlerTest
#### Description
This class is a test suite for the SupabaseHandler. It sets up a test environment and defines several test methods to verify the functionality of the SupabaseHandler.

#### Internal Logic
The class uses the `setUpClass` method to initialize a SupabaseHandler instance with test connection data. Each test method then calls specific methods on this handler to verify its functionality.

### setUpClass
#### Description
This class method sets up the test environment by creating a SupabaseHandler instance with test connection data.

#### Inputs
None (class method)

#### Outputs
None

#### Internal Logic
1. Defines a dictionary `kwargs` with connection data.
2. Creates a SupabaseHandler instance with the test connection data.

### test_0_connect
#### Description
Tests the connect method of the SupabaseHandler.

#### Internal Logic
Calls the `connect()` method on the handler instance.

### test_1_check_connection
#### Description
Verifies that the check_connection method returns True.

#### Internal Logic
Calls `check_connection()` and asserts that it returns True.

### test_2_native_query_show_dbs
#### Description
Tests the native_query method by executing a "SHOW DATABASES" query.

#### Internal Logic
1. Executes the query "SHOW DATABASES;" using `native_query()`.
2. Asserts that the result is a list.

### test_3_get_tables
#### Description
Tests the get_tables method of the SupabaseHandler.

#### Internal Logic
1. Calls `get_tables()` on the handler.
2. Asserts that the result is a list.

### test_5_create_table
#### Description
Attempts to create a test table using a native query.

#### Internal Logic
Executes a CREATE TABLE query using `native_query()`, wrapped in a try-except block to handle potential exceptions.

### test_6_describe_table
#### Description
Tests the get_columns method of the SupabaseHandler.

#### Internal Logic
1. Calls `get_columns("dt_test")` on the handler.
2. Asserts that the result is a list.

### test_7_select_query
#### Description
Tests the native_query method with a SELECT query.

#### Internal Logic
Executes a SELECT query using `native_query()`.

## Dependencies
The code depends on the following modules:
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.supabase_handler.supabase_handler | Contains the SupabaseHandler class being tested |

## Notes
1. The test methods are numbered, suggesting a specific order of execution.
2. Some methods (like `test_7_select_query`) don't include assertions, which might be an oversight.
3. The connection data used in the tests appears to be for a MySQL database, not a Supabase instance. This might need to be updated for actual Supabase testing.
4. Error handling is minimal, with only the table creation test including a try-except block.
5. The `test_4_*` method is missing from the sequence, which could be intentional or an oversight.