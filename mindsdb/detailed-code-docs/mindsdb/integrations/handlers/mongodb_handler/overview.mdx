---
title: "Overview"
---

## High-level description

This directory contains the MongoDB handler for MindsDB, which enables integration between MindsDB and MongoDB databases. The handler provides functionality to connect to MongoDB, execute queries, retrieve data, and perform various database operations using both MongoDB's native query language and SQL.

## What does it do?

The MongoDB handler for MindsDB serves several key purposes:

1. Connection Management: It establishes and manages connections to MongoDB databases using the provided connection parameters.

2. Query Execution: The handler can execute both native MongoDB queries and SQL queries (which are internally converted to MongoDB queries).

3. Data Retrieval: It fetches data from MongoDB collections and returns it in a format compatible with MindsDB's internal data structures.

4. Schema Information: The handler can retrieve information about the database schema, including lists of collections (tables) and their fields (columns).

5. SQL to MongoDB Translation: It includes utilities to convert SQL queries into equivalent MongoDB queries, allowing users to interact with MongoDB using familiar SQL syntax.

6. Error Handling: The handler implements robust error handling for various scenarios, including connection issues and query execution errors.

## Entry points

The main entry point for the MongoDB handler is the `MongoDBHandler` class defined in `mongodb_handler.py`. This class inherits from `DatabaseHandler` and implements the core functionality for interacting with MongoDB databases.

Key methods in the `MongoDBHandler` class include:

- `connect()`: Establishes a connection to the MongoDB database.
- `disconnect()`: Closes the database connection.
- `check_connection()`: Verifies if the connection to the database is active.
- `native_query()`: Executes a native MongoDB query.
- `query()`: Executes an SQL query (converted to MongoDB query internally).
- `get_tables()`: Retrieves a list of collections in the database.
- `get_columns()`: Retrieves the schema (fields) of a specific collection.

The `MongodbRender` class in the `utils/mongodb_render.py` file is another important component, responsible for converting SQL queries to MongoDB queries.

## Key Files

1. `mongodb_handler.py`: Contains the main `MongoDBHandler` class that implements the core functionality.

2. `__init__.py`: Defines the handler metadata and imports the main handler class.

3. `__about__.py`: Contains metadata about the MongoDB handler package.

4. `connection_args.py`: Defines the connection arguments required for MongoDB connections.

5. `utils/mongodb_render.py`: Implements the `MongodbRender` class for SQL to MongoDB query conversion.

6. `tests/test_mongodb_handler.py`: Contains unit tests for the MongoDB handler.

## Dependencies

The MongoDB handler relies on several external libraries and internal MindsDB modules:

- `pymongo`: The official MongoDB driver for Python.
- `pandas`: Used for data manipulation and creating DataFrames.
- `mindsdb_sql`: Provides SQL parsing and AST (Abstract Syntax Tree) functionality.
- `bson`: Handles BSON data types used in MongoDB.

## Configuration

The handler uses connection arguments defined in `connection_args.py` to establish database connections. These include:

- `host`: The MongoDB server hostname or IP address.
- `port`: The port number for the MongoDB server.
- `username` and `password`: Credentials for authentication.
- `database`: The name of the database to connect to.

Users can provide these connection details when creating a new database connection in MindsDB.

The behavior of the handler can be customized through various parameters, such as the `flatten_level` attribute, which determines how nested documents are flattened when retrieving data.

In summary, the MongoDB handler provides a comprehensive interface for MindsDB to interact with MongoDB databases, enabling users to leverage MindsDB's machine learning capabilities with MongoDB data sources using both native MongoDB queries and SQL syntax.