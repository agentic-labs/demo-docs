---
title: "sendinblue_tables.py"
---

## High-level description
The `EmailCampaignsTable` class in `sendinblue_tables.py` implements the integration between MindsDB and the Sendinblue Email Campaigns API. It allows users to interact with their Sendinblue email campaigns using SQL-like queries. This includes selecting, deleting, updating, and inserting email campaigns.

## Code Structure
The `EmailCampaignsTable` class inherits from `APITable` and implements the `select`, `delete`, `update`, and `insert` methods. These methods use helper classes like `SELECTQueryParser`, `SELECTQueryExecutor`, `UPDATEQueryParser`, `UPDATEQueryExecutor`, `DELETEQueryParser`, `DELETEQueryExecutor`, and `INSERTQueryParser` to parse SQL queries and interact with the Sendinblue API.

## References
This code references the following symbols from other files:
- `sib_api_v3_sdk`: This is the Sendinblue API v3 Python SDK used to interact with the Sendinblue API.
- `pd.DataFrame`: This is a Pandas DataFrame, used to represent and manipulate data retrieved from the Sendinblue API.
- `ast.Select`, `ast.Delete`, `ast.Update`, `ast.Insert`: These are abstract syntax tree (AST) nodes representing different types of SQL queries.
- `APITable`: This is the base class for all API table implementations in MindsDB.
- `SELECTQueryParser`, `SELECTQueryExecutor`, `UPDATEQueryParser`, `UPDATEQueryExecutor`, `DELETEQueryParser`, `DELETEQueryExecutor`, `INSERTQueryParser`: These are helper classes used to parse SQL queries and interact with the Sendinblue API.

## Symbols

### `EmailCampaignsTable`
#### Description
This class represents the Sendinblue Email Campaigns table and provides methods to interact with it using SQL-like queries.

#### Inputs
This class does not have a constructor with explicit inputs. It inherits from `APITable` and relies on the handler object passed to it for connecting to the Sendinblue API.

#### Outputs
This class does not return any values directly. Its methods either return a Pandas DataFrame with the requested data or modify the data in Sendinblue.

#### Internal Logic
This class defines several methods:
- `select`: This method retrieves email campaigns data from Sendinblue based on the provided SQL SELECT query. It uses `SELECTQueryParser` to parse the query, retrieves data from Sendinblue, and then uses `SELECTQueryExecutor` to filter and order the data according to the query.
- `get_columns`: This method retrieves the list of available columns for the Email Campaigns table.
- `get_email_campaigns`: This method retrieves email campaigns data from Sendinblue using the `sib_api_v3_sdk`.
- `delete`: This method deletes email campaigns from Sendinblue based on the provided SQL DELETE query. It uses `DELETEQueryParser` to parse the query, retrieves data from Sendinblue, filters the data based on the query using `DELETEQueryExecutor`, and then deletes the selected campaigns.
- `delete_email_campaigns`: This method deletes a list of email campaigns from Sendinblue using their IDs.
- `update`: This method updates email campaigns in Sendinblue based on the provided SQL UPDATE query. It uses `UPDATEQueryParser` to parse the query, retrieves data from Sendinblue, filters the data based on the query using `UPDATEQueryExecutor`, and then updates the selected campaigns.
- `update_email_campaigns`: This method updates a list of email campaigns in Sendinblue with the provided values.
- `insert`: This method inserts new email campaigns into Sendinblue based on the provided SQL INSERT query. It uses `INSERTQueryParser` to parse the query, extracts data from the query, and then inserts the new campaigns.
- `create_email_campaign`: This method creates a single email campaign in Sendinblue using the provided data.

## Side Effects
This class interacts with the Sendinblue API, potentially modifying data stored in Sendinblue.

## Dependencies
This code depends on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| sib_api_v3_sdk | Used to interact with the Sendinblue API. |
| pandas | Used to represent and manipulate data retrieved from the Sendinblue API. |

## Error Handling
The code implements basic error handling by catching `ApiException` and `RuntimeError` exceptions. It logs the error messages and re-raises the exceptions to be handled at a higher level.

## Logging
The code uses the `logging` module to log information about API calls, errors, and other events.
