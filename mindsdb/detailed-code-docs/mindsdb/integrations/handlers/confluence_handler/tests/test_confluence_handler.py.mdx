---
title: "test_confluence_handler.py"
---

## High-level description
This file contains unit tests for the `ConfluenceHandler` class, which is responsible for interacting with the Confluence API. The tests cover connecting to Confluence, retrieving data (spaces and pages), and modifying data (inserting, updating, and deleting pages).

## References
- `mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE`: Used to check the type of responses from the handler.

## Symbols
### `ConfluenceHandlerTest`
#### Description
This class defines a suite of unit tests for the `ConfluenceHandler` class. It sets up a connection to a Confluence instance using environment variables for authentication and then defines individual test methods for different functionalities.

#### Inputs
This class does not take any explicit inputs. It relies on environment variables for Confluence connection details.

#### Outputs
This class does not return any values. It runs unit tests and reports successes or failures.

#### Internal Logic
The class uses the `unittest` framework to define and run tests. Each test method follows the typical arrange-act-assert pattern:
- **Arrange:** Sets up the necessary objects and data for the test.
- **Act:** Calls the method being tested.
- **Assert:** Verifies the expected outcome of the method call.

For example, the `test_get_spaces` method:
- **Arrange:** Connects to the Confluence instance.
- **Act:** Executes a native query to retrieve all spaces.
- **Assert:** Checks if the response type is not an error, indicating a successful retrieval.

## TODOs
- Uncomment the `test_insert_page` method when the `insert` native query is fixed. 
