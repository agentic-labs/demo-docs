---
title: "test_scylla_handler.py"
---

## High-level description
This code defines a unit test class `ScyllaHandlerTest` for testing the functionality of the `ScyllaHandler` class. It includes tests for connection, native queries, and various data retrieval operations using the ScyllaDB integration in MindsDB.

## Code Structure
The `ScyllaHandlerTest` class contains several test methods that check different aspects of the `ScyllaHandler` functionality. Each test method focuses on a specific operation, such as connecting to the database, executing native queries, and retrieving table information.

## Symbols

### `ScyllaHandlerTest`
#### Description
A unittest.TestCase subclass that defines test cases for the ScyllaHandler.

#### Internal Logic
- Sets up a ScyllaHandler instance with test connection data in the `setUpClass` method.
- Defines multiple test methods to verify different functionalities of the ScyllaHandler.

### `test_0_connect`
#### Description
Tests the connection to the ScyllaDB database.

#### Internal Logic
Calls the `check_connection` method of the ScyllaHandler instance.

### `test_1_native_query_show_keyspaces`
#### Description
Tests the execution of a native query to show keyspaces.

#### Internal Logic
Executes a "DESC KEYSPACES;" query and checks if the response is not an error.

### `test_2_get_tables`
#### Description
Tests the retrieval of tables from the database.

#### Internal Logic
Calls the `get_tables` method of the ScyllaHandler and verifies that the response is not an error.

### `test_3_describe_table`
#### Description
Tests the description of a specific table ("home_rentals").

#### Internal Logic
Calls the `get_columns` method for the "home_rentals" table and checks if the response type is TABLE.

### `test_4_select_query`
#### Description
Tests the execution of a SELECT query on the "home_rentals" table.

#### Internal Logic
Executes a SELECT query with a WHERE clause and verifies that the response type is TABLE.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.scylla_handler.scylla_handler | Contains the ScyllaHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Provides response type constants |

## Notes
- The tests assume the existence of a "home_rentals" table in the test database.
- The connection data used in the tests is empty for host, user, and password, which might not work in a real scenario. These should be replaced with valid credentials for actual testing.
- The tests are numbered, suggesting a specific order of execution, which is not guaranteed in unittest unless explicitly managed.

This test suite provides a basic framework for testing the ScyllaHandler's core functionalities, including connection, query execution, and data retrieval. It serves as a starting point for ensuring the reliability and correctness of the ScyllaDB integration in MindsDB.