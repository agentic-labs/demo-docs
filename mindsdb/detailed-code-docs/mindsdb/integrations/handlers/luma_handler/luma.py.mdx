---
title: "luma.py"
---

## High-level description
This code defines a `LumaClient` class that provides an interface to interact with the Luma API. It allows users to authenticate, create events, retrieve event details, and list events using the Luma platform.

## Code Structure
The `LumaClient` class contains methods for making API requests, validating the API key, and performing specific operations like creating events, getting event details, and listing events.

## Symbols

### LumaClient
#### Description
A client class for interacting with the Luma API. It handles authentication and provides methods for various API operations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| api_key | str | The API key for authenticating with the Luma API |

#### Internal Logic
1. Initializes with the provided API key and base endpoint URL.
2. Validates the API key upon initialization.
3. Provides methods for making API requests and handling specific API operations.

### LumaClient.make_request
#### Description
A helper method to make HTTP requests to the Luma API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | str | The URL for the API endpoint |
| method | str | The HTTP method (GET or POST) |
| payload | dict | The request payload (optional) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dict | dict | A dictionary containing the response content and status code |

#### Internal Logic
1. Validates the HTTP method.
2. Sets up headers including the API key.
3. Makes the request using the `requests` library.
4. Returns a dictionary with the JSON response and status code.

### LumaClient.validate_api_key
#### Description
Validates the provided API key by making a request to the user information endpoint.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dict | dict | The response content if validation is successful |

#### Internal Logic
1. Makes a GET request to the user information endpoint.
2. Raises an exception if the response status code is not 200.

### LumaClient.create_event
#### Description
Creates a new event using the Luma API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | dict | The event data to be sent to the API |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dict | dict | The response content if event creation is successful |

#### Internal Logic
1. Makes a POST request to the event creation endpoint.
2. Raises an exception if the response status code is not 200.

### LumaClient.get_event
#### Description
Retrieves details of a specific event using its API ID.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| event_api_id | str | The API ID of the event to retrieve |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dict | dict | The response content containing event details |

#### Internal Logic
1. Makes a GET request to the event retrieval endpoint.
2. Raises an exception if the response status code is not 200.

### LumaClient.list_events
#### Description
Retrieves a list of events from the user's calendar.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dict | dict | The response content containing the list of events |

#### Internal Logic
1. Makes a GET request to the event listing endpoint.
2. Raises an exception if the response status code is not 200.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| json | Used for JSON parsing and stringifying |
| requests | Used for making HTTP requests to the Luma API |

## Error Handling
The code implements basic error handling by checking the status code of API responses. If a non-200 status code is received, an exception is raised with details from the response content.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /public/v1/user/get-self | GET | Validates the API key and retrieves user information |
| /public/v1/event/create | POST | Creates a new event |
| /public/v1/event/get | GET | Retrieves details of a specific event |
| /public/v1/calendar/list-events | GET | Lists events from the user's calendar |

Note: All endpoints are prefixed with the base URL "https://api.lu.ma/".