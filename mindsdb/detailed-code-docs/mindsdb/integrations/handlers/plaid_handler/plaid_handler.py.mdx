---
title: "plaid_handler.py"
---

## High-level description
The `PlaidHandler` class is a handler for interacting with the Plaid API. It provides functionality to connect to Plaid, retrieve balance and transaction data, and handle API requests and responses. The handler supports various Plaid environments and implements methods for checking connections, executing native queries, and retrieving financial data.

## Code Structure
The main class `PlaidHandler` inherits from `APIHandler` and contains methods for connecting to Plaid, checking connections, executing native queries, and retrieving balance and transaction data. It also registers two table classes, `BalanceTable` and `TransactionTable`, which handle specific data retrieval operations.

## References
This code references other parts of the codebase, including:
- `mindsdb.utilities.log`
- `mindsdb_sql.parse_sql`
- `mindsdb.integrations.libs.api_handler.APIHandler`
- `mindsdb.integrations.libs.response`
- `plaid` library and its various models
- `.plaid_tables.BalanceTable` and `.plaid_tables.TransactionTable`
- `.utils.parse_transaction`

## Symbols

### PlaidHandler
#### Description
The main class for handling Plaid API interactions. It initializes the connection, manages API calls, and provides methods for retrieving financial data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | Optional name for the handler |
| connection_data | dict | Dictionary containing connection parameters |

#### Internal Logic
- Initializes Plaid configuration using provided connection data
- Registers `BalanceTable` and `TransactionTable` instances
- Implements methods for connecting, checking connection, executing native queries, and retrieving balance and transaction data

### connect
#### Description
Authenticates with the Plaid API using stored credentials.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| api | plaid_api.PlaidApi | Authenticated Plaid API client |

### check_connection
#### Description
Evaluates if the connection with Plaid API is alive and healthy.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Connection status response |

### native_query
#### Description
Parses and executes a native query string.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query_string | str | Native query string to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query execution response |

### call_plaid_api
#### Description
Executes a Plaid API method based on the provided method name and parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| method_name | str | Name of the Plaid API method to call |
| params | dict | Parameters for the API call |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | pandas.DataFrame | DataFrame containing the API call results |

### get_balance
#### Description
Retrieves balance information from the Plaid API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | dict | Optional parameters for the balance request |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| df | pandas.DataFrame | DataFrame containing balance information |

### get_transactions
#### Description
Retrieves transaction information from the Plaid API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | dict | Parameters for the transaction request, including start and end dates |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| df | pandas.DataFrame | DataFrame containing transaction information |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pandas | Data manipulation and analysis |
| plaid | Interaction with Plaid API |
| mindsdb_sql | SQL parsing |
| mindsdb.integrations.libs.api_handler | Base handler functionality |
| mindsdb.integrations.libs.response | Response handling |

## Error Handling
The code implements basic error handling, particularly in the `check_connection` method, where exceptions are caught and logged. Other methods may raise exceptions that are not explicitly handled within this file.

## Logging
The code uses the `log` module from `mindsdb.utilities` for logging error messages, particularly in the `check_connection` method.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.