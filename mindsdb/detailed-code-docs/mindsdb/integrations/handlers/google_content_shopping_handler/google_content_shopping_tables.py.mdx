---
title: "google_content_shopping_tables.py"
---

## High-level description
This code defines three table classes (AccountsTable, OrdersTable, and ProductsTable) for interacting with the Google Content API for Shopping. These classes provide methods for selecting, deleting, and updating data related to accounts, orders, and products in a Merchant Center account.

## Code Structure
The code is organized into three main classes: AccountsTable, OrdersTable, and ProductsTable. Each class inherits from APITable and implements methods for interacting with the respective data types. The classes share similar structures, with methods for selecting, deleting, and (in the case of ProductsTable) updating data.

## Symbols

### AccountsTable
#### Description
This class represents the Accounts table for the Google Content API for Shopping. It provides methods to list and delete sub-accounts in a Merchant Center account.

#### Methods
1. `select(query: ast.Select) -&gt; DataFrame`
   - Retrieves accounts based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to get account data and returns it as a DataFrame.

2. `delete(query: ast.Delete)`
   - Deletes accounts based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to delete the specified accounts.

3. `get_columns() -&gt; list`
   - Returns a list of column names for the Accounts table.

### OrdersTable
#### Description
This class represents the Orders table for the Google Content API for Shopping. It provides methods to list and delete orders in a Merchant Center account.

#### Methods
1. `select(query: ast.Select) -&gt; DataFrame`
   - Retrieves orders based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to get order data and returns it as a DataFrame.

2. `delete(query: ast.Delete)`
   - Deletes orders based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to delete the specified orders.

3. `get_columns() -&gt; list`
   - Returns a list of column names for the Orders table.

### ProductsTable
#### Description
This class represents the Products table for the Google Content API for Shopping. It provides methods to list, update, and delete products in a Merchant Center account.

#### Methods
1. `select(query: ast.Select) -&gt; DataFrame`
   - Retrieves products based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to get product data and returns it as a DataFrame.

2. `update(query: ast.Update)`
   - Updates products based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to update the specified products.

3. `delete(query: ast.Delete)`
   - Deletes products based on the provided SQL query.
   - Parses conditions and parameters from the query.
   - Calls the API to delete the specified products.

4. `get_columns() -&gt; list`
   - Returns a list of column names for the Products table.

## Dependencies
The code relies on several external libraries and modules:
- pandas: For handling data in DataFrame format.
- mindsdb_sql.parser.ast: For parsing SQL queries.
- mindsdb.integrations.libs.api_handler.APITable: Base class for API tables.
- mindsdb.integrations.libs.response.HandlerResponse: For handling API responses.
- mindsdb.integrations.utilities.date_utils: For parsing dates.
- mindsdb.integrations.utilities.sql_utils: For extracting comparison conditions from SQL queries.

## Error Handling
The code implements basic error handling by raising NotImplementedError for unsupported operations or conditions. It also uses ValueError for unknown query targets.

## Performance Considerations
The code uses pagination through the `maxResults` parameter when querying the API, which can help manage large datasets. However, there's no explicit handling of rate limiting or optimization for large-scale data retrieval.

In conclusion, this code provides a structured interface for interacting with the Google Content API for Shopping, allowing for SQL-like querying of accounts, orders, and products data. It abstracts the complexities of API calls and data manipulation, providing a more familiar SQL-like interface for developers working with the Google Content API for Shopping.