---
title: "test_google_content_shopping_handler.py"
---

## High-level description
This code defines a unit test suite for the GoogleContentShoppingHandler class. It tests various functionalities of the handler, including connection checking, table retrieval, and executing different types of SQL queries (SELECT, DELETE, UPDATE) on the Google Content Shopping API.

## Code Structure
The code defines a single test class `GoogleSearchConsoleHandlerTest` that inherits from `unittest.TestCase`. It contains multiple test methods, each testing a specific aspect of the `GoogleContentShoppingHandler`.

## Symbols

### GoogleSearchConsoleHandlerTest
#### Description
This class is a test suite for the GoogleContentShoppingHandler. It sets up a handler instance and runs various tests on its methods.

#### Internal Logic
1. Sets up a handler instance with test credentials in `setUpClass`.
2. Defines multiple test methods, each testing a specific functionality of the handler.

### test_0_check_connection
#### Description
Tests the `check_connection` method of the handler.

#### Internal Logic
Asserts that the `check_connection` method returns True.

### test_1_get_tables
#### Description
Tests the `get_tables` method of the handler.

#### Internal Logic
Verifies that the returned tables object is not of type `RESPONSE_TYPE.ERROR`.

### test_2_select_accounts_query to test_8_update_products_query
#### Description
These methods test various SQL queries (SELECT, DELETE, UPDATE) on different tables (accounts, orders, products) using the `native_query` method of the handler.

#### Internal Logic
For each test:
1. Defines a SQL query string.
2. Calls the `native_query` method with the query.
3. Asserts that the result type is `RESPONSE_TYPE.TABLE`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.google_content_shopping_handler.google_content_shopping_handler | Imports the GoogleContentShoppingHandler class |
| mindsdb.api.executor.data_types.response_type | Imports the RESPONSE_TYPE enum |

## Configuration
The test suite uses the following configuration for the handler:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| merchant_id | string | "1234567890" | The merchant ID for the Google Content Shopping API |
| credentials | string | "/path/to/credentials.json" | Path to the credentials file for authentication |
| file_storage | string | "/path/to/file_storage" | Path to the file storage location |

## Error Handling
The test suite doesn't explicitly handle errors. It relies on the `unittest` framework to catch and report any assertion failures or exceptions raised during test execution.

## Notes
1. The test methods are numbered (test_0_, test_1_, etc.), which ensures they run in a specific order. This is generally not recommended in unit testing as tests should be independent, but it might be intentional in this case for some reason.
2. The actual GoogleContentShoppingHandler implementation is not provided, so the tests assume certain behavior from the handler methods.
3. The test suite doesn't include any cleanup methods, which might be necessary if the tests create or modify any persistent data.