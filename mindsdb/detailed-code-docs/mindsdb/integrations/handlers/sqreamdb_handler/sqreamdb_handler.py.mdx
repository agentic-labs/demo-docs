---
title: "sqreamdb_handler.py"
---

## High-level description
This code defines a `SQreamDBHandler` class, which is a database handler for SQreamDB. It provides functionality to connect to a SQreamDB instance, execute queries, and retrieve data. The handler implements methods for connecting, checking connection status, executing native queries, and retrieving table and column information.

## Code Structure
The `SQreamDBHandler` class inherits from `DatabaseHandler` and implements various methods to interact with SQreamDB. It uses the `pysqream` library for database connections and the `pysqream_sqlalchemy` dialect for SQL rendering.

## References
- `mindsdb.integrations.libs.base.DatabaseHandler`
- `mindsdb.utilities.log`
- `mindsdb_sql.render.sqlalchemy_render.SqlalchemyRender`
- `mindsdb.integrations.libs.response.HandlerStatusResponse`
- `mindsdb.integrations.libs.response.HandlerResponse`
- `mindsdb.integrations.libs.response.RESPONSE_TYPE`

## Symbols

### SQreamDBHandler
#### Description
A handler class for interacting with SQreamDB databases. It provides methods for connecting, executing queries, and retrieving database information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | Name of the particular handler instance |
| connection_data | Optional[dict] | Parameters for connecting to the database |

#### Internal Logic
1. Initializes connection data and status.
2. Implements methods for connecting, checking connection, executing queries, and retrieving database information.

### connect
#### Description
Establishes a connection to the SQreamDB database using the provided connection data.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | pysqream.Connection | The established database connection |

### check_connection
#### Description
Checks the connection status of the SQreamDB database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Success status and error message if an error occurs |

### native_query
#### Description
Executes a raw SQL query on the SQreamDB database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | The SQL query to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | The query result or error message |

### query
#### Description
Executes an AST query on the SQreamDB database by rendering it to SQL and calling `native_query`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ASTNode | The AST query to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | The query result or error message |

### get_tables
#### Description
Retrieves a list of all tables in the SQreamDB database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | The list of tables |

### get_columns
#### Description
Retrieves the columns of a specified table in the SQreamDB database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table_name | str | The name of the table to get columns for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | The list of columns and their types |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pysqream | SQreamDB database connection and operations |
| pysqream_sqlalchemy | SQL dialect for SQreamDB |
| pandas | Data manipulation and analysis |
| mindsdb_sql | SQL parsing and rendering |

## Error Handling
The code implements basic error handling by catching exceptions in the `check_connection` and `native_query` methods. Errors are logged and returned as part of the response objects.

## Logging
The code uses the `mindsdb.utilities.log` module for logging error messages.