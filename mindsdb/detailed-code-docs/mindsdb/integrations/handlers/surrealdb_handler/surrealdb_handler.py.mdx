---
title: "surrealdb_handler.py"
---

## High-level description
This code implements a SurrealDBHandler class, which is a database handler for SurrealDB within the MindsDB ecosystem. It provides functionality to connect to a SurrealDB database, execute queries, and retrieve information about tables and columns.

## Code Structure
The SurrealDBHandler class inherits from DatabaseHandler and implements various methods for database operations. It uses the pysurrealdb library to interact with SurrealDB and pandas for data manipulation. The class manages connection details, query execution, and data retrieval.

## Symbols

### SurrealDBHandler
#### Description
This class handles connections and executions of SurrealDB statements. It initializes the connection parameters, manages the connection state, and provides methods for querying and retrieving data from SurrealDB.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | Name of the handler instance |
| connection_data | dict | Parameters for connecting to the database |

#### Internal Logic
The class initializes connection parameters and provides methods for connecting, disconnecting, checking connection status, executing queries, and retrieving table and column information.

### connect
#### Description
Establishes a connection to the SurrealDB database using the provided connection parameters.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | surreal.Connection | SurrealDB connection object |

### check_connection
#### Description
Checks the connection to the SurrealDB handler.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response_code | StatusResponse | Status of the connection attempt |

### disconnect
#### Description
Closes the existing connection to the SurrealDB database.

### native_query
#### Description
Executes a raw SurrealQL query on the database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | SurrealQL query to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query execution result |

### query
#### Description
Executes a query represented as an Abstract Syntax Tree (AST).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ASTNode | SQL query represented as AST |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query execution result |

### get_tables
#### Description
Retrieves a list of tables from the SurrealDB database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | List of table names |

### get_columns
#### Description
Retrieves the list of columns for a specified table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table | str | Name of the table |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | List of column names and types |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pysurrealdb | SurrealDB client library |
| pandas | Data manipulation and analysis |
| mindsdb_sql | SQL parsing and AST manipulation |
| mindsdb.integrations.libs.base | Base classes for database handlers |
| mindsdb.integrations.libs.response | Response handling utilities |

## Error Handling
The code implements basic error handling using try-except blocks. Errors are logged using the logger and returned as part of the response objects.

## Logging
The code uses a logger (log.getLogger(__name__)) to log error messages during connection and query execution.

This documentation provides a comprehensive overview of the SurrealDBHandler class and its functionalities within the MindsDB ecosystem for interacting with SurrealDB databases.