---
title: "gitlab_handler.py"
---

## High-level description
The GitlabHandler class is an implementation of the APIHandler for interacting with GitLab's API. It provides functionality to connect to GitLab, retrieve issues and merge requests data, and execute queries on this data.

## Code Structure
The GitlabHandler class inherits from APIHandler and initializes with connection data, including the repository name. It registers two tables: "issues" and "merge_requests", each associated with a specific data retrieval class. The class provides methods for connecting to GitLab, checking the connection, and executing native queries.

## Symbols

### GitlabHandler
#### Description
This class handles the connection to GitLab and provides methods to interact with GitLab data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The handler name |
| connection_data | dict | Connection details including repository and API key |

#### Internal Logic
1. Initializes the handler with the given name and connection data.
2. Registers two tables: "issues" and "merge_requests".
3. Provides methods for connecting to GitLab, checking the connection, and executing queries.

### connect
#### Description
Establishes a connection to GitLab using the provided API key.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | gitlab.Gitlab | The GitLab connection object |

### check_connection
#### Description
Verifies the connection to GitLab and returns a status response.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Connection status response |

### native_query
#### Description
Executes a native SQL query by parsing it and calling the query method.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | The SQL query string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Query execution response |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| gitlab | Provides the GitLab API client |
| mindsdb_sql | Used for parsing SQL queries |

## Error Handling
The `check_connection` method catches exceptions during the connection attempt and includes the error message in the status response.

## API/Interface Reference
This handler exposes two tables:
| Endpoint | Description |
|:---------|:------------|
| issues | Provides access to GitLab issues data |
| merge_requests | Provides access to GitLab merge requests data |