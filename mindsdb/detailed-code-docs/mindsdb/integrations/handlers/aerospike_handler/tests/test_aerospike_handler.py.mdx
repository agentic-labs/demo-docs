---
title: "test_aerospike_handler.py"
---

## High-level description
This code defines a unit test class `AerospikeHandlerTest` for testing the `AerospikeHandler` class. It includes tests for checking the connection, executing a native query, retrieving tables, and getting columns from a specific table in an Aerospike database.

## Code Structure
The `AerospikeHandlerTest` class contains four test methods that interact with an instance of `AerospikeHandler`. The tests are designed to verify the basic functionality of the handler.

## Symbols

### `AerospikeHandlerTest`
#### Description
A test class that inherits from `unittest.TestCase`. It sets up an `AerospikeHandler` instance and defines test methods to verify its functionality.

#### Internal Logic
- Sets up class-level attributes in `setUpClass` method.
- Defines four test methods to check different aspects of the `AerospikeHandler`.

### `setUpClass`
#### Description
A class method that initializes the test environment by creating an `AerospikeHandler` instance with predefined connection parameters.

#### Inputs
None (class method)

#### Outputs
None

#### Internal Logic
- Defines `kwargs` dictionary with connection parameters.
- Creates an instance of `AerospikeHandler` with the name 'test_aerospike_handler' and the defined `kwargs`.

### `test_0_check_connection`
#### Description
Tests the `check_connection` method of the `AerospikeHandler`.

#### Internal Logic
- Calls `self.handler.check_connection()`.
- Asserts that the result is truthy (connection is successful).

### `test_1_native_query_select`
#### Description
Tests the `native_query` method of the `AerospikeHandler` with a SELECT query.

#### Internal Logic
- Defines a SELECT query.
- Calls `self.handler.native_query(query)`.
- Asserts that the result type is `RESPONSE_TYPE.TABLE`.

### `test_2_get_tables`
#### Description
Tests the `get_tables` method of the `AerospikeHandler`.

#### Internal Logic
- Calls `self.handler.get_tables()`.
- Asserts that the result type is not `RESPONSE_TYPE.ERROR`.

### `test_3_get_columns`
#### Description
Tests the `get_columns` method of the `AerospikeHandler` for a specific table.

#### Internal Logic
- Calls `self.handler.get_columns('house_rentals')`.
- Asserts that the result type is not `RESPONSE_TYPE.ERROR`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.aerospike_handler.aerospike_handler | Contains the AerospikeHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Provides the RESPONSE_TYPE enum |

## Notes
- The tests assume the existence of a table named 'house_rentals' in the Aerospike database.
- The connection parameters are hardcoded in the `setUpClass` method, which might need to be adjusted for different test environments.
- The test methods are numbered, suggesting a specific order of execution, which is not guaranteed in Python's unittest framework unless additional measures are taken.

This test suite provides basic coverage for the main functionalities of the `AerospikeHandler`, ensuring that it can connect to the database, execute queries, and retrieve schema information.