---
title: "test_solr_handler.py"
---

## High-level description
This code defines a unit test class `SolrHandlerTest` for testing the functionality of the `SolrHandler` class. It includes tests for connecting to a Solr server, retrieving tables, describing a table, and executing a select query.

## Code Structure
The `SolrHandlerTest` class inherits from `unittest.TestCase` and contains several test methods. The `setUpClass` method initializes a `SolrHandler` instance with test configuration, which is then used in the subsequent test methods.

## References
- `mindsdb.integrations.handlers.solr_handler.solr_handler.SolrHandler`
- `mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE`

## Symbols

### SolrHandlerTest
#### Description
A test class for the `SolrHandler`, containing methods to test various functionalities of the handler.

#### Internal Logic
1. Sets up a `SolrHandler` instance with test configuration in `setUpClass`.
2. Defines test methods for connection, getting tables, describing a table, and executing a select query.

### setUpClass
#### Description
Class method to set up the test environment by creating a `SolrHandler` instance with test configuration.

#### Inputs
None (class method)

#### Outputs
None

#### Internal Logic
1. Defines a dictionary `kwargs` with connection parameters for a Solr server.
2. Creates a `SolrHandler` instance with the name 'test_solr_handler' and the defined `kwargs`.

### test_0_connect
#### Description
Tests the connection to the Solr server.

#### Internal Logic
Calls the `check_connection()` method of the `SolrHandler` instance.

### test_2_get_tables
#### Description
Tests retrieving tables from the Solr server.

#### Internal Logic
1. Calls the `get_tables()` method of the `SolrHandler` instance.
2. Asserts that the response type is not an error.

### test_6_describe_table
#### Description
Tests describing a specific table (collection) in the Solr server.

#### Internal Logic
1. Calls the `get_columns()` method of the `SolrHandler` instance with the collection name "gettingstarted".
2. Asserts that the response type is a table.

### test_7_select_query
#### Description
Tests executing a select query on the Solr server.

#### Internal Logic
1. Defines a SELECT query to retrieve data from the "gettingstarted" collection.
2. Calls the `query()` method of the `SolrHandler` instance with the defined query.
3. Asserts that the response type is a table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.solr_handler.solr_handler.SolrHandler | The main class being tested |
| mindsdb.api.executor.data_types.response_type.RESPONSE_TYPE | Enum for response types |

## Configuration
The test configuration is defined in the `kwargs` dictionary within the `setUpClass` method:

| Option | Type | Value | Description |
|:-------|:-----|:------|:------------|
| username | str | "demo_user" | Username for Solr server authentication |
| password | str | "demo_password" | Password for Solr server authentication |
| host | str | "172.22.0.4" | Hostname or IP address of the Solr server |
| port | int | 8983 | Port number for the Solr server |
| server_path | str | "solr" | Path to the Solr server |
| collection | str | "gettingstarted" | Name of the Solr collection to be used |
| use_ssl | bool | False | Whether to use SSL for the connection |

## Error Handling
The test methods use assertions to check for expected response types. If any assertion fails, the test will raise an `AssertionError`.