---
title: "solr_handler.py"
---

## High-level description
The `SolrHandler` class is a database handler for connecting to and executing SQL statements on a Solr database. It provides methods for establishing a connection, executing queries, and retrieving data from Solr collections.

## Code Structure
The `SolrHandler` class inherits from `DatabaseHandler` and implements methods for connecting to Solr, executing queries, and managing the connection. It uses SQLAlchemy to create an engine for database operations.

## Symbols

### `SolrHandler`
#### Description
This class handles the connection and execution of SQL statements for Solr databases.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The name of the handler instance |
| connection_data | Optional[dict] | A dictionary containing connection parameters |

#### Internal Logic
1. Initializes the handler with connection data.
2. Validates required connection parameters.
3. Creates a SQLAlchemy engine for Solr connection.
4. Implements methods for connecting, disconnecting, and executing queries.

### `connect`
#### Description
Establishes a connection to the Solr database using the provided connection data.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| connection | Connection | SQLAlchemy connection object |

### `disconnect`
#### Description
Closes the existing connection to the Solr database.

### `check_connection`
#### Description
Checks the connection to the Solr database and returns a status response.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | Connection status response |

### `native_query`
#### Description
Executes a raw SQL query on the Solr database and returns the result.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | SQL query string to execute |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query execution response |

### `query`
#### Description
Executes an SQL query represented by an ASTNode on the Solr database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | ASTNode | SQL query as an abstract syntax tree |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Response | Query execution response |

### `get_tables`
#### Description
Retrieves a list of tables (collections) in the Solr database.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Response | Response containing table names |

### `get_columns`
#### Description
Retrieves the column information for a specified table in the Solr database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table_name | str | Name of the table to get columns for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Response | Response containing column information |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| sqlalchemy | For creating database engine and executing SQL queries |
| pandas | For handling query results as DataFrames |
| mindsdb_sql | For parsing SQL queries |
| mindsdb.utilities | For logging |
| mindsdb.integrations.libs.base | For base DatabaseHandler class |
| mindsdb.integrations.libs.response | For response handling |

## Error Handling
The code implements basic error handling, catching exceptions during connection and query execution. Errors are logged and returned as part of the response objects.