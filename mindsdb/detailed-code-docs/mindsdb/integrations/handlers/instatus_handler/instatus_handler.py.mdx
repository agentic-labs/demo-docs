---
title: "instatus_handler.py"
---

## High-level description
This code defines the `InstatusHandler` class, which is an API handler for interacting with the Instatus API. It provides functionality to connect to the API, execute queries, and manage tables for status pages and components.

## Code Structure
The `InstatusHandler` class inherits from `APIHandler` and implements methods for connection, API calls, and query execution. It registers two tables: `StatusPages` and `Components`.

## Symbols

### `InstatusHandler`
#### Description
This class handles the connection and interaction with the Instatus API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | str | The name of the handler |
| **kwargs | dict | Additional keyword arguments, including connection data |

#### Internal Logic
1. Initializes the base URL and API key.
2. Registers tables for status pages and components.
3. Implements methods for checking connection, connecting to the API, and executing queries.

### `check_connection`
#### Description
Checks the connection to the Instatus API.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | The status of the connection attempt |

### `connect`
#### Description
Establishes a connection to the Instatus API.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | The status of the connection attempt |

### `native_query`
#### Description
Processes a raw SQL query by parsing it and executing it.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | str | The raw SQL query string |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | StatusResponse | The result of the query execution |

### `call_instatus_api`
#### Description
Makes an API call to the Instatus API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| endpoint | str | The API endpoint to call |
| method | str | The HTTP method to use (default: 'GET') |
| params | dict | Query parameters (optional) |
| json_data | dict | JSON data for POST/PUT requests (optional) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | pd.DataFrame | The API response data as a DataFrame |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| requests | Making HTTP requests to the Instatus API |
| pandas | Data manipulation and storage |
| mindsdb_sql | SQL parsing |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| api_key | str | None | The API key for authenticating with the Instatus API |

## Error Handling
The code implements basic error handling for API connection and request errors. It raises exceptions with descriptive error messages when encountering issues.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /v2/pages | GET | Retrieves status pages |

Note: The full API interface is not explicitly defined in this code snippet. The `call_instatus_api` method allows for flexible API calls to different endpoints.