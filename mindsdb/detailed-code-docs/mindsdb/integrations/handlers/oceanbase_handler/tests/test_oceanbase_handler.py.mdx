---
title: "test_oceanbase_handler.py"
---

## High-level description
This code defines a unit test class `OceanBaseHandlerTest` for testing the functionality of the `OceanBaseHandler` class. It includes tests for connection, table creation, data insertion, querying, and metadata retrieval operations using the OceanBase database.

## Code Structure
The `OceanBaseHandlerTest` class contains multiple test methods that sequentially test different aspects of the `OceanBaseHandler`. The tests are designed to be run in a specific order, as indicated by their numeric prefixes.

## Symbols

### OceanBaseHandlerTest
#### Description
A test class that inherits from `unittest.TestCase`, containing methods to test various functionalities of the `OceanBaseHandler`.

#### Internal Logic
1. Sets up a connection to an OceanBase database using predefined credentials.
2. Tests connection, table creation, data insertion, querying, and metadata retrieval operations.
3. Cleans up by dropping the created table at the end of the tests.

### setUpClass
#### Description
A class method that initializes the `OceanBaseHandler` with connection details before running the tests.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cls | class | The test class itself |

#### Internal Logic
1. Defines connection data for the OceanBase database.
2. Initializes an instance of `OceanBaseHandler` with the connection data.

### test_0_check_connection
#### Description
Tests the `check_connection` method of the `OceanBaseHandler`.

#### Internal Logic
Asserts that the `check_connection` method returns `True`.

### test_1_connect
#### Description
Tests the `connect` method of the `OceanBaseHandler`.

#### Internal Logic
Asserts that the `connect` method returns `True`.

### test_2_create_table
#### Description
Tests the creation of a table named "Lover" using the `query` method.

#### Internal Logic
1. Executes a CREATE TABLE SQL query.
2. Asserts that the result is not an error.

### test_3_insert
#### Description
Tests the insertion of data into the "Lover" table using the `query` method.

#### Internal Logic
1. Executes an INSERT SQL query.
2. Asserts that the result is not an error.

### test_4_native_query_select
#### Description
Tests the SELECT query functionality using the `query` method.

#### Internal Logic
1. Executes a SELECT SQL query.
2. Asserts that the result type is `RESPONSE_TYPE.TABLE`.

### test_5_get_tables
#### Description
Tests the `get_tables` method of the `OceanBaseHandler`.

#### Internal Logic
1. Calls the `get_tables` method.
2. Asserts that the result type is `RESPONSE_TYPE.TABLE`.

### test_6_get_columns
#### Description
Tests the `get_columns` method of the `OceanBaseHandler` and cleans up by dropping the "Lover" table.

#### Internal Logic
1. Calls the `get_columns` method for the "Lover" table.
2. Executes a DROP TABLE SQL query to clean up.
3. Asserts that the columns result is not an error.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.oceanbase_handler.oceanbase_handler | Contains the OceanBaseHandler class being tested |
| mindsdb.integrations.libs.response | Provides the RESPONSE_TYPE enum for asserting response types |

## Error Handling
The test methods use assertions to check for expected outcomes. If any assertion fails, the test will raise an `AssertionError`.