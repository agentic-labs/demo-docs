---
title: "test_questdb_handler.py"
---

## High-level description
This file contains unit tests for the QuestDBHandler class, which is responsible for handling interactions with a QuestDB database. The tests cover basic functionality such as checking the connection, describing tables, getting table lists, and executing select queries.

## Code Structure
The code defines a single test class `QuestDBHandlerTest` that inherits from `unittest.TestCase`. It sets up a QuestDBHandler instance in the `setUpClass` method and defines four test methods to verify different aspects of the handler's functionality.

## Symbols

### QuestDBHandlerTest
#### Description
A test class that contains unit tests for the QuestDBHandler. It sets up a handler instance with test connection data and runs various tests to ensure the handler's functionality.

#### Internal Logic
1. Sets up a QuestDBHandler instance with test connection data in the `setUpClass` method.
2. Defines four test methods to check different functionalities of the handler:
   - `test_0_check_connection`: Verifies that the connection can be established.
   - `test_1_describe_table`: Checks if a specific table can be described.
   - `test_2_get_tables`: Ensures that the list of tables can be retrieved.
   - `test_3_select_query`: Tests if a select query can be executed successfully.

### test_0_check_connection
#### Description
Tests the `check_connection` method of the QuestDBHandler.

#### Internal Logic
Asserts that the `check_connection` method returns True, indicating a successful connection.

### test_1_describe_table
#### Description
Tests the `describe_table` method of the QuestDBHandler.

#### Internal Logic
1. Calls `describe_table` with the table name "house_rentals_data".
2. Asserts that the response type is not an error.

### test_2_get_tables
#### Description
Tests the `get_tables` method of the QuestDBHandler.

#### Internal Logic
1. Calls `get_tables` to retrieve the list of tables.
2. Asserts that the response type is not an error.

### test_3_select_query
#### Description
Tests the `query` method of the QuestDBHandler with a SELECT statement.

#### Internal Logic
1. Defines a SELECT query to retrieve all columns from "house_rentals_data" where id is '1'.
2. Executes the query using the handler's `query` method.
3. Asserts that the result has at least one row.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| unittest | Provides the testing framework |
| mindsdb.integrations.handlers.questdb_handler.questdb_handler | Contains the QuestDBHandler class being tested |
| mindsdb.api.executor.data_types.response_type | Provides the RESPONSE_TYPE enum for checking response types |

## Configuration
The test class uses a configuration dictionary `kwargs` to set up the QuestDBHandler:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| host | str | "127.0.0.1" | The host address of the QuestDB server |
| port | str | "8812" | The port number for the QuestDB server |
| user | str | "admin" | The username for authentication |
| password | str | "quest" | The password for authentication |
| database | str | "questdb" | The name of the database to connect to |

These configuration options are used to create a test instance of the QuestDBHandler in the `setUpClass` method.