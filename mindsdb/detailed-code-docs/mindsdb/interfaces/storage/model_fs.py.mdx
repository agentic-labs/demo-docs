---
title: "model_fs.py"
---

Here's a detailed explanation of the `model_fs.py` file:

## High-level description
This file defines two main classes: `ModelStorage` and `HandlerStorage`. These classes handle storage operations for ML models and integration handlers, respectively. They provide methods for managing files, JSON data, and other storage-related tasks.

## Code Structure
The `ModelStorage` class is designed to work with predictor-related storage, while `HandlerStorage` is for integration-related storage. Both classes use a `FileStorageFactory` to create file storage instances and interact with the database through SQLAlchemy models.

## Symbols

### ModelStorage
#### Description
This class handles all model-related storage requirements, including setting status, storing artifacts, and managing files and JSON data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| predictor_id | int | The ID of the predictor (model) |

#### Internal Logic
- Initializes file storage for the predictor
- Provides methods for getting and setting model information, status, and training state
- Manages file and JSON operations for the model

### HandlerStorage
#### Description
This class deals with all handler-related storage requirements, including storing metadata and synchronizing folders across instances.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| integration_id | int | The ID of the integration |
| root_dir | str | Optional root directory for storage |
| is_temporal | bool | Flag indicating if the storage is temporal |

#### Internal Logic
- Initializes file storage for the integration
- Provides methods for managing connection arguments, files, and JSON data
- Handles folder synchronization and export/import of files

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | File system operations |
| re | Regular expressions for name sanitization |
| io | I/O operations |
| zipfile | Handling zip files |
| typing | Type hinting |
| mindsdb.interfaces.storage.db | Database models and session management |
| mindsdb.interfaces.storage.fs | File storage functionality |
| mindsdb.interfaces.storage.json | JSON storage functionality |

## Error Handling
Both classes include error handling for various operations, such as checking if a model exists, handling file operations, and managing database queries.

## API/Interface Reference
Both `ModelStorage` and `HandlerStorage` provide methods for:
- File operations: `file_get`, `file_set`, `file_list`, `file_del`
- JSON operations: `json_set`, `json_get`, `json_list`, `json_del`
- Folder operations: `folder_get`, `folder_sync`

`ModelStorage` also includes methods for managing model status, training state, and columns.

`HandlerStorage` provides additional methods for connection argument management and file export/import.

This file is crucial for MindsDB's storage management, providing a unified interface for handling model and integration data across different storage types and locations.