---
title: "db.py"
---

This file defines the database schema and operations for MindsDB's storage layer. Here are the key points:

1. It uses SQLAlchemy ORM to define database tables as Python classes.

2. The main tables defined are:
   - Predictor: Stores ML model metadata
   - Project: Represents projects that group models/data
   - Log: Stores system logs
   - Integration: Stores external data source connections
   - File: Stores metadata for uploaded files
   - View: Stores database views
   - Jobs: Stores scheduled jobs
   - JobsHistory: Stores job execution history
   - ChatBots: Stores chatbot configurations
   - ChatBotsHistory: Stores chatbot conversation history
   - Triggers: Stores database triggers
   - Tasks: Stores background tasks
   - Skills: Stores AI agent skills
   - Agents: Stores AI agent configurations
   - KnowledgeBase: Stores knowledge bases for AI agents
   - QueryContext: Stores query context information
   - LLMLog: Stores logs for LLM API calls
   - LLMData: Stores question/answer pairs from LLM calls

3. It defines relationships between tables using foreign keys.

4. It uses custom column types like Json and Array for storing complex data.

5. It includes indexes and constraints to optimize queries and enforce data integrity.

6. The file is part of the database migration system, allowing schema changes to be versioned and applied incrementally.

7. The schema supports multi-tenancy with company_id fields on many tables.

8. It includes fields for tracking creation and update timestamps on most tables.

9. The schema is designed to support MindsDB's core functionality around ML model management, data integration, and AI agents.

This file serves as the core data model for MindsDB, defining how all the system's data is stored and related. It's crucial for understanding the overall data architecture of the application.