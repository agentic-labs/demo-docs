---
title: "2023-09-06_d44ab65a6a35_add_agents_table.py"
---

## High-level description
This code defines an Alembic migration script to add an 'agents' table to the database schema. It creates a new table with various columns to store information about agents, including their name, associated project, model, and other metadata.

## Symbols

### `upgrade()`
#### Description
This function defines the changes to be applied when upgrading the database schema. It creates a new table named 'agents' with specified columns.

#### Internal Logic
The function uses Alembic's `op.create_table()` method to create the 'agents' table with the following columns:
- `id`: Integer, primary key
- `company_id`: Integer, nullable
- `user_class`: Integer, nullable
- `name`: String, not nullable
- `project_id`: Integer, not nullable
- `model_name`: String, not nullable
- `params`: JSON, nullable
- `updated_at`: DateTime, nullable
- `created_at`: DateTime, nullable

### `downgrade()`
#### Description
This function defines the changes to be applied when downgrading the database schema. It removes the 'agents' table.

#### Internal Logic
The function uses Alembic's `op.drop_table()` method to drop the 'agents' table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| alembic | Used for database migrations |
| sqlalchemy | Used for defining database schema |

## Configuration
The migration script includes configuration information used by Alembic:

| Option | Type | Value | Description |
|:-------|:-----|:------|:------------|
| revision | string | 'd44ab65a6a35' | Unique identifier for this migration |
| down_revision | string | 'ad04ee0bd385' | Identifier of the previous migration |
| branch_labels | None | None | No branch labels specified |
| depends_on | None | None | No dependencies specified |

This configuration helps Alembic manage the order and application of migrations.