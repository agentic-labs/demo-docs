---
title: "2023-02-27_ef04cdbe51ed_jobs_user_class.py"
---

## High-level description
This code represents an Alembic migration script for adding a 'user_class' column to the 'jobs' table in a database schema. It defines both upgrade and downgrade operations to add and remove the column, respectively.

## Symbols

### `upgrade()`
#### Description
This function defines the database schema changes to be applied when upgrading the database.

#### Internal Logic
1. Uses Alembic's `op.batch_alter_table()` to start a batch operation on the 'jobs' table.
2. Adds a new column named 'user_class' of type Integer to the 'jobs' table.

### `downgrade()`
#### Description
This function defines the database schema changes to be applied when downgrading the database.

#### Internal Logic
1. Uses Alembic's `op.batch_alter_table()` to start a batch operation on the 'jobs' table.
2. Removes the 'user_class' column from the 'jobs' table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| alembic | Provides database migration tools and utilities |
| sqlalchemy | Used for defining database schema and operations |
| mindsdb.interfaces.storage.db | Imported but not directly used in this script |

## References
This migration script references the 'jobs' table, which is defined in the related `mindsdb/interfaces/storage/db.py` file. The `Jobs` class in that file represents the 'jobs' table and already includes a `user_class` column:

```python
class Jobs(Base):
    __tablename__ = "jobs"
    # ... other columns ...
    user_class = Column(Integer, nullable=True)
    # ... more columns ...
```

This migration script is adding the `user_class` column to existing databases that don't have it yet, aligning the database schema with the `Jobs` class definition.

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| revision | string | 'ef04cdbe51ed' | Unique identifier for this migration |
| down_revision | string | '3154382dab17' | Identifier of the previous migration |
| branch_labels | None | None | No branch labels are set |
| depends_on | None | None | No dependencies are specified |

These configuration options are used by Alembic to manage the migration history and dependencies.