---
title: "2023-06-16_9d6271bb2c38_update_chat_bots_table.py"
---

## High-level description
This code represents an Alembic migration script for updating the `chat_bots` table in a database. It adds two new columns: `chat_engine` and `is_running`, and provides methods for both upgrading (adding these columns) and downgrading (removing these columns) the database schema.

## Symbols

### `upgrade()`
#### Description
This function defines the changes to be applied to the database schema when upgrading to this revision. It adds two new columns to the `chat_bots` table.

#### Internal Logic
1. Uses `op.batch_alter_table()` to start a batch operation on the `chat_bots` table.
2. Adds a new column `chat_engine` of type String, which is nullable.
3. Adds a new column `is_running` of type Boolean, with a default value of True.

### `downgrade()`
#### Description
This function defines the changes to be applied to the database schema when downgrading from this revision. It removes the two columns added in the `upgrade()` function.

#### Internal Logic
1. Uses `op.batch_alter_table()` to start a batch operation on the `chat_bots` table.
2. Drops the `chat_engine` column.
3. Drops the `is_running` column.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| alembic | Used for database migrations |
| sqlalchemy | Used for defining database schema changes |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| revision | string | '9d6271bb2c38' | Unique identifier for this migration |
| down_revision | string | 'aaecd7012a78' | Identifier of the previous migration |
| branch_labels | None | None | Used for branching in migration history |
| depends_on | None | None | Dependencies on other migrations |

These configuration options are used by Alembic to manage the migration history and ensure proper sequencing of migrations.