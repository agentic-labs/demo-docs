---
title: "2022-07-15_b5b53e0ea7f8_training_data_rows_columns_count.py"
---

## High-level description
This code represents an Alembic migration script for a database schema change. It adds two new columns, 'training_data_columns_count' and 'training_data_rows_count', to the 'predictor' table in the database.

## Symbols

### revision
#### Description
A unique identifier for this migration script.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| revision | string | The revision ID 'b5b53e0ea7f8' |

### down_revision
#### Description
Identifies the previous migration script in the sequence.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| down_revision | string | The previous revision ID '999bceb904df' |

### upgrade()
#### Description
Defines the database schema changes to be applied when upgrading the database.

#### Internal Logic
1. Uses a batch alter table operation on the 'predictor' table.
2. Adds two new columns:
   - 'training_data_columns_count' (Integer, nullable)
   - 'training_data_rows_count' (Integer, nullable)

### downgrade()
#### Description
Defines the database schema changes to be applied when downgrading the database.

#### Internal Logic
1. Uses a batch alter table operation on the 'predictor' table.
2. Drops the two columns added in the upgrade function:
   - 'training_data_rows_count'
   - 'training_data_columns_count'

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| alembic | Provides database migration tools |
| sqlalchemy | Used for defining database schema changes |
| mindsdb.interfaces.storage.db | Imported but not directly used in this script |

## Notes
1. This migration script is part of a sequence, as indicated by the 'revision' and 'down_revision' identifiers.
2. The new columns are added as nullable, which means they can contain NULL values.
3. The script uses Alembic's batch operations, which are typically used for databases that don't support transactional DDL.
4. The purpose of these new columns seems to be to store information about the training data used in the predictor, specifically the number of rows and columns.