---
title: "2023-02-17_ee63d868fa84_predictor_integration_null.py"
---

## High-level description
This code represents an Alembic migration script for a database schema change in the MindsDB project. It modifies the 'predictor' table by altering the 'integration_id' column to allow NULL values.

## Code Structure
The script defines two main functions: `upgrade()` and `downgrade()`, which are used by Alembic to apply and revert the database schema changes, respectively.

## Symbols

### revision
#### Description
A unique identifier for this migration script.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| revision | string | The revision ID 'ee63d868fa84' |

### down_revision
#### Description
Identifies the previous migration script in the sequence.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| down_revision | string | The previous revision ID 'b6d0a47294ac' |

### upgrade()
#### Description
Applies the database schema changes to allow NULL values in the 'integration_id' column of the 'predictor' table.

#### Internal Logic
1. Uses `op.batch_alter_table()` to start a batch operation on the 'predictor' table.
2. Within the batch operation, calls `alter_column()` to modify the 'integration_id' column:
   - Sets the column type to `sa.INTEGER()`
   - Changes the `nullable` property to `True`

### downgrade()
#### Description
Reverts the database schema changes by making the 'integration_id' column non-nullable again.

#### Internal Logic
1. Uses `op.batch_alter_table()` to start a batch operation on the 'predictor' table.
2. Within the batch operation, calls `alter_column()` to modify the 'integration_id' column:
   - Sets the column type to `sa.INTEGER()`
   - Changes the `nullable` property to `False`

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| alembic | Provides database migration tools and utilities |
| sqlalchemy | Used for database operations and column type definitions |
| mindsdb.interfaces.storage.db | Imported but not directly used in this script |

## Notes
1. The script is auto-generated by Alembic but may require manual adjustments.
2. The import of `mindsdb.interfaces.storage.db` is marked with a `# noqa` comment, indicating that it should not trigger linter warnings despite not being explicitly used in the script.