---
title: "Overview"
---

## High-level description
This directory contains Alembic migration scripts for managing database schema changes in the MindsDB project. The migrations cover various aspects of the system, including predictors, agents, skills, jobs, and other core components.

## What does it do?
The migration scripts in this directory collectively manage the evolution of the MindsDB database schema over time. They handle tasks such as:

1. Creating new tables (e.g., chat_bots, agents, skills, knowledge_base)
2. Adding, modifying, or removing columns from existing tables
3. Implementing data migrations to update existing records
4. Adding or removing constraints and indexes
5. Implementing soft delete mechanisms
6. Updating relationships between tables

These migrations allow the MindsDB system to adapt its database structure as new features are added or existing ones are modified, while maintaining data integrity and backwards compatibility.

## Key Files
Some of the notable migration scripts include:

1. `2021-11-30_17c3d2384711_init.py`: Initializes the core database schema with tables for predictors, datasources, and integrations.
2. `2022-09-06_d44ab65a6a35_add_agents_table.py`: Adds the 'agents' table to support AI agents functionality.
3. `2023-09-06_e187961e844a_add_agent_skills_table.py`: Creates a many-to-many relationship table between agents and skills.
4. `2023-09-20_309db3d07cf4_add_knowledge_base.py`: Adds a 'knowledge_base' table for managing knowledge bases in the system.
5. `2024-02-12_9461892bd889_llm_log.py`: Creates a table for logging Large Language Model (LLM) operations.
6. `2024-06-06_cbedc4968d5d_store_llm_data.py`: Adds a table for storing input-output pairs from LLM interactions.

These scripts, along with many others, collectively define the database schema evolution for the MindsDB system.

## Dependencies
The migration scripts primarily rely on:

| Dependency | Purpose |
|:-----------|:--------|
| alembic | Database migration tool used for managing schema changes |
| sqlalchemy | SQL toolkit and ORM used for defining database schemas and operations |
| mindsdb.interfaces.storage.db | Custom MindsDB module for database-related functionality |

## Configuration
Each migration script includes configuration metadata used by Alembic:

| Option | Type | Description |
|:-------|:-----|:------------|
| revision | string | Unique identifier for the migration |
| down_revision | string | Identifier of the previous migration |
| branch_labels | None | Used for branching in migration history |
| depends_on | None | Dependencies on other migrations |

These configurations help Alembic manage the order and dependencies of migrations, ensuring they are applied correctly.

The migrations in this directory play a crucial role in maintaining and evolving the database schema for the MindsDB system, allowing it to adapt to new features and requirements over time while preserving data integrity and system functionality.