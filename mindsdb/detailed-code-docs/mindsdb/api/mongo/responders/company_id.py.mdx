---
title: "company_id.py"
---

## High-level description
This code defines a `Responce` class (note the typo in the class name) that handles MongoDB queries related to setting company and user information in the application context. It's part of the MindDB API's MongoDB interface and is responsible for updating the context with company ID, user class, and email confirmation status.

## Symbols

### `Responce`
#### Description
A class that extends the `Responder` base class to handle specific MongoDB queries related to company and user information.

#### Internal Logic
1. Checks if the incoming query contains a 'company_id' field.
2. If present, extracts 'company_id', 'user_class', 'email_confirmed', and 'need_response' from the query.
3. Updates the application context with the extracted information.
4. Returns a response if 'need_response' is True, otherwise returns None.

### `Responce.when`
#### Description
Determines if this responder should handle the given query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | dict | The MongoDB query to be checked |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | bool | True if the query contains 'company_id', False otherwise |

### `Responce.result`
#### Description
Processes the query and updates the application context with company and user information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | dict | The MongoDB query containing company and user information |
| request_env | object | The request environment (unused in this method) |
| mindsdb_env | object | The MindDB environment (unused in this method) |
| session | object | The session object (unused in this method) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | dict or None | A dictionary with {'ok': 1} if 'need_response' is True, None otherwise |

#### Internal Logic
1. Extracts 'company_id', 'user_class', 'email_confirmed', and 'need_response' from the query.
2. Updates the application context (ctx) with the extracted information.
3. Returns a response based on the 'need_response' flag.

## Side Effects
- Updates the global application context (`ctx`) with `company_id`, `user_class`, and `email_confirmed`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| mindsdb.api.mongo.classes | Imports the Responder base class |
| mindsdb.utilities.context | Imports the context object for updating application state |

## TODOs
- The class name "Responce" appears to be a typo and should be corrected to "Response".