---
title: "responder_collection.py"
---

## High-level description
This code defines a `RespondersCollection` class that manages a collection of responders for handling MongoDB queries. It provides functionality to add responders and find matching responders for given queries.

## Code Structure
The `RespondersCollection` class contains a list of responders and methods to manage them. The `find_match` method iterates through the responders to find a match for a given query, while the `add` method adds new responders to the collection.

## Symbols

### RespondersCollection
#### Description
A class that manages a collection of responders for MongoDB queries.

#### Internal Logic
- Initializes with an empty list of responders
- Provides methods to add responders and find matching responders for queries

### RespondersCollection.find_match
#### Description
Finds a matching responder for a given query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | dict | The MongoDB query to match against responders |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| responder | Responder | The matching responder or an ErrorResponder if no match is found |

#### Internal Logic
1. Iterates through the list of responders
2. Calls the `match` method on each responder with the given query
3. Returns the first matching responder
4. If no match is found, creates and returns an ErrorResponder with an appropriate error message

### RespondersCollection.add
#### Description
Adds a new responder to the collection.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| when | dict | The condition for when the responder should be used |
| result | dict | The result to be returned by the responder |

#### Internal Logic
Creates a new `Responder` instance with the given `when` and `result` parameters and appends it to the `responders` list.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| .responder | Imports the Responder class used to create responder instances |
| mindsdb.utilities | Imports the logging functionality |

## Logging
The code uses the `log` module from `mindsdb.utilities` to create a logger instance. It logs an error message when no matching responder is found for a query.

## Error Handling
When no matching responder is found for a query, the `find_match` method creates an `ErrorResponder` with a specific error message, code, and codeName. This ensures that even when no match is found, a proper error response is returned.

## TODOs
There are no explicit TODOs in the code.

This code serves as a crucial component in handling MongoDB queries within the MindsDB system, providing a flexible way to manage and match responders to incoming queries.