---
title: "Overview"
---

## High-level description
The `mindsdb/api/postgres/postgres_proxy` directory contains the implementation of a PostgreSQL proxy server for MindsDB. This proxy allows PostgreSQL clients to interact with MindsDB as if it were a native PostgreSQL database, enabling the use of MindsDB's AI and machine learning capabilities through standard PostgreSQL protocols and SQL commands.

## What does it do?
The PostgreSQL proxy in this directory performs several key functions:

1. Protocol Handling: It implements the PostgreSQL wire protocol, allowing communication between PostgreSQL clients and MindsDB.

2. Authentication: The proxy manages client authentication, ensuring secure access to MindsDB resources.

3. Query Processing: It receives SQL queries from clients, parses them, and translates them into MindsDB operations.

4. Data Type Conversion: The proxy handles the conversion of data types between PostgreSQL and MindsDB formats.

5. Result Handling: It processes query results from MindsDB and formats them as PostgreSQL-compatible responses.

6. Error Management: The proxy implements error handling for various scenarios, including authentication failures, unsupported operations, and SQL execution errors.

7. Session Management: It maintains client sessions and handles session-specific operations.

This proxy essentially acts as a bridge, allowing PostgreSQL clients to leverage MindsDB's advanced AI and machine learning capabilities using familiar PostgreSQL interfaces and commands.

## Key Files

1. `postgres_proxy.py`: This is the main file implementing the PostgreSQL proxy server. It contains the `PostgresProxyHandler` class, which manages client connections, handles the PostgreSQL wire protocol, and coordinates the overall proxy functionality.

2. `executor/executor.py`: This file contains the `Executor` class, which is responsible for parsing SQL queries, executing them within MindsDB, and preparing the results for transmission back to the client.

3. `postgres_packets/postgres_packets.py`: This file defines classes for reading and constructing PostgreSQL protocol packets, facilitating communication between the proxy and PostgreSQL clients.

4. `postgres_packets/postgres_message_formats.py`: This file implements various PostgreSQL message format classes, representing specific types of messages in the PostgreSQL protocol.

5. `utilities/__init__.py`: This file contains utility functions, such as `strip_null_byte`, which are used throughout the proxy implementation for data cleaning and normalization.

## Dependencies
The PostgreSQL proxy relies on several external libraries and internal MindsDB components:

1. mindsdb_sql: Used for SQL parsing and dialect handling.
2. numpy: Utilized for efficient numerical operations and type conversions.
3. pandas: Employed for data manipulation and handling query results.
4. socketserver: Used to implement the TCP server for the proxy.
5. struct: Used for binary data packing and unpacking in protocol messages.
6. typing: Provides type hinting for improved code readability and maintainability.

## Configuration
The PostgreSQL proxy uses MindsDB's configuration to set up the server host and port. It doesn't have specific configuration files but uses some configurable parameters:

1. Character set: The `Executor` class accepts a `charset` parameter, defaulting to "utf8".
2. SQL dialects: The parser attempts to use the MindsDB SQL dialect first, falling back to MySQL dialect if necessary.

In conclusion, the `mindsdb/api/postgres/postgres_proxy` directory implements a comprehensive PostgreSQL proxy server for MindsDB. This proxy enables PostgreSQL clients to interact with MindsDB's AI and machine learning capabilities using standard PostgreSQL protocols and SQL commands, effectively bridging the gap between traditional PostgreSQL databases and MindsDB's advanced features.