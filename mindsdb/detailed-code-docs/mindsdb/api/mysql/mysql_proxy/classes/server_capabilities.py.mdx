---
title: "server_capabilities.py"
---

## High-level description
This code defines a `ServerCapabilities` class that manages server capabilities for a MySQL proxy. It provides methods to check, set, and retrieve capability flags, which are used to determine the features and behaviors supported by the server during the MySQL connection handshake process.

## Code Structure
The code consists of a `ServerCapabilities` class and an instance of this class called `server_capabilities`. The class methods interact with a bitwise capability flag stored in the `_capabilities` attribute.

## Symbols

### ServerCapabilities
#### Description
A class that encapsulates server capabilities, providing methods to check, set, and retrieve capability flags.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| capabilities | int | Initial capability flags |

#### Internal Logic
The class uses bitwise operations to manage capability flags:
- `has`: Checks if a specific capability is set using bitwise AND
- `set`: Sets or unsets a capability using bitwise OR or AND with NOT
- `value`: Property that returns the current capabilities

### server_capabilities
#### Description
An instance of `ServerCapabilities` initialized with `DEFAULT_CAPABILITIES`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| mindsdb.api.mysql.mysql_proxy.libs.constants.mysql.DEFAULT_CAPABILITIES | Provides the default server capabilities |

## References
This code is referenced in the `HandshakeResponsePacket` class in the related file `handshake_response_packet.py`. The `server_capabilities` instance is used to check specific capabilities during the handshake process.

## Side Effects
The `set` method modifies the internal `_capabilities` attribute, which affects the server's reported capabilities.

## Performance Considerations
Bitwise operations used in this class are generally very efficient for managing flags.