---
title: "metrics-service.yaml"
---

## High-level description
This YAML file defines a Kubernetes Service resource for exposing metrics of the secrets-operator controller manager. It sets up a service that allows monitoring systems to scrape metrics from the controller manager, facilitating observability of the secrets-operator.

## Symbols

### Service
#### Description
This Kubernetes Service resource is designed to expose the metrics endpoint of the secrets-operator controller manager. It uses labels for identification and selector for routing traffic to the appropriate pods.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| .Values.metricsService.type | String | The type of Kubernetes Service to create |
| .Values.metricsService.ports | List | The ports configuration for the Service |

#### Internal Logic
1. Sets the Service name using a template function `secrets-operator.fullname`.
2. Applies labels for identification and management.
3. Configures the Service type based on the provided value.
4. Sets up a selector to target pods with the `control-plane: controller-manager` label.
5. Configures ports based on the provided values.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| secrets-operator.fullname | Template function to generate the full name of the service |
| secrets-operator.labels | Template function to include common labels |
| secrets-operator.selectorLabels | Template function to include selector labels |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| .Values.metricsService.type | String | N/A | Specifies the type of Kubernetes Service |
| .Values.metricsService.ports | List | N/A | Defines the ports configuration for the Service |

Note: The actual default values are not provided in this YAML file and would be defined in a separate values.yaml file.