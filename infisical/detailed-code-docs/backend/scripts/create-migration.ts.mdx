---
title: "create-migration.ts"
---

## High-level description
This script creates a new database migration file using Knex.js. It prompts the user for a migration name, formats it, and then executes the Knex CLI command to generate the migration file with the provided name.

## Symbols

### `create-migration.ts` (main script)
#### Description
This script is responsible for creating a new database migration file using Knex.js. It interacts with the user to get a migration name, formats it, and then uses the Knex CLI to generate the migration file.

#### Internal Logic
1. Import required modules: `execSync` from 'child_process', `path`, `promptSync`, and `slugify`.
2. Create a prompt interface using `promptSync`.
3. Prompt the user to enter a name for the migration.
4. Format the migration name using the `slugify` function to remove spaces and replace them with hyphens.
5. Execute the Knex CLI command using `execSync` to create a new migration file with the formatted name.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| child_process | Used to execute shell commands (Knex CLI) from Node.js |
| path | Used to manipulate file paths |
| prompt-sync | Used to create an interactive command-line prompt |
| @sindresorhus/slugify | Used to format the migration name by removing spaces and replacing them with hyphens |

## Error Handling
The script does not implement explicit error handling. If an error occurs during the execution of the Knex CLI command, it will be displayed in the console due to the `{ stdio: "inherit" }` option passed to `execSync`.

## Side Effects
- Creates a new migration file in the project's migration directory.
- Interacts with the user through the command-line interface.

## Performance Considerations
This script is typically run as a one-off operation to create migration files, so performance is not a critical concern. However, it does use synchronous operations (`execSync`), which may block the Node.js event loop for the duration of the command execution.