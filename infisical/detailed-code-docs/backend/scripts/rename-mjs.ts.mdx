---
title: "rename-mjs.ts"
---

## High-level description
This script is designed to recursively traverse a directory structure and replace all occurrences of '.mjs' file extensions with '.js' in the content of files. It's specifically targeting the 'dist' directory, likely as part of a build or deployment process to standardize file extensions.

## Symbols

### `replaceMjsOccurrences`
#### Description
This function recursively traverses a given directory, reads all files, and replaces '.mjs' occurrences with '.js' in the file contents.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| directory | string | The path of the directory to process |

#### Internal Logic
1. Read the contents of the given directory.
2. For each item in the directory:
   - If it's a subdirectory, recursively call `replaceMjsOccurrences` on it.
   - If it's a file:
     - Read the file contents.
     - Replace all occurrences of '.mjs' with '.js'.
     - Write the modified contents back to the file.
     - Log the updated file path to the console.

#### Side Effects
- Modifies file contents in the file system.
- Logs messages to the console.

#### Performance Considerations
This function uses synchronous file system operations (`fs.statSync`) which can potentially block the event loop for large directory structures. For better performance in large projects, consider using asynchronous alternatives.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| node:fs | File system operations |
| node:path | Handling file and directory paths |

## Error Handling
The script uses simple error throwing for file system operations. If any error occurs during directory reading, file reading, or file writing, it will throw an error and halt execution.

## Logging
The script logs each updated file path to the console using `console.log`.

## TODOs
The script includes an ESLint disable comment for the rule `@typescript-eslint/no-shadow`. This suggests that there might be a naming conflict that could be resolved in future refactoring.