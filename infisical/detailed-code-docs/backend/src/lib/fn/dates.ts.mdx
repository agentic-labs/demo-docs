---
title: "dates.ts"
---

## High-level description
This code provides utility functions for date and time manipulation. It includes functions for getting the ISO timestamp of the last midnight and calculating the time difference between two timestamps in seconds.

## Symbols
### `getLastMidnightDateISO`
#### Description
This function returns the ISO timestamp of the last midnight. It takes an optional argument `last` (defaulting to 1) that allows retrieving the midnight of previous days. For example, `last = 2` would return the midnight two days ago.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| last | number | (Optional) The number of days to go back. Defaults to 1. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| timestamp | string | The ISO timestamp of the last midnight (or the midnight `last` days ago). |

#### Internal Logic
1. It gets the current date.
2. It subtracts `last` days from the current date.
3. It sets the time components (hours, minutes, seconds, milliseconds) to zero to get the midnight of that day.
4. It converts the resulting date object to an ISO string.
5. It extracts the date and time part (YYYY-MM-DDTHH:mm:ss) from the ISO string.
6. It appends "Z" to indicate UTC time zone.

### `getTimeDifferenceInSeconds`
#### Description
This function calculates the time difference between two timestamps in seconds.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| lhsTimestamp | string | The first timestamp. |
| rhsTimestamp | string | The second timestamp. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| difference | number | The time difference between the two timestamps in seconds. |

#### Internal Logic
1. It converts both input timestamps to `Date` objects.
2. It subtracts the numerical representation (milliseconds since epoch) of the second timestamp (`rhsTimestamp`) from the first (`lhsTimestamp`).
3. It divides the result by 1000 to convert milliseconds to seconds.
4. It uses `Math.floor` to round down the result to the nearest integer, representing the difference in whole seconds.
