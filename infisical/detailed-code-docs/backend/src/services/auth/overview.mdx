---
title: "Overview"
---

## High-level description
This directory contains the authentication services for the backend of the application. It includes various modules that handle different aspects of authentication, such as login, password management, signup, and token management. The code implements features like multi-factor authentication (MFA), OAuth2 login, and secure password handling using the Secure Remote Password (SRP) protocol.

## What does it do?
The authentication service in this directory provides a comprehensive set of functionalities for user authentication and account management:

1. User Login: Handles the login process, including generating server public keys, verifying client proofs, and managing multi-factor authentication.
2. Password Management: Provides functions for changing passwords, resetting passwords, and managing backup private keys.
3. User Signup: Manages the signup process, including email verification and account creation.
4. OAuth2 Integration: Supports login and token exchange for various OAuth2 providers like Google, GitHub, and GitLab.
5. Token Management: Generates and manages different types of tokens, including access tokens, refresh tokens, and MFA tokens.
6. Security Features: Implements security measures such as device tracking, user locking, and secure password hashing.

## Entry points
The main entry points for this authentication service are:

1. `auth-login-service.ts`: Handles the login process and OAuth2 authentication.
2. `auth-password-service.ts`: Manages password-related operations.
3. `auth-signup-service.ts`: Handles the user signup process.

These services are typically instantiated using factory functions that take various dependencies as input, such as data access layers (DALs) and other services.

## Key Files
1. `auth-dal.ts`: Defines the data access layer for authentication-related database operations.
2. `auth-fns.ts`: Contains utility functions for token validation and user lock enforcement.
3. `auth-type.ts`: Defines various authentication-related enums and types used throughout the service.
4. `auth-login-type.ts`, `auth-password-type.ts`, `auth-signup-type.ts`: Define type definitions for data transfer objects (DTOs) used in their respective processes.

## Dependencies
The authentication service relies on several external libraries and internal modules:

1. External libraries:
   - `bcrypt`: For password hashing
   - `jsonwebtoken`: For JWT token generation and verification
   - `knex`: SQL query builder

2. Internal dependencies:
   - Various data access layers (DALs) for user, organization, and project management
   - Token service for generating and managing authentication tokens
   - SMTP service for sending emails
   - Configuration module for accessing environment variables and application settings
   - Custom crypto library for implementing the SRP protocol

## Configuration
The authentication service uses configuration values from the application's environment, accessed through the `getConfig()` function. These configurations include:

- JWT token lifetimes
- Authentication secrets
- SMTP settings for email notifications
- OAuth2 provider settings

The service is designed to be flexible and can be configured to support different authentication methods and security requirements based on the application's needs.

In summary, this authentication service provides a robust and comprehensive solution for user authentication, account management, and security in the backend application. It implements industry-standard security practices and supports various authentication methods to cater to different use cases and integration requirements.