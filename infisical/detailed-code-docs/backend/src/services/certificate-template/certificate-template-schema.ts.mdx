---
title: "certificate-template-schema.ts"
---

## High-level description
This code defines a Zod schema named `sanitizedCertificateTemplate` which is used to validate and sanitize certificate template objects. It specifies the expected data types and structure for various properties of a certificate template, including its ID, CA ID, name, common name, subject alternative name, PKI collection ID, TTL, project ID, and CA name.

## Code Structure
The `sanitizedCertificateTemplate` schema is created by picking specific properties from the `CertificateTemplatesSchema` and merging it with a new object schema defining `projectId` and `caName`.

## References
- `CertificateTemplatesSchema`: This schema, likely defined in `@app/db/schemas`, provides the base structure for certificate templates.
- `z`: This refers to the Zod library, used for schema definition and validation.

## Symbols
### `sanitizedCertificateTemplate`
#### Description
This schema defines the structure and data types for a sanitized certificate template object. It is used to validate and sanitize data related to certificate templates, ensuring that only the allowed properties with the correct types are processed.

#### Inputs
This is a Zod schema, it doesn't have explicit input parameters. It operates on data that is validated against it.

#### Outputs
This schema doesn't have explicit outputs. It's used for validation and its output is the validated and sanitized data.

#### Internal Logic
The schema is constructed in two steps:
1. **Picking properties:** It uses `.pick()` on `CertificateTemplatesSchema` to select only the following properties: `id`, `caId`, `name`, `commonName`, `subjectAlternativeName`, `pkiCollectionId`, and `ttl`.
2. **Merging with additional properties:** It uses `.merge()` to combine the picked properties with a new object schema defined using `z.object()`. This new schema adds `projectId` and `caName` properties, both defined as strings using `z.string()`.

## Dependencies
- `zod`: Used for schema definition and validation.

## Error Handling
Zod handles errors by throwing exceptions if the data being validated doesn't match the schema. This schema itself doesn't implement specific error handling beyond that.
