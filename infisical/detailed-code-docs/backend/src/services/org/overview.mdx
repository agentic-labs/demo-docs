---
title: "Overview"
---

## High-level description
This directory contains services related to organization management in the backend of the application. It includes data access layers (DALs) and service layers for handling organizations, organization roles, incident contacts, and organization bots.

## What does it do?
The code in this directory provides functionality for:
1. Managing organizations (creating, updating, deleting, and querying)
2. Handling organization memberships (inviting users, updating roles, removing members)
3. Managing organization roles and permissions
4. Dealing with incident contacts for organizations
5. Handling organization bots
6. Providing data access and business logic for organization-related operations

## Entry points
The main entry point for organization-related operations is the `org-service.ts` file, which defines the `orgServiceFactory`. This factory function creates an object with methods for various organization operations, such as:
- Finding organizations
- Creating and updating organizations
- Managing memberships
- Inviting users
- Handling workspaces

Other important files include:
- `org-dal.ts`: Data Access Layer for organization operations
- `org-role-service.ts`: Service for managing organization roles
- `org-fns.ts`: Contains functions for specific organization operations

## Key Files
1. `org-service.ts`: Main service file for organization operations
2. `org-dal.ts`: Data Access Layer for organization database operations
3. `org-role-service.ts`: Service for managing organization roles
4. `org-role-dal.ts`: Data Access Layer for organization roles
5. `incident-contacts-dal.ts`: Data Access Layer for incident contacts
6. `org-bot-dal.ts`: Data Access Layer for organization bots
7. `org-fns.ts`: Contains specific functions for organization operations
8. `org-types.ts`: Defines TypeScript types and interfaces for organization-related data structures

## Dependencies
The code in this directory relies on several external libraries and internal modules:
- Knex.js for database operations
- CASL for permission handling
- Custom error handling utilities
- Various internal services and DALs for related functionalities (e.g., user management, project management)

## Configuration
The services use configuration values from the application's environment, accessed through the `getConfig()` function. This includes settings for things like SMTP configuration for sending invitations.

## Notes
- The code makes extensive use of TypeScript for type safety and better developer experience.
- There's a clear separation between data access (DAL) and business logic (service) layers.
- The services implement permission checks to ensure users have the necessary rights to perform actions.
- The code handles various edge cases and potential errors, throwing custom error types when necessary.
- Some operations, like inviting users to an organization, involve multiple steps and interactions with different services.

This directory plays a crucial role in managing organizations within the application, providing a comprehensive set of tools for creating, updating, and managing organizations and their members.