---
title: "identity-azure-auth-types.ts"
---

## High-level description
This file defines TypeScript types related to Azure Active Directory authentication and authorization within the application. It includes types for data transfer objects (DTOs) used in API requests and responses, as well as types for Azure-specific data structures like JWT payloads and JWK responses.

## References
- `@app/lib/types`: This reference suggests that the code uses types defined in the `@app/lib/types` module, specifically `TProjectPermission`. This type likely defines permissions related to projects within the application.

## Symbols
### `TLoginAzureAuthDTO`
#### Description
Represents the data structure for a login request using Azure Active Directory.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| identityId | string | Unique identifier for the user's identity. |
| jwt | string | JSON Web Token (JWT) obtained from Azure AD during authentication. |

### `TAttachAzureAuthDTO`
#### Description
Represents the data structure for attaching an Azure Active Directory identity to a project with specific permissions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| identityId | string | Unique identifier for the user's identity. |
| tenantId | string | Azure AD tenant ID. |
| resource | string | Azure AD resource identifier. |
| allowedServicePrincipalIds | string | Comma-separated list of allowed service principal IDs. |
| accessTokenTTL | number | Time to live (TTL) for access tokens in seconds. |
| accessTokenMaxTTL | number | Maximum TTL for access tokens in seconds. |
| accessTokenNumUsesLimit | number | Maximum number of times an access token can be used. |
| accessTokenTrustedIps | { ipAddress: string }[] | Array of trusted IP addresses for access tokens. |
| ... |  |  Includes properties from `TProjectPermission` (excluding `projectId`). |

### `TUpdateAzureAuthDTO`
#### Description
Represents the data structure for updating an existing Azure Active Directory identity attachment to a project.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| identityId | string | Unique identifier for the user's identity. |
| tenantId | string | (Optional) Azure AD tenant ID. |
| resource | string | (Optional) Azure AD resource identifier. |
| allowedServicePrincipalIds | string | (Optional) Comma-separated list of allowed service principal IDs. |
| accessTokenTTL | number | (Optional) Time to live (TTL) for access tokens in seconds. |
| accessTokenMaxTTL | number | (Optional) Maximum TTL for access tokens in seconds. |
| accessTokenNumUsesLimit | number | (Optional) Maximum number of times an access token can be used. |
| accessTokenTrustedIps | { ipAddress: string }[] | (Optional) Array of trusted IP addresses for access tokens. |
| ... |  |  Includes properties from `TProjectPermission` (excluding `projectId`). |

### `TGetAzureAuthDTO`
#### Description
Represents the data structure for retrieving information about an Azure Active Directory identity attachment to a project.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| identityId | string | Unique identifier for the user's identity. |
| ... |  |  Includes properties from `TProjectPermission` (excluding `projectId`). |

### `TAzureJwksUriResponse`
#### Description
Represents the response structure for fetching JSON Web Key Set (JWKS) from Azure Active Directory.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| keys | { kty: string; use: string; kid: string; x5t: string; n: string; e: string; x5c: string[]; }[] | Array of JWK objects containing public keys for verifying JWT signatures. |

### `TUserPayload`
#### Description
Represents the payload structure of a JWT issued by Azure AD for a user.

### `TAppPayload`
#### Description
Represents the payload structure of a JWT issued by Azure AD for an application (service principal).

### `TAzureAuthJwtPayload`
#### Description
A union type representing the payload of a JWT issued by Azure AD, which can be either a `TUserPayload` or a `TAppPayload`.

### `TDecodedAzureAuthJwt`
#### Description
Represents the structure of a decoded Azure AD JWT, including header, payload, signature, and metadata.

### `TRevokeAzureAuthDTO`
#### Description
Represents the data structure for a request to revoke an Azure Active Directory identity attachment to a project.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| identityId | string | Unique identifier for the user's identity. |
| ... |  |  Includes properties from `TProjectPermission` (excluding `projectId`). |
