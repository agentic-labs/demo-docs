---
title: "Overview"
---

## High-level description
This directory contains TypeScript declaration files (.d.ts) that extend and define types for various modules and libraries used in the backend of the application. These files enhance type safety and provide better IntelliSense support for the development process.

## What does it do?
The files in this directory serve several important purposes:

1. They extend existing type definitions for libraries like Fastify and Knex, adding custom properties and methods specific to the application.
2. They define global types and interfaces that are used throughout the backend codebase.
3. They declare the existence of external modules that don't have their own TypeScript definitions.

These type definitions help catch potential errors at compile-time, improve code autocompletion, and make the codebase more maintainable by providing clear interfaces for various parts of the application.

## Key Files

### fastify-zod.d.ts
This file extends the global namespace to include custom types for a Fastify server instance that uses Zod for schema validation. It defines a `FastifyZodProvider` type and declares global variables for testing purposes.

Key features:
- Defines `FastifyZodProvider` type for Fastify instances with Zod integration
- Declares global variables `testServer` and `jwtAuthToken` for testing

### fastify.d.ts
This file extends Fastify's type definitions to include custom properties and services used in the application. It adds properties to both the `FastifyRequest` and `FastifyInstance` interfaces.

Key additions:
- Extends `FastifyRequest` with properties like `realIp`, `mfa`, `auth`, and `permission`
- Extends `FastifyInstance` with `services` and `store` properties for various application services and data access functions

### knex.d.ts
This file extends Knex.js type definitions to include custom table types for the application's database schema. It ensures type safety when working with database operations.

Key features:
- Extends the Knex namespace with custom methods like `primaryNode()` and `replicaNode()`
- Defines table types for various entities like users, organizations, projects, and secrets

### passport-gitlab2.d.ts
This file declares the existence of the "passport-gitlab2" module, allowing TypeScript to recognize and work with it without providing implementation details.

## Dependencies
The type definitions in this directory reference and extend several external libraries and frameworks:

- Fastify: Web framework for the backend
- Knex: SQL query builder
- Zod: Schema validation library
- Pino: Logging library
- Passport: Authentication middleware

## Configuration
While these files don't directly define configuration options, they play a crucial role in shaping how the application interacts with its dependencies and database. They define the structure of configuration objects and service interfaces used throughout the backend.

The type definitions, especially in `knex.d.ts`, reflect the database schema and structure, indirectly influencing how the application interacts with the database.

In summary, this directory contains critical type definitions that enhance the development experience, improve code quality, and ensure type safety across the backend application. They provide a clear interface for working with custom extensions to external libraries and define the structure of key application components.