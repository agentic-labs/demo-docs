---
title: "fastify.d.ts"
---

## High-level description

This file (`backend/src/@types/fastify.d.ts`) extends the Fastify type definitions to include custom properties and services used in the Infisical application. It declares additional properties for the `FastifyRequest` and `FastifyInstance` interfaces, providing type information for various services, authentication data, and other custom properties used throughout the application.

## Code Structure

The file primarily consists of two main parts:
1. Extensions to the `FastifyRequest` interface
2. Extensions to the `FastifyInstance` interface

These extensions add custom properties and services to the existing Fastify types, allowing for better type checking and autocompletion in the rest of the application.

## Symbols

### `FastifyRequest` (extended)

#### Description
Extends the `FastifyRequest` interface with additional properties used in the Infisical application.

#### Added Properties
- `realIp`: string
- `mfa`: Object containing user MFA information
- `auth`: TAuthMode (custom type for authentication information)
- `permission`: Object containing permission details
- `rateLimits`: RateLimitConfiguration
- `passportUser`: Object containing passport user data
- `auditLogInfo`: Object containing audit log information
- `ssoConfig`: Object containing SSO configuration
- `ldapConfig`: Object containing LDAP configuration

### `FastifyInstance` (extended)

#### Description
Extends the `FastifyInstance` interface with additional services and stores used in the Infisical application.

#### Added Properties
- `services`: Object containing various service factories
- `store`: Object containing data access layer (DAL) functions

## Dependencies

The file imports various types and interfaces from different parts of the application, including:
- Authentication and authorization types
- Service factory types
- Database schema types
- Configuration types

## Configuration

This file doesn't define configuration options directly but references configuration types used throughout the application.

## API/Interface Reference

This file serves as a type definition file and doesn't expose an API directly. Instead, it enhances the type information available for Fastify requests and instances used throughout the application.

By extending these interfaces, the file ensures that custom properties and services are properly typed when used in other parts of the application, improving type safety and developer experience.