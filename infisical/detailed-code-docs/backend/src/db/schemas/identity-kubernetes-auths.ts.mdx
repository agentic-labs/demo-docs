---
title: "identity-kubernetes-auths.ts"
---

## High-level description
The code defines a Zod schema, `IdentityKubernetesAuthsSchema`, for validating and type-checking data related to Kubernetes authentication for identities in the application. It also defines related types for inserting and updating Kubernetes authentication data.

## References
This code references the following symbols:
- `TImmutableDBKeys` from `./models`

## Symbols
### `IdentityKubernetesAuthsSchema`
#### Description
This symbol defines a Zod schema for validating data associated with Kubernetes authentication for identities. It ensures that the data conforms to the expected structure and types.

#### Inputs
N/A - This is a Zod schema definition, not a function.

#### Outputs
N/A - This is a Zod schema definition, not a function.

#### Internal Logic
The schema defines various fields and their corresponding types:
- `id`: A UUID string representing the primary key.
- `accessTokenTTL`: A required number (coerced) representing the time-to-live for access tokens, defaulting to 7200 seconds (2 hours).
- `accessTokenMaxTTL`: A required number (coerced) representing the maximum time-to-live for access tokens, defaulting to 7200 seconds (2 hours).
- `accessTokenNumUsesLimit`: A required number (coerced) representing the maximum number of times an access token can be used, defaulting to 0 (unlimited).
- `accessTokenTrustedIps`: An unknown type representing the list of trusted IP addresses for access tokens.
- `createdAt`: A date object representing the creation timestamp.
- `updatedAt`: A date object representing the last update timestamp.
- `identityId`: A UUID string representing the foreign key to the `Identities` table.
- `kubernetesHost`: A string representing the Kubernetes cluster's hostname or IP address.
- `encryptedCaCert`: A string representing the encrypted Kubernetes CA certificate.
- `caCertIV`: A string representing the initialization vector used for encrypting the CA certificate.
- `caCertTag`: A string representing the authentication tag used for encrypting the CA certificate.
- `encryptedTokenReviewerJwt`: A string representing the encrypted JWT token for the Kubernetes token reviewer.
- `tokenReviewerJwtIV`: A string representing the initialization vector used for encrypting the token reviewer JWT.
- `tokenReviewerJwtTag`: A string representing the authentication tag used for encrypting the token reviewer JWT.
- `allowedNamespaces`: A string representing a comma-separated list of allowed Kubernetes namespaces.
- `allowedNames`: A string representing a comma-separated list of allowed Kubernetes usernames.
- `allowedAudience`: A string representing the allowed audience for the Kubernetes authentication.

### `TIdentityKubernetesAuths`
#### Description
This symbol defines a TypeScript type that represents the inferred type of the `IdentityKubernetesAuthsSchema`. It ensures type safety when working with Kubernetes authentication data.

#### Inputs
N/A - This is a type alias.

#### Outputs
N/A - This is a type alias.

### `TIdentityKubernetesAuthsInsert`
#### Description
This symbol defines a TypeScript type that represents the data required to insert a new Kubernetes authentication entry. It excludes the `id`, `createdAt`, and `updatedAt` fields, as those are typically handled by the database.

#### Inputs
N/A - This is a type alias.

#### Outputs
N/A - This is a type alias.

### `TIdentityKubernetesAuthsUpdate`
#### Description
This symbol defines a TypeScript type that represents the data that can be updated in an existing Kubernetes authentication entry. It excludes the `id`, `createdAt`, and `updatedAt` fields, as those are typically immutable or handled by the database.

#### Inputs
N/A - This is a type alias.

#### Outputs
N/A - This is a type alias.
