---
title: "identity-oidc-auths.ts"
---

## High-level description
This code defines a Zod schema for the `IdentityOidcAuths` table, which represents OpenID Connect (OIDC) authentication configurations for identities in the system. It also exports TypeScript types derived from this schema for use in other parts of the application.

## Symbols

### `IdentityOidcAuthsSchema`
#### Description
This constant defines a Zod schema for the `IdentityOidcAuths` table, specifying the structure and validation rules for OIDC authentication configurations.

#### Inputs
The schema defines the following fields:
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string (UUID) | Unique identifier for the OIDC auth configuration |
| accessTokenTTL | number | Time-to-live for access tokens (default: 7200 seconds) |
| accessTokenMaxTTL | number | Maximum time-to-live for access tokens (default: 7200 seconds) |
| accessTokenNumUsesLimit | number | Limit on the number of uses for access tokens (default: 0, meaning unlimited) |
| accessTokenTrustedIps | unknown | Trusted IP addresses for access tokens |
| identityId | string (UUID) | ID of the associated identity |
| oidcDiscoveryUrl | string | URL for OIDC discovery |
| encryptedCaCert | string | Encrypted CA certificate |
| caCertIV | string | Initialization vector for CA certificate encryption |
| caCertTag | string | Tag for CA certificate |
| boundIssuer | string | Bound issuer for OIDC |
| boundAudiences | string | Bound audiences for OIDC |
| boundClaims | unknown | Bound claims for OIDC |
| boundSubject | string (nullable, optional) | Bound subject for OIDC |
| createdAt | date | Timestamp of creation |
| updatedAt | date | Timestamp of last update |

#### Outputs
The schema itself doesn't produce an output, but it's used to validate and parse data conforming to this structure.

### `TIdentityOidcAuths`
#### Description
This type represents the full structure of an OIDC authentication configuration, inferred from the `IdentityOidcAuthsSchema`.

### `TIdentityOidcAuthsInsert`
#### Description
This type represents the structure for inserting a new OIDC authentication configuration, omitting immutable database keys.

### `TIdentityOidcAuthsUpdate`
#### Description
This type represents the structure for updating an existing OIDC authentication configuration, making all fields optional and omitting immutable database keys.

## Dependencies
The code relies on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for defining and validating the schema |

## Notes
- The code is generated automatically and should not be edited manually.
- The schema uses `z.coerce.number()` for numeric fields, which will attempt to convert input to numbers.
- Some fields use `z.unknown()`, indicating that their exact structure is not strictly defined in this schema.
- The `TImmutableDBKeys` type is imported from another file and is used to omit certain fields from insert and update types.

This schema and its derived types play a crucial role in maintaining data integrity for OIDC authentication configurations throughout the application.