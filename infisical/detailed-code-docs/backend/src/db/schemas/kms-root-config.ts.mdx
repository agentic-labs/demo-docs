---
title: "kms-root-config.ts"
---

## High-level description
This file defines a Zod schema for a KMS (Key Management Service) root configuration. It includes types for inserting and updating the configuration, with safeguards against modifying immutable database keys.

## Symbols

### `KmsRootConfigSchema`
#### Description
Defines the structure and validation rules for a KMS root configuration using Zod.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | A UUID for the configuration |
| encryptedRootKey | Buffer | The encrypted root key |

#### Internal Logic
The schema uses Zod to define two fields:
1. `id`: A string that must be a valid UUID.
2. `encryptedRootKey`: A Buffer, validated using a custom `zodBuffer` function.

### `TKmsRootConfig`
#### Description
A TypeScript type derived from the `KmsRootConfigSchema`.

### `TKmsRootConfigInsert`
#### Description
A TypeScript type for inserting a new KMS root configuration, excluding immutable database keys.

### `TKmsRootConfigUpdate`
#### Description
A TypeScript type for updating an existing KMS root configuration, making all fields optional and excluding immutable database keys.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for schema definition and validation |
| @app/lib/zod | Provides the `zodBuffer` custom Zod type |
| ./models | Imports `TImmutableDBKeys` type |

## Notes
1. This file is generated automatically and should not be edited manually.
2. It can be updated by running `npm run generate:schema`.
3. The original author is akhilmhdh.