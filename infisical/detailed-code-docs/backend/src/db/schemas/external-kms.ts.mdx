---
title: "external-kms.ts"
---

## High-level description
This code defines a Zod schema for an external Key Management System (KMS) and exports related types. It's designed to validate and type-check data related to external KMS configurations in a TypeScript environment.

## Symbols

### `ExternalKmsSchema`
#### Description
A Zod schema that defines the structure and validation rules for an external KMS object.

#### Internal Logic
The schema includes the following fields:
- `id`: A UUID string
- `provider`: A string representing the KMS provider
- `encryptedProviderInputs`: A buffer (likely containing encrypted configuration data)
- `status`: An optional nullable string
- `statusDetails`: An optional nullable string
- `kmsKeyId`: A UUID string

### `TExternalKms`
#### Description
A TypeScript type inferred from the `ExternalKmsSchema`, representing a complete external KMS object.

### `TExternalKmsInsert`
#### Description
A TypeScript type representing the data needed to insert a new external KMS record, excluding immutable database keys.

### `TExternalKmsUpdate`
#### Description
A TypeScript type representing the data that can be updated for an existing external KMS record, excluding immutable database keys.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for schema definition and validation |
| @app/lib/zod | Provides the `zodBuffer` type |
| ./models | Imports `TImmutableDBKeys` type |

## References
This schema is referenced in the related file `backend/src/ee/routes/v1/external-kms-router.ts`, where it's used to define API endpoints for managing external KMS configurations.

## Notes
1. The file is generated automatically and should not be edited manually.
2. The schema can be updated by running `npm run generate:schema`.
3. The code was written by akhilmhdh.

This schema plays a crucial role in ensuring data integrity and type safety when working with external KMS configurations in the application. It's used in conjunction with the external KMS router to validate input data and type-check responses for various API endpoints related to KMS management.