---
title: "integration-auths.ts"
---

## High-level description
This code defines a Zod schema for the `IntegrationAuths` table in a database. It represents the structure and validation rules for integration authentication data, including various encrypted fields for storing sensitive information like access tokens and refresh tokens.

## Code Structure
The main symbol in this code is the `IntegrationAuthsSchema`, which is a Zod object schema. It defines the structure and validation rules for integration authentication data. The code also exports type definitions derived from this schema for use in other parts of the application.

## References
- `TImmutableDBKeys` from "./models"
- `zodBuffer` from "@app/lib/zod"

## Symbols

### IntegrationAuthsSchema
#### Description
A Zod object schema that defines the structure and validation rules for integration authentication data.

#### Inputs
N/A (This is a schema definition, not a function)

#### Outputs
N/A (This is a schema definition, not a function)

#### Internal Logic
The schema defines various fields with their respective types and validation rules:
- Basic fields like `id`, `integration`, `teamId`, `url`, `namespace`, `accountId`
- Encrypted fields for storing sensitive data (e.g., `refreshCiphertext`, `accessCiphertext`)
- Metadata fields like `algorithm`, `keyEncoding`, `projectId`, `createdAt`, `updatedAt`
- AWS-specific fields (e.g., `awsAssumeIamRoleArnCipherText`)
- Buffer fields for encrypted data (e.g., `encryptedAccess`, `encryptedRefresh`)

### TIntegrationAuths
#### Description
A type definition inferred from the `IntegrationAuthsSchema`.

### TIntegrationAuthsInsert
#### Description
A type definition for inserting new integration auth records, omitting immutable database keys.

### TIntegrationAuthsUpdate
#### Description
A type definition for updating existing integration auth records, making all fields optional and omitting immutable database keys.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for schema definition and validation |

## Configuration
This code doesn't define any configuration options directly.

## Error Handling
This code doesn't implement explicit error handling. Error handling would be managed by Zod when validating data against the schema.

## Notes
1. The code is generated by an automation script and should not be edited manually.
2. The schema includes fields for various encryption methods, suggesting that sensitive data is stored in an encrypted format.
3. The schema supports multiple integration types, including AWS, as evidenced by the AWS-specific fields.
4. The use of `nullable()` and `optional()` in many fields suggests that these fields may not always be present or may have null values.
5. The schema includes both legacy fields (e.g., `refreshCiphertext`) and newer buffer-based fields (e.g., `encryptedRefresh`), possibly indicating a transition in the encryption method.