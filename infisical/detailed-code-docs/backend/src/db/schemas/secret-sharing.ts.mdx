---
title: "secret-sharing.ts"
---

## High-level description
The code defines a Zod schema, `SecretSharingSchema`, for validating the structure and data types of secret sharing objects. It also defines related types for inserting, updating, and representing secret sharing data.

## References
- `TImmutableDBKeys` from `./models`

## Symbols
### `SecretSharingSchema`
#### Description
A Zod schema that defines the structure and data types for a `SecretSharing` object. This schema is used to validate secret sharing data before it is saved to the database or used in the application.

#### Inputs
None. It's a schema definition, not a function.

#### Outputs
None. It's a schema definition, not a function.

#### Internal Logic
The schema defines the following fields:
- `id`: A universally unique identifier (UUID) string.
- `encryptedValue`: The encrypted value of the secret.
- `iv`: Initialization vector used during encryption.
- `tag`: Authentication tag used during encryption.
- `hashedHex`: Hashed value of the secret.
- `expiresAt`: Date and time when the secret expires.
- `userId`: Optional UUID of the user who owns the secret.
- `orgId`: Optional UUID of the organization that owns the secret.
- `createdAt`: Timestamp indicating when the secret was created.
- `updatedAt`: Timestamp indicating when the secret was last updated.
- `expiresAfterViews`: Optional number of views after which the secret expires.
- `accessType`: String indicating the access type of the secret, defaulting to "anyone".
- `name`: Optional name of the secret.
- `lastViewedAt`: Optional timestamp indicating when the secret was last viewed.

### `TSecretSharing`
#### Description
A TypeScript type alias that represents the inferred type of the `SecretSharingSchema`. It defines the structure of a valid secret sharing object.

#### Inputs
None. It's a type alias, not a function.

#### Outputs
None. It's a type alias, not a function.

### `TSecretSharingInsert`
#### Description
A TypeScript type alias that represents the type of data required to insert a new secret sharing object into the database. It omits the `TImmutableDBKeys` from the `SecretSharingSchema` type, as those keys are typically auto-generated by the database.

#### Inputs
None. It's a type alias, not a function.

#### Outputs
None. It's a type alias, not a function.

### `TSecretSharingUpdate`
#### Description
A TypeScript type alias that represents the type of data that can be used to update an existing secret sharing object in the database. It's a partial type of `TSecretSharingInsert`, meaning it allows only a subset of the fields to be updated.

#### Inputs
None. It's a type alias, not a function.

#### Outputs
None. It's a type alias, not a function.

## Dependencies
- `zod`: Used for schema definition and validation.

## Error Handling
This code does not implement specific error handling. Zod will throw errors if the data does not match the defined schema.
