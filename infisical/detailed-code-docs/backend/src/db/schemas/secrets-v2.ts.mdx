---
title: "secrets-v2.ts"
---

## High-level description
This code defines a Zod schema for a "SecretsV2" database table, along with TypeScript types derived from this schema. It's designed to validate and type-check data related to secrets (such as encryption keys or sensitive information) in a database context.

## Code Structure
The code defines a Zod schema (`SecretsV2Schema`) and three TypeScript types (`TSecretsV2`, `TSecretsV2Insert`, and `TSecretsV2Update`) based on this schema. These types are used to ensure type safety when working with the secrets data in the application.

## References
- `@app/lib/zod`: Imports a custom Zod validator `zodBuffer`
- `./models`: Imports `TImmutableDBKeys` type

## Symbols

### `SecretsV2Schema`
#### Description
A Zod schema that defines the structure and validation rules for the SecretsV2 database table.

#### Internal Logic
The schema defines various fields with their respective types and validation rules:
- `id`: UUID string
- `version`: Number with a default value of 1
- `type`: String with a default value of "shared"
- `key`: String
- `encryptedValue`: Nullable and optional buffer
- `encryptedComment`: Nullable and optional buffer
- `reminderNote`: Nullable and optional string
- `reminderRepeatDays`: Nullable and optional number
- `skipMultilineEncoding`: Boolean with a default value of false, nullable and optional
- `metadata`: Unknown type, nullable and optional
- `userId`: Nullable and optional UUID string
- `folderId`: UUID string
- `createdAt`: Date
- `updatedAt`: Date

### `TSecretsV2`
#### Description
A TypeScript type inferred from the `SecretsV2Schema`, representing the full structure of a SecretsV2 record.

### `TSecretsV2Insert`
#### Description
A TypeScript type representing the structure for inserting a new SecretsV2 record, omitting immutable database keys.

### `TSecretsV2Update`
#### Description
A TypeScript type representing the structure for updating an existing SecretsV2 record, making all fields optional and omitting immutable database keys.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for schema definition and validation |
| @app/lib/zod | Provides custom Zod validator `zodBuffer` |

## Configuration
This code is generated automatically and should not be edited manually. To update, run `npm run generate:schema`.

## TODOs
The code includes a comment indicating that it is generated by an automation script and should not be edited manually. To update the schema, the instruction is to run `npm run generate:schema`.