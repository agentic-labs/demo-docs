---
title: "webhooks.ts"
---

## High-level description
The code defines a Zod schema, `WebhooksSchema`, for validating and type-checking webhook data. It also defines related types for working with webhook data in the application.

## Code Structure
The `WebhooksSchema` object uses Zod's schema definition syntax to specify the expected data structure and types for each field of a webhook object. The related types, `TWebhooks`, `TWebhooksInsert`, and `TWebhooksUpdate`, are derived from the `WebhooksSchema` to provide type-safe ways to interact with webhook data in different contexts.

## References
- `TImmutableDBKeys` from "./models"

## Symbols
### `WebhooksSchema`
#### Description
A Zod schema that defines the data structure and types for a webhook object.

#### Inputs
N/A - This is a schema definition, not a function.

#### Outputs
N/A - This is a schema definition, not a function.

#### Internal Logic
The schema defines the following fields for a webhook:
- `id`: A universally unique identifier (UUID) string.
- `secretPath`: A string representing the path to the webhook secret, defaulting to "/".
- `url`: A string representing the webhook URL.
- `lastStatus`: An optional, nullable string representing the last webhook trigger status.
- `lastRunErrorMessage`: An optional, nullable string containing the error message from the last webhook trigger failure.
- `isDisabled`: A boolean indicating whether the webhook is disabled, defaulting to false.
- `encryptedSecretKey`: An optional, nullable string containing the encrypted webhook secret key.
- `iv`: An optional, nullable string representing the initialization vector used for encryption.
- `tag`: An optional, nullable string representing the authentication tag used for encryption.
- `algorithm`: An optional, nullable string representing the encryption algorithm used.
- `keyEncoding`: An optional, nullable string representing the encoding of the encryption key.
- `createdAt`: A date object representing the webhook creation timestamp.
- `updatedAt`: A date object representing the webhook update timestamp.
- `envId`: A UUID string representing the ID of the environment the webhook belongs to.
- `urlCipherText`: An optional, nullable string containing the encrypted webhook URL.
- `urlIV`: An optional, nullable string representing the initialization vector used for encrypting the URL.
- `urlTag`: An optional, nullable string representing the authentication tag used for encrypting the URL.
- `type`: An optional, nullable string representing the type of the webhook, defaulting to "general".

### `TWebhooks`
#### Description
A type alias representing the inferred type of the `WebhooksSchema`. It represents a fully validated webhook object.

#### Inputs
N/A - This is a type alias, not a function.

#### Outputs
N/A - This is a type alias, not a function.

### `TWebhooksInsert`
#### Description
A type alias representing the type of data required to create a new webhook. It omits the `TImmutableDBKeys` from the `TWebhooks` type, as those fields are typically generated by the database.

#### Inputs
N/A - This is a type alias, not a function.

#### Outputs
N/A - This is a type alias, not a function.

### `TWebhooksUpdate`
#### Description
A type alias representing the type of data that can be used to update an existing webhook. It's a partial type of `TWebhooksInsert`, allowing for updating only specific fields.

#### Inputs
N/A - This is a type alias, not a function.

#### Outputs
N/A - This is a type alias, not a function.
