---
title: "organizations.ts"
---

## High-level description
This code defines a Zod schema for the "Organizations" table in a database. It also exports TypeScript types derived from this schema for use in other parts of the application, including types for inserting and updating organization records.

## Code Structure
The code defines a Zod schema (`OrganizationsSchema`) and exports three types derived from it: `TOrganizations`, `TOrganizationsInsert`, and `TOrganizationsUpdate`. These types are likely used throughout the application to ensure type safety when working with organization data.

## Symbols

### `OrganizationsSchema`
#### Description
A Zod schema that defines the structure and validation rules for organization records in the database.

#### Internal Logic
The schema defines the following fields for an organization:
- `id`: A UUID string
- `name`: A string
- `customerId`: An optional, nullable string
- `slug`: A string
- `createdAt`: A date
- `updatedAt`: A date
- `authEnforced`: An optional, nullable boolean defaulting to false
- `scimEnabled`: An optional, nullable boolean defaulting to false
- `kmsDefaultKeyId`: An optional, nullable UUID string
- `kmsEncryptedDataKey`: An optional, nullable buffer (using a custom `zodBuffer` validator)

### `TOrganizations`
#### Description
A TypeScript type inferred from the `OrganizationsSchema`, representing the full structure of an organization record.

### `TOrganizationsInsert`
#### Description
A TypeScript type for inserting new organization records, omitting immutable database keys.

### `TOrganizationsUpdate`
#### Description
A TypeScript type for updating existing organization records, making all fields optional and omitting immutable database keys.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod | Used for schema definition and validation |
| @app/lib/zod | Provides the custom `zodBuffer` validator |
| ./models | Imports the `TImmutableDBKeys` type |

## Configuration
The code includes a comment indicating that it is generated by an automation script and should not be manually edited. It suggests using `npm run generate:schema` to update the schema.