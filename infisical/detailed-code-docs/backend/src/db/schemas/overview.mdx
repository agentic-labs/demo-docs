---
title: "Overview"
---

## High-level description
This directory contains schema definitions for various database tables used in the backend of the application. The schemas are defined using the Zod library, which provides runtime type checking and validation. These schemas serve as the foundation for ensuring data integrity and type safety throughout the application.

## What does it do?
The schemas in this directory define the structure, data types, and validation rules for different entities in the system, such as users, organizations, projects, secrets, and various other components. They are used to:

1. Validate data before inserting or updating records in the database
2. Provide TypeScript type definitions for use in other parts of the application
3. Ensure consistency between the database structure and the application's data model
4. Define rules for data transformation and validation

## Key Files
1. `models.ts`: Defines common types and enums used across multiple schemas
2. `users.ts`: Schema for user data, including authentication and profile information
3. `organizations.ts`: Schema for organization-related data
4. `projects.ts`: Schema for project-related data
5. `secrets.ts` and `secrets-v2.ts`: Schemas for managing secrets and their versions
6. `service-tokens.ts`: Schema for service token data
7. `webhooks.ts`: Schema for webhook configurations

These files define the core data structures used throughout the application. Other files in the directory define schemas for various supporting entities and relationships.

## Dependencies
The main dependency for these schemas is the Zod library, which is used for schema definition and validation. Some schemas also use custom Zod extensions, such as `zodBuffer` from `@app/lib/zod`, for handling specific data types like buffers.

## Configuration
The schemas are designed to be automatically generated based on the database structure. They include comments indicating that they should not be manually edited. Instead, updates to the schemas should be made by running the command `npm run generate:schema`.

This approach ensures that the schemas stay in sync with the actual database structure and reduces the likelihood of inconsistencies between the database and the application's data model.

The use of Zod for schema definition provides a powerful and flexible way to define complex data structures with runtime type checking and validation. This helps catch data-related errors early in the development process and ensures that the application works with consistent and valid data throughout its lifecycle.

Have fun!