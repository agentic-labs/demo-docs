---
title: "rate-limit.ts"
---

## High-level description
This code defines a Zod schema for rate limiting in a backend application. It provides a structure for storing and validating rate limit configurations for various API operations, including read, write, secrets, authentication, and other specific actions.

## Code Structure
The code defines a single Zod schema `RateLimitSchema` and exports types derived from this schema for different use cases (insert, update, etc.).

## Symbols

### `RateLimitSchema`
#### Description
Defines the structure and validation rules for rate limit configurations using Zod.

#### Internal Logic
The schema includes fields for different types of rate limits, each with a default value:
- `id`: A UUID string
- `readRateLimit`: Number, default 600
- `writeRateLimit`: Number, default 200
- `secretsRateLimit`: Number, default 60
- `authRateLimit`: Number, default 60
- `inviteUserRateLimit`: Number, default 30
- `mfaRateLimit`: Number, default 20
- `publicEndpointLimit`: Number, default 30
- `createdAt`: Date
- `updatedAt`: Date

### `TRateLimit`
#### Description
Type definition inferred from the `RateLimitSchema`.

### `TRateLimitInsert`
#### Description
Type for inserting new rate limit configurations, omitting immutable database keys.

### `TRateLimitUpdate`
#### Description
Type for updating existing rate limit configurations, making all fields optional and omitting immutable database keys.

## Dependencies
- `zod`: Used for schema definition and validation
- `TImmutableDBKeys`: Imported from "./models", likely defines keys that shouldn't be modified directly

## Configuration
The default values in the schema serve as configuration options:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| readRateLimit | number | 600 | Rate limit for read operations |
| writeRateLimit | number | 200 | Rate limit for write operations |
| secretsRateLimit | number | 60 | Rate limit for secrets-related operations |
| authRateLimit | number | 60 | Rate limit for authentication operations |
| inviteUserRateLimit | number | 30 | Rate limit for user invitation operations |
| mfaRateLimit | number | 20 | Rate limit for multi-factor authentication operations |
| publicEndpointLimit | number | 30 | Rate limit for public endpoint access |

## TODOs
The file includes a comment indicating that it is generated by an automation script and should not be edited manually. To update the schema, the instruction is to run `npm run generate:schema`.