---
title: "secret-snapshot-secrets-v2.ts"
---

## High-level description
This code defines the `SecretSnapshotSecretsV2Schema` using the `zod` library to validate the structure and types of data for the `secret_snapshot_secrets_v2` table in the database. It also defines related types for inserting and updating data in this table.

## References
- `TImmutableDBKeys` from "./models"

## Symbols

### `SecretSnapshotSecretsV2Schema`
#### Description
This symbol defines a `zod` schema named `SecretSnapshotSecretsV2Schema`. It describes the expected structure and data types for entries in the `secret_snapshot_secrets_v2` table. Each field in the schema corresponds to a column in the table.

#### Internal Logic
The schema defines the following fields:
- `id`: A universally unique identifier (UUID) represented as a string.
- `envId`: A UUID representing the environment, also represented as a string.
- `secretVersionId`: A UUID representing the secret version, also represented as a string.
- `snapshotId`: A UUID representing the snapshot, also represented as a string.
- `createdAt`: A date object representing the creation timestamp.
- `updatedAt`: A date object representing the last update timestamp.

### `TSecretSnapshotSecretsV2`
#### Description
This symbol defines a TypeScript type alias named `TSecretSnapshotSecretsV2`. It utilizes the `z.infer` utility from `zod` to extract the type information from the `SecretSnapshotSecretsV2Schema`. This type represents a fully formed object adhering to the schema.

### `TSecretSnapshotSecretsV2Insert`
#### Description
This symbol defines a TypeScript type alias named `TSecretSnapshotSecretsV2Insert`. It represents the type of data required to insert a new record into the `secret_snapshot_secrets_v2` table. It achieves this by:
1. Using `z.input` from `zod` to get the input type of the `SecretSnapshotSecretsV2Schema`.
2. Using `Omit` to remove the `TImmutableDBKeys` from the input type. This implies that the database automatically handles these keys during insertion.

### `TSecretSnapshotSecretsV2Update`
#### Description
This symbol defines a TypeScript type alias named `TSecretSnapshotSecretsV2Update`. It represents the type of data required to update an existing record in the `secret_snapshot_secrets_v2` table. It's similar to `TSecretSnapshotSecretsV2Insert` but uses `Partial` to make all fields optional, allowing for partial updates of a record.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| zod        | Provides a schema validation library for defining and validating the structure and types of JavaScript objects. | 
