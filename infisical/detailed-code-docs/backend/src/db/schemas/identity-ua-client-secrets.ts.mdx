---
title: "identity-ua-client-secrets.ts"
---

## High-level description
This code defines a Zod schema for the `IdentityUaClientSecrets` table in a database. It also exports TypeScript types derived from this schema for use in other parts of the application, particularly for insert and update operations.

## Code Structure
The file defines a Zod schema `IdentityUaClientSecretsSchema` and exports three types derived from it: `TIdentityUaClientSecrets`, `TIdentityUaClientSecretsInsert`, and `TIdentityUaClientSecretsUpdate`.

## Symbols

### `IdentityUaClientSecretsSchema`
#### Description
This is a Zod schema that defines the structure and validation rules for the `IdentityUaClientSecrets` table.

#### Internal Logic
The schema defines the following fields:
- `id`: string
- `description`: string
- `clientSecretPrefix`: string
- `clientSecretHash`: string
- `clientSecretLastUsedAt`: optional nullable date
- `clientSecretNumUses`: number (coerced, defaulting to 0)
- `clientSecretNumUsesLimit`: number (coerced, defaulting to 0)
- `clientSecretTTL`: number (coerced, defaulting to 0)
- `isClientSecretRevoked`: boolean (defaulting to false)
- `createdAt`: date
- `updatedAt`: date
- `identityUAId`: UUID string

### `TIdentityUaClientSecrets`
#### Description
This type is inferred from the `IdentityUaClientSecretsSchema` and represents the full structure of an `IdentityUaClientSecrets` record.

### `TIdentityUaClientSecretsInsert`
#### Description
This type is derived from `TIdentityUaClientSecrets` but omits fields defined in `TImmutableDBKeys`. It's used for insert operations.

### `TIdentityUaClientSecretsUpdate`
#### Description
This type is similar to `TIdentityUaClientSecretsInsert` but makes all fields optional. It's used for update operations.

## Dependencies
- `z` from the "zod" library for schema definition
- `TImmutableDBKeys` from "./models", likely defining keys that shouldn't be modified after initial insertion

## Configuration
The schema defines several default values and validation rules:
- `clientSecretNumUses`, `clientSecretNumUsesLimit`, and `clientSecretTTL` default to 0
- `isClientSecretRevoked` defaults to false
- `identityUAId` must be a valid UUID

## TODOs
The file includes a comment indicating that it was generated by an automation script and should not be manually edited. Updates should be made by running `npm run generate:schema`.