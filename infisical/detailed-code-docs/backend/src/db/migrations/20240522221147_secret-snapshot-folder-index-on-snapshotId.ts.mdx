---
title: "20240522221147_secret-snapshot-folder-index-on-snapshotId.ts"
---

## High-level description
This database migration script manages the creation and removal of an index on the `snapshotId` column in the `SnapshotFolder` table. It ensures that the index is created if the table and column exist and dropped if they exist during a rollback.

## Symbols

### `up`
#### Description
This function is executed when running database migrations and is responsible for creating the index on the `snapshotId` column in the `SnapshotFolder` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| knex | Knex | Knex instance for interacting with the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | void | This function does not return any value. |

#### Internal Logic
1. Checks if the `SnapshotFolder` table exists in the database.
2. Checks if the `snapshotId` column exists in the `SnapshotFolder` table.
3. If both checks pass, it adds an index to the `snapshotId` column.

### `down`
#### Description
This function is executed when rolling back database migrations and is responsible for dropping the index on the `snapshotId` column in the `SnapshotFolder` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| knex | Knex | Knex instance for interacting with the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | void | This function does not return any value. |

#### Internal Logic
1. Checks if the `SnapshotFolder` table exists in the database.
2. Checks if the `snapshotId` column exists in the `SnapshotFolder` table.
3. If both checks pass, it drops the index from the `snapshotId` column.

## References
- `TableName`: This symbol is referenced from another file and likely defines the names of the database tables.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| knex       | Provides a connection to the database and allows schema manipulation. |
