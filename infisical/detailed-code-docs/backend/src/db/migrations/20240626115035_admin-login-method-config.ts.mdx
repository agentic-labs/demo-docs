---
title: "20240626115035_admin-login-method-config.ts"
---

## High-level description
This code defines a database migration that adds a new column named `enabledLoginMethods` to the `SuperAdmin` table. This column is intended to store an array of strings representing the allowed login methods for super admins. The migration also handles reverting the change by dropping the added column.

## Symbols

### `up`
#### Description
This function defines the steps to apply the migration. It checks if the `enabledLoginMethods` column already exists in the `SuperAdmin` table. If not, it adds the column with a data type of `text[]` to store an array of strings.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| knex | Knex | Knex instance to interact with the database |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;void\&gt; | Promise | A promise that resolves when the migration is applied successfully |

#### Internal Logic
1. Check if the `enabledLoginMethods` column exists in the `SuperAdmin` table using `knex.schema.hasColumn`.
2. If the column doesn't exist, use `knex.schema.alterTable` to modify the `SuperAdmin` table and add the `enabledLoginMethods` column with `text[]` type.

### `down`
#### Description
This function defines the steps to revert the migration. It checks if the `enabledLoginMethods` column exists in the `SuperAdmin` table. If it exists, it drops the column.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| knex | Knex | Knex instance to interact with the database |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Promise\&lt;void\&gt; | Promise | A promise that resolves when the migration is reverted successfully |

#### Internal Logic
1. Check if the `enabledLoginMethods` column exists in the `SuperAdmin` table using `knex.schema.hasColumn`.
2. If the column exists, use `knex.schema.alterTable` to modify the `SuperAdmin` table and drop the `enabledLoginMethods` column.

## References
- `TableName.SuperAdmin`: This reference points to a constant that defines the name of the `SuperAdmin` table. This constant is defined in the `db/schemas` module.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| knex | Provides database interaction capabilities for the migration |
