---
title: "20240610181521_add-consecutive-failed-password-attempts-user.ts"
---

## High-level description
This code defines a database migration script that adds a new column named `consecutiveFailedPasswordAttempts` to the `Users` table. This column is intended to track the number of consecutive failed login attempts for each user.

## Symbols

### `up`
#### Description
This function is executed when the migration is applied. It adds the `consecutiveFailedPasswordAttempts` column to the `Users` table if it doesn't already exist.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| knex | Knex | A Knex instance connected to the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | void | This function does not return a value. |

#### Internal Logic
1. Checks if the `consecutiveFailedPasswordAttempts` column already exists in the `Users` table.
2. If the column doesn't exist, it adds the column to the table with a default value of 0.

### `down`
#### Description
This function is executed when the migration is rolled back. It removes the `consecutiveFailedPasswordAttempts` column from the `Users` table if it exists.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| knex | Knex | A Knex instance connected to the database. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | void | This function does not return a value. |

#### Internal Logic
1. Checks if the `consecutiveFailedPasswordAttempts` column exists in the `Users` table.
2. If the column exists, it removes the column from the table.

## References
- `TableName`: An enum or object that defines the names of database tables.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| knex       | A query builder for SQL databases. |
