---
title: "index.ts"
---

## High-level description
This code registers all API routes related to the `/v2` API prefix in the backend server. It groups related routes under common prefixes like `/auth`, `/users`, `/organizations`, and `/workspace`.

## Code Structure
The `registerV2Routes` function serves as the entry point. It calls other register functions for specific functionalities, passing the server instance and prefix information. Some register functions further group sub-functionalities under nested prefixes.

## Symbols
### `registerV2Routes`
#### Description
Registers all API routes for the `/v2` API version. It groups related routes under common prefixes, effectively organizing the API structure.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| server | FastifyZodProvider | The Fastify server instance with Zod validation. |

#### Outputs
This function does not return any value.

#### Internal Logic
The function iteratively registers different route handlers using `server.register`. Each handler is associated with a specific prefix, creating a structured API. For example, all authentication-related routes are registered under the `/auth` prefix.

#### Side Effects
This function modifies the `server` object by registering new routes and handlers.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| FastifyZodProvider | Provides a Fastify server instance with Zod validation for request/response schemas. |
| registerMfaRouter | Registers routes related to multi-factor authentication. |
| registerUserRouter | Registers routes related to user management. |
| registerServiceTokenRouter | Registers routes related to service token management. |
| registerOrgRouter | Registers routes related to organization management. |
| registerIdentityOrgRouter | Registers routes related to identity and organization association. |
| registerProjectRouter | Registers routes related to project management. |
| registerIdentityProjectRouter | Registers routes related to identity and project association. |
| registerGroupProjectRouter | Registers routes related to group projects. |
| registerProjectMembershipRouter | Registers routes related to project membership management. |

## Error Handling
This code does not implement specific error handling. Any errors during route registration will likely be thrown and handled by the Fastify server's default error handling mechanism.

## Logging
This code does not implement any logging mechanisms.
