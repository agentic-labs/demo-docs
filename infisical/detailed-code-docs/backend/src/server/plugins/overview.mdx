---
title: "Overview"
---

## High-level description
This directory contains Fastify plugins and middleware that enhance the functionality of the Infisical backend server. These plugins handle various aspects of server operations, including authentication, error handling, rate limiting, maintenance mode, Swagger documentation, and integration with external services like Next.js and GitHub.

## What does it do?
The plugins in this directory perform several key functions:

1. Authentication and Authorization: Implements various authentication strategies (JWT, API keys, service tokens, etc.) and injects identity and permission information into requests.

2. Error Handling: Provides a centralized error handler that intercepts different error types and returns appropriate HTTP error responses.

3. Rate Limiting: Adds rate limiting functionality to the server's request handling pipeline based on the request context.

4. Maintenance Mode: Implements a maintenance mode that can block all requests except for authentication-related endpoints when activated.

5. Swagger Documentation: Integrates Swagger documentation into the Fastify server, allowing for automatic generation and serving of API documentation.

6. External Next.js Integration: Enables running the Infisical backend and a Next.js frontend in a single server (standalone mode).

7. GitHub Secret Scanning: Registers a GitHub App that listens for webhook events related to secret scanning and processes them.

8. Audit Logging: Injects audit log information into incoming requests for tracking and monitoring purposes.

9. IP Address Handling: Adds functionality to determine the real IP address of clients, even when behind proxies or load balancers.

These plugins work together to create a robust, secure, and feature-rich backend server for the Infisical application.

## Entry points
The main entry points for this directory are the individual plugin files:

1. `auth/`: Contains plugins for authentication and authorization.
2. `error-handler.ts`: Centralized error handling plugin.
3. `inject-rate-limits.ts`: Rate limiting plugin.
4. `maintenanceMode.ts`: Maintenance mode plugin.
5. `swagger.ts`: Swagger documentation plugin.
6. `external-nextjs.ts`: Next.js integration plugin.
7. `secret-scanner.ts`: GitHub secret scanning plugin.
8. `audit-log.ts`: Audit logging plugin.
9. `ip.ts`: IP address handling plugin.

Each of these plugins can be registered with the Fastify server to add its specific functionality to the application.

## Key Files
1. `auth/`: Directory containing authentication-related plugins.
2. `error-handler.ts`: Implements centralized error handling.
3. `inject-rate-limits.ts`: Adds rate limiting functionality.
4. `swagger.ts`: Integrates Swagger documentation.
5. `external-nextjs.ts`: Enables standalone mode with Next.js frontend.
6. `secret-scanner.ts`: Implements GitHub secret scanning functionality.

## Dependencies
The plugins in this directory rely on several external libraries and internal modules:

1. Fastify and related plugins: Core server framework and plugin system.
2. Zod: Schema validation library used in several plugins.
3. Probot: Used for GitHub App integration in the secret scanner.
4. Next.js: Used for frontend integration in standalone mode.
5. Various internal services and configurations from the Infisical application.

## Configuration
Many of the plugins use configuration options from the application's environment, accessed through a `getConfig` function. Key configuration areas include:

- Authentication settings (JWT secrets, token expiration times, etc.)
- Rate limiting parameters
- Maintenance mode flag
- Swagger documentation details
- GitHub App credentials for secret scanning
- Next.js build paths and server options

The exact configuration options vary for each plugin and are typically defined in the application's environment variables or configuration files.

In conclusion, this directory contains a collection of plugins that significantly enhance the functionality of the Infisical backend server, providing essential features like authentication, error handling, API documentation, and integration with external services.