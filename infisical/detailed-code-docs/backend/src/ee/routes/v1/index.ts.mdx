---
title: "index.ts"
---

## High-level description
This code defines the main routing structure for the enterprise edition (EE) of a backend application. It exports a function `registerV1EERoutes` that registers various API routes for different features and services, organizing them under the "/v1" prefix.

## Code Structure
The code imports multiple router registration functions from different files, each corresponding to a specific feature or service. The `registerV1EERoutes` function then uses these imported functions to register routes with the server, often grouping related routes under common prefixes.

## Symbols

### `registerV1EERoutes`
#### Description
This asynchronous function is responsible for registering all the enterprise edition routes for the v1 API. It takes a `FastifyZodProvider` server instance as an argument and registers various routers with specific prefixes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| server | FastifyZodProvider | The Fastify server instance with Zod integration |

#### Internal Logic
1. Registers organization-related routes
2. Registers workspace (project) related routes
3. Registers secret management routes (snapshots, approvals, rotations)
4. Registers access approval routes
5. Registers rate limiting routes
6. Registers dynamic secrets routes
7. Registers PKI (Public Key Infrastructure) routes
8. Registers SSO (Single Sign-On) routes
9. Registers SCIM and LDAP routes
10. Registers secret scanning and rotation routes
11. Registers group management routes
12. Registers audit log stream routes
13. Registers additional privilege routes
14. Registers external KMS (Key Management Service) routes

Each route registration is done using `server.register()` method, often with a specific prefix to group related endpoints.

## Dependencies
The code relies on numerous imported router registration functions, each likely defined in separate files within the project structure.

## Configuration
The code uses prefixes to organize routes under specific paths. These prefixes act as configuration options for the API structure.

## API/Interface Reference
This code defines the overall structure of the v1 API for the enterprise edition. Each registered router likely defines specific endpoints within its domain. The main structure includes:

| Prefix | Description |
|:-------|:------------|
| /organization | Organization role management |
| /organizations | License management |
| /workspace | Project, role, and trusted IP management |
| /secret-snapshot | Secret snapshot management |
| /secret-approvals | Secret approval policy management |
| /secret-approval-requests | Secret approval request management |
| /secret-rotation-providers | Secret rotation provider management |
| /access-approvals | Access approval policy and request management |
| /rate-limit | Rate limiting management |
| /dynamic-secrets | Dynamic secret and lease management |
| /pki | PKI and CRL management |
| /sso | SSO (SAML and OIDC) management |
| /scim | SCIM protocol support |
| /ldap | LDAP integration |
| /secret-scanning | Secret scanning management |
| /secret-rotations | Secret rotation management |
| /secret | Secret version management |
| /groups | Group management |
| /audit-log-streams | Audit log stream management |
| /additional-privilege | Additional privilege management for users and identities |
| /external-kms | External KMS integration |

This structure provides a comprehensive API for managing various aspects of the enterprise edition of the application, focusing on security, access control, and secret management features.