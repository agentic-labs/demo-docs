---
title: "scim-dal.ts"
---

## High-level description
This code defines a Data Access Layer (DAL) factory for SCIM (System for Cross-domain Identity Management) tokens. It provides a way to interact with the SCIM token table in the database using an ORM (Object-Relational Mapping) approach.

## Code Structure
The code exports two types: `TScimDALFactory` and a function `scimDALFactory`. The `scimDALFactory` function takes a database client as input and returns an ORM instance for the SCIM token table.

## Symbols

### `scimDALFactory`
#### Description
This function creates and returns an ORM instance for the SCIM token table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| db | TDbClient | The database client instance |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| scimTokenOrm | ReturnType&lt;typeof ormify&gt; | An ORM instance for the SCIM token table |

#### Internal Logic
1. It uses the `ormify` function to create an ORM instance for the SCIM token table.
2. The `TableName.ScimToken` is passed as an argument to specify the table name.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/db | Imports the `TDbClient` type |
| @app/db/schemas | Imports the `TableName` enum |
| @app/lib/knex | Imports the `ormify` function |

## Notes
- The `TScimDALFactory` type is defined as the return type of `scimDALFactory`, which allows for type inference when using the factory function.
- This code is part of the backend services, specifically handling SCIM token data access.
- The use of `ormify` suggests that the application is using a custom ORM layer built on top of Knex.js for database operations.