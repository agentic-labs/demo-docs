---
title: "queue.ts"
---

## High-level description
This code defines a mock implementation of a queue service factory for end-to-end testing purposes. It simulates the behavior of a queue system without actually interacting with a real queue, allowing for isolated testing of queue-related functionality.

## Code Structure
The code exports a single function `mockQueue` that returns an object implementing the `TQueueServiceFactory` interface. This object contains methods that mimic the behavior of a real queue service, storing queue-related data in local objects.

## Symbols

### `mockQueue`
#### Description
This function creates and returns a mock implementation of a queue service factory. It simulates the behavior of various queue operations without actually interacting with a real queue system.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| TQueueServiceFactory | Object | An object implementing the TQueueServiceFactory interface with mock methods |

#### Internal Logic
1. Initialize empty objects to store queue-related data: `queues`, `workers`, `job`, and `events`.
2. Return an object with methods that simulate queue operations:
   - `queue`: Stores job data for a given queue name.
   - `shutdown`: No-op function (returns undefined).
   - `stopRepeatableJob`: Always returns true.
   - `start`: Stores the job function for a given queue name in both `queues` and `workers` objects.
   - `listen`: Stores the event for a given queue name.
   - `clearQueue`: No-op function.
   - `stopJobById`: No-op function.
   - `stopRepeatableJobByJobId`: Always returns true.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/queue | Imports the TQueueServiceFactory type |

## Notes
- This mock implementation is designed for testing purposes and does not actually perform any real queue operations.
- The mock stores data in-memory using JavaScript objects, which allows for easy inspection and manipulation during tests.
- Some methods (like `shutdown`, `clearQueue`, and `stopJobById`) are implemented as no-op functions, meaning they don't perform any actions but maintain the expected interface.
- The `stopRepeatableJob` and `stopRepeatableJobByJobId` methods always return `true`, simulating successful operation without actually stopping any jobs.