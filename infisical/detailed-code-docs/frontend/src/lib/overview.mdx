---
title: "Overview"
---

## High-level description
The `frontend/src/lib` directory contains utility functions and cryptographic operations essential for the frontend application. It is divided into two main subdirectories: `crypto` and `fn`. The `crypto` subdirectory focuses on user authentication and key generation, while the `fn` subdirectory houses various utility functions for common tasks such as array manipulation, date formatting, function debouncing, and string processing.

## What does it do?
This directory provides a set of tools and functions that support the core functionality of the frontend application:

1. Cryptographic operations:
   - Generates backup keys for users and encrypts their private keys.
   - Creates new key pairs for users and derives keys from passwords.
   - Implements secure authentication using the Secure Remote Password (SRP) protocol.

2. Utility functions:
   - Organizes array items into groups based on specified criteria.
   - Formats dates into human-readable time differences.
   - Limits the rate at which functions can be called to optimize performance.
   - Processes and formats secret paths, particularly those involving reserved folders for secret replication.

These functions serve as building blocks for various features in the application, ensuring secure user authentication, efficient data handling, and improved user experience.

## Key Files

1. `crypto/index.ts`:
   - Contains `generateUserBackupKey` and `generateUserPassKey` functions.
   - Implements cryptographic operations for user authentication and key management.

2. `fn/array.ts`:
   - Defines the `groupBy` function for array manipulation.

3. `fn/date.ts`:
   - Implements the `timeAgo` function for human-readable date formatting.

4. `fn/debounce.ts`:
   - Contains the `debounce` function for rate-limiting function calls.

5. `fn/string.ts`:
   - Provides the `formatReservedPaths` function for processing secret paths.

## Dependencies
The `crypto` subdirectory relies on several external libraries and internal modules:

- External:
  - `crypto`: For generating random bytes.
  - `jsrp`: Implementation of the Secure Remote Password (SRP) protocol.
  - `tweetnacl` and `tweetnacl-util`: For generating and encoding public-key pairs.

- Internal:
  - `@app/components/utilities/cryptography/aes-256-gcm`: Custom AES-256-GCM encryption implementation.
  - `@app/components/utilities/cryptography/crypto`: For key derivation using Argon2.
  - `@app/hooks/api/auth/queries`: For server communication in the authentication process.

The `fn` subdirectory primarily uses built-in JavaScript functionality, with one internal dependency:

- `@app/hooks/api/secretFolders/types`: Used in `string.ts` for the `ReservedFolders` enum.

## Configuration
While there are no explicit configuration files or environment variables in this directory, the cryptographic functions use specific parameters that affect their behavior:

- In `generateUserPassKey`, Argon2 is configured with parameters: memory: 65536, time: 3, parallelism: 1.
- AES-256-GCM is used for encryption operations.

These parameters should be carefully chosen to balance security and performance.

Here are some code snippets demonstrating the usage of key functions:

1. Generating a user backup key:

```typescript
const generatedKey = await generateUserBackupKey(email, password);
```

2. Grouping user roles:

```typescript
const userRolesGroupBySlug = groupBy(roles, ({ customRoleSlug, role }) =&gt; customRoleSlug || role);
```

3. Implementing debounced search:

```typescript
const debouncedOnSearch = debounce(onSearchChange, 500);
```

4. Formatting secret paths:

```typescript
const formattedPath = formatReservedPaths(secretPath);
```

These utility functions and cryptographic operations play a crucial role in ensuring the security, efficiency, and usability of the frontend application. They provide a foundation for secure user authentication, efficient data handling, and a consistent user experience across the application.