---
title: "ShareSecretForm.tsx"
---

## High-level description
This code defines a React component called `ShareSecretForm` that allows users to create and share encrypted secrets. It provides a form for inputting secret data, setting expiration times, view limits, and access types. Once submitted, it generates an encrypted link for sharing the secret.

## Code Structure
The code is structured around the `ShareSecretForm` component, which uses React Hook Form for form management and validation. It interacts with custom hooks for API calls and utilizes various UI components for form inputs and buttons.

## Symbols

### `ShareSecretForm`
#### Description
This is the main component that renders the secret sharing form or the generated secret link.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isPublic | boolean | Determines if the form is for public (non-authenticated) secret sharing |
| value | string (optional) | Pre-filled value for the secret input |

#### Internal Logic
1. Uses React Hook Form to manage form state and validation
2. Handles form submission by encrypting the secret and creating a shared secret via API
3. Generates and displays a secret link after successful submission
4. Provides options for expiration time, view limit, and access type
5. Renders either the form or the generated link based on the `hasSecretLink` state

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @fortawesome/react-fontawesome | Icon components |
| @hookform/resolvers/zod | Zod schema resolver for react-hook-form |
| zod | Schema validation |
| crypto | Cryptographic operations |
| @app/components/* | Custom UI components and utilities |
| @app/hooks/* | Custom hooks for API calls and state management |

## Error Handling
The component uses try-catch blocks to handle errors during form submission. Errors are logged to the console and displayed to the user via notifications.

## Logging
Console errors are logged for failed secret creation attempts.

## API/Interface Reference
The component interacts with two API endpoints:
1. `useCreatePublicSharedSecret` for public secret sharing
2. `useCreateSharedSecret` for private secret sharing

Both endpoints expect similar parameters including encrypted secret data, expiration settings, and access type.

## Performance Considerations
The component uses cryptographic operations which may impact performance for large secrets. However, these operations are performed client-side, reducing server load.

## TODOs
There are no explicit TODOs in the code.