---
title: "ReviewAccessModal.tsx"
---

## High-level description
This code defines a React component called `ReviewAccessRequestModal` that displays a modal for reviewing and approving/rejecting access requests. It allows users to review the details of an access request, including the requested path, permissions, and access type, and make a decision to approve or reject the request.

## Code Structure
The main component `ReviewAccessRequestModal` uses several hooks and sub-components to manage its state and render the UI. It relies on external components like `Modal`, `Button`, and `Checkbox` from the application's component library.

## Symbols

### ReviewAccessRequestModal
#### Description
This is the main functional component that renders the modal for reviewing access requests.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Controls the visibility of the modal |
| onOpenChange | function | Callback function to handle modal open/close state changes |
| request | TAccessApprovalRequest & {...} | The access request object with additional user information |
| projectSlug | string | The slug of the project |
| selectedRequester | string \| undefined | The selected requester's identifier |
| selectedEnvSlug | string \| undefined | The selected environment slug |

#### Internal Logic
1. The component uses various hooks to manage state and side effects.
2. It calculates and formats the access details based on the request object.
3. It renders a modal with the request details and approval/rejection buttons.
4. It handles the review process when a decision is made.

### useReviewAccessRequest
#### Description
A custom hook that provides a mutation function for reviewing access requests.

### handleReview
#### Description
An asynchronous function that handles the review process when a user approves or rejects a request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| status | "approved" \| "rejected" | The decision made by the reviewer |

#### Internal Logic
1. Sets the loading state for the appropriate button.
2. Calls the `reviewAccessRequest.mutateAsync` function with the request details.
3. Creates a notification based on the review result.
4. Closes the modal upon completion.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| ms | For parsing and formatting time durations |
| @app/components/notifications | For creating notifications |
| @app/components/v2 | For UI components like Button, Checkbox, Modal |
| @app/hooks/api | For API-related hooks |
| @app/hooks/api/policies/enums | For policy-related enums |

## Error Handling
The component includes basic error handling in the `handleReview` function, where it logs any errors to the console and resets the loading state.

## Performance Considerations
The component uses `useMemo` to memoize the calculation of `requestedAccess`, which helps optimize performance by avoiding unnecessary recalculations.