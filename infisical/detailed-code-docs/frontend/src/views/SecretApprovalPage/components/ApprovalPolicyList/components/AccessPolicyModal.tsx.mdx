---
title: "AccessPolicyModal.tsx"
---

## High-level description
This code defines a React component called `AccessPolicyForm` that renders a modal form for creating or editing access approval policies. It uses React Hook Form for form management and Zod for schema validation. The component allows users to configure various aspects of an access policy, including policy type, environment, approvers, and enforcement level.

## Code Structure
The main component `AccessPolicyForm` uses several hooks and sub-components to manage form state, handle API calls, and render form fields. It interacts with the workspace context and uses custom hooks for creating and updating policies.

## Symbols

### AccessPolicyForm
#### Description
A React component that renders a modal form for creating or editing access approval policies.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Controls the visibility of the modal |
| onToggle | function | Callback to toggle the modal's open state |
| members | TWorkspaceUser[] | List of workspace users |
| projectSlug | string | The project identifier |
| editValues | TAccessApprovalPolicy | Optional values for editing an existing policy |

#### Internal Logic
1. Initializes form using `useForm` hook with Zod schema validation
2. Manages form state and submission
3. Handles creation and updating of policies based on form data
4. Renders form fields using Controller components from react-hook-form
5. Uses various UI components from a custom component library

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @fortawesome/react-fontawesome | Icon rendering |
| zod | Schema validation |
| @app/components/notifications | Notification system |
| @app/components/v2 | Custom UI components |
| @app/context | Workspace context |
| @app/hooks/api | API hooks for policy management |

## Error Handling
The component uses try-catch blocks to handle errors during policy creation and updating. It displays error notifications using the `createNotification` function.

## API/Interface Reference
The component interacts with the following API endpoints through custom hooks:
| Hook | Purpose |
|:-----|:--------|
| useCreateAccessApprovalPolicy | Create a new access approval policy |
| useUpdateAccessApprovalPolicy | Update an existing access approval policy |
| useCreateSecretApprovalPolicy | Create a new secret approval policy |
| useUpdateSecretApprovalPolicy | Update an existing secret approval policy |

These hooks are called based on the policy type selected in the form.