---
title: "SecretEditRow.tsx"
---

## High-level description
This code defines a React component called `SecretEditRow` that provides functionality for editing, creating, updating, and deleting secrets in a project. It includes form controls for editing secret values, buttons for saving changes, copying secrets, and deleting secrets, with appropriate permission checks.

## Code Structure
The main component `SecretEditRow` uses React hooks and external libraries to manage form state, handle user interactions, and render UI elements. It interacts with parent components through callback props for secret operations.

## Symbols

### `SecretEditRow`
#### Description
A React functional component that renders an editable row for a secret, including input field and action buttons.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| defaultValue | string \| null \| undefined | Initial value of the secret |
| isCreatable | boolean \| undefined | Flag indicating if a new secret can be created |
| isOverride | boolean \| undefined | Flag indicating if the secret is an override |
| isImportedSecret | boolean | Flag indicating if the secret is imported |
| onSecretUpdate | function | Callback for updating a secret |
| secretName | string | Name of the secret |
| onSecretCreate | function | Callback for creating a new secret |
| onSecretDelete | function | Callback for deleting a secret |
| environment | string | Environment of the secret |
| secretPath | string | Path of the secret |
| isVisible | boolean \| undefined | Flag indicating if the secret value should be visible |
| secretId | string \| undefined | ID of the secret |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation.
2. Implements handlers for form submission, reset, copying to clipboard, and deleting secrets.
3. Renders different UI elements based on the secret's state (dirty, imported, etc.) and user permissions.
4. Uses a modal for confirming secret deletion.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| @casl/ability | Permission management |
| @fortawesome/free-solid-svg-icons, @fortawesome/react-fontawesome | Icon components |
| tailwind-merge | CSS class merging utility |
| @app/components/notifications | Notification creation |
| @app/components/permissions | Permission components |
| @app/components/v2 | UI components |
| @app/context | Project permission constants |
| @app/hooks | Custom hooks |
| @app/hooks/api/types | API types |

## Error Handling
The component includes basic error handling for the clipboard copy operation, displaying an error notification if it fails.

## Performance Considerations
The component uses `useCallback` for memoizing the `toggleModal` and `handleDeleteSecret` functions to optimize re-renders.