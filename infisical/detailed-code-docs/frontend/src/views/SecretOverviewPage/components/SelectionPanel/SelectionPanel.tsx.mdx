---
title: "SelectionPanel.tsx"
---

## High-level description
The `SelectionPanel` component is a React component that provides functionality for selecting and deleting multiple secrets and folders across environments in a project. It displays a panel with the number of selected items and a delete button, and handles the bulk deletion process.

## Code Structure
The main `SelectionPanel` component uses several hooks and utility functions to manage state and perform actions. It interacts with the project permissions context and uses API hooks for deleting secrets and folders.

## Symbols

### SelectionPanel
#### Description
The main component that renders the selection panel and handles the bulk deletion of secrets and folders.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| secretPath | string | The current path of secrets |
| getSecretByKey | function | Function to get a secret by its key |
| getFolderByNameAndEnv | function | Function to get a folder by its name and environment |
| resetSelectedEntries | function | Function to reset the selected entries |
| selectedEntries | object | Object containing selected folders and secrets |

#### Internal Logic
1. Calculates the number of selected folders and secrets.
2. Determines if the delete button should be shown based on user permissions.
3. Handles the bulk deletion process across environments.
4. Manages the state of the delete confirmation modal.

## Side Effects
- Mutates the state of secrets and folders in the database when bulk delete is performed.
- Creates notifications to inform the user about the deletion process.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @casl/ability | For handling user permissions |
| @fortawesome/free-solid-svg-icons | For icons used in the component |
| @fortawesome/react-fontawesome | For rendering FontAwesome icons |
| tailwind-merge | For merging Tailwind CSS classes |
| @app/components/notifications | For creating notifications |
| @app/components/v2 | For UI components like Button, DeleteActionModal, IconButton, and Tooltip |
| @app/context | For accessing project permissions and workspace context |
| @app/hooks | For custom hooks like usePopUp |
| @app/hooks/api | For API hooks like useDeleteFolder and useDeleteSecretBatch |

## Error Handling
The component handles errors during the bulk deletion process by showing error notifications to the user.

## API/Interface Reference
| Function | Description |
|:---------|:------------|
| handleBulkDelete | Performs the bulk deletion of selected secrets and folders across environments |

This component provides a user interface for managing multiple secrets and folders across different environments in a project. It allows users to select multiple items and perform bulk deletions, with appropriate permissions checks and error handling.