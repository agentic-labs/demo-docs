---
title: "SecretRotationPage.tsx"
---

## High-level description
This code defines the SecretRotationPage component, which provides a user interface for managing secret rotation in a project. It displays a list of rotated secrets, allows users to create new rotations, and shows available rotation providers. The component handles various actions such as deleting and restarting rotations, and includes permission checks for different operations.

## Code Structure
The main component, SecretRotationPage, is wrapped with the withProjectPermission HOC. It uses several hooks for state management, API calls, and permission checks. The component renders a table of rotated secrets and a grid of rotation providers, along with modals for creating rotations, deleting rotations, and upgrading plans.

## Symbols

### SecretRotationPage
#### Description
The main component that renders the Secret Rotation page. It displays rotated secrets, available rotation providers, and handles various user interactions.

#### Internal Logic
1. Fetches secret rotation providers and existing rotations using custom hooks.
2. Manages pop-up states for various modals using the usePopUp hook.
3. Handles actions like deleting rotations, restarting rotations, and creating new rotations.
4. Renders a table of rotated secrets and a grid of available rotation providers.
5. Implements permission checks for different actions using ProjectPermissionCan components.

#### Performance Considerations
The component uses React Query for data fetching, which provides caching and automatic refetching capabilities, potentially improving performance for repeated data requests.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Renders Font Awesome icons in React |
| date-fns | Used for date formatting |
| @app/components/* | Various UI components used in the page |
| @app/context | Provides context hooks for project permissions, subscriptions, and workspace |
| @app/hoc | Higher-order component for project permissions |
| @app/hooks | Custom hooks for pop-up management and API calls |

## Error Handling
The component implements error handling for API calls (e.g., deleteSecretRotation, restartSecretRotation) using try-catch blocks and displays error notifications using the createNotification function.

## Logging
The component logs errors to the console when API calls fail (e.g., console.log(error) in catch blocks).