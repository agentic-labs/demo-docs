---
title: "ShareSecretsTable.tsx"
---

## High-level description
This code defines a React component called `ShareSecretsTable` that displays a table of shared secrets. It uses pagination and handles loading states, empty states, and data fetching using a custom hook.

## Code Structure
The main component `ShareSecretsTable` uses various sub-components from a custom UI library and a custom hook for data fetching. It manages its own state for pagination and renders rows of shared secrets using the `ShareSecretsRow` component.

## References
- `@app/components/v2`: Various UI components
- `@app/hooks/api/secretSharing`: `useGetSharedSecrets` hook
- `@app/hooks/usePopUp`: `UsePopUpState` type
- `./ShareSecretsRow`: `ShareSecretsRow` component

## Symbols

### ShareSecretsTable
#### Description
A functional component that renders a table of shared secrets with pagination and handling for various states (loading, empty, populated).

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| handlePopUpOpen | function | A function to handle opening a popup for deleting a shared secret |

#### Internal Logic
1. Initializes state for pagination (page and perPage)
2. Fetches shared secrets data using the `useGetSharedSecrets` hook
3. Renders a table with headers
4. Renders table body:
   - Shows a skeleton loader while loading
   - Maps over fetched secrets and renders `ShareSecretsRow` for each
5. Renders pagination if there are enough items
6. Shows an empty state if no secrets are present

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| @fortawesome/free-solid-svg-icons | For using the key icon in the empty state |
| @app/components/v2 | For various UI components used in the table |
| @app/hooks/api/secretSharing | For the `useGetSharedSecrets` hook to fetch shared secrets data |
| @app/hooks/usePopUp | For the `UsePopUpState` type used in props |

## Performance Considerations
The component uses pagination to limit the number of items rendered at once, which can help with performance when dealing with large datasets. The `useGetSharedSecrets` hook likely implements data fetching optimizations.