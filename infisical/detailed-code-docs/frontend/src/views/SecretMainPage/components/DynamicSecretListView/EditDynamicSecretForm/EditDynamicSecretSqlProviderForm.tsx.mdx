---
title: "EditDynamicSecretSqlProviderForm.tsx"
---

## High-level description
This code defines a React component called `EditDynamicSecretSqlProviderForm` that allows users to edit SQL database dynamic secrets. It provides a form with various input fields for configuring the secret, including name, TTL, database connection details, and SQL statements.

## Code Structure
The component uses React Hook Form for form management and Zod for schema validation. It interacts with an API using the `useUpdateDynamicSecret` hook to update the dynamic secret. The form is divided into sections for general settings, database configuration, and SQL statements.

## Symbols

### `EditDynamicSecretSqlProviderForm`
#### Description
This is the main component that renders the form for editing SQL database dynamic secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| onClose | () =&gt; void | Function to call when closing the form |
| dynamicSecret | TDynamicSecret & { inputs: unknown } | The current dynamic secret data |
| secretPath | string | The path of the secret |
| environment | string | The environment slug |
| projectSlug | string | The project slug |

#### Internal Logic
1. Initializes the form using `useForm` with Zod schema validation.
2. Uses `useUpdateDynamicSecret` hook for API interaction.
3. Renders form fields for secret name, TTL, and database configuration.
4. Provides an accordion section for modifying SQL statements.
5. Handles form submission, updating the dynamic secret via API call.

### `formSchema`
#### Description
Zod schema that defines the structure and validation rules for the form data.

### `handleUpdateDynamicSecret`
#### Description
Async function that handles the form submission and API call to update the dynamic secret.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| inputs | object | Form input values |
| maxTTL | string | Maximum TTL value |
| defaultTTL | string | Default TTL value |
| newName | string | New name for the secret |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| ms | Parse time strings |
| zod | Schema validation |
| @app/components/features | Custom components |
| @app/components/v2 | UI components |
| @app/hooks/api | API hooks |

## Error Handling
The component uses react-hook-form's built-in error handling and displays error messages next to the respective form fields. It also uses the `createNotification` function to show success or error notifications after form submission.

## Performance Considerations
The component uses React Hook Form, which is optimized for performance in handling form state and validation. The `useUpdateDynamicSecret` hook likely uses React Query for efficient API state management and caching.