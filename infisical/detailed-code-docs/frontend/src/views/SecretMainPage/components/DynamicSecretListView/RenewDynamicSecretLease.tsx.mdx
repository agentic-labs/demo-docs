---
title: "RenewDynamicSecretLease.tsx"
---

## High-level description
This code defines a React component called `RenewDynamicSecretLease` that provides a form for renewing a dynamic secret lease. It uses React Hook Form for form management, Zod for schema validation, and custom hooks for API interactions.

## Code Structure
The main component `RenewDynamicSecretLease` uses several hooks and components to create a form for renewing a dynamic secret lease. It defines a form schema using Zod, utilizes React Hook Form for form management, and uses a custom hook `useRenewDynamicSecretLease` for API interaction.

## Symbols

### `formSchema`
#### Description
Defines the validation schema for the form using Zod.

#### Internal Logic
- Validates that the TTL (Time To Live) is a string.
- Uses a custom validation to ensure the TTL is between 1 minute and 1 day.

### `RenewDynamicSecretLease`
#### Description
A React component that renders a form for renewing a dynamic secret lease.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| onClose | function | Callback function to close the form |
| leaseId | string | ID of the lease to renew |
| dynamicSecretName | string | Name of the dynamic secret |
| projectSlug | string | Slug of the project |
| environment | string | Environment name |
| secretPath | string | Path of the secret |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation.
2. Uses `useRenewDynamicSecretLease` hook to handle the API call for renewing the lease.
3. Defines `handleDynamicSecretLeaseCreate` function to submit the form data.
4. Renders a form with a TTL input field and submit/cancel buttons.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| ms | Parsing time strings |
| zod | Schema definition and validation |
| @app/components/features | Custom components (TtlFormLabel) |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components (Button, FormControl, Input) |
| @app/hooks/api | Custom API hooks |

## Error Handling
The component uses try-catch blocks to handle errors during the lease renewal process. If an error occurs, it logs the error to the console and displays an error notification to the user.

## Logging
The component logs errors to the console when the lease renewal fails.

This component is part of a larger system for managing dynamic secrets and their leases. It provides a user interface for extending the expiration time of an existing lease by specifying a new TTL.