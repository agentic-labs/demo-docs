---
title: "DynamicSecretLease.tsx"
---

## High-level description
This code defines a React component called `DynamicSecretLease` that displays a list of dynamic secret leases and provides functionality to manage them, including renewing and deleting leases. It uses various UI components and hooks to fetch and manipulate lease data.

## Code Structure
The main component `DynamicSecretLease` uses several custom hooks and components:
- `usePopUp` for managing modal states
- `useGetDynamicSecretLeases` for fetching lease data
- `useRevokeDynamicSecretLease` for deleting leases
- Various UI components from `@app/components/v2`
- `ProjectPermissionCan` for handling permissions
- `RenewDynamicSecretLease` for renewing leases

## Symbols

### DynamicSecretLease
#### Description
A React component that displays and manages dynamic secret leases.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dynamicSecretName | string | Name of the dynamic secret |
| projectSlug | string | Project identifier |
| environment | string | Environment name |
| secretPath | string | Path of the secret |
| onClickNewLease | function | Callback for creating a new lease |
| onClose | function | Callback for closing the component |

#### Internal Logic
1. Fetches lease data using `useGetDynamicSecretLeases`
2. Renders a table of leases with options to renew or delete
3. Handles lease deletion using `useRevokeDynamicSecretLease`
4. Manages modals for renewing and deleting leases
5. Implements permission checks for various actions

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @casl/ability | For handling permissions |
| @fortawesome/free-solid-svg-icons | For icons |
| @fortawesome/react-fontawesome | For rendering icons |
| date-fns | For date formatting |
| @app/components/v2 | For various UI components |
| @app/hooks | For custom hooks |
| @app/hooks/api | For API-related hooks |

## Error Handling
The component implements basic error handling for lease deletion, displaying error notifications using `createNotification`.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /api/v1/dynamic-secrets/${dynamicSecretName}/leases | GET | Fetches dynamic secret leases |
| (Not directly visible in this file) | DELETE | Revokes a dynamic secret lease |

This component provides a user interface for managing dynamic secret leases, including viewing, renewing, and deleting them, with appropriate permission checks and error handling.