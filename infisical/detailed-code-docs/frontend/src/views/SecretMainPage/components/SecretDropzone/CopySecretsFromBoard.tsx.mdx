---
title: "CopySecretsFromBoard.tsx"
---

## High-level description
This code implements a modal component called `CopySecretsFromBoard` that allows users to copy secrets from one environment to another within a project. It provides a form for selecting the source environment, secret path, and specific secrets to copy, with options to include secret values and search for specific secrets.

## Code Structure
The main component `CopySecretsFromBoard` uses React hooks and form management libraries to handle user interactions and data. It interacts with API hooks to fetch project secrets and uses various UI components to render the form and secret selection interface.

## References
- `useGetProjectSecrets`: A custom hook for fetching project secrets
- `ProjectPermissionCan`: A component for handling project permissions
- Various UI components from `@app/components/v2`

## Symbols

### CopySecretsFromBoard
#### Description
A React component that renders a modal for copying secrets from one environment to another.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| environments | Array | List of available environments |
| workspaceId | string | ID of the current workspace |
| environment | string | Current environment |
| secretPath | string | Current secret path |
| isOpen | boolean | Controls modal visibility |
| isSmaller | boolean | Determines button size |
| onToggle | function | Callback for toggling modal visibility |
| onParsedEnv | function | Callback for handling parsed environment data |

#### Internal Logic
1. Uses `useForm` to manage form state and validation
2. Fetches secrets using `useGetProjectSecrets` hook
3. Implements search functionality for secrets
4. Handles form submission and secret selection

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| @casl/ability | Permission handling |
| @fortawesome | Icon components |
| zod | Schema validation |
| @app/components/v2 | UI components |
| @app/hooks | Custom hooks |

## Error Handling
The component relies on form validation using zod schema and handles API errors through the `useGetProjectSecrets` hook.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| useGetProjectSecrets | GET | Fetches project secrets based on workspace, environment, and secret path |

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.