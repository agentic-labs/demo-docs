---
title: "CreateSecretForm.tsx"
---

## High-level description
This code defines a React component called `CreateSecretForm` that renders a form for creating a new secret in a specific environment and workspace. It uses React Hook Form for form management and validation, and includes fields for the secret key and value.

## Code Structure
The main component `CreateSecretForm` uses several hooks and components from external libraries and the application's custom components. It manages the form state, handles form submission, and interacts with the API to create a new secret.

## Symbols

### CreateSecretForm
#### Description
A React component that renders a form for creating a new secret. It uses a modal to display the form and handles the creation of secrets through an API call.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| environment | string | The environment for the secret |
| workspaceId | string | The ID of the workspace |
| secretPath | string | The path for the secret (default: "/") |
| autoCapitalize | boolean | Whether to auto-capitalize the secret key (default: true) |
| isProtectedBranch | boolean | Whether the branch is protected (default: false) |

#### Internal Logic
1. Uses React Hook Form to manage form state and validation.
2. Handles form submission by calling the `createSecretV3` API.
3. Manages the modal state using the `usePopUpState` and `usePopUpAction` hooks.
4. Handles pasting of key-value pairs into the form fields.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for form validation |
| zod | Schema validation library |
| @app/components/notifications | Custom notification component |
| @app/components/v2 | Various UI components |
| @app/helpers/parseEnvVar | Helper function for parsing environment variables |
| @app/hooks/api | Custom API hooks |

## Error Handling
The component uses try-catch blocks to handle errors during secret creation. It displays success or error notifications using the `createNotification` function.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| createSecretV3 | POST | Secret details | Created secret | Creates a new secret |

## TODOs
None explicitly mentioned in the code.