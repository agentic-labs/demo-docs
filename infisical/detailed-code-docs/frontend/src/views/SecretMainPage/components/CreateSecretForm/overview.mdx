---
title: "Overview"
---

## High-level description
This directory contains the implementation of the `CreateSecretForm` component, which is a crucial part of the secret management functionality in the application. The component is responsible for rendering and handling a form that allows users to create new secrets within specific environments and workspaces.

## What does it do?
The `CreateSecretForm` component provides a user interface for creating new secrets in the application. Here's a breakdown of its functionality:

1. It presents a modal form to the user with fields for entering a secret key and value.
2. The form includes validation to ensure that the entered data meets the required criteria.
3. It supports auto-capitalization of secret keys if enabled.
4. The component handles the submission of the form, sending the new secret data to the server via an API call.
5. It provides feedback to the user through notifications, informing them of successful secret creation or any errors that occur during the process.
6. The form also includes a feature to parse pasted key-value pairs, making it easier for users to input multiple secrets at once.

## Key Files

### CreateSecretForm.tsx
This is the main file containing the implementation of the `CreateSecretForm` component. It includes:

- The React component definition
- Form state management using React Hook Form
- API interaction for creating secrets
- Modal state management
- Error handling and notification display

### index.tsx
This file serves as a re-export for the `CreateSecretForm` component, simplifying the import process for other parts of the application.

## Dependencies
The `CreateSecretForm` component relies on several external libraries and internal modules:

1. React: The core library for building the user interface.
2. react-hook-form (version not specified): Used for form state management and validation.
3. @hookform/resolvers/zod (version not specified): Provides integration between react-hook-form and zod for schema validation.
4. zod (version not specified): A schema declaration and validation library.
5. @app/components/notifications: A custom component for displaying notifications.
6. @app/components/v2: Various UI components used in the form.
7. @app/helpers/parseEnvVar: A helper function for parsing environment variables.
8. @app/hooks/api: Custom hooks for API interactions.

These dependencies were likely chosen to provide a robust form handling experience (react-hook-form and zod), maintain consistency with the application's UI (custom components), and simplify API interactions (custom hooks).

## Configuration
The `CreateSecretForm` component accepts several props that configure its behavior:

- `environment` (string): Specifies the environment for the secret.
- `workspaceId` (string): Identifies the workspace where the secret will be created.
- `secretPath` (string, default: "/"): Sets the path for the secret.
- `autoCapitalize` (boolean, default: true): Determines whether to auto-capitalize the secret key.
- `isProtectedBranch` (boolean, default: false): Indicates whether the branch is protected.

These configuration options allow the component to be flexible and reusable across different parts of the application.

Here's an example of how the component might be used:

```jsx
&lt;CreateSecretForm
  environment="production"
  workspaceId="workspace-123"
  secretPath="/api/keys"
  autoCapitalize={true}
  isProtectedBranch={false}
/&gt;
```

The component uses the `createSecretV3` API endpoint to create new secrets. The API call is made using a POST method and expects the secret details in the request body. The response contains the created secret information.

Error handling is implemented using try-catch blocks, and the component uses the `createNotification` function to display success or error messages to the user.

In summary, the `CreateSecretForm` component provides a user-friendly interface for creating secrets, with built-in validation, error handling, and integration with the application's API and notification system. Its modular design and configuration options make it a versatile tool for secret management within the application.