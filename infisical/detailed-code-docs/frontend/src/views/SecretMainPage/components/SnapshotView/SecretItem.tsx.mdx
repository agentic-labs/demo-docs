---
title: "SecretItem.tsx"
---

## High-level description
This code defines a React component called `SecretItem` that displays information about a secret in a collapsible format. It's designed to show the differences between two versions of a secret, supporting various modes like "no change", "deleted", "modified", and "created".

## Code Structure
The main component `SecretItem` uses several utility functions and components. It imports icons from FontAwesome, custom components from the app's component library, and uses the `useToggle` hook for managing the expanded state.

## Symbols

### `TDiffModes` (enum)
#### Description
Defines the possible modes for displaying differences between secret versions.

#### Values
| Name | Description |
|:-----|:------------|
| NoChange | No changes between versions |
| Deleted | Secret has been deleted |
| Modified | Secret has been modified |
| Created | New secret has been created |

### `renderIcon` (function)
#### Description
Renders an appropriate icon based on the diff mode.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | TDiffModes | The diff mode to render an icon for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| icon | ReactElement | FontAwesome icon component |

### `SecretItem` (component)
#### Description
Renders a collapsible item showing secret information and differences between versions.

#### Props
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | TDiffModes | The diff mode for this secret |
| preSecret | SecretV3RawSanitized (optional) | The previous version of the secret |
| postSecret | SecretV3RawSanitized | The current version of the secret |

#### Internal Logic
1. Uses `useToggle` hook to manage expanded state.
2. Renders a clickable header with icon, key, and version information.
3. When expanded, displays a table with detailed secret information.
4. For modified secrets, shows both "before" and "after" values.
5. Handles special cases for overrides and tags.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for visual indicators |
| @fortawesome/react-fontawesome | Renders FontAwesome icons as React components |
| @app/components/v2 | Custom UI components (Table, SecretInput, etc.) |
| @app/hooks | Custom hooks (useToggle) |

## Performance Considerations
The component uses conditional rendering to display expanded content, which helps to reduce the initial render load. However, for large lists of secrets, consider implementing virtualization for better performance.