---
title: "CreateDynamicSecretForm.tsx"
---

## High-level description
This code defines a React component called `CreateDynamicSecretForm` that implements a wizard-like interface for setting up dynamic secrets. It allows users to select a service provider (SQL Database, Cassandra, or AWS IAM) and then presents a form specific to the chosen provider for further configuration.

## Code Structure
The main component `CreateDynamicSecretForm` uses React hooks (useState) to manage its state. It renders a modal with different content based on the current wizard step and selected provider. The component imports and uses several sub-components for provider-specific input forms.

## Symbols

### `CreateDynamicSecretForm`
#### Description
This is the main functional component that renders the dynamic secret setup wizard.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Optional. Determines if the modal is open |
| onToggle | function | Callback function to toggle the modal state |
| projectSlug | string | The project identifier |
| environment | string | The environment name |
| secretPath | string | The path for the secret |

#### Internal Logic
1. Initializes state for the current wizard step and selected provider.
2. Defines a `handleFormReset` function to reset the form state.
3. Renders a `Modal` component with `ModalContent`.
4. Uses `AnimatePresence` and `motion.div` for animations between steps.
5. Renders different content based on the current `wizardStep` and `selectedProvider`:
   - If on the provider selection step, displays a list of provider options.
   - If on the provider input step, renders the appropriate input form component based on the selected provider.

### `WizardSteps` (enum)
Defines the steps of the wizard: `SelectProvider` and `ProviderInputs`.

### `DYNAMIC_SECRET_LIST` (constant)
An array of objects defining the available dynamic secret providers, including their icons, provider types, and titles.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| @fortawesome/free-brands-svg-icons | Brand icons (e.g., AWS) |
| @fortawesome/free-solid-svg-icons | Solid icons (e.g., database) |
| @fortawesome/react-fontawesome | FontAwesome component for React |
| framer-motion | Animation library for React |
| @app/components/v2 | Custom Modal and ModalContent components |
| @app/hooks/api/dynamicSecret/types | Types for dynamic secret providers |

## Configuration
The component uses a predefined list of dynamic secret providers (`DYNAMIC_SECRET_LIST`) which can be easily extended or modified to add or remove provider options.

## Error Handling
This component doesn't implement explicit error handling. Error handling is likely managed in the child components (e.g., `SqlDatabaseInputForm`, `CassandraInputForm`, `AwsIamInputForm`).

## Performance Considerations
The component uses `AnimatePresence` and `motion.div` from framer-motion for animations, which may have a slight performance impact. However, for the given use case, it should not cause significant performance issues.