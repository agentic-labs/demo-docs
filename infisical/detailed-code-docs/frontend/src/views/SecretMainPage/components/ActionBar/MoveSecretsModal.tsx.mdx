---
title: "MoveSecretsModal.tsx"
---

## High-level description
This code defines a React component called `MoveSecretsModal` that renders a modal dialog for moving secrets from one location to another within a workspace. It uses React Hook Form for form management and Zod for form validation.

## Code Structure
The main component `MoveSecretsModal` uses several custom components and hooks. It defines a form schema using Zod and utilizes React Hook Form to manage form state and submission.

## Symbols

### MoveSecretsModal
#### Description
A React component that renders a modal dialog for moving secrets. It allows users to select a destination environment, specify a secret path, and choose whether to overwrite existing secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["moveSecrets"]&gt; | State object for controlling the modal's visibility |
| handlePopUpToggle | function | Function to toggle the modal's visibility |
| onMoveApproved | function | Callback function called when the move operation is approved |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation
2. Retrieves the current workspace and its environments using the `useWorkspace` hook
3. Renders a form with inputs for environment selection, secret path, and overwrite option
4. Handles form submission by calling `onMoveApproved` with the form data
5. Closes the modal after successful submission

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for React Hook Form |
| zod | Schema definition and validation |
| @app/components/v2 | UI components (Button, Checkbox, FormControl, Modal, ModalContent, Select, SelectItem) |
| @app/components/v2/SecretPathInput | Custom input component for secret paths |
| @app/context | Context for workspace data |
| @app/hooks/usePopUp | Custom hook for managing pop-up state |

## Configuration
The form schema is defined using Zod:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| environment | string | - | The selected destination environment |
| secretPath | string | - | The destination secret path (trailing slash is removed) |
| shouldOverwrite | boolean | false | Whether to overwrite existing secrets |

## Error Handling
Form validation errors are handled by Zod and displayed using the `FormControl` component's error props.

## API/Interface Reference
| Prop | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["moveSecrets"]&gt; | Controls the modal's visibility |
| handlePopUpToggle | (popUpName: keyof UsePopUpState&lt;["moveSecrets"]&gt;, state?: boolean) =&gt; void | Toggles the modal's visibility |
| onMoveApproved | (moveParams: { destinationEnvironment: string; destinationSecretPath: string; shouldOverwrite: boolean; }) =&gt; void | Callback for approved move operation |