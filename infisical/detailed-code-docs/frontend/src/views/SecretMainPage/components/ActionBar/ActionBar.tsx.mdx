---
title: "ActionBar.tsx"
---

## High-level description
This code defines the ActionBar component for a secret management interface. It provides various actions for managing secrets, including searching, filtering, grouping, downloading, and adding new secrets or folders. The component also handles bulk operations on selected secrets.

## Code Structure
The ActionBar component is the main export, which uses several hooks and sub-components to manage its state and functionality. It interacts with API hooks for creating folders, deleting secrets, and moving secrets. The component also manages various pop-up states for different actions.

## Symbols

### ActionBar
#### Description
The main component that renders the action bar with various controls for managing secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| secrets | SecretV3RawSanitized[] | Array of secret objects |
| environment | string | Current environment |
| workspaceId | string | ID of the current workspace |
| projectSlug | string | Slug of the current project |
| secretPath | string | Current path in the secret hierarchy |
| filter | Filter | Current filter settings |
| tags | WsTag[] | Array of available tags |
| isVisible | boolean | Whether secrets are visible or hidden |
| snapshotCount | number | Number of snapshots available |
| isSnapshotCountLoading | boolean | Whether snapshot count is loading |
| onGroupByChange | function | Callback for changing grouping option |
| onSearchChange | function | Callback for changing search term |
| onToggleTagFilter | function | Callback for toggling tag filters |
| onVisiblilityToggle | function | Callback for toggling secret visibility |
| onClickRollbackMode | function | Callback for entering rollback mode |

#### Internal Logic
1. Manages state for search, pop-ups, and selected secrets
2. Handles folder creation, secret downloading, bulk secret deletion, and secret moving
3. Renders various UI components for different actions (search, filter, add secret, etc.)
4. Manages permissions for different actions
5. Renders modals for additional actions (create folder, import secrets, etc.)

## Side Effects
- Creates notifications for success or failure of operations
- Downloads secrets as a file when requested
- Opens various modals for different actions

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-toastify | For creating notifications |
| @casl/ability | For handling permissions |
| @fortawesome | For icons |
| file-saver | For downloading secrets as a file |
| tailwind-merge | For merging Tailwind CSS classes |
| Various custom hooks and components | For API calls, permissions, and UI elements |

## Error Handling
The component uses try-catch blocks for error handling in asynchronous operations. Errors are logged to the console and displayed as notifications to the user.

## Performance Considerations
The component uses debouncing for the search input to prevent excessive API calls during typing.

## TODOs
- The code includes a TODO comment about deprecating some props and moving them to Zustand state management.

This component is a complex and feature-rich part of the secret management interface, providing a wide range of actions for managing secrets while respecting user permissions and handling various edge cases.