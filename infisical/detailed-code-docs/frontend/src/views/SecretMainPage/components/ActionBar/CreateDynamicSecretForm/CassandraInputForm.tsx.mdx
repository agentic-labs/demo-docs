---
title: "CassandraInputForm.tsx"
---

## High-level description
This code defines a React component called `CassandraInputForm` that renders a form for creating a dynamic secret for Cassandra database integration. It uses React Hook Form for form management and validation, and includes various input fields for configuring the Cassandra connection and SQL statements.

## Code Structure
The main component `CassandraInputForm` uses several custom hooks and components:
- `useForm` from react-hook-form for form management
- `useCreateDynamicSecret` for API interaction
- Various UI components from the application's component library

## Symbols

### `CassandraInputForm`
#### Description
A React component that renders a form for creating a Cassandra dynamic secret.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| onCompleted | function | Callback function called when form submission is successful |
| onCancel | function | Callback function called when form is cancelled |
| environment | string | The environment slug |
| secretPath | string | The path where the secret will be stored |
| projectSlug | string | The project slug |

#### Internal Logic
1. Initializes form using `useForm` hook with Zod schema validation
2. Defines form submission handler `handleCreateDynamicSecret`
3. Renders form fields using `Controller` components from react-hook-form
4. Uses `useCreateDynamicSecret` hook for API interaction on form submission

### `formSchema`
#### Description
Zod schema object defining the structure and validation rules for the form data.

### `getSqlStatements`
#### Description
A function that returns default SQL statements for Cassandra operations.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| creationStatement | string | SQL statement for creating a new role |
| renewStatement | string | SQL statement for renewing a role (empty in this case) |
| revocationStatement | string | SQL statement for revoking a role |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| ms | Parsing time strings |
| zod | Schema declaration and validation |
| @app/components/features | Custom UI components |
| @app/components/v2 | Custom UI components |
| @app/hooks/api | API interaction hooks |

## Error Handling
The component uses Zod for form validation and displays error messages using the `FormControl` component. It also uses a `createNotification` function to show an error notification if the API call fails.

## API/Interface Reference
The component interacts with the API using the `useCreateDynamicSecret` hook, which is not defined in this file but is imported from `@app/hooks/api`.

| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/dynamic-secrets | POST | Form data | Dynamic secret data | Creates a new dynamic secret for Cassandra |

Note: The actual API endpoint and request/response format are abstracted by the `useCreateDynamicSecret` hook.