---
title: "SecretMainPage.store.tsx"
---

## High-level description
This code defines a global state management system for a secret management page using Zustand. It manages the state of selected secrets and popup windows, providing hooks for components to interact with this state.

## Code Structure
The code creates two main state slices: `SelectedSecretState` and `PopUpState`. These are combined into a `CombinedState` and managed through a React context. Custom hooks are provided to access and modify the state.

## Symbols

### `createSelectedSecretStore`
#### Description
Creates a store slice for managing selected secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| set | Function | Zustand's set function for updating state |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| store | Object | An object containing the initial state and actions for selected secrets |

#### Internal Logic
- Initializes an empty `selectedSecret` object
- Provides `toggle` action to add or remove a secret from selection
- Provides `reset` action to clear all selections

### `createPopUpStore`
#### Description
Creates a store slice for managing popup states.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| set | Function | Zustand's set function for updating state |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| store | Object | An object containing the initial state and actions for popups |

#### Internal Logic
- Initializes an empty `popUp` object
- Provides actions to open, close, and toggle popups

### `StoreProvider`
#### Description
A React component that provides the combined store to its children through context.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| children | ReactNode | Child components to be wrapped |

#### Internal Logic
- Creates a combined store using `createStore`
- Sets up an effect to reset selected secrets on route change
- Wraps children with `StoreContext.Provider`

### `useStoreContext`
#### Description
A custom hook for accessing the store state.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| selector | Function | A function to select specific state from the store |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| selectedState | T | The selected state based on the provided selector |

### Custom Hooks
- `useSelectedSecrets`: Returns the currently selected secrets
- `useSelectedSecretActions`: Returns actions for managing selected secrets
- `usePopUpState`: Returns the state of a specific popup
- `usePopUpAction`: Returns actions for managing popups

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For React hooks and context |
| next/router | For accessing router events |
| zustand | For state management |

## TODOs
The comment at the beginning of the file indicates that this is a first step, and more functionality related to secret CRUD operations will be moved to this global page scope state in the future.