---
title: "RoleModal.tsx"
---

## High-level description
This code defines a React component called `RoleModal` that provides a modal interface for creating or updating roles within an organization. It uses React Hook Form for form management, Zod for schema validation, and custom hooks for API interactions.

## Code Structure
The main component `RoleModal` uses several hooks and utilities to manage form state, API calls, and UI interactions. It renders a modal with a form for role details and handles form submission for both creating and updating roles.

## Symbols

### `RoleModal`
#### Description
A React component that renders a modal for creating or updating roles in an organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["role"]&gt; | State object for controlling the modal's visibility |
| handlePopUpToggle | function | Function to toggle the modal's visibility |

#### Internal Logic
1. Initializes form using `useForm` with Zod schema validation
2. Fetches existing role data if updating
3. Handles form submission, calling appropriate API functions
4. Renders form fields for name, slug, and description
5. Displays success or error notifications after form submission

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| next/router | Next.js routing |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @app/components/notifications | Custom notification component |
| @app/components/v2 | UI components |
| @app/context | Organization context |
| @app/hooks/api | Custom API hooks |
| @app/hooks/usePopUp | Custom hook for managing pop-up state |

## Error Handling
The component implements error handling in the `onFormSubmit` function. It catches any errors during the API call, logs them to the console, and displays an error notification to the user.

## API/Interface Reference
The component interacts with the following API endpoints through custom hooks:
| Hook | Purpose |
|:-----|:--------|
| useGetOrgRole | Fetches existing role data |
| useCreateOrgRole | Creates a new role |
| useUpdateOrgRole | Updates an existing role |

## Side Effects
- Creates or updates a role in the organization
- Displays notifications for success or failure
- Navigates to the new role page after creation

## Performance Considerations
The component uses `useEffect` to reset form values when the role data changes, which helps in optimizing re-renders and ensuring the form always displays the correct data.