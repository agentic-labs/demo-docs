---
title: "IdentityClientSecretModal.tsx"
---

## High-level description
This code defines a React component called `IdentityClientSecretModal` that allows users to create and manage client secrets for identity authentication. It provides a form for creating new client secrets and displays the generated secret, offering functionality to copy it to the clipboard.

## Code Structure
The main component `IdentityClientSecretModal` uses React hooks and external libraries to manage form state, validation, and API interactions. It renders either a form for creating a new client secret or displays the generated secret based on the current state.

## References
- `useCreateIdentityUniversalAuthClientSecret` hook (not provided in the snippets)
- `usePopUp` hook from `frontend/src/hooks/usePopUp.tsx`

## Symbols

### `IdentityClientSecretModal`
#### Description
A React component that renders a modal for creating and displaying client secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["clientSecret"]&gt; | State object for managing the modal's open/close state |
| handlePopUpToggle | function | Function to toggle the modal's state |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation
2. Handles form submission to create a new client secret
3. Displays the generated secret and provides a copy-to-clipboard functionality
4. Manages the modal's open/close state

### `schema`
#### Description
A Zod schema object that defines the validation rules for the form inputs.

### `FormData`
#### Description
A type definition inferred from the Zod schema, representing the structure of the form data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @fortawesome/free-solid-svg-icons | Icons for UI elements |
| @fortawesome/react-fontawesome | FontAwesome icon component |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation library |
| @app/components/notifications | Custom notification component |
| @app/components/v2 | Custom UI components |
| @app/hooks | Custom hooks |
| @app/hooks/api | API-related hooks |
| @app/hooks/usePopUp | Custom hook for managing modal state |

## Error Handling
The component implements error handling in the form submission process. If an error occurs during the API call, it logs the error to the console and displays an error notification to the user.

## Logging
The component logs errors to the console when the client secret creation fails.

## API/Interface Reference
The component interacts with an API through the `useCreateIdentityUniversalAuthClientSecret` hook. The API call includes the following parameters:

| Parameter | Type | Description |
|:----------|:-----|:------------|
| identityId | string | The ID of the identity |
| description | string | Description of the client secret |
| ttl | number | Time-to-live in seconds |
| numUsesLimit | number | Maximum number of uses for the client secret |

The API returns an object containing the generated `clientSecret`.

## Performance Considerations
The component uses React hooks for efficient state management and re-rendering. The form validation is performed using Zod, which provides good performance for schema validation.