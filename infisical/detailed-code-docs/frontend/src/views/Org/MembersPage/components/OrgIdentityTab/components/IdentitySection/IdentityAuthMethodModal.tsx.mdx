---
title: "IdentityAuthMethodModal.tsx"
---

## High-level description
This code defines a React component called `IdentityAuthMethodModal` that manages the configuration and updating of identity authentication methods for an organization. It provides a user interface for selecting and configuring various authentication methods, such as Token Auth, Universal Auth, Kubernetes Auth, GCP Auth, AWS Auth, Azure Auth, and OIDC Auth.

## Code Structure
The main component `IdentityAuthMethodModal` uses React hooks and form management libraries to handle user input and API interactions. It renders different sub-components based on the selected authentication method and provides functionality for revoking existing authentication methods.

## Symbols

### IdentityAuthMethodModal
#### Description
This is the main component that renders a modal for configuring or updating identity authentication methods.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState | State object for managing modal visibility |
| handlePopUpOpen | Function | Function to open a specific pop-up |
| handlePopUpToggle | Function | Function to toggle the visibility of a specific pop-up |

#### Internal Logic
1. Uses React Hook Form for form management
2. Watches for changes in the selected authentication method
3. Renders the appropriate authentication form based on the selected method
4. Handles the revocation of existing authentication methods
5. Manages notifications for successful or failed operations

### renderIdentityAuthForm
#### Description
A helper function that renders the appropriate authentication form component based on the selected authentication method.

#### Inputs
(Implicitly uses the `authMethod` value from the form)

#### Outputs
Returns a React component for the selected authentication method.

### onRevokeAuthMethodSubmit
#### Description
An asynchronous function that handles the revocation of an existing authentication method.

#### Internal Logic
1. Determines the authentication method to revoke
2. Calls the appropriate API function to revoke the authentication
3. Displays a success or error notification
4. Closes the relevant modals

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| yup | Schema validation |
| @app/components/notifications | Notification system |
| @app/components/v2 | UI components |
| @app/context | Organization context |
| @app/hooks/api | API hooks for various authentication methods |
| @app/hooks/usePopUp | Pop-up state management |

## Error Handling
The component uses try-catch blocks to handle errors during the authentication method revocation process. Errors are logged to the console and displayed to the user via notifications.

## Logging
The component logs errors to the console when the revocation process fails.

This component serves as a central hub for managing identity authentication methods within an organization's user interface. It provides a flexible and extensible structure for adding new authentication methods and handling existing ones.