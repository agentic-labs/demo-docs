---
title: "IdentityAzureAuthForm.tsx"
---

## High-level description
This code defines a React component called `IdentityAzureAuthForm` that renders a form for configuring or updating Azure authentication settings for an identity. It uses React Hook Form for form management and validation, and integrates with API hooks for data fetching and submission.

## Code Structure
The main component `IdentityAzureAuthForm` uses several hooks from React Hook Form, custom API hooks, and context providers. It renders a form with various input fields for Azure authentication configuration and handles form submission.

## Symbols

### IdentityAzureAuthForm
#### Description
A React component that renders a form for configuring or updating Azure authentication settings for an identity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| handlePopUpOpen | Function | Function to open a popup |
| handlePopUpToggle | Function | Function to toggle a popup |
| identityAuthMethodData | Object | Data about the identity and its authentication method |

#### Internal Logic
1. Uses React Hook Form for form management and validation.
2. Fetches existing Azure auth data if available.
3. Renders form fields for Azure auth configuration.
4. Handles form submission, calling the appropriate API mutation (add or update).
5. Manages UI state for adding/removing trusted IP addresses.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form management and validation |
| @fortawesome/free-solid-svg-icons | Icons for the UI |
| @fortawesome/react-fontawesome | Font Awesome icon component |
| @hookform/resolvers/zod | Zod resolver for form validation |
| zod | Schema validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/context | Organization and subscription context |
| @app/hooks/api | API hooks for data fetching and mutation |

## Error Handling
The component uses try-catch blocks to handle errors during form submission. It displays success or error notifications using the `createNotification` function.

## API/Interface Reference
The component interacts with the following API endpoints (via custom hooks):
- `useAddIdentityAzureAuth`: Adds new Azure auth configuration
- `useUpdateIdentityAzureAuth`: Updates existing Azure auth configuration
- `useGetIdentityAzureAuth`: Fetches existing Azure auth configuration

## Performance Considerations
The component uses `useEffect` to reset form values when data is fetched or changed, which may cause re-renders. The API queries use `staleTime: 0` and `cacheTime: 0`, which means they will refetch on every render, potentially impacting performance for frequent updates.