---
title: "IdentityUniversalAuthClientSecretModal.tsx"
---

## High-level description
This code defines a React component called `IdentityUniversalAuthClientSecretModal` that manages client ID and secrets for identity authentication. It provides functionality to view the client ID, create new client secrets, and manage existing client secrets.

## Code Structure
The component uses various hooks and components from React and external libraries. It defines a form schema using Yup and utilizes React Hook Form for form management. The component renders a modal with sections for displaying the client ID, creating new client secrets, and listing existing client secrets.

## Symbols

### IdentityUniversalAuthClientSecretModal
#### Description
This is the main component that renders the modal for managing client ID and secrets.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["universalAuthClientSecret", "revokeClientSecret"]&gt; | State for managing the modal's open/close status |
| handlePopUpOpen | function | Function to open specific pop-ups |
| handlePopUpToggle | function | Function to toggle the modal's open/close state |

#### Internal Logic
1. Fetches client secrets and universal auth data using custom hooks.
2. Manages form state for creating new client secrets.
3. Handles copying of client ID and secret to clipboard.
4. Renders sections for client ID, new client secret creation, and existing client secrets.

### onFormSubmit
#### Description
Handles the submission of the form to create a new client secret.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| description | string | Optional description for the client secret |
| ttl | string | Time-to-live for the client secret in seconds |
| numUsesLimit | string | Maximum number of uses for the client secret |

#### Internal Logic
1. Calls the `createClientSecretMutateAsync` function with form data.
2. Sets the newly created token in the component state.
3. Displays a success or error notification.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| react-i18next | Internationalization |
| @fortawesome/react-fontawesome | Icon components |
| @hookform/resolvers/yup | Form validation |
| date-fns | Date formatting |
| yup | Schema validation |

## Error Handling
The component uses try-catch blocks to handle errors when creating client secrets. Errors are logged to the console, and error notifications are displayed to the user.

## API/Interface Reference
The component interacts with the following API endpoints (via custom hooks):
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| useGetIdentityUniversalAuthClientSecrets | GET | Fetches existing client secrets |
| useGetIdentityUniversalAuth | GET | Fetches universal auth data |
| useCreateIdentityUniversalAuthClientSecret | POST | Creates a new client secret |

## Performance Considerations
The component uses React hooks like `useEffect` to manage side effects and optimize performance. It also implements copy-to-clipboard functionality with a timeout to reset the copied state.