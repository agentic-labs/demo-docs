---
title: "IdentityOidcAuthForm.tsx"
---

## High-level description
This code defines a React component called `IdentityOidcAuthForm` that renders a form for configuring or updating OIDC (OpenID Connect) authentication for an identity. It uses React Hook Form for form management and validation, and includes fields for OIDC discovery URL, issuer, claims, and access token settings.

## Code Structure
The main component `IdentityOidcAuthForm` uses several hooks and components to manage form state, validation, and API interactions. It includes form fields for OIDC configuration, bound claims, and access token settings. The component also handles form submission, updating or adding OIDC authentication based on existing data.

## References
- React Hook Form (`useForm`, `useFieldArray`, `Controller`)
- Zod for schema validation
- Custom hooks (`useOrganization`, `useSubscription`, `useAddIdentityOidcAuth`, `useUpdateIdentityOidcAuth`, `useGetIdentityOidcAuth`)
- Custom components (`FormControl`, `Input`, `TextArea`, `Button`, `IconButton`)

## Symbols

### `IdentityOidcAuthForm`
#### Description
A React component that renders a form for configuring or updating OIDC authentication for an identity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| handlePopUpOpen | Function | Function to open a popup |
| handlePopUpToggle | Function | Function to toggle a popup |
| identityAuthMethodData | Object | Data about the identity and its auth method |

#### Internal Logic
1. Initializes form with React Hook Form and Zod schema validation
2. Fetches existing OIDC auth data if available
3. Renders form fields for OIDC configuration, bound claims, and access token settings
4. Handles form submission, either updating or adding OIDC auth
5. Manages dynamic fields for bound claims and trusted IPs

## Side Effects
- Makes API calls to add or update OIDC authentication
- Creates notifications on successful or failed form submission
- Toggles popups based on user actions

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| zod | Schema definition and validation |
| @fortawesome | Icons for the UI |
| @app/components | Custom UI components |
| @app/context | Organization and subscription context |
| @app/hooks/api | API interaction hooks |

## Error Handling
The component uses Zod for form validation and displays error messages for invalid inputs. It also handles API errors by showing error notifications.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| Add OIDC Auth | POST | OIDC configuration data | Success/Error | Adds new OIDC authentication |
| Update OIDC Auth | PUT | Updated OIDC configuration data | Success/Error | Updates existing OIDC authentication |