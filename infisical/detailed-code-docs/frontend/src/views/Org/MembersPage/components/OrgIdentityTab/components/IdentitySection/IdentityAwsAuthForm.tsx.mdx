---
title: "IdentityAwsAuthForm.tsx"
---

## High-level description
This code defines a React component called `IdentityAwsAuthForm` that renders a form for configuring AWS authentication for an identity. It uses React Hook Form for form management and validation, and includes fields for various AWS-related settings such as STS endpoint, allowed principal ARNs, and access token configurations.

## Code Structure
The main component `IdentityAwsAuthForm` uses several hooks and utilities to manage form state, validation, and API interactions. It renders form fields using the `FormControl` and `Input` components, and handles form submission and cancellation.

## Symbols

### IdentityAwsAuthForm
#### Description
A React component that renders a form for configuring AWS authentication for an identity.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| handlePopUpOpen | Function | Function to open a popup |
| handlePopUpToggle | Function | Function to toggle a popup |
| identityAuthMethodData | Object | Data about the identity and its auth method |

#### Internal Logic
1. Uses React Hook Form to manage form state and validation
2. Fetches existing AWS auth data if available
3. Renders form fields for various AWS authentication settings
4. Handles form submission, updating or adding AWS auth configuration
5. Manages trusted IP addresses with dynamic form fields

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| yup | Schema validation |
| @app/components/notifications | Displaying notifications |
| @app/components/v2 | UI components |
| @app/hooks/api | API hooks for identity and AWS auth operations |

## Error Handling
The component uses try-catch blocks to handle errors during form submission. It displays error notifications using the `createNotification` function.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| useAddIdentityAwsAuth | POST | Adds new AWS auth configuration |
| useUpdateIdentityAwsAuth | PUT | Updates existing AWS auth configuration |
| useGetIdentityAwsAuth | GET | Fetches existing AWS auth configuration |

## Performance Considerations
The component uses `useEffect` to reset form values when data changes, which may impact performance if the data changes frequently.

## TODOs
There are no explicit TODOs in the code.