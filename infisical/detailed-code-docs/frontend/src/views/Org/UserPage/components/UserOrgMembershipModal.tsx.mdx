---
title: "UserOrgMembershipModal.tsx"
---

## High-level description
This code defines a React component `UserOrgMembershipModal` that renders a modal for updating a user's organization membership role. It uses React Hook Form for form management, Zod for schema validation, and custom hooks for API interactions and state management.

## Code Structure
The main component `UserOrgMembershipModal` uses several hooks and components to manage the form state, handle API calls, and render the UI. It interacts with the organization context and subscription data to determine available roles and permissions.

## Symbols

### UserOrgMembershipModal
#### Description
A React component that renders a modal for updating a user's organization membership role.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["orgMembership"]&gt; | State object for controlling the modal's visibility |
| handlePopUpOpen | function | Function to open a popup |
| handlePopUpToggle | function | Function to toggle the visibility of a popup |

#### Internal Logic
1. Fetches organization roles using `useGetOrgRoles` hook
2. Sets up form management using `useForm` from react-hook-form
3. Handles form submission, updating the membership role via `updateOrgMembership` mutation
4. Renders a modal with a form containing a role selection dropdown
5. Handles custom role selection based on subscription status

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/context | Organization and subscription context |
| @app/hooks/api | API interaction hooks |
| @app/hooks/usePopUp | Popup state management hook |

## Error Handling
The component implements error handling in the form submission process. If an error occurs during the API call, it logs the error to the console and displays an error notification to the user.

## Logging
The component logs errors to the console using `console.error()` when an error occurs during form submission.

## API/Interface Reference
The component interacts with the following API endpoints (via custom hooks):
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| useGetOrgRoles | GET | Fetches available organization roles |
| useUpdateOrgMembership | PUT | Updates a user's organization membership role |

Note: The actual API calls are abstracted away in custom hooks, so the exact endpoints are not visible in this file.