---
title: "UserAddToProjectModal.tsx"
---

## High-level description
This code defines a React component `UserAddToProjectModal` that renders a modal for adding a user to a project. It uses React Hook Form for form management, Zod for schema validation, and custom hooks for API interactions and state management.

## Code Structure
The main component `UserAddToProjectModal` uses several hooks and components to manage the form state, handle API calls, and render the UI. It interacts with the organization and workspace contexts, and uses custom hooks for API operations.

## Symbols

### UserAddToProjectModal
#### Description
A React component that renders a modal for adding a user to a project. It manages form state, handles form submission, and interacts with API hooks to add a user to a workspace.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| membershipId | string | The ID of the user's membership |
| popUp | UsePopUpState&lt;["addUserToProject"]&gt; | State object for managing the modal's open/close state |
| handlePopUpToggle | function | Function to toggle the modal's state |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation
2. Fetches project memberships and workspaces data
3. Filters workspaces based on project memberships and organization
4. Handles form submission by calling `addUserToWorkspaceNonE2EE` API
5. Displays success or error notifications after form submission
6. Renders a modal with a form containing a project selection dropdown and submit/cancel buttons

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @app/components/notifications | Custom notification component |
| @app/components/v2 | UI components |
| @app/context | Organization and workspace context |
| @app/hooks/api | Custom API hooks |
| @app/hooks/usePopUp | Custom hook for managing popup state |

## Error Handling
The component handles errors during form submission by catching exceptions, logging them to the console, and displaying error notifications to the user.

## Performance Considerations
The component uses `useMemo` to memoize the filtered workspaces list, optimizing performance by preventing unnecessary recalculations.