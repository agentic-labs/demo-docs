---
title: "EmailConfirmationStep.tsx"
---

## High-level description
This code defines a React component called `EmailConfirmationStep` that handles email verification during user signup. It provides a UI for users to enter a verification code sent to their email and includes functionality to verify the code, resend it if needed, and handle different authentication types.

## Code Structure
The main component `EmailConfirmationStep` uses several hooks and sub-components to manage state, handle API calls, and render the UI. It interacts with custom hooks for sending and verifying email codes, and uses Next.js router for navigation.

## Symbols

### `EmailConfirmationStep`
#### Description
A React functional component that renders the email confirmation step of a signup process.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| authType | UserAliasType | The type of authentication being used |
| username | string | The username of the user |
| email | string | The email address of the user |
| organizationSlug | string | The slug of the organization |
| setStep | function | Function to set the current step in the signup process |

#### Internal Logic
1. Initializes state variables for code, errors, and loading states.
2. Defines functions for checking the verification code and resending it.
3. Renders a UI with a code input field, verify button, and resend option.
4. Handles different authentication types (SAML, LDAP, OIDC) after successful verification.

### `checkCode`
#### Description
An asynchronous function that verifies the entered code and handles the next steps based on the authentication type.

#### Internal Logic
1. Calls the `verifyEmailVerificationCode` API.
2. If successful, shows a success notification and routes the user based on `authType`.
3. If failed, shows an error notification.

### `resendCode`
#### Description
An asynchronous function that resends the verification code to the user's email.

#### Internal Logic
1. Calls the `sendEmailVerificationCode` API.
2. Shows a success or error notification based on the API response.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| react-code-input | For rendering the code input field |
| next/router | For handling navigation |
| @app/components/basic/Error | For displaying error messages |
| @app/components/notifications | For creating notifications |
| @app/components/v2 | For using the Button component |
| @app/hooks/api | For using API hooks related to email verification |

## Configuration
The component uses two constant objects, `props` and `propsPhone`, to define the styling for the code input fields on desktop and mobile devices respectively.

## Error Handling
The component handles errors by displaying notifications for failed API calls and showing an error message if an incorrect code is entered.

## Logging
This component does not implement any explicit logging mechanisms.

## API/Interface Reference
The component interacts with two API endpoints through custom hooks:
1. `useSendEmailVerificationCode`: For sending the verification code.
2. `useVerifyEmailVerificationCode`: For verifying the entered code.