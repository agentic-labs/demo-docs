---
title: "DashboardPage.tsx"
---

## High-level description
This code defines the AdminDashboardPage component, which is a React component for an admin dashboard. It allows administrators to manage instance-level configurations, including user signup settings, default organization settings, and email trust settings for various authentication methods.

## Code Structure
The main component, AdminDashboardPage, uses React hooks and form management libraries to handle user input and API interactions. It renders a tabbed interface with different configuration sections, including general settings, authentication, rate limiting, and user management.

## Symbols

### AdminDashboardPage
#### Description
The main functional component that renders the admin dashboard page. It manages form state, handles form submission, and renders different configuration panels based on the selected tab.

#### Internal Logic
1. Initializes form state using `useForm` hook with default values from the server configuration.
2. Renders a tabbed interface with four sections: Settings, Authentication, Rate Limit, and Users.
3. Handles form submission for general settings, including signup mode, allowed signup domains, default organization, and email trust settings.
4. Uses conditional rendering to show/hide certain form fields based on the selected signup mode.
5. Implements access control by redirecting non-admin users to their organization page.

### onFormSubmit
#### Description
An asynchronous function that handles the form submission for general settings.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formData | TDashboardForm | Form data containing the updated configuration settings |

#### Internal Logic
1. Extracts relevant data from the form submission.
2. Calls the `updateServerConfig` API with the new configuration.
3. Displays a success or error notification based on the API call result.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| next/router | Routing functionality |
| @fortawesome | Icon library |
| zod | Schema validation |
| @app/components | Custom UI components |
| @app/context | Application context providers |
| @app/hooks/api | API interaction hooks |

## Configuration
The component uses a Zod schema to define and validate the form structure:
| Option | Type | Description |
|:-------|:-----|:------------|
| signUpMode | enum | Controls user signup settings |
| allowedSignUpDomain | string | Specifies allowed email domains for signup |
| trustSamlEmails | boolean | Whether to trust SAML email addresses |
| trustLdapEmails | boolean | Whether to trust LDAP email addresses |
| trustOidcEmails | boolean | Whether to trust OIDC email addresses |
| defaultAuthOrgId | string | Default organization ID for authentication |

## Error Handling
The component uses try-catch blocks to handle errors during form submission and API calls. Errors are logged to the console and displayed to the user via notifications.

## Logging
The component uses `console.error` to log errors that occur during form submission or API calls.

## TODOs
- On NextJS 14 roadmap, the context split will be properly addressed.