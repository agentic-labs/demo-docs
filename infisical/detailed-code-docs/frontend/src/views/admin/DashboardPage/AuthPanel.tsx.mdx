---
title: "AuthPanel.tsx"
---

## High-level description
The `AuthPanel` component is a React component that provides a user interface for configuring login methods in an admin dashboard. It allows administrators to enable or disable various authentication methods such as email, Google SSO, GitHub SSO, GitLab SSO, SAML SSO, LDAP, and OIDC.

## Code Structure
The component uses React Hook Form for form management and Zod for schema validation. It interacts with a server configuration context and an API hook to update the server configuration. The main functionality is implemented in the `onAuthFormSubmit` function, which processes the form data and updates the server configuration.

## Symbols

### `AuthPanel`
#### Description
This is the main functional component that renders the authentication configuration panel.

#### Internal Logic
1. Initializes the form using `useForm` with Zod schema validation.
2. Retrieves the current server configuration using `useServerConfig`.
3. Sets up form submission handling with `onAuthFormSubmit`.
4. Renders a form with switches for each login method.
5. Handles form submission, updating the server configuration with enabled login methods.

### `onAuthFormSubmit`
#### Description
An asynchronous function that processes the form data and updates the server configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formData | TAuthForm | The form data containing boolean values for each login method |

#### Internal Logic
1. Creates an array of enabled login methods based on the form data.
2. Validates that at least one login method is enabled.
3. Updates the server configuration using the `updateServerConfig` mutation.
4. Displays success or error notifications based on the operation result.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema definition and validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components (Button, FormControl, Switch) |
| @app/context | Server configuration context |
| @app/hooks/api | API hooks for updating server configuration |

## Error Handling
The component implements error handling in the `onAuthFormSubmit` function. It catches any errors that occur during the server configuration update and displays an error notification to the user.

## Logging
The component logs errors to the console using `console.error` when an error occurs during the server configuration update.

## Performance Considerations
The component uses React Hook Form for efficient form state management, which helps optimize performance by minimizing unnecessary re-renders.