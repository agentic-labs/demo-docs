---
title: "Login.tsx"
---

## High-level description
This code defines a React component called `Login` that handles the login process for a web application. It manages different steps of the login process, including initial login, multi-factor authentication (MFA), and Single Sign-On (SSO) options.

## Code Structure
The `Login` component uses React hooks to manage state and side effects. It renders different sub-components based on the current login step and handles redirects for logged-in users.

## Symbols

### `Login`
#### Description
The main React component that manages the login process and renders different login steps.

#### Internal Logic
1. Initializes state for the current step, email, and password.
2. Uses the `useNavigateToSelectOrganization` custom hook.
3. Parses URL query parameters.
4. Uses `useEffect` to handle redirects for logged-in users.
5. Defines a `renderView` function to render the appropriate step component.
6. Returns the rendered view.

#### Side Effects
- Checks if the user is logged in and redirects accordingly.
- Handles CLI login requests by checking for a callback port in the URL.

### `useEffect` hook
#### Description
Handles redirects for logged-in users and CLI login requests.

#### Internal Logic
1. Defines an async function `handleRedirects`.
2. Checks for a callback port in the URL query parameters.
3. Navigates to the organization selection page, with or without a callback port.
4. Catches and logs errors if the user is not logged in.
5. Executes only if the user is logged in (checked using `isLoggedIn()`).

### `renderView` function
#### Description
Renders the appropriate login step component based on the current step.

#### Internal Logic
Uses a switch statement to return the correct component:
- Step 0: `InitialStep`
- Step 1: `MFAStep`
- Step 2: `SSOStep` with SAML type
- Step 3: `SSOStep` with OIDC type
- Default: An empty div

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Provides hooks (useState, useEffect) for state management and side effects |
| @app/reactQuery | Provides the `isLoggedIn` function |
| ./components | Provides step components (InitialStep, MFAStep, SSOStep) |
| ./Login.utils | Provides the `useNavigateToSelectOrganization` custom hook |

## TODOs
- TODO(akhilmhdh): workspace will be controlled by a workspace context

This TODO suggests that the workspace management will be refactored to use a context in the future.