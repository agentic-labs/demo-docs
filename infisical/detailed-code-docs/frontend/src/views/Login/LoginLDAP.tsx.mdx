---
title: "LoginLDAP.tsx"
---

## High-level description
This code defines a React component `LoginLDAP` that renders a form for LDAP (Lightweight Directory Access Protocol) authentication. It allows users to input their organization slug (if required), username, and password, and handles the login process, including error notifications and successful login redirection.

## Code Structure
The `LoginLDAP` component is the main symbol in this file. It uses several React hooks and custom hooks to manage state, handle form submission, and interact with the server. The component renders a form with input fields and a submit button, along with error handling and notifications.

## References
- `@app/components/notifications`: For creating notifications
- `@app/components/v2`: For UI components (Button, Input)
- `@app/context`: For accessing server configuration
- `@app/hooks/api/auth/queries`: For the LDAP login API call

## Symbols

### LoginLDAP
#### Description
A React functional component that renders an LDAP login form and handles the login process.

#### Inputs
This component doesn't take any props.

#### Internal Logic
1. Initializes state variables for organization slug, username, and password.
2. Retrieves query parameters and server configuration.
3. Renders the login form with conditional rendering of the organization slug input.
4. Handles form submission:
   - Prevents default form submission behavior.
   - Calls the `loginLDAPRedirect` function with user inputs.
   - Handles successful login by opening a new window with the returned URL.
   - Displays notifications for successful or failed login attempts.
5. Provides a button to switch to a different login method.

## Side Effects
- Creates notifications using `createNotification`.
- Opens a new window and closes the current window on successful login.
- Navigates to a different route when the user chooses another login option.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| react-i18next | For internationalization |
| next/router | For routing functionality |

## Error Handling
The component handles login errors by catching exceptions in the `handleSubmission` function and displaying error notifications to the user.

## TODOs
There is a commented-out TODO for adding callback port support:
```javascript
// TODO: add callback port support

// const callbackPort = queryParams.get("callback_port");
// window.open(`/api/v1/ldap/redirect/saml2/${ssoIdentifier}${callbackPort ? `?callback_port=${callbackPort}` : ""}`);
// window.close();
```

This suggests that there might be plans to implement a callback mechanism for the LDAP login process in the future.