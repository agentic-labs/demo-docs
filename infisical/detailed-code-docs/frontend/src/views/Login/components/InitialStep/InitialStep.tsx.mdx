---
title: "InitialStep.tsx"
---

## High-level description
This code represents the initial step of a login process for the Infisical application. It provides various login methods including email/password, Google, GitHub, GitLab, SAML, OIDC, and LDAP. The component handles form submission, captcha verification, and different authentication flows based on the selected login method.

## Code Structure
The `InitialStep` component is the main export of this file. It uses several React hooks and utility functions to manage the login process. The component renders a form with different login options and handles the login logic for each method.

## References
- `attemptCliLogin` and `attemptLogin` from `@app/components/utilities`
- `useServerConfig` from `@app/context`
- `useFetchServerStatus` from `@app/hooks/api`
- `useNavigateToSelectOrganization` from `../../Login.utils`

## Symbols

### `InitialStep`
#### Description
A React component that renders the initial login step with various authentication options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| setStep | function | Function to set the current step in the login process |
| email | string | User's email input |
| setEmail | function | Function to update the email state |
| password | string | User's password input |
| setPassword | function | Function to update the password state |

#### Internal Logic
1. Renders login options based on enabled login methods from the server configuration.
2. Handles form submission for email/password login.
3. Manages captcha verification when required.
4. Handles different authentication flows (CLI login, regular login, MFA).
5. Navigates to appropriate pages based on login success or failure.

## Side Effects
- Updates the application's routing based on login success.
- Creates notifications for login status.
- Manages authentication tokens and captcha state.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-i18next | Internationalization |
| next/link, next/router | Next.js routing |
| @fortawesome/react-fontawesome | Icon components |
| @hcaptcha/react-hcaptcha | Captcha integration |

## Error Handling
The component handles various error scenarios, including:
- Invalid credentials
- User account locked
- Captcha required
- General login failures

Errors are displayed to the user via notifications and error messages in the UI.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /api/v1/sso/redirect/google | GET | Initiates Google SSO login |
| /api/v1/sso/redirect/github | GET | Initiates GitHub SSO login |
| /api/v1/sso/redirect/gitlab | GET | Initiates GitLab SSO login |
| /api/v1/sso/redirect/saml2/organizations/${orgSlug} | GET | Initiates SAML SSO login |

The component interacts with these endpoints indirectly through utility functions like `attemptLogin` and `attemptCliLogin`.