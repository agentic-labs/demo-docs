---
title: "PmtMethodsTable.tsx"
---

## High-level description
This code defines a React component called `PmtMethodsTable` that displays a table of payment methods for an organization. It fetches payment method data, renders it in a table format, and provides functionality to delete payment methods if the user has the necessary permissions.

## Code Structure
The main component `PmtMethodsTable` uses several hooks and components to fetch data, render the table, and handle user interactions. It relies on custom hooks for API calls and organization context, and uses various UI components from a custom component library.

## Symbols

### PmtMethodsTable
#### Description
A functional React component that renders a table of payment methods for the current organization.

#### Inputs
This component doesn't accept any props directly.

#### Internal Logic
1. Retrieves the current organization using the `useOrganization` hook.
2. Fetches payment methods data using the `useGetOrgPmtMethods` hook.
3. Sets up a delete function using the `useDeleteOrgPmtMethod` hook.
4. Renders a table with columns for Brand, Type, Last 4 Digits, Expiration, and a delete button.
5. Handles loading state with a skeleton loader.
6. Displays an empty state when no payment methods are available.
7. Implements permission-based rendering for the delete button using `OrgPermissionCan` component.

#### Side Effects
- Fetches payment methods data for the current organization.
- Allows deletion of payment methods, which modifies the organization's data on the server.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Renders Font Awesome icons in React |
| @app/components/permissions | Provides permission-based rendering |
| @app/components/v2 | Custom UI components library |
| @app/context | Provides organization context and permission constants |
| @app/hooks/api | Custom hooks for API calls |

## Error Handling
The component doesn't implement explicit error handling. It relies on the error handling mechanisms of the custom hooks it uses (`useGetOrgPmtMethods` and `useDeleteOrgPmtMethod`).

## Performance Considerations
The component uses the `useGetOrgPmtMethods` hook to fetch data, which likely implements caching or memoization to prevent unnecessary re-fetches. The deletion of payment methods triggers a mutation, which should update the cached data automatically.