---
title: "InvoiceEmailSection.tsx"
---

## High-level description
This code defines a React component called `InvoiceEmailSection` that allows users to view and update the email address for receiving invoices in an organization's billing settings. It includes form validation, API integration for fetching and updating billing details, and permission checks for editing.

## Code Structure
The component uses React hooks and external libraries to manage form state, validation, and API calls. It renders a form with an email input field and a submit button, which is only enabled for users with the appropriate permissions.

## Symbols

### `InvoiceEmailSection`
#### Description
A React functional component that renders a form for updating the invoice email recipient.

#### Internal Logic
1. Initializes form state and validation using `react-hook-form` and `yup`.
2. Fetches current billing details using `useGetOrgBillingDetails` hook.
3. Updates form state when billing details are received.
4. Handles form submission, updating billing details via API call.
5. Displays success or error notifications after submission.
6. Renders the form with email input and submit button.
7. Applies permission checks to disable the submit button for unauthorized users.

#### Side Effects
- Fetches organization billing details on component mount.
- Updates billing details on form submission.
- Displays notifications for successful or failed updates.

### `schema`
#### Description
A Yup validation schema for the email input field.

#### Internal Logic
Defines a required string field for email validation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @hookform/resolvers/yup | Yup resolver for react-hook-form |
| yup | Schema validation |
| @app/components/notifications | Custom notification component |
| @app/components/permissions | Permission checking component |
| @app/components/v2 | UI components (Button, FormControl, Input) |
| @app/context | Organization context and permission constants |
| @app/hooks/api | Custom hooks for API calls |

## Error Handling
The component handles API call errors by catching exceptions and displaying error notifications to the user.

## Logging
Console errors are logged for failed API calls.