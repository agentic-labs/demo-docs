---
title: "UpdateEnvironmentModal.tsx"
---

## High-level description
This code defines a React component called `UpdateEnvironmentModal` that renders a modal for updating an environment in a workspace. It uses React Hook Form for form management, Yup for form validation, and custom hooks for API interactions and workspace context.

## Code Structure
The main component `UpdateEnvironmentModal` uses several hooks and utilities to manage form state, validation, and API calls. It renders a modal with a form containing input fields for environment name and slug, along with submit and cancel buttons.

## Symbols

### `UpdateEnvironmentModal`
#### Description
A React functional component that renders a modal for updating an environment.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["updateEnv"]&gt; | State of the popup |
| handlePopUpClose | function | Function to close the popup |
| handlePopUpToggle | function | Function to toggle the popup state |

#### Internal Logic
1. Uses `useWorkspace` hook to get the current workspace.
2. Uses `useUpdateWsEnvironment` hook for the API call to update the environment.
3. Sets up form management with `useForm` hook, using Yup schema for validation.
4. Defines `onFormSubmit` function to handle form submission:
   - Calls the API to update the environment
   - Shows a success or error notification
   - Closes the popup on success
5. Renders a `Modal` component with form inputs for name and slug, and buttons for submission and cancellation.

### `schema`
#### Description
Yup validation schema for the form data.

#### Internal Logic
Defines validation rules for:
- `name`: Required string
- `slug`: Required string that must be a valid slug

### `FormData` (type)
#### Description
TypeScript type inferred from the Yup schema, representing the structure of the form data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management |
| @hookform/resolvers/yup | Yup resolver for react-hook-form |
| @sindresorhus/slugify | Slug validation |
| yup | Schema validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/context | Workspace context |
| @app/hooks/api | API hooks |
| @app/hooks/usePopUp | Popup state management |

## Error Handling
The component handles errors by catching exceptions in the `onFormSubmit` function and displaying an error notification using the `createNotification` function.

## Side Effects
- Updates the environment via API call
- Creates notifications for success or failure
- Closes the modal on successful update

## Performance Considerations
The component uses React Hook Form, which is optimized for performance in handling form state and validation.