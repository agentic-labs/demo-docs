---
title: "AddWebhookForm.tsx"
---

## High-level description
This code defines a React component called `AddWebhookForm` that renders a form for creating a new webhook. It uses React Hook Form for form management and Zod for form validation. The component allows users to select the webhook type (General or Slack), choose an environment, and input necessary details like webhook URL and secret key.

## Code Structure
The main component `AddWebhookForm` uses several custom components and hooks. It defines a form schema using Zod and utilizes React Hook Form for form state management. The component conditionally renders different form fields based on the selected webhook type.

## Symbols

### `formSchema`
#### Description
Defines the validation schema for the webhook form using Zod.

#### Internal Logic
- Defines required fields: environment, webhookUrl, secretPath, and type
- Makes webhookSecretKey optional
- Adds a custom validation for Slack webhook URLs

### `AddWebhookForm`
#### Description
The main React component that renders the webhook creation form.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Controls the visibility of the modal |
| onOpenChange | function | Callback to update the modal's open state |
| onCreateWebhook | function | Callback to handle webhook creation |
| environments | array | List of available environments |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation
2. Watches for changes in webhook type and selected environment
3. Renders different form fields based on the selected webhook type
4. Handles form submission and reset
5. Uses `Controller` components for custom form controls

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @app/components/v2 | Custom UI components |
| @app/hooks/api/webhooks/types | Webhook type definitions |

## Error Handling
The component uses Zod for form validation and displays error messages for invalid inputs. It also includes a custom validation for Slack webhook URLs.

## API/Interface Reference
| Prop | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Controls the visibility of the modal |
| onOpenChange | (isOpen: boolean) =&gt; void | Callback to update the modal's open state |
| onCreateWebhook | (data: TFormSchema) =&gt; void | Callback to handle webhook creation |
| environments | Array&lt;{ slug: string; name: string }&gt; | List of available environments |

The component exposes a form interface for creating webhooks, with fields for webhook type, environment, secret path, webhook URL, and secret key (for general webhooks).