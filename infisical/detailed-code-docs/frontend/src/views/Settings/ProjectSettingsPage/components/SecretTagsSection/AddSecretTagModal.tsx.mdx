---
title: "AddSecretTagModal.tsx"
---

## High-level description
This code defines a React component `AddSecretTagModal` that renders a modal for adding a new secret tag in a workspace. It uses React Hook Form for form management and Zod for schema validation. The component allows users to input a tag slug, validates it, and submits it to create a new workspace tag.

## Code Structure
The main component `AddSecretTagModal` uses several hooks and utilities to manage form state, validation, and API interactions. It renders a modal with a form for tag creation and handles form submission and error notifications.

## Symbols

### `AddSecretTagModal`
#### Description
A React component that renders a modal for adding a new secret tag to a workspace.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["CreateSecretTag", "deleteTagConfirmation"]&gt; | State for managing the modal's open/close status |
| handlePopUpClose | function | Function to close the modal |
| handlePopUpToggle | function | Function to toggle the modal's open/close state |

#### Internal Logic
1. Uses `useWorkspace` hook to get the current workspace.
2. Uses `useCreateWsTag` hook for the API call to create a new tag.
3. Sets up form management with `useForm` from react-hook-form.
4. Defines `onFormSubmit` function to handle form submission:
   - Creates a new tag using the API.
   - Closes the modal and resets the form on success.
   - Displays success or error notifications.
5. Renders a modal with a form containing:
   - An input field for the tag slug.
   - Create and Cancel buttons.

### `schema`
#### Description
A Zod schema that defines the validation rules for the form data.

#### Internal Logic
Validates that the `slug` field is a string and matches the slugified version of itself.

### `FormData`
#### Description
A type definition inferred from the Zod schema, representing the structure of the form data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| @sindresorhus/slugify | Slug generation and validation |
| zod | Schema definition and validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/context | Workspace context |
| @app/hooks/api | API hooks |
| @app/hooks/usePopUp | Custom hook for managing pop-up state |

## Error Handling
The component handles errors during tag creation by catching exceptions in the `onFormSubmit` function and displaying an error notification using the `createNotification` function.

## Logging
The component logs errors to the console using `console.error` when tag creation fails.