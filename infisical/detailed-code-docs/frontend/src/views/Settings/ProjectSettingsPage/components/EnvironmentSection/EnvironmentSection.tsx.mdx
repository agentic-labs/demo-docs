---
title: "EnvironmentSection.tsx"
---

## High-level description
This code defines the `EnvironmentSection` component, which is responsible for rendering and managing the environments section in the project settings page. It allows users to view, create, update, and delete environments, subject to permissions and subscription limits.

## Code Structure
The `EnvironmentSection` component is the main export. It uses several custom hooks and components to manage state, handle user interactions, and render the UI. The component integrates with the project's permission system, subscription details, and API hooks for environment management.

## Symbols

### EnvironmentSection
#### Description
A React functional component that renders the environments section, including a table of environments and modals for various actions.

#### Inputs
This component doesn't accept any props.

#### Internal Logic
1. Retrieves subscription, workspace, and permission data using custom hooks.
2. Sets up state for managing multiple pop-ups using the `usePopUp` hook.
3. Defines an `onEnvDeleteSubmit` function to handle environment deletion.
4. Renders a section with a title, description, and a button to create new environments.
5. Conditionally renders the `EnvironmentTable` based on user permissions.
6. Includes modals for adding, updating, and deleting environments, as well as upgrading the plan.

#### Side Effects
- Calls the `deleteWsEnvironment.mutateAsync` function when deleting an environment.
- Creates notifications for successful or failed environment deletion.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Renders FontAwesome icons in React |
| @app/components/notifications | Provides notification functionality |
| @app/components/permissions | Handles permission-based rendering |
| @app/components/v2 | Provides reusable UI components |
| @app/context | Provides custom hooks for accessing app context |
| @app/hooks/api | Provides API hooks for data fetching and mutation |
| @app/hooks/usePopUp | Provides a hook for managing multiple pop-ups |

## Error Handling
The component includes basic error handling in the `onEnvDeleteSubmit` function, where it catches any errors during environment deletion and displays an error notification.

## Logging
The component logs errors to the console when environment deletion fails.

## API/Interface Reference
The component interacts with the following API:
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| deleteWsEnvironment | DELETE | Deletes an environment for a given workspace |

Note: The exact API endpoint is not visible in this code snippet, as it's abstracted by the `useDeleteWsEnvironment` hook.