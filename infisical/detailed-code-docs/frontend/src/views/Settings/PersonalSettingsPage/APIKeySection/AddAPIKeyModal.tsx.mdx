---
title: "AddAPIKeyModal.tsx"
---

## High-level description
This code defines a React component called `AddAPIKeyModal` that allows users to create and manage API keys. It provides a form for users to input a name and expiration period for the API key, and displays the newly created key with a copy-to-clipboard functionality.

## Code Structure
The main component `AddAPIKeyModal` uses various hooks and components to manage form state, API interactions, and UI elements. It interacts with the `useCreateAPIKey` hook for API operations and uses form management through `react-hook-form`.

## Symbols

### `AddAPIKeyModal`
#### Description
A React component that renders a modal for creating and managing API keys.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["addAPIKey"]&gt; | State object for managing the modal's open/close state |
| handlePopUpToggle | function | Function to toggle the modal's state |

#### Internal Logic
1. Manages form state using `react-hook-form`
2. Handles API key creation using `useCreateAPIKey` hook
3. Manages UI states for displaying the form or the newly created API key
4. Provides copy-to-clipboard functionality for the new API key

### `expirations`
#### Description
An array of objects defining the available expiration options for API keys.

### `expirationMapping`
#### Description
An object mapping expiration option values to their corresponding durations in seconds.

### `schema`
#### Description
Yup schema for form validation, ensuring the API key name and expiration are provided.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| @fortawesome/free-solid-svg-icons | Icons for UI elements |
| @fortawesome/react-fontawesome | FontAwesome icon component |
| @hookform/resolvers/yup | Yup resolver for react-hook-form |
| yup | Schema validation |
| @app/components/notifications | Notification component |
| @app/components/v2 | UI components |
| @app/hooks | Custom hooks |
| @app/hooks/api | API-related hooks |

## Error Handling
The component uses try-catch blocks to handle errors during API key creation. It displays error notifications using the `createNotification` function.

## API/Interface Reference
| Function | Description |
|:---------|:------------|
| handleSubmit | Handles form submission and API key creation |
| copyTokenToClipboard | Copies the newly created API key to clipboard |

This component provides a user-friendly interface for creating and managing API keys, with proper form validation, error handling, and clipboard integration for ease of use.