---
title: "OIDCModal.tsx"
---

## High-level description
This code defines a React component called `OIDCModal` that manages the configuration of OpenID Connect (OIDC) for an organization. It provides a form for users to input OIDC configuration details, including the option to use a discovery URL or custom configuration. The component handles both creating new OIDC configurations and updating existing ones.

## Code Structure
The main component `OIDCModal` uses React Hook Form for form management and validation. It interacts with API hooks for fetching, creating, and updating OIDC configurations. The component also includes a delete functionality for removing OIDC configurations.

## Symbols

### OIDCModal
#### Description
A React component that renders a modal for managing OIDC configurations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["addOIDC"]&gt; | State for controlling the modal's visibility |
| handlePopUpClose | function | Function to close the modal |
| handlePopUpToggle | function | Function to toggle the modal's visibility |
| hideDelete | boolean | Optional flag to hide the delete button |

#### Internal Logic
1. Uses `useForm` hook to manage form state and validation.
2. Fetches existing OIDC configuration using `useGetOIDCConfig` hook.
3. Handles form submission for creating or updating OIDC configurations.
4. Manages visibility of client ID and secret fields.
5. Renders form fields based on the selected configuration type.
6. Handles deletion of OIDC configuration.

### ConfigurationType (enum)
Defines the types of OIDC configuration:
- CUSTOM: For manual configuration
- DISCOVERY_URL: For using a discovery URL

### schema (zod schema)
Defines the validation schema for the OIDC configuration form.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/context | Organization context |
| @app/hooks | Custom hooks |
| @app/hooks/api | API interaction hooks |

## Error Handling
The component uses form validation to prevent invalid submissions. It also handles API errors by displaying error notifications.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /api/v1/sso/oidc/config | GET | Fetch OIDC configuration |
| /api/v1/sso/oidc/config | POST | Create OIDC configuration |
| /api/v1/sso/oidc/config | PATCH | Update OIDC configuration |

## TODOs
There are no explicit TODOs in the code.