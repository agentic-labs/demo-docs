---
title: "UpdateExternalKmsForm.tsx"
---

## High-level description
This code defines a React component called `UpdateExternalKmsForm` that renders a modal dialog for editing the configuration of an external Key Management Service (KMS). It specifically handles AWS KMS configurations and uses a custom Modal component along with a content loader for asynchronous data fetching.

## Code Structure
The main component `UpdateExternalKmsForm` uses the `useGetExternalKmsById` hook to fetch KMS data and renders different content based on the loading state and KMS provider type.

## Symbols

### UpdateExternalKmsForm
#### Description
A React functional component that renders a modal for updating an external KMS configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Controls the visibility of the modal |
| kmsId | string | The ID of the KMS to be updated |
| onOpenChange | function | Callback function to handle modal open/close state changes |

#### Internal Logic
1. Uses the `useGetExternalKmsById` hook to fetch KMS data based on the provided `kmsId`.
2. Renders a `Modal` component with `ModalContent` inside.
3. Displays a `ContentLoader` while data is being fetched.
4. If the KMS provider is AWS, renders the `AwsKmsForm` component with the fetched KMS data and callbacks for cancellation and completion.

## References
- `ContentLoader`, `Modal`, `ModalContent` from "@app/components/v2"
- `useGetExternalKmsById` from "@app/hooks/api"
- `ExternalKmsProvider` from "@app/hooks/api/kms/types"
- `AwsKmsForm` from "./AwsKmsForm"

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the component |
| @app/components/v2 | Custom UI components |
| @app/hooks/api | Custom hook for fetching KMS data |
| @app/hooks/api/kms/types | Type definitions for KMS providers |

## Notes
- The component currently only handles AWS KMS configurations. It may need to be extended to support other KMS providers in the future.
- Error handling for the API call is not explicitly implemented in this component.