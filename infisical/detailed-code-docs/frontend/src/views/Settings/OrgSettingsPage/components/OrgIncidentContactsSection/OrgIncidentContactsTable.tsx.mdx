---
title: "OrgIncidentContactsTable.tsx"
---

## High-level description
This code defines a React component `OrgIncidentContactsTable` that displays a table of incident contacts for an organization. It allows users to search for contacts, view their email addresses, and delete contacts if they have the necessary permissions.

## Code Structure
The main component `OrgIncidentContactsTable` uses several hooks and components to manage state, fetch data, and render the UI. It interacts with the organization context, handles API calls for fetching and deleting contacts, and manages the UI state for search and delete operations.

## References
- `@app/components/notifications`: For creating notifications
- `@app/components/permissions`: For permission checks
- `@app/components/v2`: For various UI components
- `@app/context`: For organization and permission contexts
- `@app/hooks`: For custom hooks
- `@app/hooks/api`: For API-related hooks

## Symbols

### OrgIncidentContactsTable
#### Description
This is the main functional component that renders the incident contacts table.

#### Inputs
This component doesn't accept any props.

#### Internal Logic
1. Fetches incident contacts using `useGetOrgIncidentContact` hook
2. Manages search state for filtering contacts
3. Handles popup state for delete confirmation
4. Implements delete functionality for incident contacts
5. Renders a searchable table of incident contacts with delete options

#### Side Effects
- Fetches incident contacts data on component mount
- Updates UI based on search input
- Triggers API call to delete incident contact when confirmed

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For React hooks and components |
| @fortawesome/free-solid-svg-icons | For icons |
| @fortawesome/react-fontawesome | For rendering FontAwesome icons |

## Error Handling
The component implements error handling for the delete operation, displaying an error notification if the deletion fails.

## API/Interface Reference
| Hook | Purpose |
|:-----|:--------|
| useGetOrgIncidentContact | Fetches incident contacts for the organization |
| useDeleteIncidentContact | Deletes an incident contact |

## Symbols

### useOrganization
#### Description
A custom hook that provides access to the organization context.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| currentOrg | Organization | The current organization object |

### useGetOrgIncidentContact
#### Description
A custom hook that fetches incident contacts for a given organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The ID of the organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | Array | List of incident contacts |
| isLoading | boolean | Loading state of the fetch operation |

### useDeleteIncidentContact
#### Description
A custom hook that provides a function to delete an incident contact.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutateAsync | Function | Asynchronous function to delete an incident contact |

### onRemoveIncidentContact
#### Description
An asynchronous function that handles the removal of an incident contact.

#### Internal Logic
1. Extracts the incident contact ID from the popup state
2. Calls the delete mutation function
3. Displays a success or error notification based on the operation result
4. Closes the delete confirmation popup

### OrgPermissionCan
#### Description
A component that conditionally renders its children based on the user's permissions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| I | OrgPermissionActions | The action to check permission for |
| an | OrgPermissionSubjects | The subject to check permission against |

This component is crucial for implementing permission-based UI rendering, ensuring that only users with appropriate permissions can perform certain actions, such as deleting incident contacts.