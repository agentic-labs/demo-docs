---
title: "AddOrgIncidentContactModal.tsx"
---

## High-level description
This code defines a React component `AddOrgIncidentContactModal` that renders a modal for adding an incident contact to an organization. It uses React Hook Form for form management and Yup for form validation. The component handles the submission of the contact's email address and displays notifications based on the operation's success or failure.

## Code Structure
The main component `AddOrgIncidentContactModal` uses several hooks and utilities to manage form state, validation, and API interactions. It renders a modal with a form for adding an incident contact email.

## Symbols

### `addContactFormSchema`
#### Description
Defines the validation schema for the add contact form using Yup.

#### Internal Logic
- Validates that the email field is a required, valid email address and trims whitespace.

### `AddOrgIncidentContactModal`
#### Description
A React functional component that renders a modal for adding an incident contact.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["addContact"]&gt; | State object for managing the modal's open/close state |
| handlePopUpClose | function | Function to close the modal |
| handlePopUpToggle | function | Function to toggle the modal's state |

#### Internal Logic
1. Uses `useOrganization` hook to get the current organization.
2. Fetches server details using `useFetchServerStatus` hook.
3. Sets up form control and validation using `useForm` with Yup resolver.
4. Uses `useAddIncidentContact` hook for the API mutation.
5. Defines `onFormSubmit` function to handle form submission:
   - Calls the API to add the incident contact.
   - Displays success or error notifications.
   - Closes the modal if email is configured on the server.
   - Resets the form.
6. Renders a `Modal` component with a form inside:
   - Uses `Controller` from react-hook-form to manage the email input.
   - Includes submit and cancel buttons.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/yup | Yup resolver for react-hook-form |
| yup | Schema validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/context | Organization context |
| @app/hooks/api | API hooks |
| @app/hooks/usePopUp | Modal state management |

## Error Handling
The component handles errors during form submission by catching exceptions, logging them to the console, and displaying an error notification to the user.

## Logging
The component logs errors to the console when the form submission fails.