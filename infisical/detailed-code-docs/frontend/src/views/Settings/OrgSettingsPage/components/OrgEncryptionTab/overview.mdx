---
title: "Overview"
---

## High-level description
This directory contains components related to the organization encryption settings tab in a settings page. The main component is `OrgEncryptionTab`, which manages the display and interaction with external Key Management System (KMS) configurations for an organization. It includes functionality for viewing, adding, editing, and deleting KMS providers, with a focus on AWS KMS.

## What does it do?
The code in this directory implements a user interface for managing external KMS configurations within an organization's settings. Here's a breakdown of the main functionalities:

1. Display a list of configured external KMS providers in a table format.
2. Allow users to add new KMS configurations through a wizard-like interface.
3. Provide the ability to edit existing KMS configurations.
4. Enable users to delete KMS configurations with confirmation.
5. Implement permission checks and plan restrictions for certain actions.
6. Handle form validation and submission for AWS KMS configurations.
7. Interact with backend APIs to perform CRUD operations on KMS configurations.

The interface is designed to be user-friendly, with modals for adding and editing configurations, and animations for smooth transitions between steps in the add/edit process.

## Key Files

1. `OrgEncryptionTab.tsx`: The main component that renders the KMS management interface. It displays a table of external KMS providers and provides options to add, edit, and delete them.

2. `AddExternalKmsForm.tsx`: Implements a wizard-like interface for adding a new external KMS configuration. It currently supports only AWS KMS but is designed to be extensible for other providers.

3. `AwsKmsForm.tsx`: Renders a form specifically for configuring AWS KMS settings. It handles form validation and submission for AWS KMS details.

4. `UpdateExternalKmsForm.tsx`: Provides a modal interface for editing existing KMS configurations. It fetches the current configuration and renders the appropriate form (currently only AWS KMS).

5. `index.tsx`: A simple re-export file that makes the `OrgEncryptionTab` component easily importable from other parts of the application.

## Dependencies
The components in this directory rely on several external libraries and internal utilities:

1. React and related hooks for component structure and state management.
2. React Hook Form for form handling and validation.
3. Zod for schema validation.
4. Framer Motion for animations.
5. FontAwesome for icons.
6. Custom hooks from `@app/hooks/api` for API interactions.
7. Custom UI components from `@app/components/v2`.
8. Context providers from `@app/context` for accessing organization and subscription data.

## Configuration
The components use various configuration settings:

1. A predefined list of AWS regions (`AWS_REGIONS`) for region selection in the AWS KMS form.
2. Permission checks for certain actions, likely configured elsewhere in the application.
3. Plan restrictions that limit certain functionalities based on the organization's subscription level.

## Error Handling and Logging
Error handling is implemented at various levels:

1. Form validation errors are displayed inline using React Hook Form and Zod.
2. API errors are generally logged to the console.
3. Notifications are used to inform users of successful actions or errors.

The components could benefit from more comprehensive error handling and user feedback mechanisms, especially for API errors.

In conclusion, this directory contains a set of interconnected components that work together to provide a comprehensive interface for managing external KMS configurations within an organization's settings. The code is structured to be extensible, potentially allowing for the addition of other KMS providers in the future.