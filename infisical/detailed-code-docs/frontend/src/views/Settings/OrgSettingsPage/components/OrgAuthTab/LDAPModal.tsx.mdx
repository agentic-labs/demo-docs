---
title: "LDAPModal.tsx"
---

## High-level description
This code defines a React component called `LDAPModal` that provides a user interface for managing LDAP (Lightweight Directory Access Protocol) configuration for an organization. It allows users to add, update, and test LDAP settings, as well as delete the configuration if needed.

## Code Structure
The `LDAPModal` component uses various hooks and components to manage form state, handle API requests, and render the UI. It interacts with the organization context and LDAP-related API hooks to perform operations on the LDAP configuration.

## Symbols

### LDAPModal
#### Description
The main component that renders the LDAP configuration modal.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["addLDAP"]&gt; | State of the popup |
| handlePopUpClose | Function | Function to close the popup |
| handlePopUpToggle | Function | Function to toggle the popup state |
| hideDelete | boolean (optional) | Flag to hide the delete button |

#### Internal Logic
1. Uses various hooks to manage form state and API requests.
2. Renders a form with input fields for LDAP configuration.
3. Handles form submission to create or update LDAP configuration.
4. Provides functionality to test LDAP connection.
5. Allows deletion of LDAP configuration if not hidden.

### LDAPFormSchema
#### Description
Zod schema defining the structure and validation rules for the LDAP configuration form.

### onSSOModalSubmit
#### Description
Function that handles the submission of the LDAP configuration form.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formData | TLDAPFormData | LDAP configuration data |
| shouldCloseModal | boolean | Flag to determine if the modal should be closed after submission |

#### Internal Logic
1. Determines whether to create or update LDAP configuration based on existing data.
2. Calls the appropriate API mutation (create or update).
3. Closes the modal if specified.
4. Displays a success or error notification.

### handleTestLDAPConnection
#### Description
Function that tests the LDAP connection using the current form values.

#### Internal Logic
1. Submits the current form data to update the LDAP configuration.
2. Calls the API to test the LDAP connection.
3. Displays a success or error notification based on the test result.

### handleLdapSoftDelete
#### Description
Function that handles the soft deletion of the LDAP configuration.

#### Internal Logic
1. Calls the API to update the LDAP configuration with inactive status and empty values.
2. Displays a success or error notification.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema definition and validation |
| @app/components/notifications | Notification display |
| @app/components/v2 | UI components |
| @app/context | Organization context |
| @app/hooks | Custom hooks |
| @app/hooks/api | API-related hooks |

## Error Handling
The component uses try-catch blocks to handle errors in API calls and displays error notifications using the `createNotification` function.

## Logging
The component logs errors to the console using `console.error()` when API calls fail.

This component provides a comprehensive interface for managing LDAP configuration within the application, allowing users to set up, test, and manage LDAP integration for their organization.