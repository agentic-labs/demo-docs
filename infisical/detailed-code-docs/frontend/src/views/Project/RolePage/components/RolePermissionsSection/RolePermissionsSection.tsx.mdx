---
title: "RolePermissionsSection.tsx"
---

## High-level description
This code defines a React component called `RolePermissionsSection` that renders a form for managing role permissions in a project. It allows users to view and edit permissions for various resources within a project, including secrets, secret folders, and other project-related features.

## Code Structure
The main component `RolePermissionsSection` uses React Hook Form for form management and renders a table of permissions. It includes sub-components like `RolePermissionRow`, `RowPermissionSecretFoldersRow`, and `RowPermissionSecretsRow` for specific permission types.

## Symbols

### RolePermissionsSection
#### Description
This is the main component that renders the permissions form and table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| roleSlug | string | The slug of the role being edited |

#### Internal Logic
1. Fetches role data using `useGetProjectRoleBySlug` hook
2. Sets up form using `useForm` with zodResolver for validation
3. Renders a form with a table of permissions
4. Handles form submission to update role permissions
5. Displays different UI for custom roles vs. predefined roles

### SINGLE_PERMISSION_LIST
#### Description
A constant array that defines the list of single permissions to be displayed in the table.

### Button
#### Description
A reusable button component imported from `@app/components/v2`.

### Table, TableContainer, TBody, Th, THead, Tr
#### Description
Reusable table components imported from `@app/components/v2`.

### RolePermissionRow, RowPermissionSecretFoldersRow, RowPermissionSecretsRow
#### Description
Sub-components used to render specific rows in the permissions table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form state management |
| @hookform/resolvers/zod | Form validation |
| @app/components/notifications | Displaying notifications |
| @app/components/v2 | UI components |
| @app/context | Workspace context |
| @app/hooks/api | API hooks for fetching and updating data |

## Error Handling
The component uses try-catch block in the `onSubmit` function to handle errors during role updates. It displays error notifications using `createNotification`.

## Performance Considerations
The component uses React Hook Form for efficient form state management and updates. It also uses the `useGetProjectRoleBySlug` hook for data fetching, which likely implements caching for improved performance.