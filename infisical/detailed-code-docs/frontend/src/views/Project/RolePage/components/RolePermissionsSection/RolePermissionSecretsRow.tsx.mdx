---
title: "RolePermissionSecretsRow.tsx"
---

## High-level description
This code defines a React component called `RowPermissionSecretsRow` that renders a table row for managing role permissions related to secrets in a project. It allows users to set different levels of access (No Access, Read Only, Full Access, or Custom) for secrets, with the ability to customize permissions for each environment when "Custom" is selected.

## Code Structure
The main component `RowPermissionSecretsRow` uses React hooks and react-hook-form to manage form state and render the appropriate UI elements based on the selected permission level. It also includes a nested table for custom permissions when the "Custom" option is selected.

## Symbols

### `RowPermissionSecretsRow`
#### Description
This is the main functional component that renders the permission row for secrets. It handles the display and interaction for setting secret permissions in a project role.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| title | string | The title of the permission row |
| formName | "secrets" | The name of the form field |
| isEditable | boolean | Whether the permissions are editable |
| setValue | UseFormSetValue&lt;TFormSchema&gt; | Function to set form values |
| getValue | UseFormGetValues&lt;TFormSchema&gt; | Function to get form values |
| control | Control&lt;TFormSchema&gt; | Form control object from react-hook-form |

#### Internal Logic
1. Uses `useWatch` to observe changes in form values for custom rules and all rules.
2. Determines the selected permission category based on the current form values.
3. Handles permission changes through the `handlePermissionChange` function, updating form values accordingly.
4. Renders a table row with a dropdown for selecting permission levels.
5. If "Custom" is selected, renders an additional nested table for setting granular permissions per environment.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| @fortawesome/free-solid-svg-icons | Icon for dropdown |
| @fortawesome/react-fontawesome | FontAwesome icon component |
| @app/components/basic/popups/GlobPatternExamples | Component for displaying glob pattern examples |
| @app/components/v2 | Various UI components (Checkbox, FormControl, Input, Select, Table, etc.) |
| @app/context | Workspace context |

## Configuration
The component uses an enum `Permission` to define the available permission levels:
| Option | Type | Description |
|:-------|:-----|:------------|
| NoAccess | string | No access to secrets |
| ReadOnly | string | Read-only access to secrets |
| FullAccess | string | Full access to secrets |
| Custom | string | Custom access to secrets |

## API/Interface Reference
This component is designed to be used within a form context, likely in a larger role management interface. It expects to receive form control props from react-hook-form and operates on a specific schema type `TFormSchema`.

| Prop | Type | Description |
|:-----|:-----|:------------|
| title | string | The title of the permission row |
| formName | "secrets" | The name of the form field |
| isEditable | boolean | Whether the permissions are editable |
| setValue | UseFormSetValue&lt;TFormSchema&gt; | Function to set form values |
| getValue | UseFormGetValues&lt;TFormSchema&gt; | Function to get form values |
| control | Control&lt;TFormSchema&gt; | Form control object from react-hook-form |

The component renders a table row and, when custom permissions are selected, a nested table for granular permission settings per environment.