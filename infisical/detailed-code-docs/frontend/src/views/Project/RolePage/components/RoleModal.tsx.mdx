---
title: "RoleModal.tsx"
---

## High-level description
This code defines a React component called `RoleModal` that provides a modal interface for creating or updating project roles. It uses React Hook Form for form management, Zod for schema validation, and custom hooks for API interactions.

## Code Structure
The main component `RoleModal` uses several hooks and utilities to manage form state, API calls, and UI interactions. It renders a modal with a form for role details and handles form submission for both create and update operations.

## References
This code references several external components and hooks:
- `createNotification` from "@app/components/notifications"
- UI components from "@app/components/v2"
- `useWorkspace` from "@app/context"
- API hooks from "@app/hooks/api"
- `UsePopUpState` from "@app/hooks/usePopUp"

## Symbols

### `RoleModal`
#### Description
A React component that renders a modal for creating or updating project roles.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["role"]&gt; | State object for controlling the modal's visibility |
| handlePopUpToggle | function | Function to toggle the modal's visibility |

#### Internal Logic
1. Initializes form using `useForm` with Zod schema validation
2. Fetches existing role data if updating
3. Handles form submission for both create and update operations
4. Manages form state and error handling
5. Renders form fields using `Controller` from react-hook-form
6. Displays success or error notifications after form submission

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| next/router | Routing in Next.js |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |

## Error Handling
The component implements error handling in the `onFormSubmit` function. It catches any errors during the API call and displays an error notification using the `createNotification` function.

## API/Interface Reference
The component interacts with the following API endpoints through custom hooks:
| Hook | Purpose |
|:-----|:--------|
| useGetProjectRoleBySlug | Fetches existing role data |
| useCreateProjectRole | Creates a new project role |
| useUpdateProjectRole | Updates an existing project role |

These hooks are likely defined in the `@app/hooks/api` module and handle the actual API calls.