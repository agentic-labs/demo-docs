---
title: "PkiCollectionPage.tsx"
---

## High-level description
This code defines a React component called `PkiCollectionPage` that displays details of a PKI (Public Key Infrastructure) collection. It allows users to view, edit, and delete PKI collections, as well as manage their associated items (CAs and certificates) based on user permissions.

## Code Structure
The main component `PkiCollectionPage` is wrapped with a `withProjectPermission` HOC. It uses various hooks for routing, API calls, and state management. The component renders a page with a back button, collection name, action menu, and sections for collection details and items.

## Symbols

### PkiCollectionPage
#### Description
This is the main component that renders the PKI Collection page. It's wrapped with `withProjectPermission` HOC to ensure proper access control.

#### Internal Logic
1. Fetches the PKI collection data using the `useGetPkiCollectionById` hook.
2. Manages popups for editing and deleting the collection using the `usePopUp` hook.
3. Handles the deletion of the PKI collection.
4. Renders the page layout with collection details, items, and action menus.

### onDeletePkiCollectionSubmit
#### Description
An asynchronous function that handles the deletion of a PKI collection.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| collectionIdToDelete | string | The ID of the collection to be deleted |

#### Internal Logic
1. Calls the `deletePkiCollection` mutation with project and collection IDs.
2. Creates a success notification upon successful deletion.
3. Closes the delete popup and navigates back to the certificates page.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| next/router | For routing and navigation |
| @fortawesome/react-fontawesome | For icons |
| tailwind-merge | For merging Tailwind CSS classes |
| @app/components/* | Various UI components |
| @app/context | For workspace and permission context |
| @app/hoc | For higher-order components |
| @app/hooks/api | For API-related hooks |
| @app/hooks/usePopUp | For managing popups |

## Error Handling
The code includes basic error handling in the `onDeletePkiCollectionSubmit` function, where errors are logged to the console.

## API/Interface Reference
The component uses several API hooks:
| Hook | Purpose |
|:-----|:--------|
| useGetPkiCollectionById | Fetches PKI collection data |
| useDeletePkiCollection | Deletes a PKI collection |

## Performance Considerations
The component uses the `useGetPkiCollectionById` hook to fetch data, which likely implements caching and optimized data fetching strategies.

## Side Effects
The component has side effects related to routing (navigating to different pages) and API calls (fetching and deleting PKI collections).