---
title: "PkiCollectionItemsTable.tsx"
---

## High-level description
This code defines a React component called `PkiCollectionItemsTable` that renders a table of PKI (Public Key Infrastructure) collection items. It includes functionality for pagination, loading states, and conditional rendering based on user permissions.

## Code Structure
The main component `PkiCollectionItemsTable` uses several custom hooks and components to manage state, fetch data, and render the UI. It interacts with the API using the `useListPkiCollectionItems` hook and utilizes various UI components from the `@app/components/v2` package.

## Symbols

### PkiCollectionItemsTable
#### Description
A functional component that renders a table of PKI collection items with pagination and empty state handling.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| collectionId | string | The ID of the PKI collection |
| type | PkiItemType | The type of PKI items to display |
| handlePopUpOpen | function | A function to handle opening pop-ups |

#### Internal Logic
1. Initializes state for pagination (page and perPage).
2. Fetches PKI collection items using the `useListPkiCollectionItems` hook.
3. Renders a table with headers for Friendly Name, Not Before, and Not After dates.
4. Maps over the fetched data to render table rows.
5. Implements conditional rendering for loading state, empty state, and pagination.
6. Includes permission-based rendering for delete functionality.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| @fortawesome/free-solid-svg-icons | Icons for UI elements |
| @fortawesome/react-fontawesome | FontAwesome icon component |
| date-fns | Date formatting |
| @app/components/permissions | Permission-based rendering |
| @app/components/v2 | UI components |
| @app/context | Project permission constants |
| @app/hooks/api | API hooks for fetching data |
| @app/hooks/api/pkiCollections/constants | PKI item type constants |
| @app/hooks/usePopUp | Pop-up management hook |

## Error Handling
The component doesn't implement explicit error handling. It relies on the error handling mechanisms of the `useListPkiCollectionItems` hook.

## Performance Considerations
The component uses pagination to limit the number of items rendered at once, which can help with performance for large datasets. The initial per-page value is set to 25 items.

## TODOs
There are no explicit TODOs in the code.