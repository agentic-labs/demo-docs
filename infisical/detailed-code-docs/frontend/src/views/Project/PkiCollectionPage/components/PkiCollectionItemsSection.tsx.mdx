---
title: "PkiCollectionItemsSection.tsx"
---

## High-level description
This code defines a React component called `PkiCollectionItemsSection` that displays and manages a section of PKI (Public Key Infrastructure) collection items. It allows users to view, add, and remove items from a PKI collection, with different handling for Certificate Authorities and Certificates.

## Code Structure
The main component `PkiCollectionItemsSection` uses several custom hooks and child components to manage the PKI collection items. It interacts with API hooks for data fetching and mutation, and uses modals for adding and deleting items.

## Symbols

### PkiCollectionItemsSection
#### Description
A React functional component that renders a section for displaying and managing PKI collection items.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| collectionId | string | The ID of the PKI collection |
| type | PkiItemType | The type of PKI items (CA or Certificate) |

#### Internal Logic
1. Fetches the PKI collection data using the `useGetPkiCollectionById` hook.
2. Sets up a mutation function for removing items using the `useRemoveItemFromPkiCollection` hook.
3. Manages popup states for delete and add item modals using the `usePopUp` hook.
4. Renders a section with a title, add button, items table, and modals for adding and deleting items.
5. Handles the removal of items from the collection with error handling and success notification.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Renders Font Awesome icons in React |
| @app/components/notifications | Creates notifications for user feedback |
| @app/components/v2 | Provides reusable UI components |
| @app/hooks/api | Custom hooks for API interactions |
| @app/hooks/usePopUp | Custom hook for managing popup states |

## References
- `AddPkiCollectionItemModal`: Component for adding new items to the collection
- `PkiCollectionItemsTable`: Component for displaying the items in a table format
- `DeleteActionModal`: Component for confirming item deletion

## Error Handling
The component includes basic error handling in the `onRemovePkiCollectionItemSubmit` function, where errors are logged to the console.

## Logging
The component logs errors to the console when removing an item from the PKI collection fails.

## Side Effects
- Fetches PKI collection data on component mount
- Mutates the PKI collection by removing items
- Creates notifications for successful item removal

## Performance Considerations
The component uses the `useGetPkiCollectionById` hook, which likely implements data fetching optimizations. However, the specific implementation details are not visible in this file.