---
title: "CaPage.tsx"
---

## High-level description
This code defines a React component called `CaPage` that displays details and management options for a Certificate Authority (CA) in a project. It includes sections for CA details, certificates, and CRLs (Certificate Revocation Lists), along with options to renew, delete, or install CA certificates.

## Code Structure
The `CaPage` component is the main container, which includes several sub-components and modals. It uses various hooks for data fetching, state management, and user permissions. The component is wrapped with a project permission check to ensure proper access control.

## Symbols

### `CaPage`
#### Description
The main component that renders the CA page, including details, certificates, and CRLs sections.

#### Internal Logic
1. Fetches CA data using the `useGetCaById` hook.
2. Manages pop-up states for various modals using the `usePopUp` hook.
3. Handles CA deletion through the `onRemoveCaSubmit` function.
4. Renders sub-components and modals based on the fetched data and user interactions.

### `onRemoveCaSubmit`
#### Description
Asynchronous function to handle the deletion of a CA.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| caIdToDelete | string | The ID of the CA to be deleted |

#### Internal Logic
1. Calls the `deleteCa` mutation with the CA ID and project slug.
2. Creates a success notification if deletion is successful.
3. Closes the delete modal and redirects to the certificates page.
4. Creates an error notification if deletion fails.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| next/router | For routing and navigation |
| @fortawesome/free-solid-svg-icons | For icons |
| @fortawesome/react-fontawesome | For rendering FontAwesome icons |
| tailwind-merge | For merging Tailwind CSS classes |
| @app/components/notifications | For creating notifications |
| @app/components/permissions | For permission-based rendering |
| @app/components/v2 | For various UI components |
| @app/context | For workspace and project permission context |
| @app/hoc | For higher-order components |
| @app/hooks/api | For API-related hooks |
| @app/hooks/usePopUp | For managing pop-up states |

## Error Handling
The component includes basic error handling for the CA deletion process, logging errors to the console and displaying an error notification to the user.

## API/Interface Reference
The component interacts with the following API endpoints (indirectly through hooks):
- Fetch CA by ID
- Delete CA

Note: The actual API calls are abstracted away in the custom hooks used within the component.

This component provides a comprehensive interface for managing a Certificate Authority within a project, including viewing details, managing certificates and CRLs, and performing actions like renewal and deletion.