---
title: "ServiceTokenTable.tsx"
---

## High-level description
This code defines a React component called `ServiceTokenTable` that displays a table of service tokens for a workspace. It fetches token data using a custom hook, renders the data in a table format, and provides functionality to delete tokens.

## Symbols

### ServiceTokenTable
#### Description
A React functional component that renders a table of service tokens. It uses various UI components from a custom library and handles the display of token data, loading states, and empty states.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| handlePopUpOpen | function | A function to handle opening a popup for token deletion confirmation |

#### Internal Logic
1. Retrieves the current workspace using the `useWorkspace` hook.
2. Fetches service token data using the `useGetUserWsServiceTokens` hook.
3. Renders a table structure with headers for Token Name, Environment - Secret Path, Valid Until, and an action column.
4. If data is loading, displays a skeleton loader.
5. If data is available, maps through the tokens and renders each as a table row.
6. For each token, displays its name, scopes (environment and secret path), and expiration date.
7. Provides a delete button for each token, which is conditionally rendered based on user permissions.
8. If no tokens are found, displays an empty state message.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Allows usage of FontAwesome icons in React |
| @app/components/permissions | Provides permission-based rendering |
| @app/components/v2 | Custom UI components library |
| @app/context | Provides workspace and permission-related context |
| @app/hooks/api | Custom hook for fetching service token data |
| @app/hooks/usePopUp | Type definition for popup state management |

## References
- The component uses various UI components from a custom library (`@app/components/v2`).
- It references permission-related constants and hooks from `@app/context`.
- It uses a custom hook `useGetUserWsServiceTokens` from `@app/hooks/api`.

## Side Effects
The component fetches data from an API using the `useGetUserWsServiceTokens` hook, which may cause network requests.

## Performance Considerations
The component uses React's built-in `map` function to render the list of tokens, which is generally efficient for small to medium-sized lists. For very large lists, virtualization techniques might be considered for optimization.

This component provides a clear and organized way to display service tokens, with considerations for loading states, empty states, and user permissions. It's designed to be reusable and integrates well with the application's permission system and UI component library.