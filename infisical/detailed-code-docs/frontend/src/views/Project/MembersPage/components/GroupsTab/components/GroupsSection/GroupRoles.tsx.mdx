---
title: "GroupRoles.tsx"
---

## High-level description
This code defines a `GroupRoles` component in React that displays and manages roles for a group in a project. It allows viewing, editing, and setting temporary access for roles, with features like role searching and form validation.

## Code Structure
The file contains two main components: `IdentityTemporaryRoleForm` and `GroupRoles`. The `GroupRoles` component uses `IdentityTemporaryRoleForm` for handling temporary role assignments. The code also defines several utility functions and schemas for form validation and data handling.

## Symbols

### GroupRoles
#### Description
The main component that displays and manages group roles. It shows a list of roles, allows editing them, and handles temporary role assignments.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| roles | TGroupMembership["roles"] | Array of roles assigned to the group |
| disableEdit | boolean | Flag to disable role editing |
| groupSlug | string | Identifier for the group |

#### Internal Logic
1. Fetches project roles using `useGetProjectRoles` hook.
2. Groups user roles by slug using the `groupBy` utility function.
3. Renders current roles as tags, with a hover card for additional roles.
4. Provides an edit button that opens a popover for role management.
5. In the edit popover, it renders a form with checkboxes for each role and options for temporary access.
6. Handles form submission to update group roles.

### IdentityTemporaryRoleForm
#### Description
A sub-component used within `GroupRoles` to handle temporary role assignments.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| temporaryConfig | object | Current temporary role configuration |
| onSetTemporary | function | Callback to set temporary role |
| onRemoveTemporary | function | Callback to remove temporary role |

#### Internal Logic
1. Uses `react-hook-form` for form management.
2. Renders a popover with inputs for temporary role duration.
3. Handles form submission to set or remove temporary access.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management |
| @fortawesome/react-fontawesome | Icon components |
| @hookform/resolvers/zod | Form validation |
| tailwind-merge | CSS class merging |
| zod | Schema validation |
| @app/components/v2 | UI components |
| @app/hooks/api | API hooks for data fetching and mutations |

## Error Handling
The component uses `createNotification` to display success or error messages when updating group roles.

## Performance Considerations
The component uses `useForm` from react-hook-form for efficient form state management. It also implements search functionality for roles, which may impact performance for a large number of roles.

___

This documentation provides a comprehensive overview of the `GroupRoles` component and its related functionalities. The component is designed to manage and display group roles in a project, with features for editing, temporary access, and role searching. It utilizes various React hooks and external libraries for form management, validation, and UI components.