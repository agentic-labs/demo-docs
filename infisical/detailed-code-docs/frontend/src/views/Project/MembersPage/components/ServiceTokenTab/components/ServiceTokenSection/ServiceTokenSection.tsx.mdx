---
title: "ServiceTokenSection.tsx"
---

## High-level description
This code defines a `ServiceTokenSection` component that displays and manages service tokens for a project. It includes functionality to create, delete, and view service tokens, with appropriate permission checks and error handling.

## Code Structure
The main `ServiceTokenSection` component is wrapped with the `withProjectPermission` HOC. It uses several hooks for state management, translations, and API calls. The component renders a section with a title, description, a button to create new tokens, a table of existing tokens, and modals for adding and deleting tokens.

## Symbols

### ServiceTokenSection
#### Description
This is the main component that renders the service token section. It's wrapped with `withProjectPermission` to ensure proper access control.

#### Internal Logic
1. Uses `useTranslation` for internationalization.
2. Uses `useDeleteServiceToken` hook for deleting tokens.
3. Uses `usePopUp` to manage modal states.
4. Renders a section with a title, description, and a button to create new tokens.
5. Includes `ServiceTokenTable` to display existing tokens.
6. Includes `AddServiceTokenModal` for creating new tokens.
7. Includes `DeleteActionModal` for confirming token deletion.

#### Side Effects
- Calls `deleteServiceToken.mutateAsync` when a token is deleted.
- Creates notifications for successful or failed token deletions.

### onDeleteApproved
#### Description
An asynchronous function that handles the deletion of a service token.

#### Internal Logic
1. Calls `deleteServiceToken.mutateAsync` with the token ID.
2. Creates a success notification if deletion is successful.
3. Creates an error notification if deletion fails.
4. Closes the delete confirmation modal.

### DeleteActionModal
#### Description
A modal component for confirming the deletion of a service token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | Controls the visibility of the modal |
| title | string | The title of the modal |
| onChange | function | Callback for modal open state changes |
| deleteKey | string | The key to be typed for confirmation |
| onClose | function | Callback for closing the modal |
| onDeleteApproved | function | Callback for when deletion is approved |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-i18next | Internationalization |
| @fortawesome/free-solid-svg-icons | Icons |
| @fortawesome/react-fontawesome | Icon rendering |
| @app/components/notifications | Notification creation |
| @app/components/permissions | Permission checks |
| @app/components/v2 | UI components |
| @app/context | Project permission context |
| @app/hoc | Higher-order components |
| @app/hooks | Custom hooks |
| @app/hooks/api | API hooks |

## Error Handling
The component uses try-catch blocks to handle errors when deleting service tokens. Errors are logged to the console and displayed to the user via notifications.

## TODOs
There are no explicit TODOs in this code.