---
title: "Overview"
---

## High-level description
This directory contains React components for a Certificate Authority (CA) installation modal within a project's certificate management system. The main component, `CaInstallCertModal`, allows users to choose between installing an internal (Infisical) or external CA certificate. The directory includes separate forms for each type of installation, as well as utility functions and API integrations for handling certificate-related operations.

## What does it do?
The code in this directory implements a user interface for installing or renewing Intermediate CA certificates. Here's a breakdown of the workflow:

1. The user opens the CA installation modal.
2. They choose between using an internal (Infisical) CA or an external CA.
3. Depending on their choice, they are presented with a specific form:
   - For internal CAs, users select a parent CA, set an expiration date, and choose a maximum path length.
   - For external CAs, users input the certificate body and certificate chain, and can view and copy the Certificate Signing Request (CSR).
4. Upon form submission, the system processes the installation:
   - For internal CAs, it signs the intermediate certificate and imports it.
   - For external CAs, it imports the provided certificate and chain.
5. The user receives feedback on the success or failure of the installation process.

This functionality allows organizations to manage their certificate infrastructure, ensuring secure communications and proper certificate hierarchies within their projects.

## Key Files

1. `CaInstallCertModal.tsx`:
   - Main component that renders the modal and handles the selection between internal and external CA installation.
   - Uses a `FormControl` with a `Select` component for choosing the parent CA type.
   - Conditionally renders either the `InternalCaInstallForm` or `ExternalCaInstallForm` based on the user's selection.

2. `InternalCaInstallForm.tsx`:
   - Renders a form for installing an internal CA certificate.
   - Fetches the list of active CAs and details of the current CA.
   - Provides fields for selecting a parent CA, setting an expiration date, and choosing a maximum path length.
   - Handles form submission by signing the intermediate certificate and importing it.

3. `ExternalCaInstallForm.tsx`:
   - Renders a form for installing an external CA certificate.
   - Displays the Certificate Signing Request (CSR) for the CA with copy and download functionality.
   - Provides input fields for the certificate body and certificate chain.
   - Handles form submission by importing the CA certificate.

4. `index.tsx`:
   - Acts as a re-export module for the `CaInstallCertModal` component, simplifying imports in other parts of the application.

## Dependencies
The components in this directory rely on several external libraries and internal modules:

1. React and related libraries:
   - `react`: Core React library for building components
   - `react-hook-form`: Form state management and validation
   - `@hookform/resolvers/zod`: Zod resolver for react-hook-form

2. Validation and data handling:
   - `zod`: Schema declaration and validation library
   - `date-fns`: Date manipulation and formatting

3. UI components and styling:
   - `@app/components/v2`: Custom UI components
   - `@fortawesome/react-fontawesome` and `@fortawesome/free-solid-svg-icons`: Icon components

4. API and state management:
   - `@app/hooks/api`: Custom hooks for API interactions
   - `@app/hooks/usePopUp`: Custom hook for managing popup state
   - `@app/context`: Workspace context

5. Utilities:
   - `file-saver`: Library for saving files on the client-side

These dependencies were chosen to provide a robust, type-safe, and user-friendly implementation of the CA installation process.

## Configuration
While there are no explicit configuration files in this directory, the components use various hooks and context providers that may rely on configuration settings elsewhere in the application. Key configurable aspects include:

1. API endpoints: The components interact with several API endpoints through custom hooks (e.g., `useListWorkspaceCas`, `useGetCaById`, `useSignIntermediate`). These endpoints are likely configured in a central API configuration file.

2. Form validation: The Zod schemas in `InternalCaInstallForm` and `ExternalCaInstallForm` define validation rules for the forms. These can be adjusted to modify the validation requirements for CA installation.

3. Date formatting: The components use `date-fns` for date manipulation and formatting. The specific date formats used can be adjusted to meet localization requirements.

4. UI components: The use of custom UI components from `@app/components/v2` allows for consistent styling across the application. The appearance of these components can likely be configured through a central theming system.

In conclusion, this directory provides a comprehensive and flexible solution for managing CA certificate installations within a larger project management system. The modular structure and use of modern React patterns make it easy to maintain and extend the functionality as needed.