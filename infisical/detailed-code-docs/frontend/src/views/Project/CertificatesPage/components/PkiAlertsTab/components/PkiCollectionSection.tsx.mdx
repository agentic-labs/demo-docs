---
title: "PkiCollectionSection.tsx"
---

## High-level description
This code defines a React component called `PkiCollectionSection` that manages and displays PKI (Public Key Infrastructure) collections. It includes functionality for creating, viewing, and deleting PKI collections, with appropriate permissions checks and user notifications.

## Code Structure
The `PkiCollectionSection` component is the main export, which uses several custom hooks and child components to render a section for managing PKI collections. It includes a table of collections, modals for creating and deleting collections, and handles the associated API calls.

## Symbols

### PkiCollectionSection
#### Description
A functional React component that renders a section for managing PKI collections. It includes a header with a create button, a table of collections, and modals for creating and deleting collections.

#### Internal Logic
1. Initializes necessary hooks and state.
2. Defines a function `onRemovePkiCollectionSubmit` to handle the deletion of a PKI collection.
3. Renders the component structure, including:
   - A header with the section title and a create button (with permission check)
   - The `PkiCollectionTable` component
   - The `PkiCollectionModal` component for creating/editing collections
   - A `DeleteActionModal` for confirming collection deletion

#### Performance Considerations
The component uses the `usePopUp` hook to manage modal states, which can help optimize re-renders by centralizing state management.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Renders Font Awesome icons in React |
| @app/components/notifications | Creates user notifications |
| @app/components/permissions | Handles permission checks |
| @app/components/v2 | Provides UI components (Button, DeleteActionModal) |
| @app/context | Provides workspace and permission-related context |
| @app/hooks/api | Provides API hooks (useDeletePkiCollection) |
| @app/hooks/usePopUp | Manages popup/modal states |

## Error Handling
The component implements error handling in the `onRemovePkiCollectionSubmit` function. If an error occurs during the deletion process, it's logged to the console, and an error notification is shown to the user.

## Logging
The component logs errors to the console when PKI collection deletion fails.

## API/Interface Reference
The component interacts with the following API:

| Endpoint | Method | Description |
|:---------|:-------|:------------|
| deletePkiCollection | DELETE | Deletes a PKI collection |

Note: The exact endpoint details are abstracted by the `useDeletePkiCollection` hook.