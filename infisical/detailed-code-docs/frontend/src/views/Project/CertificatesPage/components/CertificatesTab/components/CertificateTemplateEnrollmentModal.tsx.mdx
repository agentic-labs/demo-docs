---
title: "CertificateTemplateEnrollmentModal.tsx"
---

## High-level description
This code defines a React component called `CertificateTemplateEnrollmentModal` that manages enrollment options for certificate templates. It provides a form for configuring EST (Enrollment over Secure Transport) settings, including CA chain, passphrase, and enabling/disabling the EST method.

## Code Structure
The component uses React Hook Form for form management, Zod for schema validation, and custom hooks for API interactions. It renders a modal with form inputs for EST configuration and handles form submission to create or update EST settings.

## Symbols

### CertificateTemplateEnrollmentModal
#### Description
A React component that renders a modal for managing certificate template enrollment options, specifically for EST configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["enrollmentOptions"]&gt; | State object for managing the modal's open/close state |
| handlePopUpToggle | function | Function to toggle the modal's open/close state |

#### Internal Logic
1. Fetches existing EST configuration data if available
2. Sets up form with React Hook Form and Zod validation
3. Handles form submission to create or update EST configuration
4. Renders form inputs for CA chain, passphrase, and EST enabling
5. Manages form state and error handling

### schema
#### Description
Zod schema for validating the form data.

### FormData
#### Description
Type definition for the form data, inferred from the Zod schema.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| @hookform/resolvers/zod | Zod resolver for React Hook Form |
| zod | Schema validation |
| @app/components/notifications | Notification creation |
| @app/components/v2 | UI components |
| @app/hooks | Custom hooks |
| @app/hooks/api | API interaction hooks |

## Error Handling
The component uses React Hook Form's built-in error handling and displays error messages for invalid form inputs. It also catches and logs any errors that occur during form submission.

## Side Effects
The component creates notifications to inform the user about the success or failure of saving changes.

## Performance Considerations
The component uses `useEffect` to reset form data when the EST configuration data changes, which helps in keeping the form up-to-date with the latest data from the server.