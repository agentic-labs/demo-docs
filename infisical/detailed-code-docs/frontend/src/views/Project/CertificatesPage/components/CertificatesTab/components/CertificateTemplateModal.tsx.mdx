---
title: "CertificateTemplateModal.tsx"
---

## High-level description
This code defines a React component called `CertificateTemplateModal` that renders a modal for creating or editing certificate templates. It uses React Hook Form for form management and validation, and integrates with various API hooks for data fetching and submission.

## Code Structure
The main component `CertificateTemplateModal` uses several hooks and components:
- `useForm` from react-hook-form for form management
- `useWorkspace` for current workspace context
- API hooks like `useGetCertTemplate`, `useListWorkspaceCas`, `useListWorkspacePkiCollections`, `useCreateCertTemplate`, and `useUpdateCertTemplate` for data fetching and submission
- UI components from a custom component library (e.g., `Modal`, `FormControl`, `Input`, `Select`)

## Symbols

### CertificateTemplateModal
#### Description
A React component that renders a modal for creating or editing certificate templates.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["certificateTemplate"]&gt; | State for controlling the modal's visibility |
| handlePopUpToggle | function | Function to toggle the modal's visibility |

#### Internal Logic
1. Fetches necessary data (certificate template, CAs, PKI collections) using API hooks
2. Sets up form using `useForm` with Zod schema validation
3. Handles form submission, creating or updating the certificate template
4. Renders form fields for template details (name, CA, collection, common name, alternative names, TTL)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form management and validation |
| @hookform/resolvers/zod | Zod schema resolver for react-hook-form |
| zod | Schema validation |
| @fortawesome/react-fontawesome | Icon rendering |
| @app/components/v2 | Custom UI components |
| @app/hooks/api | API hooks for data fetching and submission |

## Error Handling
The component uses try-catch blocks in the form submission handler to catch and display errors. It uses the `createNotification` function to show success or error messages to the user.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /api/v1/pki/certificate-templates | POST | Create a new certificate template |
| /api/v1/pki/certificate-templates/:id | PUT | Update an existing certificate template |

This component provides a user interface for managing certificate templates, allowing users to create new templates or edit existing ones with various configuration options.