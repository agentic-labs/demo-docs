---
title: "CertificatesTable.utils.ts"
---

## High-level description
This file contains a utility function `getCertValidUntilBadgeDetails` that determines the status of a certificate based on its expiration date. It calculates the time remaining until expiration and returns appropriate badge details (variant and label) to indicate the certificate's health status.

## Symbols

### `getCertValidUntilBadgeDetails`
#### Description
This function analyzes a certificate's expiration date and returns badge details to visually represent its status. It determines whether the certificate is healthy, approaching expiration, or expired.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| notAfter | string | The expiration date of the certificate |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| object | { variant: "success" \| "primary" \| "danger", label: string } | An object containing the badge variant and label |

#### Internal Logic
1. Calculate the time difference between the current date and the certificate's expiration date.
2. Determine the badge variant based on the time remaining:
   - "success" if more than 60 days remain
   - "primary" if between 30 and 60 days remain
   - "danger" if less than 30 days remain
3. Set the label based on the time remaining:
   - "Healthy" if more than 60 days remain
   - "Expires in [time]" if between 0 and 60 days remain
   - "Expired" if the certificate has already expired
4. Return an object with the determined variant and label.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| ms | Used to convert time durations between different units (e.g., days to milliseconds) |

## Performance Considerations
The function uses the `ms` library to handle time conversions, which may have a small performance impact. However, for the scale of operations typically performed in certificate management, this impact should be negligible.