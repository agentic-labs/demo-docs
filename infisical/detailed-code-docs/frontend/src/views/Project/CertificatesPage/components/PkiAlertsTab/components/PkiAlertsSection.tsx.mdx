---
title: "PkiAlertsSection.tsx"
---

## High-level description
This code defines a React component called `PkiAlertsSection` that renders a section for managing PKI (Public Key Infrastructure) alerts in a project. It includes functionality for displaying existing alerts, creating new alerts, and deleting alerts, with appropriate permission checks and error handling.

## Code Structure
The main component `PkiAlertsSection` uses several custom hooks and components to manage state and render the UI. It interacts with the workspace context, handles API calls for deleting alerts, and manages pop-up states for various modals.

## Symbols

### PkiAlertsSection
#### Description
This is the main functional component that renders the PKI Alerts section. It manages the state for pop-ups, handles alert deletion, and renders child components.

#### Internal Logic
1. Retrieves the current workspace and project ID.
2. Sets up the delete PKI alert mutation.
3. Manages pop-up states for alert creation and deletion modals.
4. Defines a function to handle alert deletion, including error handling and notifications.
5. Renders the section header, alerts table, and modals for creating and deleting alerts.

#### Performance Considerations
The component uses the `usePopUp` hook to manage multiple pop-up states efficiently.

### onRemoveAlertSubmit
#### Description
An asynchronous function that handles the submission of an alert deletion request.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| alertId | string | The ID of the alert to be deleted |

#### Internal Logic
1. Checks if a project ID is available.
2. Calls the `deletePkiAlert` mutation with the alert and project IDs.
3. Creates a success notification if the deletion is successful.
4. Closes the delete confirmation pop-up.
5. Handles errors by logging them and creating an error notification.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Renders Font Awesome icons in React |
| @app/components/notifications | Creates notifications for user feedback |
| @app/components/permissions | Handles permission checks for project actions |
| @app/components/v2 | Provides reusable UI components |
| @app/context | Provides workspace context and permission constants |
| @app/hooks/api | Provides custom hooks for API interactions |
| @app/hooks/usePopUp | Manages pop-up states |

## Error Handling
The component implements error handling in the `onRemoveAlertSubmit` function. If an error occurs during alert deletion, it is logged to the console, and an error notification is displayed to the user.

## API/Interface Reference
| Component | Props | Description |
|:----------|:------|:------------|
| PkiAlertsTable | handlePopUpOpen | Function to open pop-ups |
| PkiAlertModal | popUp, handlePopUpToggle | Props for managing the alert creation modal |
| DeleteActionModal | isOpen, title, onChange, deleteKey, onDeleteApproved | Props for managing the alert deletion modal |

The `PkiAlertsSection` component doesn't explicitly define an API but integrates with the project's permission system and API hooks for data management.