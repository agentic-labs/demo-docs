---
title: "IPAllowlistTable.tsx"
---

## High-level description
This code defines a React component called `IPAllowlistTable` that displays a table of IP addresses or ranges allowed for access. It includes functionality for editing and deleting entries, and handles permissions and subscription-based features.

## Code Structure
The main component `IPAllowlistTable` uses several sub-components and hooks to render the table and handle user interactions. It relies on external components for UI elements and permission checks.

## Symbols

### `IPAllowlistTable`
#### Description
A React functional component that renders a table of IP addresses or ranges with options to edit or delete entries.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| popUp | UsePopUpState&lt;["upgradePlan"]&gt; | State for managing the upgrade plan modal |
| handlePopUpOpen | function | Function to open various pop-ups |
| handlePopUpToggle | function | Function to toggle the upgrade plan modal |

#### Internal Logic
1. Fetches trusted IPs using the `useGetTrustedIps` hook
2. Renders a table with columns for IP Address/Range, Format, Comment, and Actions
3. Maps over the fetched data to create table rows
4. Implements permission checks for edit and delete actions
5. Handles opening pop-ups for editing, deleting, or upgrading the plan
6. Displays a loading skeleton while data is being fetched
7. Shows an empty state when no IP addresses are added

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Icons for UI elements |
| @fortawesome/react-fontawesome | FontAwesome component for React |
| @app/components/permissions | Permission checking component |
| @app/components/v2 | Various UI components |
| @app/context | Hooks for subscription and workspace data |
| @app/hooks/api | Hook for fetching trusted IPs |
| @app/hooks/usePopUp | Types for pop-up state management |

## Helper Functions

### `formatType`
#### Description
Formats the type of IP address or range for display.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| type | string | The type of IP address or range |
| prefix | number | (optional) The CIDR prefix |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formattedType | string | Formatted string representing the IP type |

## Performance Considerations
The component uses the `useGetTrustedIps` hook to fetch data, which likely implements caching or optimizations for API calls. The table rows are only rendered when data is available, and a loading skeleton is shown during data fetching to improve perceived performance.

## Error Handling
There's no explicit error handling in this component. It relies on the `useGetTrustedIps` hook to handle API errors.

## Notes
1. The component includes commented-out code for a "Status" column, which might be implemented in the future.
2. The upgrade plan modal is conditionally rendered based on the subscription status.
3. The component uses permission checks to disable edit and delete actions for unauthorized users.