---
title: "IPAllowlistSection.tsx"
---

## High-level description
This code defines a React component called `IPAllowlistSection` that manages and displays an IP allowlist functionality. It includes features for adding, viewing, and deleting IP addresses, with permissions checks and subscription-based access control.

## Code Structure
The `IPAllowlistSection` component is the main export, which uses several custom hooks and child components to render the IP allowlist interface. It manages the state of various pop-ups and handles the deletion of trusted IPs.

## Symbols

### IPAllowlistSection
#### Description
A functional React component that renders the IP allowlist section, including a table of IP addresses, buttons for adding new IPs, and modals for various actions.

#### Inputs
This component doesn't accept any props.

#### Internal Logic
1. Uses custom hooks to manage state and API calls:
   - `useDeleteTrustedIp` for deleting IP addresses
   - `useSubscription` and `useWorkspace` for accessing subscription and workspace data
   - `usePopUp` for managing multiple pop-up states
2. Defines an `onDeleteTrustedIpSubmit` function to handle the deletion of a trusted IP
3. Renders a section with a title, an "Add IP" button (with permission checks), and child components for displaying and managing the IP allowlist

#### Side Effects
- Calls `createNotification` to display success or error messages after attempting to delete a trusted IP
- Mutates the trusted IP list through the `mutateAsync` function when deleting an IP

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @fortawesome/free-solid-svg-icons | Provides icons for the UI |
| @fortawesome/react-fontawesome | Allows usage of FontAwesome icons in React |
| @app/components/notifications | Provides notification functionality |
| @app/components/permissions | Handles permission checks |
| @app/components/v2 | Provides reusable UI components |
| @app/context | Provides context hooks for subscription, workspace, and permissions |
| @app/hooks/api | Provides API-related hooks |
| @app/hooks/usePopUp | Provides a hook for managing pop-up states |

## Error Handling
The component includes basic error handling in the `onDeleteTrustedIpSubmit` function, catching any errors during the deletion process and displaying an error notification.

## Child Components
1. `IPAllowlistTable`: Displays the table of IP addresses
2. `IPAllowlistModal`: Handles the modal for adding or editing IP addresses
3. `DeleteActionModal`: Confirms the deletion of an IP address
4. `UpgradePlanModal`: Prompts the user to upgrade their plan if IP allowlisting is not available in their current subscription

These child components are passed relevant props from the `IPAllowlistSection` component's state and handlers.