---
title: "Overview"
---

## High-level description
This directory contains the implementation of the IP Allowlist feature for a project view in a React-based frontend application. It consists of a main page component and several subcomponents that work together to provide a user interface for managing a list of trusted IP addresses or ranges.

## What does it do?
The IP Allowlist feature allows users to control which IP addresses can access their project, enhancing security by restricting access to trusted sources. The main functionalities include:

1. Displaying a table of allowed IP addresses or ranges
2. Adding new IP addresses to the allowlist
3. Editing existing IP addresses in the allowlist
4. Deleting IP addresses from the allowlist
5. Handling permissions and subscription-based access to features
6. Showing upgrade prompts for users with insufficient subscription levels
7. Providing form validation for IP address input
8. Fetching and displaying the user's current IP address

## Key Files
1. `IPAllowlistPage.tsx`: The main component that renders the IP Allowlist page. It uses a higher-order component for project permission checks and renders the IP allowlist section within a styled container.

2. `components/IPAllowlistSection.tsx`: The core component that orchestrates the IP allowlist functionality. It renders the overall section, including the table and buttons for adding IPs. It also manages the state of various pop-ups and handles the deletion of trusted IPs.

3. `components/IPAllowlistTable.tsx`: Renders a table displaying the list of trusted IP addresses or ranges. It includes functionality for editing and deleting entries, and handles permissions and subscription-based features.

4. `components/IPAllowlistModal.tsx`: A modal component for adding or updating trusted IP addresses. It uses React Hook Form for form management and Yup for form validation.

5. `index.tsx`: An index file that exports the `IPAllowlistPage` component, making it easily importable from other parts of the application.

## Dependencies
The components in this directory rely on several external libraries and internal modules:

1. React and React Hooks: For building the user interface and managing component state.
2. react-hook-form (^7.43.0): Used for form state management in the `IPAllowlistModal`.
3. yup (^0.32.11): Provides schema validation for the IP address form.
4. @fortawesome/react-fontawesome and @fortawesome/free-solid-svg-icons: Used for rendering icons in the UI.
5. Internal components and hooks:
   - `@app/components/v2`: Provides reusable UI components.
   - `@app/components/notifications`: Used for displaying notifications to the user.
   - `@app/components/permissions`: Handles permission checks for various actions.
   - `@app/context`: Provides context hooks for subscription, workspace, and permissions data.
   - `@app/hooks/api`: Custom hooks for API interactions (e.g., fetching, adding, updating, and deleting trusted IPs).
   - `@app/hooks/usePopUp`: Manages the state of various pop-up modals.

## Configuration
The components don't directly use configuration files or environment variables. However, they rely on context providers (likely set up in a parent component) to access workspace and subscription data. This data is used to determine user permissions and feature availability based on their subscription level.

Key configurable aspects include:
1. API endpoints for trusted IP operations (handled by custom hooks)
2. Permission levels for various actions (edit, delete)
3. Subscription-based feature access

An example of form validation configuration used in the `IPAllowlistModal` component:

```typescript
const schema = yup.object().shape({
  ipAddress: yup
    .string()
    .required("IP address is required")
    .matches(
      /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,
      "Invalid IP address format"
    ),
  comment: yup.string().max(255, "Comment must be at most 255 characters"),
});
```

This configuration ensures that the IP address input is properly validated before submission.

The `IPAllowlistPage` component is wrapped with the `withProjectPermission` higher-order component, configured as follows:

```typescript
withProjectPermission({
  action: ProjectPermissionActions.Read,
  subject: ProjectPermissionSub.IpAllowList,
})
```

This configuration ensures that only users with the appropriate permissions to read the IP allowlist can access the page.

Overall, this directory implements a comprehensive IP Allowlist feature with considerations for user permissions, subscription levels, and data validation, demonstrating good practices in React component design and organization.