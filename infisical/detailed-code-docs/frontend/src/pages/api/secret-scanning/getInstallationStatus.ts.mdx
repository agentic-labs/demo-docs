---
title: "getInstallationStatus.ts"
---

## High-level description
This code defines a function `getInstallationStatus` that checks the installation status of a secret scanning application for a given organization. It uses a `SecurityClient` to make an API call and returns whether the app installation is completed.

## Symbols

### `getInstallationStatus`
#### Description
This function retrieves the installation status of a secret scanning application for a specified organization. It makes a GET request to the API endpoint and processes the response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The unique identifier of the organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| appInstallationCompleted | boolean \| undefined | Indicates whether the app installation is completed, or undefined if the request fails |

#### Internal Logic
1. Makes a GET request to the API endpoint `/api/v1/secret-scanning/installation-status/organization/${organizationId}` using the `SecurityClient.fetchCall` method.
2. If the response status is 200, it extracts and returns the `appInstallationCompleted` value from the JSON response.
3. If the request fails, it logs an error message and returns `undefined`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/components/utilities/SecurityClient | Used to make secure API calls |

## Error Handling
The function includes basic error handling:
- If the API call fails or returns a non-200 status, it logs an error message to the console.
- In case of failure, the function returns `undefined` instead of throwing an error.

## Logging
The code implements simple console logging for error cases:
- It logs "Failed to check installation status" if the API call fails.
- It also logs the entire response object for debugging purposes.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/secret-scanning/installation-status/organization/{organizationId} | GET | - | JSON with `appInstallationCompleted` field | Retrieves the installation status for a given organization |

Note: The actual API endpoint is constructed by prepending `/api/v1/secret-scanning/installation-status/organization/` to the provided `organizationId`.