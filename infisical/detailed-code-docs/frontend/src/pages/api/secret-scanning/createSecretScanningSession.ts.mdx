---
title: "createSecretScanningSession.ts"
---

## High-level description
This code defines a function `createNewIntegrationSession` that creates a new secret scanning integration session for a given organization. It uses a `SecurityClient` to make an API call and returns the session data if successful.

## Symbols

### `createNewIntegrationSession`
#### Description
This function creates a new integration session for secret scanning by making a POST request to the server. It uses the `SecurityClient.fetchCall` method to send the request and handle the response.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The ID of the organization for which to create the integration session |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| sessionData | Promise&lt;object \| undefined&gt; | A promise that resolves to the session data if successful, or undefined if the request fails |

#### Internal Logic
1. Makes a POST request to "/api/v1/secret-scanning/create-installation-session/organization" using `SecurityClient.fetchCall`.
2. Sends the `organizationId` in the request body as JSON.
3. If the response status is 200, it parses and returns the JSON response.
4. If the request fails, it logs the error and returns undefined.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/components/utilities/SecurityClient | Used to make secure API calls |

## Error Handling
The function includes basic error handling:
- If the API call fails or returns a non-200 status, it logs the error to the console.
- In case of failure, the function returns `undefined` instead of throwing an error.

## Logging
The code implements simple console logging for error cases:
- Logs "Failed to create integration session" if the request fails.
- Logs the entire response object for debugging purposes in case of failure.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/secret-scanning/create-installation-session/organization | POST | { organizationId: string } | Session data (JSON) | Creates a new secret scanning integration session for the given organization |

This function serves as a wrapper around the API endpoint, simplifying the process of creating a new secret scanning integration session for client-side code.