---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a Northflank integration. It allows users to select a source environment, specify a secrets path, choose a Northflank project and secret group, and create the integration.

## Code Structure
The main component `NorthflankCreateIntegrationPage` uses several hooks for data fetching and state management. It renders a form with various input fields and a submit button. The component relies on custom hooks for API interactions and Next.js's router for navigation.

## Symbols

### NorthflankCreateIntegrationPage
#### Description
This is the main functional component that renders the Northflank integration creation page.

#### Internal Logic
1. Initializes state variables for form fields and loading state.
2. Fetches data using custom hooks (workspace, integration auth, apps, and secret groups).
3. Updates state based on fetched data using useEffect hooks.
4. Handles form submission with the `handleButtonClick` function.
5. Renders a form with various input fields and a submit button.

#### Side Effects
- Fetches data from API endpoints when the component mounts or when certain dependencies change.
- Updates local storage with project data.
- Navigates to a different page on successful form submission.

### handleButtonClick
#### Description
An asynchronous function that handles the form submission.

#### Internal Logic
1. Checks if integration auth ID exists.
2. Sets loading state to true.
3. Calls the `mutateAsync` function with form data.
4. Sets loading state to false.
5. Navigates to the integrations page on success.
6. Logs any errors to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| next/router | Next.js routing |
| query-string | Parsing URL query strings |
| @app/hooks/api | Custom API hooks |
| ../../../components/v2 | UI components |
| ../../../hooks/api/integrationAuth | Integration auth API hooks |
| ../../../hooks/api/workspace | Workspace API hooks |

## Configuration
The component uses several configuration options from the fetched data:
| Option | Type | Description |
|:-------|:-----|:------------|
| workspace.environments | array | Available environments for the workspace |
| integrationAuthApps | array | Available Northflank projects |
| integrationAuthSecretGroups | array | Available secret groups for the selected project |

Note: This component requires authentication, as indicated by the `NorthflankCreateIntegrationPage.requireAuth = true;` statement at the end of the file.