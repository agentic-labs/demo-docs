---
title: "Overview"
---

## High-level description
This directory contains React components and pages related to GitLab integration within the Infisical application. It provides functionality for authorizing GitLab connections, creating GitLab integrations, and handling OAuth2 callbacks. The code is structured to facilitate the setup and management of GitLab integrations, allowing users to connect Infisical with both cloud-hosted and self-hosted GitLab instances.

## What does it do?
The code in this directory enables users to:

1. Initiate a GitLab integration by authorizing Infisical to access their GitLab account.
2. Configure and create a GitLab integration, specifying details such as source and target environments, secret paths, and various options for secret management in GitLab.
3. Handle the OAuth2 callback process after GitLab authorization, securing the connection between Infisical and GitLab.

These components work together to provide a seamless experience for users setting up GitLab integrations within the Infisical platform, allowing them to manage secrets and configurations across their GitLab projects or groups.

## Entry points
The main entry points for this directory are:

1. `authorize.tsx`: Renders the GitLab authorization page, allowing users to initiate the OAuth flow.
2. `create.tsx`: Provides the interface for creating and configuring a GitLab integration.
3. `oauth2/index.tsx`: Handles the OAuth2 callback after GitLab authorization.

The flow typically starts with the authorization page, then proceeds to the OAuth2 callback, and finally to the creation page for setting up the integration details.

## Key Files

### authorize.tsx
This file contains the `GitLabAuthorizeIntegrationPage` component, which renders the initial GitLab authorization page. It allows users to connect Infisical with GitLab by initiating the OAuth flow. Key features include:
- Support for both cloud-hosted and self-hosted GitLab instances
- Form validation for self-hosted GitLab URL input
- CSRF token generation for security
- Redirection to GitLab's OAuth authorization page

### create.tsx
This file defines the `GitLabCreateIntegrationPage` component, which provides a comprehensive form for configuring a GitLab integration. Key features include:
- Selection of source and target environments
- Configuration of secret paths and management options
- Support for individual and group-level GitLab integrations
- Dynamic form updates based on user selections
- Integration with various API hooks for data fetching and submission

### oauth2/index.tsx
This file contains the `GitLabOAuth2CallbackPage` component, which handles the OAuth2 callback process after GitLab authorization. Key features include:
- Extraction and validation of the authorization code and state
- CSRF token validation
- Exchange of the authorization code for an integration auth token
- Redirection to the integration creation page upon successful authentication

## Dependencies
The code in this directory relies on several external libraries and frameworks:

1. React (v18.2.0): Core library for building the user interface
2. Next.js (v13.4.7): React framework for server-side rendering and routing
3. react-hook-form (v7.44.3): Form state management and validation
4. yup (v1.2.0): Schema validation for form inputs
5. @fortawesome/react-fontawesome (v0.2.0): Icon components
6. framer-motion (v10.12.17): Animation library for UI transitions
7. query-string (v8.1.0): Parsing URL query parameters

These dependencies were chosen to provide a robust, performant, and developer-friendly environment for building complex React applications with form handling, routing, and API integrations.

## Configuration
The GitLab integration components use various configuration options and environment variables:

1. GitLab URL: Users can specify a custom URL for self-hosted GitLab instances.
2. CSRF Token: Generated and stored in localStorage for security during the OAuth flow.
3. Environment variables: While not explicitly shown, the code likely relies on environment variables for API endpoints and client credentials.

Configurable fields in the integration creation form include:
- Source and target environments
- Secret paths
- GitLab integration type (individual or group)
- Secret prefix and suffix
- Options for masking and protecting secrets in GitLab

These configuration options allow for flexible setup of GitLab integrations to suit various user needs and GitLab deployment scenarios.