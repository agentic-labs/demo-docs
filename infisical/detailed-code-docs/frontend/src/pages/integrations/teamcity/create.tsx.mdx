---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a TeamCity integration in the Infisical application. It allows users to set up a connection between Infisical and TeamCity, specifying the source environment, target project, and build configuration.

## Code Structure
The main component `TeamCityCreateIntegrationPage` uses several hooks for data fetching and state management. It renders a form with various input fields and handles the creation of the integration when submitted.

## References
This code references several custom hooks and components from other parts of the codebase, including API hooks and UI components.

## Symbols

### TeamCityCreateIntegrationPage
#### Description
This is the main functional component that renders the TeamCity integration creation page.

#### Inputs
No direct inputs, but it uses data from the URL query string and local storage.

#### Outputs
Renders a React component.

#### Internal Logic
1. Fetches necessary data using custom hooks.
2. Manages form state using React's useState.
3. Handles form submission and integration creation.
4. Renders the form with various input fields and error states.

### handleButtonClick
#### Description
An asynchronous function that handles the creation of the TeamCity integration.

#### Inputs
No direct inputs, but it uses state variables from the component.

#### Outputs
No direct outputs, but it creates an integration and navigates to a new page on success.

#### Internal Logic
1. Validates required data.
2. Calls the `mutateAsync` function to create the integration.
3. Navigates to the integrations page on success.
4. Handles errors by logging them to the console.

## Side Effects
- Modifies local storage
- Navigates to different pages
- Makes API calls to create integrations

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| next/head | Managing document head |
| next/image | Optimized image component |
| next/link | Client-side navigation |
| next/router | Routing functionality |
| @fortawesome/react-fontawesome | Icon components |
| query-string | Parsing URL query strings |
| @app/hooks/api | Custom API hooks |
| ../../../components/v2 | UI components |
| ../../../hooks/api/integrationAuth | Integration auth API hooks |
| ../../../hooks/api/workspace | Workspace API hooks |

## Error Handling
The component includes basic error handling, displaying a generic error message if data fetching fails or if required data is missing.

## API/Interface Reference
This component doesn't expose an API but interacts with several API endpoints through custom hooks.

| Hook | Purpose |
|:-----|:--------|
| useCreateIntegration | Creates the TeamCity integration |
| useGetIntegrationAuthById | Fetches integration auth data |
| useGetIntegrationAuthApps | Fetches available apps for integration |
| useGetIntegrationAuthTeamCityBuildConfigs | Fetches TeamCity build configurations |
| useGetWorkspaceById | Fetches workspace data |

This component provides a user interface for creating a TeamCity integration, handling the necessary data fetching, state management, and form submission to set up the integration between Infisical and TeamCity.