---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a CircleCI integration in the Infisical application. It allows users to select a project environment, specify a secrets path, and choose a CircleCI project to integrate with. The component handles the creation of the integration and provides a user-friendly interface for configuring the integration settings.

## Code Structure
The main component `CircleCICreateIntegrationPage` uses several React hooks and custom hooks to manage state, fetch data, and handle the integration creation process. It renders a form with various input fields and a submit button, along with informational elements and error handling.

## References
This code references several custom hooks and components from other parts of the codebase, including:
- `useCreateIntegration` from `@app/hooks/api`
- `useGetIntegrationAuthApps`, `useGetIntegrationAuthById` from `../../../hooks/api/integrationAuth`
- `useGetWorkspaceById` from `../../../hooks/api/workspace`
- Various UI components from `../../../components/v2`

## Symbols

### CircleCICreateIntegrationPage
#### Description
This is the main functional component that renders the CircleCI integration creation page.

#### Inputs
This component doesn't take any props directly, but it uses data from the URL query parameters and local storage.

#### Outputs
Renders a React component that displays a form for creating a CircleCI integration.

#### Internal Logic
1. Fetches necessary data using custom hooks (workspace, integration auth, integration auth apps).
2. Manages local state for form inputs (source environment, secret path, target app).
3. Handles form submission by calling the `mutateAsync` function from `useCreateIntegration`.
4. Renders different UI elements based on the loading state and available data.
5. Provides error handling and displays a loading indicator or error message when necessary.

## Side Effects
- Modifies local state
- Makes API calls to fetch and create data
- Navigates to a different page on successful integration creation

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| React | Core library for building the UI |
| Next.js | For routing and head management |
| @fortawesome/react-fontawesome | For rendering icons |
| query-string | For parsing URL query parameters |

## Error Handling
The component includes basic error handling:
- Logs errors to the console during integration creation
- Displays a user-friendly error message if data fetching fails or required data is missing

## API/Interface Reference
This component doesn't expose an API, but it interacts with several API endpoints through custom hooks:
- `useCreateIntegration`: Creates the integration
- `useGetWorkspaceById`: Fetches workspace data
- `useGetIntegrationAuthById`: Fetches integration auth data
- `useGetIntegrationAuthApps`: Fetches available CircleCI projects

## TODOs
There are no explicit TODOs in the code.