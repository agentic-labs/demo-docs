---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a Digital Ocean App Platform integration. It allows users to select a project environment, specify a secrets path, and choose a Digital Ocean App Platform service to integrate with. The component handles the creation of the integration and redirects the user upon successful creation.

## Code Structure
The main component `DigitalOceanAppPlatformCreateIntegrationPage` uses several hooks for data fetching and state management. It renders a form with select inputs and a button to create the integration.

## References
This code references several custom hooks and components from other parts of the application, including `useCreateIntegration`, `useGetIntegrationAuthApps`, `useGetIntegrationAuthById`, and `useGetWorkspaceById`.

## Symbols

### DigitalOceanAppPlatformCreateIntegrationPage
#### Description
This is the main functional component that renders the Digital Ocean App Platform integration creation page.

#### Inputs
This component doesn't take any props directly, but it uses URL parameters and local storage for data.

#### Internal Logic
1. Fetches necessary data using custom hooks (workspace, integration auth, integration auth apps).
2. Manages local state for form inputs (source environment, target app, secret path).
3. Handles form submission by calling the `createIntegration` mutation.
4. Redirects the user after successful integration creation.

#### Side Effects
- Modifies local storage
- Performs API calls to create an integration
- Navigates to a different page on successful integration creation

### handleButtonClick
#### Description
An asynchronous function that handles the creation of the integration when the user clicks the "Create Integration" button.

#### Internal Logic
1. Checks if the integration auth ID exists.
2. Sets loading state.
3. Calls the `mutateAsync` function to create the integration with the collected form data.
4. Resets loading state.
5. Redirects the user to the integrations page.
6. Catches and logs any errors.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing and navigation |
| query-string | For parsing URL query parameters |
| @app/hooks/api | Custom hooks for API interactions |
| ../../../components/v2 | UI components |
| ../../../hooks/api/integrationAuth | Custom hooks for integration auth data |
| ../../../hooks/api/workspace | Custom hook for workspace data |

## Configuration
The component uses local storage to retrieve the project ID:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| projectData.id | string | null | The ID of the current project, stored in local storage |

## Error Handling
The component logs errors to the console when the integration creation fails. It doesn't implement specific error handling beyond this.

## API/Interface Reference
This component doesn't expose an API, but it interacts with several API endpoints through custom hooks:
| Hook | Purpose |
|:-----|:--------|
| useCreateIntegration | Creates a new integration |
| useGetIntegrationAuthById | Fetches integration auth data |
| useGetIntegrationAuthApps | Fetches available integration auth apps |
| useGetWorkspaceById | Fetches workspace data |

Note: The component requires authentication, as indicated by the `requireAuth = true` property.