---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for a Digital Ocean App Platform integration page. It allows users to enter their Digital Ocean API key, validates the input, and saves the integration access token upon successful submission.

## Code Structure
The main component `DigitalOceanAppPlatformCreateIntegrationPage` uses React hooks for state management and API interaction. It renders a form with an input field for the API key and a submit button.

## Symbols

### DigitalOceanAppPlatformCreateIntegrationPage
#### Description
This is the main functional component that renders the Digital Ocean App Platform integration page. It handles user input, form submission, and navigation to the next step upon successful integration.

#### Inputs
This component doesn't take any props.

#### Outputs
Returns a JSX element representing the integration page UI.

#### Internal Logic
1. Uses `useState` hooks to manage state for API key, error messages, and loading status.
2. Utilizes `useRouter` for navigation and `useSaveIntegrationAccessToken` for API interaction.
3. Implements `handleButtonClick` function to validate input and submit the integration request.
4. Renders a card with an input field for the API key and a submit button.

## Side Effects
- Interacts with browser's local storage to retrieve the workspace ID.
- Makes an API call to save the integration access token.
- Navigates to a new page upon successful integration.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing and navigation |
| @app/hooks/api | Custom hook for saving integration access token |
| ../../../components/v2 | UI components used in the form |

## Error Handling
- Displays an error message if the API key is blank.
- Logs any errors that occur during the integration process to the console.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| N/A | POST | { workspaceId, integration, accessToken } | integrationAuth object | Saves the integration access token |

Note: The actual API endpoint is abstracted by the `useSaveIntegrationAccessToken` hook.

## Additional Notes
- The component is set to require authentication (`requireAuth = true`).
- The component uses Tailwind CSS classes for styling.