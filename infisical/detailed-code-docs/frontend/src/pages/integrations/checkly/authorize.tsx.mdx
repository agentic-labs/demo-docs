---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for a Checkly integration authorization page. It allows users to input a Checkly API key, validates the input, and initiates the integration process by saving the access token and redirecting to the next step.

## Code Structure
The main component `ChecklyCreateIntegrationPage` uses various hooks and components to manage state, handle user input, and render the UI. It interacts with the `useSaveIntegrationAccessToken` hook to save the integration access token.

## Symbols

### ChecklyCreateIntegrationPage
#### Description
This is the main functional component that renders the Checkly integration authorization page.

#### Internal Logic
1. Initializes state variables for the access token, error text, and loading state.
2. Defines a `handleButtonClick` function to process the form submission:
   - Validates the access token input
   - Calls the `mutateAsync` function to save the integration access token
   - Redirects to the next step of the integration process
3. Renders a form with an input field for the API key and a submit button
4. Displays error messages if validation fails

#### Side Effects
- Saves the integration access token to the backend
- Redirects the user to the next step of the integration process

### useSaveIntegrationAccessToken
#### Description
This is a custom hook (imported from `@app/hooks/api`) used to save the integration access token.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutateAsync | function | Asynchronous function to save the integration access token |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| next/head | Manages document head for SEO |
| next/image | Optimized image component |
| next/link | Handles client-side navigation |
| next/router | Provides routing functionality |
| @fortawesome/react-fontawesome | Renders Font Awesome icons |
| @app/hooks/api | Custom hooks for API interactions |

## Components Used
The component uses several custom UI components:
- `Button`: A customizable button component
- `Card`: A container component for grouping related content
- `CardTitle`: A title component for the Card
- `FormControl`: A wrapper for form inputs with labels and error handling
- `Input`: An input field component

These components are imported from a custom UI library (`../../../components/v2`).

## Configuration
The component sets a `requireAuth` property to `true`, indicating that authentication is required to access this page.

```typescript
ChecklyCreateIntegrationPage.requireAuth = true;
```

This code provides a user interface for authorizing a Checkly integration by inputting an API key, with proper error handling and a smooth user experience.