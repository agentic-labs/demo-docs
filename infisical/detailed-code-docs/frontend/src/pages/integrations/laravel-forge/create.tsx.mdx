---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a Laravel Forge integration. It allows users to select a project environment, specify a secrets path, and choose a Laravel Forge site to integrate with. The component handles the creation of the integration and redirects the user upon successful creation.

## Code Structure
The main component `LaravelForgeCreateIntegrationPage` uses several hooks for data fetching and state management. It renders a form with select inputs for environment and Laravel Forge site selection, an input for the secrets path, and a button to create the integration.

## Symbols

### LaravelForgeCreateIntegrationPage
#### Description
This is the main functional component that renders the Laravel Forge integration creation page.

#### Inputs
This component doesn't take any props directly, but it uses data from various hooks.

#### Outputs
Returns a JSX element representing the integration creation form or an empty div if data is not yet loaded.

#### Internal Logic
1. Fetches necessary data using custom hooks (workspace, integration auth, integration auth apps).
2. Manages local state for form inputs (selected environment, target app, secret path).
3. Handles form submission by calling the `createIntegration` mutation.
4. Renders a form with inputs for selecting project environment, secrets path, and Laravel Forge site.
5. Disables the form submission if no Laravel Forge sites are available.

## Side Effects
- Uses `localStorage` to retrieve and store project data.
- Navigates to a different page on successful integration creation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing and navigation |
| query-string | For parsing query parameters |
| @app/hooks/api | Custom hook for creating integration |
| ../../../components/v2 | UI components |
| ../../../hooks/api/integrationAuth | Custom hooks for fetching integration auth data |
| ../../../hooks/api/workspace | Custom hook for fetching workspace data |

## Error Handling
The component logs errors to the console if the integration creation fails.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /integrations | POST | Integration details | Integration data | Creates a new integration |

Note: The actual API endpoint is not explicitly shown in the code, but it's implied by the `useCreateIntegration` hook.

## TODOs
- Consider adding more robust error handling and user feedback for failed integration creation.
- Implement form validation for the secrets path input.
- Consider adding a loading state while fetching initial data.