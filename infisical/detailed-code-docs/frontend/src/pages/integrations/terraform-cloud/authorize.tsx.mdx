---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for a page that allows users to authorize and set up a Terraform Cloud integration. It provides a form for users to input their Terraform Cloud Workspace ID and API Token, and then initiates the integration process with Infisical.

## Symbols

### TerraformCloudCreateIntegrationPage
#### Description
This is the main functional component that renders the Terraform Cloud integration authorization page. It manages the form state, handles user input, and initiates the integration process.

#### Inputs
This component doesn't take any props.

#### Outputs
Returns a JSX element representing the entire page content.

#### Internal Logic
1. Uses React hooks (useState, useRouter) to manage component state and navigation.
2. Utilizes a custom hook `useSaveIntegrationAccessToken` for saving the integration access token.
3. Handles form input for Workspace ID and API Token.
4. Performs basic form validation.
5. On form submission, it calls the `mutateAsync` function to save the integration details.
6. After successful integration, it redirects the user to the integration creation page.

### handleButtonClick
#### Description
An asynchronous function that handles the form submission when the user clicks the "Connect to Terraform Cloud" button.

#### Inputs
This function doesn't take any parameters, but it uses the component's state variables.

#### Internal Logic
1. Performs input validation for Workspace ID and API Token.
2. If validation passes, it calls `mutateAsync` to save the integration access token.
3. On success, it redirects the user to the integration creation page.
4. Handles loading state and error display.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/head | For setting the page title and favicon |
| next/image | For optimized image rendering |
| next/link | For client-side navigation |
| next/router | For programmatic routing |
| @fortawesome/free-solid-svg-icons | For icon components |
| @fortawesome/react-fontawesome | For rendering FontAwesome icons |
| @app/hooks/api | Custom hook for saving integration access token |
| ../../../components/v2 | Custom UI components |

## Side Effects
- The component interacts with the browser's localStorage to retrieve the project ID.
- It performs API calls to save the integration access token.
- It uses Next.js routing to navigate between pages.

## Error Handling
The component implements basic error handling:
- It displays error messages for empty input fields.
- Catches and logs any errors that occur during the integration process.

## Configuration
The component defines a static property:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| requireAuth | boolean | true | Indicates that this page requires authentication |

This documentation provides a comprehensive overview of the Terraform Cloud integration authorization page component, its functionality, and its implementation details.