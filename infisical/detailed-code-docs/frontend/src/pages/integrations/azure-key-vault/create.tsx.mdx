---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating an Azure Key Vault integration. It allows users to configure integration settings such as the source environment, secrets path, vault URI, and initial sync behavior. The component uses various form controls and handles form submission to create the integration.

## Code Structure
The main component `AzureKeyVaultCreateIntegrationPage` uses several hooks and components to manage state, handle user input, and create the integration. It references other components from the project's component library and uses custom hooks for API interactions.

## Symbols

### AzureKeyVaultCreateIntegrationPage
#### Description
This is the main functional component that renders the Azure Key Vault integration creation form.

#### Inputs
This component doesn't take any props directly, but it uses query parameters from the URL.

#### Internal Logic
1. Initializes state variables for form fields and loading state.
2. Fetches workspace and integration auth data using custom hooks.
3. Handles form input changes and validation.
4. Submits the form data to create the integration when the button is clicked.
5. Renders form controls for configuring the integration.

#### Side Effects
- Fetches workspace and integration auth data on component mount.
- Updates the selected source environment when workspace data is available.
- Navigates to the integrations page after successful integration creation.

### handleButtonClick
#### Description
An asynchronous function that handles the form submission when the "Create Integration" button is clicked.

#### Internal Logic
1. Validates the vault base URL.
2. Creates the integration using the `mutateAsync` function from the `useCreateIntegration` hook.
3. Navigates to the integrations page on success.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| next/router | Next.js routing |
| query-string | Parsing URL query parameters |
| @app/hooks/api | Custom hooks for API interactions |
| ../../../components/v2 | UI components from the project's component library |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| initialSyncBehaviors | Array | [Object] | Defines the available sync behavior options |

## Error Handling
The component implements basic error handling for the vault base URL validation, displaying error messages to the user.

## API/Interface Reference
This component doesn't expose an API but interacts with the following endpoints:
- Creates an integration using the `useCreateIntegration` hook.
- Fetches workspace data using the `useGetWorkspaceById` hook.
- Fetches integration auth data using the `useGetIntegrationAuthById` hook.

Note: This component requires authentication, as indicated by the `AzureKeyVaultCreateIntegrationPage.requireAuth = true;` statement at the end of the file.