---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for a Travis CI integration page. It allows users to enter their Travis CI API token, validates the input, and saves the integration access token before redirecting to a creation page.

## Symbols

### TravisCICreateIntegrationPage
#### Description
This is the main functional component that renders the Travis CI integration page. It manages the state for the API key input, error handling, and loading state. It also handles the submission of the API key to save the integration access token.

#### Inputs
This component doesn't take any props.

#### Outputs
Returns a JSX element representing the Travis CI integration page.

#### Internal Logic
1. Uses the `useState` hook to manage state for `apiKey`, `apiKeyErrorText`, and `isLoading`.
2. Uses the `useRouter` hook from Next.js for navigation.
3. Uses a custom hook `useSaveIntegrationAccessToken` for saving the integration access token.
4. Defines a `handleButtonClick` function to process the form submission:
   - Validates the API key input
   - Calls the `mutateAsync` function to save the integration access token
   - Redirects to the creation page on success
5. Renders a card with an input field for the API key and a submit button.

#### Side Effects
- Modifies local state (`apiKey`, `apiKeyErrorText`, `isLoading`)
- Saves integration access token to the server
- Navigates to a new page on successful submission

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing and navigation |
| @app/hooks/api | Custom hook for saving integration access token |
| ../../../components/v2 | UI components used in the page |

## Error Handling
- Displays an error message if the API key is blank
- Catches and logs any errors that occur during the submission process

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| Unspecified | POST | `{ workspaceId: string, integration: string, accessToken: string }` | `{ id: string }` | Saves the integration access token |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| requireAuth | boolean | true | Indicates that this page requires authentication |

Note: The `requireAuth` property is set on the component itself, likely used by a higher-order component or routing system to enforce authentication.