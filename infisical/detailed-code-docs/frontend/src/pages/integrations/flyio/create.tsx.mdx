---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a Fly.io integration in the Infisical application. It allows users to select a source environment from their workspace, specify a secrets path, and choose a target Fly.io app for integration. The component handles the creation of the integration and provides user feedback throughout the process.

## Code Structure
The main component `FlyioCreateIntegrationPage` uses several hooks for data fetching and state management. It renders a form with various input fields and handles the integration creation process. The component also includes error handling and loading states.

## References
This code references several other parts of the codebase, including:
- Custom hooks from `@app/hooks/api` and `../../../hooks/api`
- UI components from `../../../components/v2`
- Next.js routing and components

## Symbols

### FlyioCreateIntegrationPage
#### Description
This is the main functional component that renders the Fly.io integration creation page.

#### Inputs
This component doesn't take any props.

#### Internal Logic
1. Fetches necessary data using custom hooks (workspace, integration auth, integration auth apps).
2. Manages local state for form inputs and loading state.
3. Handles the integration creation process when the user submits the form.
4. Renders different UI states based on data availability and loading states.

#### Side Effects
- Uses `useEffect` to set initial values for `selectedSourceEnvironment` and `targetApp`.
- Navigates to a different page after successful integration creation.

### handleButtonClick
#### Description
An asynchronous function that handles the creation of the integration when the user clicks the "Create Integration" button.

#### Internal Logic
1. Checks if the integration auth ID is available.
2. Sets loading state.
3. Calls the `mutateAsync` function to create the integration with the provided details.
4. Navigates to the integrations page on success.
5. Logs any errors to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| next | Next.js framework components and hooks |
| @fortawesome/react-fontawesome | FontAwesome icon components |
| query-string | Parsing query strings |
| @app/hooks/api | Custom API hooks |

## Configuration
The component uses environment-specific configuration:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| projectData.id | string | null | The ID of the current project, stored in localStorage |

## Error Handling
The component includes basic error handling:
- Logs errors to the console during integration creation.
- Displays a user-friendly error message if data fetching fails or required data is missing.

## Logging
The component logs errors to the console when the integration creation fails.

## TODOs
- TODO: handle case where apps can be empty