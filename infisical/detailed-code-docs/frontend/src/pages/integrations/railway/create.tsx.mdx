---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a Railway integration in a web application. It provides a form interface for users to select various options related to their Railway project, environment, and service, and then creates an integration based on the selected parameters.

## Code Structure
The main component `RailwayCreateIntegrationPage` uses several hooks for state management and API calls. It renders a form with various input fields and handles the creation of the integration when the user submits the form.

## References
This code references several custom hooks and components from other parts of the codebase, including:
- API hooks from `@app/hooks/api` and `hooks/api/integrationAuth`
- UI components from `components/v2`

## Symbols

### RailwayCreateIntegrationPage
#### Description
This is the main functional component that renders the Railway integration creation page.

#### Inputs
This component doesn't take any props.

#### Outputs
Returns a JSX element representing the integration creation form.

#### Internal Logic
1. Uses various hooks to fetch data and manage state.
2. Renders a form with select inputs for project environment, Railway project, environment, and service.
3. Handles form submission by calling the `mutateAsync` function from `useCreateIntegration` hook.
4. Redirects the user to the integrations page after successful creation.

#### Side Effects
- Fetches data from API endpoints using custom hooks.
- Updates local storage.
- Navigates to a different page on successful integration creation.

### handleButtonClick
#### Description
An asynchronous function that handles the form submission.

#### Inputs
No direct inputs, but uses various state variables from the component.

#### Internal Logic
1. Sets loading state.
2. Validates required data.
3. Calls `mutateAsync` to create the integration.
4. Redirects to the integrations page on success.
5. Handles errors by logging to console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing functionality |
| query-string | For parsing query parameters |
| @app/hooks/api | Custom hooks for API calls |
| components/v2 | UI components |

## Configuration
The component uses several configuration options based on the user's selections:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| selectedSourceEnvironment | string | First environment in workspace | The source environment for the integration |
| secretPath | string | "/" | The path for secrets in the integration |
| targetAppId | string | First app ID or "none" | The selected Railway project |
| targetEnvironmentId | string | First environment ID or "none" | The selected Railway environment |
| targetServiceId | string | "" | The selected Railway service (optional) |

## Error Handling
Error handling is implemented in the `handleButtonClick` function, where errors are caught and logged to the console.

## API/Interface Reference
This component doesn't expose an API, but it uses several API hooks to fetch and submit data:
- `useCreateIntegration`
- `useGetIntegrationAuthById`
- `useGetWorkspaceById`
- `useGetIntegrationAuthApps`
- `useGetIntegrationAuthRailwayEnvironments`
- `useGetIntegrationAuthRailwayServices`