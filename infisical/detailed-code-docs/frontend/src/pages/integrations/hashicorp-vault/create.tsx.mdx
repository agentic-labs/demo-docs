---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a HashiCorp Vault integration in the Infisical application. It provides a form for users to input necessary details to set up the integration between Infisical and HashiCorp Vault.

## Code Structure
The main component `HashiCorpVaultCreateIntegrationPage` uses various hooks and components to manage form state, handle API requests, and render the UI. It relies on custom hooks for fetching workspace and integration data, and uses form validation with Zod schema.

## Symbols

### `HashiCorpVaultCreateIntegrationPage`
#### Description
This is the main functional component that renders the HashiCorp Vault integration creation page.

#### Internal Logic
1. Fetches workspace and integration authentication data using custom hooks.
2. Sets up form validation using Zod schema.
3. Handles form submission, creating the integration via API call.
4. Renders the form with various input fields and error handling.

### `generateFormSchema`
#### Description
A function that generates a Zod schema for form validation based on available environment names.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| availableEnvironmentNames | string[] | Array of available environment names |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| schema | z.ZodObject | Zod schema for form validation |

### `handleFormSubmit`
#### Description
An asynchronous function that handles the form submission, creating the integration via API call.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formData | TForm | Form data object |

#### Internal Logic
1. Calls the `mutateAsync` function to create the integration.
2. Redirects to the integrations page on success.
3. Handles errors and displays notifications.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form state management and validation |
| next/head, next/image, next/link, next/router | Next.js components and routing |
| @fortawesome/react-fontawesome, @fortawesome/free-solid-svg-icons | Icon components |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| axios | HTTP client for API requests |
| query-string | URL query string parsing |
| zod | Schema validation |
| @app/components/notifications | Custom notification component |
| @app/helpers/string | String helper functions |
| @app/hooks/api | Custom API hooks |

## Error Handling
The component implements error handling for API requests and form validation. It uses try-catch blocks and displays error notifications using the `createNotification` function.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/integration | POST | Integration details | Created integration | Creates a new integration |

This component interacts with the API indirectly through custom hooks (`useCreateIntegration`, `useGetIntegrationAuthById`, `useGetWorkspaceById`).