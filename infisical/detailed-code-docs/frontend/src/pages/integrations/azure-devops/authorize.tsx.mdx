---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for an Azure DevOps integration authorization page. It allows users to input their Azure DevOps API token and organization name, then saves this information and redirects to the integration creation page.

## Symbols

### `AzureDevopsCreateIntegrationPage`
#### Description
This is the main functional component that renders the Azure DevOps integration authorization page.

#### Inputs
This component doesn't take any props.

#### Outputs
Returns a JSX element representing the entire page content.

#### Internal Logic
1. Initializes state variables for API key, organization name, error text, and loading state.
2. Defines a `handleButtonClick` function to process the form submission:
   - Validates the API key
   - Saves the organization name to local storage
   - Calls the `mutateAsync` function to save the integration access token
   - Redirects to the integration creation page
3. Renders a form with inputs for API key and organization name, along with a submit button.

### `handleButtonClick`
#### Description
An asynchronous function that handles the form submission when the user clicks the "Connect to Azure DevOps" button.

#### Inputs
This function doesn't take any parameters, but uses state variables.

#### Internal Logic
1. Validates the API key
2. Saves the Azure DevOps organization name to local storage
3. Calls `mutateAsync` to save the integration access token
4. Redirects to the integration creation page

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/head | For setting the page title and favicon |
| next/image | For optimized image rendering |
| next/link | For client-side navigation |
| next/router | For programmatic routing |
| @fortawesome/react-fontawesome | For rendering Font Awesome icons |
| @app/hooks/api | For the `useSaveIntegrationAccessToken` hook |
| ../../../components/v2 | For various UI components |

## Side Effects
- Stores the Azure DevOps organization name in localStorage
- Saves the integration access token to the backend via the `useSaveIntegrationAccessToken` hook

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| requireAuth | boolean | true | Indicates that this page requires authentication |

## Error Handling
The component implements basic error handling by displaying an error message if the API key is blank. Any other errors are logged to the console.

## TODOs
The image source for the Azure DevOps logo is incorrect. It currently points to an Amazon Web Services image instead of an Azure DevOps image.