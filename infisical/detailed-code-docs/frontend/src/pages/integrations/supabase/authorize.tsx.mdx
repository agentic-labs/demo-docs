---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for a Supabase integration page. It allows users to input a Supabase API token, validates the input, and saves the token for integration with the application.

## Code Structure
The main component `SupabaseCreateIntegrationPage` uses React hooks for state management and API interaction. It renders a form with an input field for the API token and a submit button.

## Symbols

### SupabaseCreateIntegrationPage
#### Description
This is the main functional component that renders the Supabase integration page.

#### Inputs
This component doesn't take any props.

#### Internal Logic
1. Uses `useState` to manage state for API key, error text, and loading status.
2. Uses `useRouter` for navigation.
3. Uses `useSaveIntegrationAccessToken` custom hook for API interaction.
4. Defines `handleButtonClick` function to process form submission:
   - Validates the API key
   - Calls the API to save the integration token
   - Navigates to the creation page on success

#### Outputs
Returns a JSX element representing the Supabase integration page.

### handleButtonClick
#### Description
An asynchronous function that handles the form submission when the "Connect to Supabase" button is clicked.

#### Internal Logic
1. Clears any existing error messages
2. Validates that the API key is not empty
3. Sets loading state
4. Calls the API to save the integration token
5. Navigates to the creation page on success
6. Handles errors by logging them to the console

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing and navigation |
| @app/hooks/api | Custom hook for API interaction |
| ../../../components/v2 | UI components |

## Configuration
The component sets a `requireAuth` property to `true`, indicating that authentication is required to access this page.

## References
- `useSaveIntegrationAccessToken`: A custom hook used for saving the integration access token.
- `Button`, `Card`, `CardTitle`, `FormControl`, `Input`: UI components imported from a local components library.

## Notes
1. The component is very similar to the `NorthflankCreateIntegrationPage` component, suggesting a potential for creating a more generic integration page component.
2. The component uses `localStorage` to store and retrieve the workspace ID, which might not be the most secure method for sensitive data.
3. Error handling could be improved by displaying error messages to the user instead of just logging to the console.