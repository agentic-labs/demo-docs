---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for an AWS Secrets Manager integration page. It allows users to authorize and connect to AWS Secrets Manager by providing either access key credentials or an IAM role ARN for role assumption.

## Code Structure
The main component `AWSSecretManagerCreateIntegrationPage` uses React Hook Form for form management and validation. It renders a form with different input fields based on the selected authentication mode (Access Key or AWS Assume Role).

## Symbols

### `AWSSecretManagerCreateIntegrationPage`
#### Description
This is the main functional component that renders the AWS Secrets Manager integration page.

#### Internal Logic
1. Sets up form management using `useForm` hook with Zod schema validation.
2. Handles form submission using `handleFormSubmit` function.
3. Renders a card with a form containing authentication mode selection and corresponding input fields.
4. Uses the `useSaveIntegrationAccessToken` hook to save the integration access token.
5. Redirects to the create integration page upon successful form submission.

### `AwsAuthType` (enum)
#### Description
Defines the authentication types for AWS integration.

| Value | Description |
|:------|:------------|
| AccessKey | For access key-based authentication |
| AssumeRole | For IAM role-based authentication |

### `formSchema` (Zod schema)
#### Description
Defines the validation schema for the form using Zod.

### `TForm` (type)
#### Description
Inferred type from the `formSchema`, representing the form data structure.

### `handleFormSubmit` (function)
#### Description
Asynchronous function that handles the form submission.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | TForm | Form data submitted by the user |

#### Internal Logic
1. Calls `mutateAsync` to save the integration access token.
2. Redirects to the create integration page with the new integration auth ID.
3. Handles errors by logging them to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-hook-form | Form management and validation |
| next/head | Managing document head |
| next/image | Optimized image component |
| next/link | Client-side navigation |
| next/router | Routing functionality |
| @fortawesome/react-fontawesome | Icon components |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @app/components/v2 | Custom UI components |
| @app/hooks/api | Custom API hooks |

## Configuration
The component has a configuration option:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| requireAuth | boolean | true | Indicates that authentication is required for this page |

## Side Effects
- The component interacts with the browser's local storage to retrieve the project ID.
- It uses the router to navigate to a different page after successful form submission.

## Performance Considerations
The component uses Next.js's `Image` component for optimized image loading and `Link` for client-side navigation, which can improve performance.