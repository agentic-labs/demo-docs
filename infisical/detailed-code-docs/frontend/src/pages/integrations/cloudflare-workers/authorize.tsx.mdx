---
title: "authorize.tsx"
---

## High-level description
This code defines a React component for a Cloudflare Workers integration page. It allows users to input their Cloudflare Workers API token and Account ID, validates the inputs, and initiates the integration process by saving the access token and redirecting to a creation page.

## Symbols

### CloudflareWorkersIntegrationPage
#### Description
This is the main functional component that renders the Cloudflare Workers integration page. It manages the state for input fields, handles form submission, and displays the UI for the integration process.

#### Inputs
This component doesn't take any props.

#### Outputs
Returns a JSX element representing the integration page UI.

#### Internal Logic
1. Initializes state variables for API token, Account ID, error messages, and loading state.
2. Defines a `handleButtonClick` function to process form submission:
   - Validates input fields
   - Calls the `mutateAsync` function to save the integration access token
   - Resets input fields and loading state
   - Redirects to the creation page with the new integration auth ID
3. Renders a card with input fields for API token and Account ID, along with a submit button.

#### Side Effects
- Uses the `useRouter` hook to handle navigation.
- Uses the `useSaveIntegrationAccessToken` custom hook to save the integration access token.
- Accesses and sets items in `localStorage`.

### useSaveIntegrationAccessToken
#### Description
This is a custom hook (imported from "@app/hooks/api") used to save the integration access token.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutateAsync | function | An asynchronous function to save the integration access token |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React hooks and components |
| next/router | For routing functionality |
| @app/hooks/api | Custom hooks for API interactions |
| ../../../components/v2 | UI components |

## Configuration
The component sets a `requireAuth` property to `true`, indicating that authentication is required to access this page.

## Error Handling
The component implements basic error handling:
- Displays error messages for empty API token or Account ID inputs
- Logs any errors that occur during the token saving process to the console

## API/Interface Reference
| Function | Inputs | Outputs | Description |
|:---------|:-------|:--------|:------------|
| mutateAsync | { workspaceId: string, integration: string, accessId: string, accessToken: string } | Promise&lt;{ id: string }&gt; | Saves the integration access token and returns the integration auth object |

This documentation provides a comprehensive overview of the CloudflareWorkersIntegrationPage component and its functionality within the context of the Cloudflare Workers integration process.