---
title: "create.tsx"
---

## High-level description
This code defines a React component for creating a Cloudflare Workers integration in the Infisical application. It allows users to select an Infisical project environment, specify a secret path, and choose a Cloudflare Workers project to integrate with.

## Code Structure
The main component `CloudflareWorkersIntegrationPage` uses several hooks for state management and API interactions. It renders a form with select inputs and a button to create the integration.

## References
- `@app/components/notifications`: For creating notifications
- `@app/components/v2/SecretPathInput`: For inputting secret paths
- `@app/hooks/api`: For various API-related hooks
- `../../../components/v2`: For UI components
- `../../../hooks/api/integrationAuth`: For integration authentication hooks

## Symbols

### CloudflareWorkersIntegrationPage
#### Description
This is the main functional component that renders the Cloudflare Workers integration creation page.

#### Inputs
This component doesn't take any props.

#### Internal Logic
1. Fetches necessary data using custom hooks (workspace, integration auth, integration auth apps).
2. Manages state for form inputs (source environment, secret path, target app).
3. Handles form submission to create the integration.
4. Renders the form with appropriate UI components.

#### Side Effects
- Updates local storage with project data
- Navigates to a different page on successful integration creation
- Creates notifications on error

### handleButtonClick
#### Description
An asynchronous function that handles the creation of the integration when the form is submitted.

#### Internal Logic
1. Validates the presence of integration auth ID.
2. Sets loading state.
3. Calls the `mutateAsync` function to create the integration.
4. Navigates to the integrations page on success.
5. Handles errors and displays notifications.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For React hooks and components |
| next/router | For routing functionality |
| axios | For HTTP requests |
| query-string | For parsing query strings |

## Error Handling
The code implements error handling in the `handleButtonClick` function. It catches any errors during the integration creation process, logs them to the console, and displays a notification to the user with an error message.

## API/Interface Reference
This component interacts with several API endpoints through custom hooks:
- `useCreateIntegration`: For creating the integration
- `useGetWorkspaceById`: For fetching workspace data
- `useGetIntegrationAuthById`: For fetching integration auth data
- `useGetIntegrationAuthApps`: For fetching integration auth apps

## TODOs
There are no explicit TODOs in this code.