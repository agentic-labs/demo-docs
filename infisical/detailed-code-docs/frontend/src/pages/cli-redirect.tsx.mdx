---
title: "cli-redirect.tsx"
---

## High-level description
This code defines a React component for a CLI redirect page in the Infisical application. It handles the display and management of a CLI token, allowing users to copy it to their clipboard when automatic token pushing to the CLI fails.

## Code Structure
The main component `CliRedirect` uses several utility functions and hooks to manage the CLI token state and copying functionality. It also imports various UI components and icons for rendering the page.

## Symbols

### `getTerminalCliToken`
#### Description
This function retrieves the CLI terminal token from the session storage and validates its expiry.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| cliToken | string \| undefined | The CLI terminal token if valid, otherwise undefined |

#### Internal Logic
1. Retrieves the token info from session storage
2. Parses the JSON data
3. Checks if the token has expired
4. Returns the token data if valid, otherwise undefined

### `CliRedirect`
#### Description
The main React component that renders the CLI redirect page.

#### Internal Logic
1. Uses the `useTimedReset` hook to manage the state of whether the URL has been copied
2. Retrieves the CLI token using `getTerminalCliToken`
3. Defines a function `copyUrlToClipboard` to copy the token to the clipboard
4. Renders different UI based on whether a CLI token is available or not

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| next/head | For setting the page title and favicon |
| next/image | For rendering optimized images |
| @fortawesome/free-solid-svg-icons | For using specific icons |
| @fortawesome/react-fontawesome | For rendering FontAwesome icons |
| @app/components/v2 | For using custom UI components |
| @app/const | For accessing session storage keys |
| @app/hooks | For using the `useTimedReset` hook |

## Side Effects
- The component interacts with the browser's clipboard API to copy the CLI token.
- It removes the CLI token from session storage after copying.

## Error Handling
The code doesn't implement explicit error handling, but it does handle the case where the CLI token is not available or has expired.

## Logging
No specific logging mechanisms are implemented in this code.

## API/Interface Reference
This component doesn't expose an API but renders a user interface for CLI token management.