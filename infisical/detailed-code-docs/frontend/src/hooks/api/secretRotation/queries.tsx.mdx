---
title: "queries.tsx"
---

## High-level description
This code defines React Query hooks for fetching and managing secret rotation data in a frontend application. It provides functionality to retrieve secret rotation providers and secret rotations for a specific workspace, utilizing API requests and React Query's caching and state management capabilities.

## Code Structure
The code is organized into two main parts: query keys and query hooks. The `secretRotationKeys` object defines the query keys used for caching, while the hooks (`useGetSecretRotationProviders` and `useGetSecretRotations`) encapsulate the logic for fetching data from the API.

## Symbols

### `secretRotationKeys`
#### Description
An object that defines query keys for secret rotation-related queries. These keys are used by React Query for caching and invalidation purposes.

#### Internal Logic
- `listProviders`: Returns a key for fetching secret rotation providers based on the workspace ID.
- `list`: Returns a key for fetching secret rotations based on the workspace ID.

### `fetchSecretRotationProviders`
#### Description
An asynchronous function that fetches secret rotation providers from the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| workspaceId | string | The ID of the workspace |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | TSecretRotationProviderList | List of secret rotation providers |

### `useGetSecretRotationProviders`
#### Description
A custom React Query hook that fetches and manages secret rotation providers data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| workspaceId | string | The ID of the workspace |
| options | UseQueryOptions | Additional options for the query |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | UseQueryResult | React Query result object |

#### Internal Logic
- Uses `useQuery` to fetch secret rotation providers.
- Enables the query only when `workspaceId` is truthy.
- Allows passing additional options to customize the query behavior.

### `fetchSecretRotations`
#### Description
An asynchronous function that fetches secret rotations from the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| workspaceId | string | The ID of the workspace |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| secretRotations | TSecretRotation[] | Array of secret rotations |

### `useGetSecretRotations`
#### Description
A custom React Query hook that fetches and manages secret rotations data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| workspaceId | string | The ID of the workspace |
| options | UseQueryOptions | Additional options for the query |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | UseQueryResult | React Query result object |

#### Internal Logic
- Uses `useQuery` to fetch secret rotations.
- Enables the query only when `workspaceId` is truthy.
- Allows passing additional options to customize the query behavior.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useQuery` hook and related types for data fetching and state management |
| @app/config/request | Imports the `apiRequest` object for making API calls |

## References
This code is referenced by:
- `frontend/src/views/SecretRotationPage/SecretRotationPage.tsx`: Uses the `useGetSecretRotationProviders` and `useGetSecretRotations` hooks to fetch and display secret rotation data.
- `frontend/src/hooks/api/secretRotation/index.ts`: Exports the hooks defined in this file for use in other parts of the application.