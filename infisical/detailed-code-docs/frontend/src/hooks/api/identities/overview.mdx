---
title: "Overview"
---

## High-level description
This directory contains React hooks and TypeScript types for managing identity-related API operations in a frontend application. It provides functionality for creating, updating, deleting, and fetching various types of identity authentication methods, including Universal Auth, GCP Auth, AWS Auth, Azure Auth, Kubernetes Auth, OIDC Auth, and Token Auth.

## What does it do?
The code in this directory enables the frontend application to interact with a backend API for identity management. It allows developers to:

1. Create, update, and delete identities
2. Manage different authentication methods for identities
3. Fetch identity details, including memberships and authentication data
4. Handle client secrets and access tokens
5. Manage trusted IP addresses for identities

These hooks and types provide a structured and type-safe way to handle identity-related operations, ensuring consistency across the application and simplifying the process of working with the identity management API.

## Entry points
The main entry point for this directory is the `index.tsx` file, which exports all the hooks and constants from other files. Developers can import the necessary hooks and types from this file to use in their components or other parts of the application.

The key files in this directory are:

1. `mutations.tsx`: Contains hooks for modifying identity data (create, update, delete)
2. `queries.tsx`: Contains hooks for fetching identity data
3. `types.ts`: Defines TypeScript types and interfaces for identity-related data structures
4. `enums.tsx`: Defines enumerations for identity authentication methods
5. `constants.tsx`: Defines constants, such as mappings between authentication methods and their display names

## Dependencies
The code in this directory relies on the following main dependencies:

1. @tanstack/react-query (version not specified): Used for managing API requests, caching, and state management
2. React (version not specified): The underlying framework for building the user interface
3. TypeScript (version not specified): Used for static typing and improved developer experience

## Configuration
The code uses a custom `apiRequest` object from `@app/config/request` for making API calls. This suggests that there might be some configuration related to API endpoints or request handling in the `config` directory of the application.

The `identitiesKeys` object in `queries.tsx` defines query keys for different identity-related queries, which are used by React Query for caching and invalidation purposes.

## Key concepts and data structures

1. Identity: The core entity representing a user or service in the system, with properties like id, name, and authentication method.

2. Authentication Methods: Various ways an identity can authenticate, including:
   - Universal Auth
   - GCP Auth
   - AWS Auth
   - Azure Auth
   - Kubernetes Auth
   - OIDC Auth
   - Token Auth

3. Identity Memberships: Represent an identity's association with organizations and projects, including roles and permissions.

4. Access Tokens: Used for authentication, with properties like TTL, usage limits, and revocation status.

5. Trusted IPs: IP addresses associated with identities for security purposes.

The code provides a comprehensive set of operations for each authentication method, typically including:

- Adding the auth method to an identity
- Updating the auth method
- Deleting the auth method
- Fetching auth method details

For example, the Universal Auth method has the following operations:

```typescript
useAddIdentityUniversalAuth
useUpdateIdentityUniversalAuth
useDeleteIdentityUniversalAuth
useGetIdentityUniversalAuth
useGetIdentityUniversalAuthClientSecrets
```

These hooks follow a consistent naming pattern across all authentication methods, making it easy for developers to work with different auth types in a uniform way.

The types defined in `types.ts` ensure that all data structures used in these operations are consistent and type-safe. For instance, the `IdentityUniversalAuth` type includes fields like:

```typescript
interface IdentityUniversalAuth {
  id: string;
  identityId: string;
  clientSecretTrustedIps: IdentityTrustedIp[];
  accessTokenTTL: number;
  accessTokenMaxTTL: number;
  accessTokenNumUsesLimit: number;
  accessTokenTrustedIps: IdentityTrustedIp[];
  createdAt: string;
  updatedAt: string;
}
```

This structure is then used in both the mutation and query hooks, ensuring that the data passed to and received from the API is consistent and properly typed.

In summary, this directory provides a robust and type-safe foundation for managing identity-related operations in a React-based frontend application, with a focus on flexibility in authentication methods and clear, consistent API interactions.