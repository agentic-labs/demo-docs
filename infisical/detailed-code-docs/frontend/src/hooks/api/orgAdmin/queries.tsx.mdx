---
title: "queries.tsx"
---

## High-level description
This code defines a React Query hook for fetching projects in an organization admin context. It provides a reusable function to retrieve project data with pagination and search capabilities, utilizing the React Query library for efficient data fetching and caching.

## Code Structure
The code exports two main symbols: `orgAdminQueryKeys` and `useOrgAdminGetProjects`. The `orgAdminQueryKeys` object is used to generate consistent query keys for React Query, while `useOrgAdminGetProjects` is a custom hook that implements the actual data fetching logic.

## References
- `@tanstack/react-query`: Used for data fetching and state management
- `@app/config/request`: Imports the `apiRequest` function for making API calls
- `../types`: Imports the `Workspace` type
- `./types`: Imports the `TOrgAdminGetProjectsDTO` type

## Symbols

### `orgAdminQueryKeys`
#### Description
An object that provides a method to generate consistent query keys for React Query based on the provided filter parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| filter | TOrgAdminGetProjectsDTO | An object containing search, offset, and limit parameters |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| queryKey | readonly [string, TOrgAdminGetProjectsDTO] | A tuple containing the query key string and filter object |

### `useOrgAdminGetProjects`
#### Description
A custom React Query hook that fetches projects for an organization admin. It uses the `useQuery` hook from React Query to manage the data fetching process.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| search | string (optional) | Search term for filtering projects |
| offset | number (optional) | Offset for pagination |
| limit | number (optional) | Limit for the number of projects to fetch (default: 50) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | UseQueryResult&lt;{ projects: Workspace[]; count: number }&gt; | React Query result object containing project data and metadata |

#### Internal Logic
1. Generates a query key using `orgAdminQueryKeys.getProjects`
2. Defines an async `queryFn` that:
   - Makes a GET request to "/api/v1/organization-admin/projects"
   - Passes search, offset, and limit as query parameters
   - Returns the response data containing projects and count

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useQuery` hook for data fetching |
| @app/config/request | Provides the `apiRequest` function for making API calls |

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/organization-admin/projects | GET | Query params: limit, offset, search | { projects: Workspace[], count: number } | Fetches projects for organization admin |

This code provides a reusable hook for fetching project data in an organization admin context, with built-in support for pagination and search functionality. It leverages React Query for efficient data management and caching.