---
title: "mutation.ts"
---

## High-level description
This file contains custom React hooks for making API requests related to admin functionalities. It utilizes React Query for state management and data fetching. The hooks provide methods for creating admin users, updating server configurations, and deleting users.

## Code Structure
The file exports three custom hooks: `useCreateAdminUser`, `useUpdateServerConfig`, and `useAdminDeleteUser`. Each hook uses the `useMutation` function from React Query to handle API requests and manage the mutation state.

## References
- `apiRequest` from "@app/config/request"
- `organizationKeys` from "../organization/queries"
- `User` type from "../users/types"
- `adminQueryKeys` and `adminStandaloneKeys` from "./queries"
- `TCreateAdminUserDTO` and `TServerConfig` types from "./types"

## Symbols

### useCreateAdminUser
#### Description
A custom hook for creating an admin user.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to create a mutation function.
2. Sends a POST request to "/api/v1/admin/signup" with the provided data.
3. On success, invalidates the server config query.

### useUpdateServerConfig
#### Description
A custom hook for updating the server configuration.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to create a mutation function.
2. Sends a PATCH request to "/api/v1/admin/config" with the provided data.
3. On success, updates the server config query data, invalidates the server config query, and invalidates the user organizations query.

### useAdminDeleteUser
#### Description
A custom hook for deleting a user by an admin.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to create a mutation function.
2. Sends a DELETE request to "/api/v1/admin/user-management/users/{userId}".
3. On success, invalidates the users query.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useMutation` and `useQueryClient` hooks for managing API requests and cache |
| @app/config/request | Provides the `apiRequest` object for making API calls |

## Error Handling
The hooks rely on React Query's built-in error handling. Errors from API requests will be captured and can be accessed through the mutation result object.