---
title: "queries.tsx"
---

## High-level description
This file contains React hooks and functions for managing organization-related API queries and mutations using React Query. It provides functionality for fetching, creating, updating, and deleting various organization-related data, such as billing details, payment methods, tax IDs, and licenses.

## Code Structure
The file defines a set of query keys and functions for different organization-related operations. These functions use the `useQuery` and `useMutation` hooks from React Query to handle API requests and cache management. The code is organized into sections for different types of operations (e.g., billing details, payment methods, tax IDs).

## Symbols

### `organizationKeys`
#### Description
An object containing query keys for various organization-related queries. These keys are used to identify and manage cached data in React Query.

### `fetchOrganizations`
#### Description
An async function that fetches the list of organizations for the current user.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizations | Organization[] | Array of organization objects |

### `useGetOrganizations`
#### Description
A custom hook that uses React Query to fetch and cache the list of organizations.

### `useCreateOrg`
#### Description
A custom hook for creating a new organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | string | The name of the new organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Organization | The created organization object |

### `useUpdateOrg`
#### Description
A custom hook for updating an existing organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| UpdateOrgDTO | object | Object containing update data |

### `useGetOrgTrialUrl`
#### Description
A custom hook for getting the trial URL for an organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The organization ID |
| success_url | string | The success URL after trial signup |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | string | The trial URL |

### `useGetOrgPlanBillingInfo`
#### Description
A custom hook for fetching the organization's plan billing information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | PlanBillingInfo | The plan billing information |

### `useGetOrgPlanTable`
#### Description
A custom hook for fetching the organization's plan table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | OrgPlanTable | The organization plan table |

### `useGetOrgPlansTable`
#### Description
A custom hook for fetching the organization's plans table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |
| billingCycle | "monthly" \| "yearly" | The billing cycle |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | ProductsTable | The products table |

### `useGetOrgBillingDetails`
#### Description
A custom hook for fetching the organization's billing details.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | BillingDetails | The billing details |

### `useUpdateOrgBillingDetails`
#### Description
A custom hook for updating the organization's billing details.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |
| name | string | (optional) The new name |
| email | string | (optional) The new email |

### `useGetOrgPmtMethods`
#### Description
A custom hook for fetching the organization's payment methods.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | PmtMethod[] | Array of payment methods |

### `useAddOrgPmtMethod`
#### Description
A custom hook for adding a new payment method to the organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |
| success_url | string | The success URL |
| cancel_url | string | The cancel URL |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| url | string | The URL for adding the payment method |

### `useDeleteOrgPmtMethod`
#### Description
A custom hook for deleting a payment method from the organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |
| pmtMethodId | string | The payment method ID |

### `useGetOrgTaxIds`
#### Description
A custom hook for fetching the organization's tax IDs.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | TaxID[] | Array of tax IDs |

### `useAddOrgTaxId`
#### Description
A custom hook for adding a new tax ID to the organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |
| type | string | The tax ID type |
| value | string | The tax ID value |

### `useDeleteOrgTaxId`
#### Description
A custom hook for deleting a tax ID from the organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |
| taxId | string | The tax ID to delete |

### `useGetOrgInvoices`
#### Description
A custom hook for fetching the organization's invoices.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | Invoice[] | Array of invoices |

### `useCreateCustomerPortalSession`
#### Description
A custom hook for creating a customer portal session.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | object | The customer portal session data |

### `useGetOrgLicenses`
#### Description
A custom hook for fetching the organization's licenses.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | License[] | Array of licenses |

### `useGetIdentityMembershipOrgs`
#### Description
A custom hook for fetching the identity memberships for an organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| identityMemberships | IdentityMembershipOrg[] | Array of identity memberships |

### `useDeleteOrgById`
#### Description
A custom hook for deleting an organization by its ID.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organization | Organization | The deleted organization object |

### `useGetOrganizationGroups`
#### Description
A custom hook for fetching the groups of an organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| organizationId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| groups | TGroupOrgMembership[] | Array of group memberships |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides hooks for data fetching and caching |
| @app/config/request | Provides the `apiRequest` utility for making API calls |

## Error Handling
The code uses React Query's built-in error handling. Errors are propagated to the components using these hooks, where they can be handled appropriately.

## Side Effects
Most functions in this file have side effects related to API calls and cache invalidation. React Query handles these side effects, including refetching and cache updates.