---
title: "mutations.tsx"
---

## High-level description
This file contains React hooks for managing Certificate Authority (CA) related mutations in a frontend application. It utilizes React Query for state management and API interactions. The hooks provide functionality for creating, updating, deleting, and managing various aspects of CAs and certificates.

## Code Structure
The file exports several custom hooks, each corresponding to a specific CA-related operation. These hooks use the `useMutation` function from React Query to handle API requests and manage the mutation state. The hooks also use a `queryClient` to invalidate and refetch relevant queries after successful mutations.

## Symbols

### `useCreateCa`
#### Description
A hook for creating a new Certificate Authority.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TCreateCaDTO | DTO containing CA creation details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

#### Internal Logic
- Sends a POST request to create a new CA
- On success, invalidates the workspace CAs query

### `useUpdateCa`
#### Description
A hook for updating an existing Certificate Authority.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TUpdateCaDTO | DTO containing CA update details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

#### Internal Logic
- Sends a PATCH request to update a CA
- On success, invalidates the workspace CAs query

### `useDeleteCa`
#### Description
A hook for deleting a Certificate Authority.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TDeleteCaDTO | DTO containing CA deletion details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

#### Internal Logic
- Sends a DELETE request to remove a CA
- On success, invalidates the workspace CAs query

### `useSignIntermediate`
#### Description
A hook for signing an intermediate certificate.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TSignIntermediateDTO | DTO containing signing details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

### `useImportCaCertificate`
#### Description
A hook for importing a CA certificate.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TImportCaCertificateDTO | DTO containing import details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

#### Internal Logic
- Sends a POST request to import a CA certificate
- On success, invalidates multiple related queries

### `useCreateCertificate`
#### Description
A hook for creating a new certificate.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TCreateCertificateDTO | DTO containing certificate creation details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

#### Internal Logic
- Sends a POST request to create a new certificate
- On success, invalidates the workspace certificates query

### `useRenewCa`
#### Description
A hook for renewing a Certificate Authority.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| body | TRenewCaDTO | DTO containing CA renewal details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result |

#### Internal Logic
- Sends a POST request to renew a CA
- On success, invalidates multiple related queries

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useMutation` and `useQueryClient` hooks |
| @app/config/request | Provides the `apiRequest` object for making API calls |

## TODOs
- Consider renaming `useSignIntermediate`
- Consider renaming `useCreateCertificate` to `useIssueCertificate`