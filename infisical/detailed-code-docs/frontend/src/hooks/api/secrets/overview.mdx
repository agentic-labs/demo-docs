---
title: "Overview"
---

## High-level description
This directory contains React hooks and utility functions for managing secrets in a frontend application. It provides a comprehensive set of tools for creating, updating, deleting, and fetching secrets, as well as handling batch operations and secret versioning. The code is organized into separate files for constants, mutations, queries, and type definitions, promoting modularity and maintainability.

## What does it do?
The code in this directory enables developers to interact with a secret management system through a set of React hooks. These hooks allow for various operations on secrets, such as:

1. Creating new secrets in specific environments
2. Updating existing secrets
3. Deleting secrets
4. Performing batch operations (create, update, delete) on multiple secrets
5. Moving secrets between environments or paths
6. Fetching project secrets for specific environments or across all environments
7. Retrieving secret versions
8. Backfilling secret references

The hooks utilize React Query for efficient data fetching, caching, and state management. They also handle error scenarios and provide notifications for API errors.

## Key Files

1. `constants.ts`: Defines error messages related to unauthorized access to secrets.

2. `index.ts`: Serves as the main entry point, exporting all the hooks from mutations and queries files for easy access.

3. `mutations.tsx`: Contains hooks for modifying secrets, including:
   - `useCreateSecretV3`
   - `useUpdateSecretV3`
   - `useDeleteSecretV3`
   - `useCreateSecretBatch`
   - `useUpdateSecretBatch`
   - `useDeleteSecretBatch`
   - `useMoveSecrets`
   - `useBackfillSecretReference`

4. `queries.tsx`: Provides hooks for fetching secret data:
   - `useGetProjectSecrets`
   - `useGetProjectSecretsAllEnv`
   - `useGetSecretVersion`

5. `types.ts`: Defines TypeScript types and interfaces used throughout the secret management system, including:
   - Secret types (Shared, Personal)
   - Encrypted secret structure
   - Raw and sanitized secret representations
   - DTOs for various API operations

## Dependencies
The code relies on several external libraries and internal modules:

1. @tanstack/react-query: Used for data fetching, caching, and state management.
2. axios: For making HTTP requests to the API.
3. @app/config/request: Provides the `apiRequest` function for API calls.
4. @app/components/notifications: Used for displaying error notifications.
5. @app/hooks/useToggle: A custom hook for toggle state management.

## Configuration
The code uses environment-specific configurations and API endpoints for secret management. These are likely defined in a separate configuration file or environment variables. The API endpoints used include:

- `/api/v3/secrets/raw/:secretKey`
- `/api/v3/secrets/batch/raw`
- `/api/v3/secrets/move`
- `/api/v3/secrets/backfill-secret-references`

The exact configuration of these endpoints and any authentication mechanisms are not visible in the provided code snippets.

In summary, this directory provides a comprehensive set of tools for managing secrets in a React-based frontend application. It offers a well-structured and type-safe approach to interacting with a secret management API, handling various operations such as creating, updating, deleting, and fetching secrets, as well as more advanced features like batch operations and secret versioning.