---
title: "queries.tsx"
---

## High-level description
This code defines React Query hooks for fetching certificate templates and EST (Enrollment over Secure Transport) configurations. It provides two main functions: `useGetCertTemplate` and `useGetEstConfig`, which are used to retrieve certificate template and EST configuration data from an API.

## Code Structure
The code is organized into three main parts:
1. Import statements
2. Query key definitions
3. Custom hooks for data fetching

## Symbols

### `certTemplateKeys`
#### Description
An object that defines query keys for React Query. It contains two functions that generate unique keys for different queries.

#### Internal Logic
- `getCertTemplateById`: Returns a key array for fetching a certificate template by ID.
- `getEstConfig`: Returns a key array for fetching EST configuration by certificate template ID.

### `useGetCertTemplate`
#### Description
A custom hook that fetches a certificate template by its ID using React Query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | The ID of the certificate template to fetch |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | UseQueryResult&lt;TCertificateTemplate&gt; | The query result containing the certificate template data |

#### Internal Logic
- Uses `useQuery` from React Query to fetch data.
- Calls the API endpoint `/api/v1/pki/certificate-templates/${id}`.
- The query is enabled only when `id` is truthy.

### `useGetEstConfig`
#### Description
A custom hook that fetches the EST configuration for a given certificate template ID using React Query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| certificateTemplateId | string | The ID of the certificate template to fetch EST config for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | UseQueryResult&lt;TEstConfig&gt; | The query result containing the EST configuration data |

#### Internal Logic
- Uses `useQuery` from React Query to fetch data.
- Calls the API endpoint `/api/v1/pki/certificate-templates/${certificateTemplateId}/est-config`.
- The query is enabled only when `certificateTemplateId` is truthy.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useQuery` hook for data fetching |
| @app/config/request | Provides the `apiRequest` object for making API calls |

## References
The custom hooks defined in this file are used in other parts of the application, such as the `CertificateTemplateModal` component in the related code snippet. This component uses the `useGetCertTemplate` hook to fetch and display certificate template data.