---
title: "mutation.tsx"
---

## High-level description
This file defines custom React hooks for managing identity project additional privileges using React Query. It provides functionality for creating, updating, and deleting identity project privileges through API requests and handles the invalidation of related queries upon successful mutations.

## Code Structure
The file exports three custom hooks: `useCreateIdentityProjectAdditionalPrivilege`, `useUpdateIdentityProjectAdditionalPrivilege`, and `useDeleteIdentityProjectAdditionalPrivilege`. Each hook utilizes the `useMutation` hook from React Query to handle API requests and cache invalidation.

## References
- `apiRequest` from "@app/config/request"
- `identitiyProjectPrivilegeKeys` from "./queries"
- Types from "./types"

## Symbols

### useCreateIdentityProjectAdditionalPrivilege
#### Description
A custom hook for creating a new identity project additional privilege.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to create a mutation function.
2. Sends a POST request to "/api/v1/additional-privilege/identity/permanent" with the provided DTO.
3. On success, invalidates the related query using `queryClient.invalidateQueries`.

### useUpdateIdentityProjectAdditionalPrivilege
#### Description
A custom hook for updating an existing identity project additional privilege.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to create a mutation function.
2. Sends a PATCH request to "/api/v1/additional-privilege/identity" with the provided DTO.
3. On success, invalidates the related query using `queryClient.invalidateQueries`.

### useDeleteIdentityProjectAdditionalPrivilege
#### Description
A custom hook for deleting an existing identity project additional privilege.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to create a mutation function.
2. Sends a DELETE request to "/api/v1/additional-privilege/identity" with the provided DTO.
3. On success, invalidates the related query using `queryClient.invalidateQueries`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides hooks for managing API requests and caching |
| @app/config/request | Provides the `apiRequest` function for making API calls |

## Error Handling
Error handling is managed by React Query's built-in error handling mechanism. Errors from API requests will be captured and can be accessed through the mutation result object.