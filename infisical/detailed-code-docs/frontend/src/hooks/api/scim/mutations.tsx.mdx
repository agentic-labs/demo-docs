---
title: "mutations.tsx"
---

## High-level description
This code defines two custom React hooks for managing SCIM (System for Cross-domain Identity Management) tokens using the React Query library. The hooks provide functionality to create and delete SCIM tokens, making API requests and managing the query cache accordingly.

## Code Structure
The file exports two main functions: `useCreateScimToken` and `useDeleteScimToken`. Both functions utilize the `useMutation` hook from React Query to handle API mutations and cache invalidation.

## References
- `scimKeys` from "./queries"
- `CreateScimTokenDTO`, `CreateScimTokenRes`, `DeleteScimTokenDTO` from "./types"
- `apiRequest` from "@app/config/request"

## Symbols

### `useCreateScimToken`
#### Description
A custom React hook that creates a SCIM token using a POST request and invalidates the related query cache on success.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to define the mutation function.
2. Sends a POST request to "/api/v1/scim/scim-tokens" with the provided data.
3. On success, invalidates the query cache for SCIM tokens of the given organization.

### `useDeleteScimToken`
#### Description
A custom React hook that deletes a SCIM token using a DELETE request and invalidates the related query cache on success.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to define the mutation function.
2. Sends a DELETE request to "/api/v1/scim/scim-tokens/{scimTokenId}".
3. On success, invalidates the query cache for SCIM tokens of the given organization.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useMutation` and `useQueryClient` hooks for managing API mutations and cache |
| @app/config/request | Provides the `apiRequest` object for making API requests |

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/scim/scim-tokens | POST | CreateScimTokenDTO | CreateScimTokenRes | Creates a new SCIM token |
| /api/v1/scim/scim-tokens/{scimTokenId} | DELETE | DeleteScimTokenDTO | CreateScimTokenRes | Deletes a SCIM token |

Note: The exact structure of CreateScimTokenDTO, CreateScimTokenRes, and DeleteScimTokenDTO are not provided in this file and are likely defined in the "./types" file.