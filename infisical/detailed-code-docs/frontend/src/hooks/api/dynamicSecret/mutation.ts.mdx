---
title: "mutation.ts"
---

## High-level description
This code defines custom React hooks for creating, updating, and deleting dynamic secrets in a frontend application. It uses React Query for state management and API interactions, providing a clean interface for managing dynamic secrets.

## Code Structure
The code exports three main hooks: `useCreateDynamicSecret`, `useUpdateDynamicSecret`, and `useDeleteDynamicSecret`. Each hook uses the `useMutation` function from React Query to handle API requests and cache invalidation.

## Symbols

### `useCreateDynamicSecret`
#### Description
A custom hook for creating a new dynamic secret.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutationResult | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to handle the API request.
2. Sends a POST request to `/api/v1/dynamic-secrets` with the provided DTO.
3. On success, invalidates the relevant query cache.

### `useUpdateDynamicSecret`
#### Description
A custom hook for updating an existing dynamic secret.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutationResult | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to handle the API request.
2. Sends a PATCH request to `/api/v1/dynamic-secrets/${dto.name}` with the provided DTO.
3. On success, invalidates the relevant query cache.

### `useDeleteDynamicSecret`
#### Description
A custom hook for deleting an existing dynamic secret.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutationResult | UseMutationResult | React Query mutation result object |

#### Internal Logic
1. Uses `useMutation` to handle the API request.
2. Sends a DELETE request to `/api/v1/dynamic-secrets/${dto.name}` with the provided DTO.
3. On success, invalidates the relevant query cache.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useMutation` and `useQueryClient` hooks for state management |
| @app/config/request | Provides the `apiRequest` object for making API calls |
| ./queries | Provides the `dynamicSecretKeys` object for cache invalidation |
| ./types | Provides type definitions for DTOs and dynamic secrets |

## Error Handling
Error handling is not explicitly implemented in these hooks. It's assumed that error handling is managed by the components using these hooks or by a global error handler.