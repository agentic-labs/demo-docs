---
title: "Overview"
---

## High-level description
This directory contains React hooks and TypeScript types for managing secret sharing functionality in a frontend application. It provides a set of API hooks for creating, retrieving, and deleting shared secrets, as well as type definitions for the data structures used in these operations.

## What does it do?
The code in this directory enables the frontend application to interact with a secret sharing API. It allows users to:

1. Create new shared secrets, both regular and public.
2. Retrieve a list of shared secrets with pagination.
3. Fetch a specific active shared secret by its ID and hashed value.
4. Delete existing shared secrets.

The shared secrets are encrypted and can have various properties such as expiration dates, view limits, and access types. The hooks use React Query for efficient data fetching, caching, and state management.

## Entry points
The main entry point for this functionality is the `index.ts` file, which re-exports all the hooks and types from the other files in the directory. Developers can import everything they need from this single file:

```typescript
import { useCreateSharedSecret, useGetSharedSecrets, TSharedSecret } from './hooks/api/secretSharing';
```

The core functionality is split into three main files:

1. `mutations.ts`: Contains hooks for creating and deleting shared secrets.
2. `queries.ts`: Provides hooks for fetching shared secrets.
3. `types.ts`: Defines TypeScript types and enums used throughout the secret sharing functionality.

## Key Files

### mutations.ts
This file exports three custom hooks:
- `useCreateSharedSecret`: Creates a new shared secret.
- `useCreatePublicSharedSecret`: Creates a new public shared secret.
- `useDeleteSharedSecret`: Deletes an existing shared secret.

These hooks use React Query's `useMutation` to manage API requests and update the application state.

### queries.ts
This file exports two custom hooks:
- `useGetSharedSecrets`: Fetches a paginated list of shared secrets.
- `useGetActiveSharedSecretById`: Retrieves a specific active shared secret by its ID and hashed value.

It also defines `secretSharingKeys`, an object that provides query keys for React Query to manage caching and invalidation of shared secrets data.

### types.ts
This file defines the TypeScript types and enums used throughout the secret sharing functionality:
- `TSharedSecret`: Defines the structure of a shared secret object.
- `TCreateSharedSecretRequest`: Specifies the structure for creating a shared secret.
- `TViewSharedSecretResponse`: Defines the response structure when viewing a shared secret.
- `TDeleteSharedSecretRequest`: Specifies the structure for deleting a shared secret.
- `SecretSharingAccessType`: An enum defining possible access types for shared secrets.

## Dependencies
The main external dependency for this module is `@tanstack/react-query`, which is used for managing API requests, caching, and state updates. The version is not specified in the provided code snippets.

The code also relies on an internal `apiRequest` object from `@app/config/request` for making API calls.

## Configuration
While there are no explicit configuration files, the API endpoints used in the hooks suggest the following structure:

- Create shared secret: POST `/api/v1/secret-sharing`
- Create public shared secret: POST `/api/v1/secret-sharing/public`
- Delete shared secret: DELETE `/api/v1/secret-sharing/{sharedSecretId}`
- Get shared secrets: GET `/api/v1/secret-sharing/`
- Get active shared secret: GET `/api/v1/secret-sharing/public/{sharedSecretId}`

The base URL for these endpoints would typically be configured elsewhere in the application.

The secret sharing functionality supports various options that can be configured when creating a secret:
- Expiration date
- Expiration after a certain number of views
- Access type (Anyone or Organization)
- Custom name for the secret

These options provide flexibility in how secrets are shared and managed within the application.

In summary, this directory provides a comprehensive set of tools for managing shared secrets in a React-based frontend application, with a focus on type safety, efficient data management, and flexible secret sharing options.