---
title: "queries.tsx"
---

Here's a documentation of the target file `frontend/src/hooks/api/users/queries.tsx`:

## High-level description
This file contains React Query hooks and functions for fetching and managing user-related data in the Infisical application. It includes queries for user details, API keys, sessions, and various user actions.

## Code Structure
The file defines a set of query keys and functions that interact with the API to fetch and manage user data. It uses the `@tanstack/react-query` library for state management and the `apiRequest` utility for making API calls.

## Symbols

### `userKeys`
#### Description
An object containing query keys for various user-related queries. These keys are used to identify and cache query results.

### `fetchUserDetails`
#### Description
An async function that fetches the current user's details from the API.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user | User & UserEnc | The user details including encrypted data |

### `useGetUser`
#### Description
A custom hook that uses React Query to fetch and cache the current user's details.

### `useDeleteMe`
#### Description
A custom hook for deleting the current user's account. It also clears local storage and the query cache upon successful deletion.

### `fetchUserAction`
#### Description
An async function that fetches a specific user action from the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| action | string | The action to fetch |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| userAction | string | The fetched user action |

### `fetchUserProjectFavorites`
#### Description
An async function that fetches the user's favorite projects for a specific organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| projectFavorites | string[] | An array of favorite project IDs |

### `useRenameUser`
#### Description
A custom hook for renaming the current user.

### `useUpdateUserAuthMethods`
#### Description
A custom hook for updating the user's authentication methods.

### `useGetUserAction`
#### Description
A custom hook that fetches and caches a specific user action.

### `fetchOrgUsers`
#### Description
An async function that fetches users for a specific organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| users | OrgUser[] | An array of organization users |

### `useGetUserProjectFavorites`
#### Description
A custom hook that fetches and caches the user's favorite projects for a specific organization.

### `useGetOrgUsers`
#### Description
A custom hook that fetches and caches users for a specific organization.

### `useAddUsersToOrg`
#### Description
A custom hook for adding users to an organization.

### `useGetOrgMembership`
#### Description
A custom hook that fetches and caches a specific organization membership.

### `useGetOrgMembershipProjectMemberships`
#### Description
A custom hook that fetches and caches project memberships for a specific organization membership.

### `useDeleteOrgMembership`
#### Description
A custom hook for deleting an organization membership.

### `useDeactivateOrgMembership`
#### Description
A custom hook for deactivating an organization membership.

### `useUpdateOrgMembership`
#### Description
A custom hook for updating an organization membership.

### `useRegisterUserAction`
#### Description
A custom hook for registering a user action.

### `useLogoutUser`
#### Description
A custom hook for logging out the current user. It clears various storage items and optionally clears the query cache.

### `useGetMyIp`
#### Description
A custom hook that fetches and caches the user's IP address.

### `useGetMyAPIKeys`
#### Description
A custom hook that fetches and caches the user's API keys.

### `useGetMyAPIKeysV2`
#### Description
A custom hook that fetches and caches the user's API keys using the V2 endpoint.

### `useCreateAPIKey`
#### Description
A custom hook for creating a new API key.

### `useDeleteAPIKey`
#### Description
A custom hook for deleting an API key.

### `useGetMySessions`
#### Description
A custom hook that fetches and caches the user's active sessions.

### `useRevokeMySessions`
#### Description
A custom hook for revoking all of the user's sessions.

### `useUpdateMfaEnabled`
#### Description
A custom hook for updating the user's MFA (Multi-Factor Authentication) status.

### `fetchMyOrganizationProjects`
#### Description
An async function that fetches the user's projects for a specific organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The organization ID |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| workspaces | any[] | An array of user's projects (workspaces) |

### `useGetMyOrganizationProjects`
#### Description
A custom hook that fetches and caches the user's projects for a specific organization.

### `fetchMyPrivateKey`
#### Description
An async function that fetches the user's private key.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| privateKey | string | The user's private key |

## Dependencies
The file imports and uses various types and utilities from other parts of the application, including API request utilities, constants, and type definitions.

Note: This documentation provides an overview of the main components in the file. Some details may be omitted for brevity.