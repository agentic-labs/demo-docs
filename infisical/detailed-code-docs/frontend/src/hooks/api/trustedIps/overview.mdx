---
title: "Overview"
---

## High-level description

This directory contains custom React hooks for managing trusted IP addresses within a workspace. It provides functionality for fetching, adding, updating, and deleting trusted IPs, utilizing React Query for efficient data fetching and state management. The code is organized into three main files: an index file for exports, a queries file containing the hook implementations, and a types file defining the structure of a trusted IP.

## What does it do?

The code in this directory enables the frontend application to interact with a backend API to manage a list of trusted IP addresses for a workspace. Here's a breakdown of the main functionalities:

1. Fetching trusted IPs: It allows the application to retrieve a list of all trusted IP addresses associated with a specific workspace.

2. Adding new trusted IPs: The code provides a way to add a new IP address to the list of trusted IPs for a workspace, including optional comments and an active status.

3. Updating existing trusted IPs: It enables the modification of existing trusted IP entries, allowing changes to the IP address, comment, or active status.

4. Deleting trusted IPs: The code supports the removal of a trusted IP address from a workspace.

These operations are implemented as React hooks, which can be easily integrated into React components. The hooks use React Query to manage the data fetching, caching, and synchronization with the server, providing a smooth and efficient user experience.

## Key Files

1. `index.ts`: This file serves as the main entry point for the directory, exporting all the custom hooks defined in the `queries.ts` file. It simplifies the import process for other parts of the application that need to use these hooks.

2. `queries.ts`: This file contains the implementation of four main hooks:
   - `useGetTrustedIps`: Fetches the list of trusted IPs for a workspace.
   - `useAddTrustedIp`: Adds a new trusted IP to a workspace.
   - `useUpdateTrustedIp`: Updates an existing trusted IP in a workspace.
   - `useDeleteTrustedIp`: Deletes a trusted IP from a workspace.

   Each hook utilizes React Query's `useQuery` or `useMutation` to handle API requests and manage the query cache.

3. `types.ts`: This file defines the `TrustedIp` type, which represents the structure of a trusted IP address entity. It includes properties such as `id`, `projectId`, `ipAddress`, `type` (IPv4 or IPv6), `isActive`, `comment`, and an optional `prefix`.

## Dependencies

The code relies on the following main dependencies:

1. `@tanstack/react-query` (version not specified): This library is used for managing server state in React applications. It provides the `useQuery` and `useMutation` hooks that are central to the implementation of the custom hooks in this directory.

2. `@app/config/request`: This is likely an internal module used for making API requests. It provides the `apiRequest` object used in the API calls.

The choice of React Query allows for efficient data fetching, caching, and synchronization between the client and server, reducing unnecessary network requests and improving the overall performance of the application.

## Configuration

While there are no explicit configuration files in this directory, the code does use API endpoints that follow a specific structure:

- `/api/v1/workspace/${workspaceId}/trusted-ips`: Used for fetching and adding trusted IPs.
- `/api/v1/workspace/${workspaceId}/trusted-ips/${trustedIpId}`: Used for updating and deleting specific trusted IPs.

These endpoints suggest that the application is versioned (v1) and organized around workspaces. The actual base URL for these endpoints is likely configured elsewhere in the application.

In summary, this directory provides a set of React hooks that encapsulate the logic for managing trusted IP addresses in a workspace. By using React Query, it offers an efficient and easy-to-use interface for components that need to interact with trusted IP data, handling data fetching, caching, and synchronization seamlessly.