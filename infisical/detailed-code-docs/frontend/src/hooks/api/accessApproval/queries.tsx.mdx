---
title: "queries.tsx"
---

## High-level description
This code defines React hooks and types for managing access approval policies and requests in a project. It provides functionality to fetch, create, update, and delete access approval policies, as well as create and review access requests.

## Code Structure
The code is organized into several files:
1. `queries.tsx`: Defines query keys and hooks for fetching access approval data.
2. `types.ts`: Contains type definitions for access approval policies, requests, and related data structures.
3. `AccessApprovalRequest.tsx`: A React component for displaying and managing access approval requests.
4. `mutation.tsx`: Defines mutation hooks for creating, updating, and deleting access approval policies and requests.

## Symbols

### `accessApprovalKeys`
#### Description
An object containing functions to generate query keys for various access approval-related queries.

### `useGetAccessPolicyApprovalCount`
#### Description
A hook that fetches the count of access policy approvals for a given project and environment.

### `useGetAccessApprovalPolicies`
#### Description
A hook that fetches access approval policies for a given project.

### `useGetAccessApprovalRequests`
#### Description
A hook that fetches access approval requests for a given project, optionally filtered by environment and requester.

### `useGetAccessRequestsCount`
#### Description
A hook that fetches the count of access requests for a given project.

### `AccessApprovalRequest` (Component)
#### Description
A React component that displays and manages access approval requests for a project.

### `useCreateAccessApprovalPolicy`
#### Description
A mutation hook for creating a new access approval policy.

### `useUpdateAccessApprovalPolicy`
#### Description
A mutation hook for updating an existing access approval policy.

### `useDeleteAccessApprovalPolicy`
#### Description
A mutation hook for deleting an access approval policy.

### `useCreateAccessRequest`
#### Description
A mutation hook for creating a new access request.

### `useReviewAccessRequest`
#### Description
A mutation hook for reviewing (approving or rejecting) an access request.

## Dependencies
- React
- @tanstack/react-query
- @casl/ability
- date-fns
- framer-motion
- @fortawesome/react-fontawesome
- Various custom components and hooks from the application

## Error Handling
The code relies on the error handling mechanisms provided by React Query. Errors from API calls will be caught and can be handled in the components using these hooks.

## Logging
No explicit logging mechanisms are implemented in this code.

## API/Interface Reference
The code interacts with several API endpoints:
- GET `/api/v1/access-approvals/policies`
- GET `/api/v1/access-approvals/requests`
- GET `/api/v1/access-approvals/requests/count`
- POST `/api/v1/access-approvals/policies`
- PATCH `/api/v1/access-approvals/policies/:id`
- DELETE `/api/v1/access-approvals/policies/:id`
- POST `/api/v1/access-approvals/requests`
- POST `/api/v1/access-approvals/requests/:id/review`

These endpoints are used to fetch, create, update, and delete access approval policies and requests.