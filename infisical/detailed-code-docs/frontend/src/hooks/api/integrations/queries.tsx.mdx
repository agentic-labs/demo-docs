---
title: "queries.tsx"
---

## High-level description
This code defines custom React hooks for managing integrations in a web application. It provides functionality for creating, retrieving, deleting, and syncing integrations between the application and various third-party services.

## Code Structure
The main symbols in this code are custom hooks that interact with an API to perform CRUD operations on integrations. These hooks use the react-query library for state management and caching. The hooks are designed to be used in React components to manage integration-related data and operations.

## Symbols

### `integrationQueryKeys`
#### Description
An object containing functions that generate query keys for different integration-related queries.

### `useGetCloudIntegrations`
#### Description
A custom hook that fetches available cloud integrations.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| query | UseQueryResult | React Query result object containing integration data and query state |

### `useCreateIntegration`
#### Description
A custom hook for creating a new integration.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object for creating an integration |

#### Internal Logic
1. Accepts integration details as input
2. Sends a POST request to create the integration
3. Invalidates related queries on success

### `useDeleteIntegration`
#### Description
A custom hook for deleting an existing integration.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object for deleting an integration |

#### Internal Logic
1. Accepts integration ID and workspace ID as input
2. Sends a DELETE request to remove the integration
3. Invalidates related queries on success

### `useSyncIntegration`
#### Description
A custom hook for manually syncing an integration.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutation | UseMutationResult | React Query mutation result object for syncing an integration |

#### Internal Logic
1. Accepts integration ID as input
2. Sends a POST request to trigger manual sync
3. Displays a success notification on completion

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | State management and data fetching |
| @app/components/notifications | Displaying notifications |
| @app/config/request | API request configuration |

## Error Handling
The hooks use react-query's built-in error handling. Errors are propagated to the components using these hooks, which can then handle them appropriately.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /api/v1/integration-auth/integration-options | GET | Fetch available cloud integrations |
| /api/v1/integration | POST | Create a new integration |
| /api/v1/integration/:id | DELETE | Delete an existing integration |
| /api/v1/integration/:id/sync | POST | Manually sync an integration |

This code provides a comprehensive set of hooks for managing integrations in a React application, leveraging react-query for efficient data fetching and state management.