---
title: "mutation.tsx"
---

## High-level description
This code defines custom React hooks for managing secret imports in a project. It utilizes React Query for state management and API interactions, providing functions to create, update, resync, and delete secret imports.

## Code Structure
The file exports four custom hooks: `useCreateSecretImport`, `useUpdateSecretImport`, `useResyncSecretReplication`, and `useDeleteSecretImport`. Each hook uses the `useMutation` function from React Query to handle API requests and manage the mutation state.

## References
- `secretImportKeys`: Imported from "./queries", used for invalidating queries.
- `apiRequest`: Imported from "@app/config/request", used for making API calls.
- Types: `TCreateSecretImportDTO`, `TDeleteSecretImportDTO`, `TResyncSecretReplicationDTO`, `TUpdateSecretImportDTO` imported from "./types".

## Symbols

### useCreateSecretImport
#### Description
A custom hook for creating a new secret import.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| import | TCreateSecretImportDTO | DTO containing secret import details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutate | Function | Mutation function to create a secret import |

#### Internal Logic
1. Makes a POST request to "/api/v1/secret-imports" with the provided data.
2. On success, invalidates related queries to refresh the data.

### useUpdateSecretImport
#### Description
A custom hook for updating an existing secret import.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| updateData | TUpdateSecretImportDTO | DTO containing update details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutate | Function | Mutation function to update a secret import |

#### Internal Logic
1. Makes a PATCH request to "/api/v1/secret-imports/{id}" with the provided data.
2. On success, invalidates related queries to refresh the data.

### useResyncSecretReplication
#### Description
A custom hook for resyncing secret replication.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| resyncData | TResyncSecretReplicationDTO | DTO containing resync details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutate | Function | Mutation function to resync secret replication |

#### Internal Logic
Makes a POST request to "/api/v1/secret-imports/{id}/replication-resync" with the provided data.

### useDeleteSecretImport
#### Description
A custom hook for deleting a secret import.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| deleteData | TDeleteSecretImportDTO | DTO containing delete details |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mutate | Function | Mutation function to delete a secret import |

#### Internal Logic
1. Makes a DELETE request to "/api/v1/secret-imports/{id}" with the provided data.
2. On success, invalidates related queries to refresh the data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/react-query | Provides the `useMutation` and `useQueryClient` hooks for state management |
| @app/config/request | Provides the `apiRequest` object for making API calls |

## Error Handling
Error handling is not explicitly implemented in these hooks. It's assumed that React Query's built-in error handling mechanisms are used.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /api/v1/secret-imports | POST | TCreateSecretImportDTO | {} | Create a new secret import |
| /api/v1/secret-imports/{id} | PATCH | TUpdateSecretImportDTO | {} | Update an existing secret import |
| /api/v1/secret-imports/{id}/replication-resync | POST | TResyncSecretReplicationDTO | {} | Resync secret replication |
| /api/v1/secret-imports/{id} | DELETE | TDeleteSecretImportDTO | {} | Delete a secret import |

Note: The actual response types are not specified in the code and are assumed to be empty objects ({}).