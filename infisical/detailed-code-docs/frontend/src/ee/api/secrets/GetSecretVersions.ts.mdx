---
title: "GetSecretVersions.ts"
---

## High-level description
This code defines an asynchronous function `getSecretVersions` that fetches the version history of a specific secret using the SecurityClient. It takes the secret ID, offset, and limit as parameters and returns the version history or undefined if the request fails.

## Symbols

### `getSecretVersions`
#### Description
An asynchronous function that retrieves the version history of a secret using the SecurityClient. It constructs a URL with query parameters and sends a GET request to the server.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| secretId | string | The ID of the secret for which to fetch the version history |
| offset | number | The starting point of the query |
| limit | number | The maximum number of versions to retrieve |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Promise&lt;object \| undefined&gt; | A promise that resolves to the JSON response containing the secret versions, or undefined if the request fails |

#### Internal Logic
1. Constructs a URL using the provided `secretId` and query parameters `offset` and `limit`.
2. Sends a GET request to the constructed URL using `SecurityClient.fetchCall`.
3. If the response status is 200, it returns the JSON content of the response.
4. If the request fails, it logs an error message and returns undefined.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| SecurityClient | Used to make secure API calls to fetch secret versions |

## Error Handling
The function logs a console message if the request fails to get the secret version history. It returns `undefined` in case of failure, allowing the caller to handle the error appropriately.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| `/api/v1/secret/{secretId}/secret-versions` | GET | Query params: offset, limit | JSON object with secret versions | Retrieves the version history of a specific secret |

Note: The actual structure of the response JSON is not detailed in the provided code.