---
title: "Overview"
---

## High-level description
This code defines an asynchronous function `updateUserProjectPermission` that updates user permissions for a specific environment in a project. It uses a `SecurityClient` to make a POST request to an API endpoint, sending a list of permissions to be denied for a given membership ID.

## Symbols

### `updateUserProjectPermission`
#### Description
This asynchronous function updates user permissions for a specific environment in a project by sending a POST request to deny certain permissions.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| membershipId | string | The ID of a user's membership in a project |
| denials | Array&lt;{ability: string, environmentSlug: string}&gt; | An array of permissions to be denied, each containing an ability and an environment slug |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | Promise&lt;object \| undefined&gt; | A promise that resolves to the JSON response if successful, or undefined if the request fails |

#### Internal Logic
1. Constructs the API endpoint URL using the provided `membershipId`.
2. Sends a POST request to the endpoint using `SecurityClient.fetchCall`.
3. Sets the request headers to indicate JSON content.
4. Stringifies the `denials` array and sends it in the request body as `permissions`.
5. Handles the response:
   - If the status is 200, it returns the parsed JSON response.
   - If the request fails, it logs an error message and returns undefined.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| SecurityClient | Used to make secure API calls with the `fetchCall` method |

## Error Handling
The function includes basic error handling:
- If the API call fails or returns a non-200 status, it logs an error message to the console.
- In case of failure, the function returns `undefined` instead of throwing an error.

## Logging
The code includes a commented-out console.log statement for debugging purposes. When an error occurs, it logs a message to the console.

## TODOs
There is a commented-out console.log statement that could be used for debugging:
```typescript
// console.log({
//   permissions: denials
// }, res)
```
This might be useful for future debugging or could be removed if no longer needed.