---
title: "OrgPermissionContext.tsx"
---

## High-level description
This code defines a React context for managing organization permissions. It provides a context provider (`OrgPermissionProvider`) and a custom hook (`useOrgPermission`) to access and manage user permissions within an organization.

## Code Structure
The main components of this code are:
1. `OrgPermissionContext`: A React context for storing permission data.
2. `OrgPermissionProvider`: A component that fetches and provides permission data to its children.
3. `useOrgPermission`: A custom hook for consuming the permission context.

These components work together to manage and provide access to organization permissions throughout the application.

## References
- `useGetUserOrgPermissions` from `@app/hooks/api`
- `OrgUser` from `@app/hooks/api/types`
- `useOrganization` from `../OrganizationContext`
- `TOrgPermission` from `./types`

## Symbols

### OrgPermissionContext
#### Description
A React context created to store and provide organization permission data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | `null \| { permission: TOrgPermission; membership: OrgUser \| null; }` | The context value |

### OrgPermissionProvider
#### Description
A React component that fetches user permissions for the current organization and provides them to its children through the `OrgPermissionContext`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| children | ReactNode | Child components to be wrapped by the provider |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSX.Element | JSX.Element | The rendered component |

#### Internal Logic
1. Retrieves the current organization using `useOrganization`.
2. Fetches user permissions using `useGetUserOrgPermissions`.
3. Displays a loading indicator while fetching permissions.
4. Shows an error message if permissions fail to load.
5. Provides the fetched permissions to child components through the context.

### useOrgPermission
#### Description
A custom hook that provides access to the organization permission context.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ctx | `{ permission: TOrgPermission; membership: OrgUser \| null; }` | The organization permission context value |

#### Internal Logic
1. Retrieves the context value using `useContext`.
2. Throws an error if used outside of the `OrgPermissionProvider`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For creating and using React contexts and hooks |
| @app/hooks/api | For fetching user organization permissions |
| @app/hooks/api/types | For type definitions |
| ../OrganizationContext | For accessing the current organization |

## Error Handling
The code implements basic error handling:
1. Displays a loading indicator while fetching permissions.
2. Shows an error message if permissions fail to load.
3. Throws an error if `useOrgPermission` is used outside of the `OrgPermissionProvider`.