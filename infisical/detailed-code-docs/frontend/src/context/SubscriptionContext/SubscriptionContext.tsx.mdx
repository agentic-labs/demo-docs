---
title: "SubscriptionContext.tsx"
---

## High-level description
This code defines a React context for managing subscription-related information in an application. It provides a SubscriptionProvider component that fetches and stores subscription data, and a useSubscription hook for accessing this data throughout the application.

## Code Structure
The main symbols in this code are:
1. SubscriptionContext: A React context for storing subscription data.
2. SubscriptionProvider: A component that fetches and provides subscription data to its children.
3. useSubscription: A custom hook for accessing the subscription data.

These symbols are interconnected, with the SubscriptionProvider using the SubscriptionContext to provide data, and useSubscription accessing this data through the same context.

## Symbols

### SubscriptionContext
#### Description
A React context created to store subscription-related information.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | TSubscriptionContext \| null | The subscription data to be stored in the context |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Provider | React.Provider | A Provider component for the SubscriptionContext |
| Consumer | React.Consumer | A Consumer component for the SubscriptionContext |

### SubscriptionProvider
#### Description
A component that fetches subscription data and provides it to its children through the SubscriptionContext.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| children | ReactNode | The child components to be wrapped by the provider |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JSX.Element | JSX.Element | The provider component with its children |

#### Internal Logic
1. Uses the useOrganization hook to get the current organization.
2. Fetches subscription data using the useGetOrgSubscription hook.
3. Memoizes the subscription data and loading state.
4. Provides the memoized value to its children through the SubscriptionContext.Provider.

### useSubscription
#### Description
A custom hook that provides access to the subscription data stored in the SubscriptionContext.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ctx | TSubscriptionContext | The subscription context data |

#### Internal Logic
1. Uses the useContext hook to access the SubscriptionContext.
2. Throws an error if used outside of a SubscriptionContext.Provider.
3. Returns the context data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using React features like createContext, useContext, useMemo |
| @app/hooks/api | For using the useGetOrgSubscription hook |
| @app/hooks/api/types | For importing the SubscriptionPlan type |
| ../OrganizationContext | For using the useOrganization hook |

This code sets up a subscription management system using React context, allowing components to easily access and use subscription-related data throughout the application.