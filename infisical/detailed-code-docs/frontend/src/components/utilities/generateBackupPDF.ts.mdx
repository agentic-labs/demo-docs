---
title: "generateBackupPDF.ts"
---

## High-level description
This code defines functions to generate a PDF document containing emergency account details for Infisical users. The PDF includes a header with the user's name and creation date, followed by content with sign-in URL, email address, and a secret key.

## Code Structure
The main functions are `generateBackupPDF` and `generateBackupPDFAsync`, which use helper functions `createPdfHeader` and `createPdfContent` to construct the PDF. These functions utilize the jsPDF library to create and manipulate the PDF document.

## Symbols

### `generateBackupPDF`
#### Description
This function generates a PDF with emergency account details for an Infisical user and saves it immediately.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | PDFProps | Object containing personalName, personalEmail, and generatedKey |

#### Internal Logic
1. Creates a new jsPDF instance
2. Calls `createPdfHeader` and `createPdfContent` to populate the PDF
3. Saves the PDF as "Infisical Emergency Kit.pdf"

### `generateBackupPDFAsync`
#### Description
This function generates a PDF with emergency account details for an Infisical user and returns a promise for the save operation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | PDFProps | Object containing personalName, personalEmail, and generatedKey |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| promise | Promise | A promise that resolves when the PDF is saved |

#### Internal Logic
Similar to `generateBackupPDF`, but uses the `returnPromise` option when saving the PDF.

### `createPdfHeader`
#### Description
Creates the header section of the PDF, including a logo, user's name, and creation date.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| doc | jsPDF | The jsPDF instance to modify |
| personalName | string | The name of the user |

### `createPdfContent`
#### Description
Creates the main content of the PDF, including account details and recommendations.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| doc | jsPDF | The jsPDF instance to modify |
| personalEmail | string | The user's email address |
| generatedKey | string | The user's secret key |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| jsPDF | Used to create and manipulate PDF documents |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| imgData | string | (long base64 string) | Base64-encoded image data for the logo |

## Notes
- The code uses the current date to display the creation date on the PDF.
- The sign-in URL is dynamically generated based on the current window location.
- The PDF includes recommendations for storing the emergency kit securely.