---
title: "OnboardingCheck.ts"
---

## High-level description
This code defines an `onboardingCheck` function that checks the completion status of various onboarding steps for a user in an organization. It fetches user actions and organization data, updates state variables, and counts the total number of completed onboarding actions.

## Symbols

### onboardingCheck
#### Description
This asynchronous function checks which onboarding steps a user has already finished. It fetches user actions for specific events and organization users, then updates state variables accordingly.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The organization ID |
| setTotalOnboardingActionsDone | (value: number) =&gt; void | Optional function to set the total number of completed onboarding actions |
| setHasUserClickedSlack | (value: boolean) =&gt; void | Optional function to set whether the user has clicked the Slack CTA |
| setHasUserClickedIntro | (value: boolean) =&gt; void | Optional function to set whether the user has clicked the intro CTA |
| setHasUserPushedSecrets | (value: boolean) =&gt; void | Optional function to set whether the user has pushed secrets for the first time |
| setUsersInOrg | (value: boolean) =&gt; void | Optional function to set whether there are multiple users in the organization |

#### Internal Logic
1. Initialize a counter for completed actions.
2. Fetch and check the "slack_cta_clicked" user action:
   - If exists, increment the counter and update state if the setter is provided.
3. Fetch and check the "first_time_secrets_pushed" user action:
   - If exists, increment the counter and update state if the setter is provided.
4. Fetch and check the "intro_cta_clicked" user action:
   - If exists, increment the counter and update state if the setter is provided.
5. Fetch organization users:
   - If there's more than one user, increment the counter and update state if the setter is provided.
6. Update the total onboarding actions done if the setter is provided.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/hooks/api/users/queries | Provides `fetchOrgUsers` and `fetchUserAction` functions for data fetching |

## References
The code references the following external functions:
- `fetchOrgUsers`: Fetches users in an organization
- `fetchUserAction`: Fetches a specific user action

These functions are imported from "@app/hooks/api/users/queries" and are crucial for the functionality of `onboardingCheck`.