---
title: "Overview"
---

## High-level description
This directory contains utility functions and components for performing various checks and validations in a frontend application. It includes modules for onboarding checks, password validation, and temporary local storage access.

## What does it do?
The code in this directory performs several important functions:

1. Onboarding Check: It tracks and verifies the completion of various onboarding steps for users within an organization. This includes checking if users have clicked specific CTAs (Call to Action), pushed secrets for the first time, and if there are multiple users in the organization.

2. Password Validation: It provides comprehensive password validation functionality, ensuring that passwords meet specific criteria for strength and security. This includes checks for length, character types, entropy, and whether the password has been involved in known data breaches.

3. Temporary Local Storage: It offers a utility function for safely retrieving values from the browser's localStorage, with built-in warning mechanisms for missing or empty values.

## Key Files

1. `OnboardingCheck.ts`: Contains the `onboardingCheck` function, which verifies the completion status of various onboarding steps for a user in an organization.

2. `password/PasswordCheck.ts`: Implements the main `passwordCheck` function, orchestrating various password validation checks and updating error states.

3. `password/checkIsPasswordBreached.ts`: Provides a function to securely check if a password has been involved in a data breach using the "Have I Been Pwned" (HIBP) API.

4. `password/checkPassword.ts`: Defines a `checkPassword` function that performs a series of validation checks on a given password.

5. `password/passwordRegexes.ts`: Contains a set of regular expressions used for various aspects of password validation.

6. `tempLocalStorage.ts`: Defines a utility function for safely retrieving values from localStorage.

## Dependencies
The main external dependencies used in this directory are:

- `axios`: Used for making HTTP requests to the HIBP API in the password breach check functionality.
- `@app/hooks/api/users/queries`: Provides functions for fetching user actions and organization data in the onboarding check.

## Configuration
There are no explicit configuration files or environment variables used in this directory. However, the password validation criteria are defined within the code and could potentially be moved to a configuration file for easier maintenance and customization.

## Code Examples

1. Onboarding Check Function:

```typescript
export const onboardingCheck = async (
  orgId: string,
  setTotalOnboardingActionsDone?: (value: number) =&gt; void,
  setHasUserClickedSlack?: (value: boolean) =&gt; void,
  setHasUserClickedIntro?: (value: boolean) =&gt; void,
  setHasUserPushedSecrets?: (value: boolean) =&gt; void,
  setUsersInOrg?: (value: boolean) =&gt; void
): Promise&lt;void&gt; =&gt; {
  // ... (implementation details)
};
```

2. Password Check Function:

```typescript
export const passwordCheck = async (
  password: string,
  setPasswordErrorTooShort: (value: boolean) =&gt; void,
  setPasswordErrorTooLong: (value: boolean) =&gt; void,
  setPasswordErrorNoLetterChar: (value: boolean) =&gt; void,
  setPasswordErrorNoNumOrSpecialChar: (value: boolean) =&gt; void,
  setPasswordErrorRepeatedChar: (value: boolean) =&gt; void,
  setPasswordErrorEscapeChar: (value: boolean) =&gt; void,
  setPasswordErrorLowEntropy: (value: boolean) =&gt; void,
  setPasswordErrorBreached: (value: boolean) =&gt; void
): Promise&lt;boolean&gt; =&gt; {
  // ... (implementation details)
};
```

3. Temporary Local Storage Function:

```typescript
export const tempLocalStorage = (key: string): string =&gt; {
  const value = localStorage.getItem(key);
  if (!value || value === '') {
    console.warn(`No value found for key: ${key}`);
    return '';
  }
  return value;
};
```

## Security Considerations

1. The password validation implements the "k-Anonymity" model when checking for breached passwords, enhancing user privacy.
2. Sensitive data (encoded password and hash) is cleared from memory after use in the password breach check function.
3. API calls to external services (HIBP) are made over HTTPS, ensuring secure communication.
4. The "Add-Padding" header is used in API requests to prevent response size analysis, further enhancing privacy.

## Performance Considerations

1. The password validation process involves multiple regex checks and an asynchronous API call, which could impact performance for a large number of password checks.
2. The password breach check function implements a retry mechanism (up to 3 attempts) for API calls to handle potential network issues.
3. The use of complex regular expressions in password validation should be monitored for performance impact.

In conclusion, this directory provides a set of essential utility functions for user onboarding, password security, and local storage management in a frontend application. These utilities implement best practices for security and validation while considering performance aspects.