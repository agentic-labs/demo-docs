---
title: "Overview"
---

## High-level description
This directory contains a set of utility functions and regular expressions for password validation and security checks. The code is designed to ensure that passwords meet certain criteria for strength and have not been compromised in known data breaches.

## What does it do?
The code in this directory performs comprehensive password validation, including:

1. Checking password length (minimum and maximum)
2. Verifying the presence of letter characters
3. Ensuring the password contains numbers or special characters
4. Detecting repeated characters
5. Identifying escape characters
6. Assessing password entropy
7. Checking if the password has been involved in known data breaches

These checks are implemented to enhance the security of user accounts by enforcing strong password policies and alerting users to potential vulnerabilities in their chosen passwords.

## Key Files

1. `PasswordCheck.ts`: This file contains the main `passwordCheck` function, which orchestrates various password validation checks and updates error states accordingly.

2. `checkIsPasswordBreached.ts`: Implements a function to securely check if a password has been involved in a data breach using the "Have I Been Pwned" (HIBP) API.

3. `checkPassword.ts`: Defines a `checkPassword` function that performs a series of validation checks on a given password and returns a boolean indicating whether the password passes all checks.

4. `passwordRegexes.ts`: Contains a set of regular expressions used for various aspects of password validation, including character types, repeated characters, and potential low-entropy patterns.

## Dependencies
The main external dependency used in this directory is:

- `axios` (version not specified): Used for making HTTP requests to the HIBP API in the `checkIsPasswordBreached` function.

Axios was likely chosen for its ease of use, wide browser support, and built-in features like request and response interceptors, which can be useful for handling API requests.

## Configuration
There are no explicit configuration files or environment variables used in this directory. However, the password validation criteria are defined within the code and could potentially be moved to a configuration file for easier maintenance and customization.

## Code Examples

1. Password Check Function:

```typescript
export const passwordCheck = async (
  password: string,
  setPasswordErrorTooShort: (value: boolean) =&gt; void,
  setPasswordErrorTooLong: (value: boolean) =&gt; void,
  setPasswordErrorNoLetterChar: (value: boolean) =&gt; void,
  setPasswordErrorNoNumOrSpecialChar: (value: boolean) =&gt; void,
  setPasswordErrorRepeatedChar: (value: boolean) =&gt; void,
  setPasswordErrorEscapeChar: (value: boolean) =&gt; void,
  setPasswordErrorLowEntropy: (value: boolean) =&gt; void,
  setPasswordErrorBreached: (value: boolean) =&gt; void
): Promise&lt;boolean&gt; =&gt; {
  // ... (implementation details)
};
```

This function performs multiple checks on the password and updates various error states using the provided setter functions.

2. Password Breach Check:

```typescript
export const checkIsPasswordBreached = async (password: string): Promise&lt;boolean&gt; =&gt; {
  // ... (implementation details)
};
```

This function securely checks if a password has been involved in a data breach using the HIBP API.

3. Regular Expression Example:

```typescript
export const letterCharRegex = /[A-Za-zÀ-ÿ]/;
export const numAndSpecialCharRegex = /[0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.&lt;&gt;/?~\p{Emoji_Presentation}]/u;
```

These regular expressions are used to validate the presence of letter characters and numbers or special characters in passwords.

## Security Considerations

1. The code implements the "k-Anonymity" model when checking for breached passwords, sending only the first 5 characters of the password hash to the HIBP API.
2. Sensitive data (encoded password and hash) is cleared from memory after use in the `checkIsPasswordBreached` function.
3. The API call to HIBP is made over HTTPS, ensuring secure communication.
4. The "Add-Padding" header is used in the API request to prevent response size analysis, enhancing privacy.

## Performance Considerations

1. The password validation process involves multiple regex checks and an asynchronous API call, which could impact performance for a large number of password checks.
2. The `checkIsPasswordBreached` function implements a retry mechanism (up to 3 attempts) for API calls to handle potential network issues.
3. The use of complex regular expressions, particularly in the `lowEntropyRegexes` array, should be monitored for performance impact.

In conclusion, this directory provides a robust set of tools for password validation and security checks, implementing best practices for password strength and breach detection while considering security and performance aspects.