---
title: "intercom.ts"
---

## High-level description
This code implements the integration of Intercom, a customer messaging platform, into a web application. It provides functions to load the Intercom script, initialize (boot) the Intercom widget, and update its state.

## Symbols

### `load`
#### Description
This function loads the Intercom script into the web page. It uses an immediately invoked function expression (IIFE) to avoid polluting the global scope.

#### Inputs
None

#### Outputs
None

#### Internal Logic
1. Checks if Intercom is already loaded by looking for a function named `Intercom` in the `window` object.
2. If Intercom is already loaded, it reattaches the activator and updates settings.
3. If Intercom is not loaded:
   - Creates a placeholder function for `Intercom`.
   - Sets up a queue for future calls to Intercom.
   - Creates a function to load the Intercom script asynchronously.
   - Determines the appropriate method to execute the script loading function based on the document's ready state and browser support.

### `boot`
#### Description
This function initializes the Intercom widget with the provided options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| options | object | Optional configuration options for Intercom |

#### Outputs
None

#### Internal Logic
Calls the `Intercom` function with "boot" as the first argument, passing the `APPid` and any additional options provided.

### `update`
#### Description
This function triggers an update of the Intercom widget.

#### Inputs
None

#### Outputs
None

#### Internal Logic
Calls the `Intercom` function with "update" as the argument.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/components/utilities/config | Imports the `INTERCOMid` as `APPid` for Intercom configuration |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| APPid | string | - | The Intercom application ID used to initialize the widget |

## Error Handling
This code does not implement explicit error handling. It uses defensive programming techniques, such as checking for the existence of `window` and `window.Intercom` before calling methods, to prevent runtime errors.

## Performance Considerations
The Intercom script is loaded asynchronously to prevent blocking the main thread and improve page load performance.

## TODOs
The code includes multiple ESLint disable comments at the top of the file, suggesting that there might be room for improvement in code style and best practices adherence.