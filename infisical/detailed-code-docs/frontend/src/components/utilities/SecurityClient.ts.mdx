---
title: "SecurityClient.ts"
---

## High-level description
This code defines a `SecurityClient` class that provides utility methods for managing authentication tokens and making authenticated API requests. It handles various types of tokens, including provider auth tokens, signup tokens, MFA tokens, and general auth tokens.

## Symbols

### `SecurityClient`
#### Description
A static class that provides methods for managing authentication tokens and making authenticated API requests.

#### Internal Logic
- Uses localStorage to store and retrieve the provider auth token
- Utilizes imported functions to set and get other types of tokens
- Provides a method to make authenticated fetch requests

### `SecurityClient.setProviderAuthToken`
#### Description
Sets the provider authentication token in localStorage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tokenStr | string | The token string to be stored |

#### Internal Logic
Stores the provided token string in localStorage under the key `PROVIDER_AUTH_TOKEN_KEY`.

### `SecurityClient.getProviderAuthToken`
#### Description
Retrieves the provider authentication token from localStorage.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| token | string \| null | The stored provider auth token or null if not found |

### `SecurityClient.setSignupToken`
#### Description
Sets the signup temporary token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tokenStr | string | The signup token string to be set |

#### Internal Logic
Calls the imported `setSignupTempToken` function to set the signup token.

### `SecurityClient.setMfaToken`
#### Description
Sets the Multi-Factor Authentication (MFA) temporary token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tokenStr | string | The MFA token string to be set |

#### Internal Logic
Calls the imported `setMfaTempToken` function to set the MFA token.

### `SecurityClient.setToken`
#### Description
Sets the general authentication token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tokenStr | string | The auth token string to be set |

#### Internal Logic
Calls the imported `setAuthToken` function to set the auth token.

### `SecurityClient.fetchCall`
#### Description
Makes an authenticated fetch request by adding the authorization header with the current auth token.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| resource | RequestInfo | The resource to fetch |
| options | RequestInit \| undefined | Optional fetch options |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | Promise&lt;Response&gt; | The fetch response |

#### Internal Logic
1. Creates a new Request object with the provided resource and options
2. Retrieves the current auth token using `getAuthToken()`
3. If a token exists, adds it to the request headers as a Bearer token
4. Returns the result of calling `fetch()` with the modified request

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @app/reactQuery | Provides functions for managing various types of tokens |

## References
This code is referenced by and works in conjunction with other authentication-related components in the application, such as the `attemptCliLogin` function in the related code snippet. The `SecurityClient` methods are used to manage tokens during the login process and for making authenticated API calls.

## TODOs
The code includes a comment indicating that this module is deprecated in favor of the `apiRequest` module in the `config/api` directory. Future updates should consider migrating to the new module for consistency and maintenance purposes.