---
title: "downloadYaml.ts"
---

## High-level description
This file defines a function `downloadYaml` that is intended to download secrets as a .yml file. However, the main functionality is currently commented out, leaving only the function signature and type definitions active.

## Symbols

### `downloadYaml`
#### Description
This asynchronous function is designed to take an object containing secret data and an environment string, process the secrets, and download them as a YAML file. However, the actual implementation is currently commented out.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| obj | object | An object containing the secret data and environment |
| obj.data | SecretDataProps[] | An array of secret data to be downloaded |
| obj.env | string | The environment, used for naming the output file |

#### Outputs
The function doesn't explicitly return anything. When implemented, it would trigger a file download in the browser.

#### Internal Logic
The commented-out code suggests the following steps (when uncommented):
1. Create a new YAML document.
2. Check for overrides in the secret data.
3. For each secret:
   - Create a YAML node with the secret's key and value.
   - Add comments to the node.
4. Convert the YAML document to a string and format it.
5. Create a Blob from the formatted string.
6. Generate a download URL for the Blob.
7. Create an anchor element and trigger a click to download the file.

## Dependencies
The following dependencies are imported but currently commented out:
| Dependency | Purpose |
|:-----------|:--------|
| YAML | For creating and manipulating YAML documents |
| YAMLSeq | A specific YAML type, likely used for sequence representation |
| envMapping | Possibly used for mapping environment names to file names |
| checkOverrides | A function to check for overrides in the secret data |

The only active import is:
| Dependency | Purpose |
|:-----------|:--------|
| SecretDataProps | Type definition for the secret data |

## TODOs
The entire functionality of the `downloadYaml` function is commented out. This suggests that the implementation is either under development, being refactored, or temporarily disabled. The team should review and decide whether to implement or remove this functionality.