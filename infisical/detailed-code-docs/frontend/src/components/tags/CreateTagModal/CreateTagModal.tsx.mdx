---
title: "CreateTagModal.tsx"
---

## High-level description
This code defines a `CreateTagModal` component in React, which allows users to create a new tag with a specified slug and color. It uses React Hook Form for form management, Zod for schema validation, and various UI components from a custom component library.

## Code Structure
The main component `CreateTagModal` uses several hooks and components:
- `useForm` from react-hook-form for form management
- `useWorkspace` and `useCreateWsTag` custom hooks for workspace context and tag creation
- Various UI components like `Modal`, `Button`, `Input`, etc.
- `createNotification` function for displaying notifications

## Symbols

### `secretTagsColors`
#### Description
An array of predefined color objects for tags, each containing id, hex, rgba, and name properties.

### `isValidHexColor`
#### Description
A function that validates if a given string is a valid hexadecimal color code.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| hexColor | string | The color code to validate |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| (return value) | boolean | True if the input is a valid hex color, false otherwise |

### `createTagSchema`
#### Description
A Zod schema for validating the form data when creating a tag.

### `CreateTagModal`
#### Description
The main component that renders the modal for creating a new tag.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| isOpen | boolean | (optional) Controls whether the modal is open |
| onToggle | function | Callback to toggle the modal's open state |

#### Internal Logic
1. Sets up form management using `useForm` with Zod schema validation
2. Manages state for showing hex input and selected tag color
3. Handles form submission, creating a new tag using `createWsTag` mutation
4. Renders a form with inputs for tag slug and color selection
5. Provides color selection through predefined colors and custom hex input
6. Displays success or error notifications after tag creation attempt

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-hook-form | Form management |
| @hookform/resolvers/zod | Zod resolver for react-hook-form |
| zod | Schema validation |
| @sindresorhus/slugify | Slug generation |
| @fortawesome/react-fontawesome | Icon components |
| @app/components/notifications | Notification system |
| @app/components/v2 | Custom UI components |
| @app/context | Workspace context |
| @app/hooks/api | API hooks |

## Error Handling
The component uses try-catch block in the `onFormSubmit` function to handle errors during tag creation. It displays an error notification if the tag creation fails.

## Logging
The component logs errors to the console if tag creation fails.