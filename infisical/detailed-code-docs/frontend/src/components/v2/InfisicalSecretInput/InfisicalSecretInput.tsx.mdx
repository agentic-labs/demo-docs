---
title: "InfisicalSecretInput.tsx"
---

## High-level description
The `InfisicalSecretInput` component is a custom input field for handling secret values in the Infisical application. It provides auto-completion suggestions for environment variables, folders, and secrets as the user types, enhancing the user experience when working with secret references.

## Code Structure
The main component `InfisicalSecretInput` uses various utility functions and hooks to manage its state and behavior. It integrates with the Radix UI Popover component to display suggestions and handles user interactions for selecting and inserting secret references.

## Symbols

### InfisicalSecretInput
#### Description
A forwarded ref component that renders an input field with auto-completion functionality for secret references.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | string | The current value of the input |
| onChange | function | Callback function to handle value changes |
| containerClassName | string | CSS class for the container element |
| secretPath | string | The current secret path |
| environment | string | The current environment |
| ...props | TextareaHTMLAttributes | Other textarea attributes |

#### Internal Logic
1. Uses various hooks to manage state and fetch data (useWorkspace, useProjectPermission, useDebounce, useToggle, useGetProjectFolders, useGetProjectSecrets).
2. Implements utility functions to handle reference parsing and suggestion generation.
3. Manages the suggestion popup state and content based on user input.
4. Handles key events for navigation and selection within the suggestion list.
5. Renders the input field and suggestion popup using Radix UI components.

### Utility Functions
Several utility functions are defined to handle string manipulation and reference parsing:
- `getIndexOfUnclosedRefToTheLeft`
- `getIndexOfUnclosedRefToTheRight`
- `getClosingSymbol`
- `mod`

These functions help in identifying and managing secret references within the input value.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| @fortawesome/free-solid-svg-icons | Icon library |
| @fortawesome/react-fontawesome | FontAwesome React component |
| @radix-ui/react-popover | Popover component for suggestions |
| @app/context | Application context |
| @app/hooks | Custom hooks |
| @app/hooks/api | API-related hooks |

## Error Handling
The component doesn't implement specific error handling mechanisms. It relies on the parent component to handle any errors that may occur during secret fetching or saving.

## Performance Considerations
The component uses debouncing for the input value to prevent excessive API calls when typing. It also implements memoization for computed values and callback functions to optimize rendering performance.

---

This component is a crucial part of the secret management interface in the Infisical application, providing an intuitive way for users to input and reference secrets across different environments and folders.