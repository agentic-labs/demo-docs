---
title: "AppLayout.tsx"
---

## High-level description
This code represents the main layout component (AppLayout) for the frontend application. It provides the overall structure and navigation for the app, including the sidebar, header, and main content area. The component handles user authentication, organization and project selection, and various UI interactions.

## Code Structure
The AppLayout component is the main container for the application's layout. It uses several hooks and components to manage state and render different parts of the UI. The component includes logic for handling user actions, such as creating new projects, switching organizations, and managing favorites. It also integrates with the application's routing system to navigate between different views.

## Symbols

### AppLayout
#### Description
The main layout component that wraps the entire application UI.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| children | React.ReactNode | The main content to be rendered within the layout |

#### Internal Logic
1. Initializes various hooks for managing state and API calls.
2. Renders the sidebar with organization and project selection.
3. Handles user actions like creating new projects, switching organizations, and managing favorites.
4. Provides modals for creating new projects and organizations.
5. Implements responsive design for mobile devices.

### onCreateProject
#### Description
Handles the creation of a new project.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | string | The name of the new project |
| addMembers | boolean | Whether to add all organization members to the project |
| kmsKeyId | string | The KMS key ID for the project |

#### Internal Logic
1. Creates a new project using the provided information.
2. Adds members to the project if specified.
3. Navigates to the new project's secrets page upon successful creation.

### addProjectToFavorites
#### Description
Adds a project to the user's favorites list.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| projectId | string | The ID of the project to be added to favorites |

### removeProjectFromFavorites
#### Description
Removes a project from the user's favorites list.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| projectId | string | The ID of the project to be removed from favorites |

## Dependencies
The component relies on various external libraries and internal modules, including:
- React and related hooks
- Next.js for routing
- FontAwesome for icons
- Radix UI for UI components
- TailwindCSS for styling
- Custom hooks for API calls and state management

## Configuration
The component uses environment variables and local storage for configuration:
- `NEXT_PUBLIC_INFISICAL_PLATFORM_VERSION`: The version of the Infisical platform
- Various localStorage items for storing user preferences and session information

## Error Handling
The component implements basic error handling for API calls and user actions, displaying notifications for successful or failed operations.

## Logging
The component includes some console logging for debugging purposes, particularly around user authentication and navigation.

## TODOs
- There are several TODO comments in the code, indicating areas for future improvement or refactoring.
- The code includes some temporary logic for handling localStorage, which is marked for review and potential removal.

This AppLayout component serves as the central structure for the application, managing navigation, user interactions, and overall layout. It integrates various features and handles the complexities of user authentication and project management within the Infisical platform.