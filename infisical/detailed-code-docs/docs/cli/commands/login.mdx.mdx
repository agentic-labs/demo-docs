---
title: "login.mdx"
---

---
title: "infisical login"
description: "Login into Infisical from the CLI"
---

```bash
infisical login
```

### Description

The CLI uses authentication to verify your identity. When you enter the correct email and password for your account, a token is generated and saved in your system Keyring to allow you to make future interactions with the CLI.

To change where the login credentials are stored, visit the [vaults command](./vault).

If you have added multiple users, you can switch between the users by using the [user command](./user).

    &lt;Info&gt;
      When you authenticate with **any other method than `user`**, an access token will be printed to the console upon successful login. This token can be used to authenticate with the Infisical API and the CLI by passing it in the `--token` flag when applicable.

      Use flag `--plain` along with `--silent` to print only the token in plain text when using a machine identity auth method.

    &lt;/Info&gt;

### Flags

The login command supports a number of flags that you can use for different authentication methods. Below is a list of all the flags that can be used with the login command.

&lt;AccordionGroup&gt;
  &lt;Accordion title="--method"&gt;
    ```bash
    infisical login --method=&lt;auth-method&gt; # Optional, will default to 'user'.
    ```

    #### Valid values for the `method` flag are:
    - `user`: Login using email and password. (default)
    - `universal-auth`: Login using a universal auth client ID and client secret.
    - `kubernetes`: Login using a Kubernetes native auth.
    - `azure`: Login using an Azure native auth.
    - `gcp-id-token`: Login using a GCP ID token native auth.
    - `gcp-iam`: Login using a GCP IAM.
    - `aws-iam`: Login using an AWS IAM native auth.

  &lt;/Accordion&gt;
  &lt;Accordion title="--client-id"&gt;
    ```bash
    infisical login --client-id=&lt;client-id&gt; # Optional, required if --method=universal-auth.
    ```

    #### Description
    The client ID of the universal auth machine identity. This is required if the `--method` flag is set to `universal-auth`.

    &lt;Tip&gt;
      The `client-id` flag can be substituted with the `INFISICAL_UNIVERSAL_AUTH_CLIENT_ID` environment variable.
    &lt;/Tip&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="--client-secret"&gt;
    ```bash
    infisical login --client-secret=&lt;client-secret&gt; # Optional, required if --method=universal-auth.
    ```
    #### Description
    The client secret of the universal auth machine identity. This is required if the `--method` flag is set to `universal-auth`.

    &lt;Tip&gt;
      The `client-secret` flag can be substituted with the `INFISICAL_UNIVERSAL_AUTH_CLIENT_SECRET` environment variable.
    &lt;/Tip&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="--machine-identity-id"&gt;
    ```bash
    infisical login --machine-identity-id=&lt;your-machine-identity-id&gt; # Optional, required if --method=kubernetes, azure, gcp-id-token, gcp-iam, or aws-iam.
    ```

    #### Description
    The ID of the machine identity. This is required if the `--method` flag is set to `kubernetes`, `azure`, `gcp-id-token`, `gcp-iam`, or `aws-iam`.

    &lt;Tip&gt;
      The `machine-identity-id` flag can be substituted with the `INFISICAL_MACHINE_IDENTITY_ID` environment variable.
    &lt;/Tip&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="--service-account-token-path"&gt;
    ```bash
    infisical login --service-account-token-path=&lt;service-account-token-path&gt; # Optional Will default to '/var/run/secrets/kubernetes.io/serviceaccount/token'.
    ```

    #### Description
    The path to the Kubernetes service account token to use for authentication.
    This is optional and will default to `/var/run/secrets/kubernetes.io/serviceaccount/token`.

    &lt;Tip&gt;
    The `service-account-token-path` flag can be substituted with the `INFISICAL_KUBERNETES_SERVICE_ACCOUNT_TOKEN_PATH` environment variable.
    &lt;/Tip&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="--service-account-key-file-path"&gt;
    ```bash
    infisical login --service-account-key-file-path=&lt;gcp-service-account-key-file-path&gt; # Optional, but required if --method=gcp-iam.
    ```

    #### Description
    The path to your GCP service account key file. This is required if the `--method` flag is set to `gcp-iam`.

    &lt;Tip&gt;
      The `service-account-key-path` flag can be substituted with the `INFISICAL_GCP_IAM_SERVICE_ACCOUNT_KEY_FILE_PATH` environment variable.
    &lt;/Tip&gt;

  &lt;/Accordion&gt;
&lt;/AccordionGroup&gt;

  &lt;Accordion title="--oidc-jwt"&gt;
    ```bash
    infisical login --oidc-jwt=&lt;oidc-jwt-token&gt;
    ```

    #### Description
    The JWT provided by an identity provider for OIDC authentication.

    &lt;Tip&gt;
    The `oidc-jwt` flag can be substituted with the `INFISICAL_OIDC_AUTH_JWT` environment variable.
    &lt;/Tip&gt;

  &lt;/Accordion&gt;

### Authentication Methods

The Infisical CLI supports multiple authentication methods. Below are the available authentication methods, with their respective flags.

&lt;AccordionGroup&gt;
&lt;Accordion title="Universal Auth"&gt;
  The Universal Auth method is a simple and secure way to authenticate with Infisical. It requires a client ID and a client secret to authenticate with Infisical.

    &lt;ParamField query="Flags"&gt;
    &lt;Expandable title="properties"&gt;
        &lt;ParamField query="client-id" type="string" required&gt;
        Your machine identity client ID.
        &lt;/ParamField&gt;
        &lt;ParamField query="client-secret" type="string" required&gt;
        Your machine identity client secret.
        &lt;/ParamField&gt;
    &lt;/Expandable&gt;

  &lt;/ParamField&gt;

  &lt;Steps&gt;
    &lt;Step title="Create a universal auth machine identity"&gt;
      To create a universal auth machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/universal-auth).
    &lt;/Step&gt;
    &lt;Step title="Obtain an access token"&gt;
      Run the `login` command with the following flags to obtain an access token:

    ```bash
      infisical login --method=universal-auth --client-id=&lt;client-id&gt; --client-secret=&lt;client-secret&gt;
    ```
    &lt;/Step&gt;

  &lt;/Steps&gt;
&lt;/Accordion&gt;
&lt;Accordion title="Native Kubernetes"&gt;
  The Native Kubernetes method is used to authenticate with Infisical when running in a Kubernetes environment. It requires a service account token to authenticate with Infisical.

    &lt;ParamField query="Flags"&gt;
    &lt;Expandable title="properties"&gt;
        &lt;ParamField query="machine-identity-id" type="string" required&gt;
        Your machine identity ID.
        &lt;/ParamField&gt;
        &lt;ParamField query="service-account-token-path" type="string" optional&gt;
          Path to the Kubernetes service account token to use. Default: `/var/run/secrets/kubernetes.io/serviceaccount/token`.
        &lt;/ParamField&gt;
    &lt;/Expandable&gt;

  &lt;/ParamField&gt;

  &lt;Steps&gt;
    &lt;Step title="Create a Kubernetes machine identity"&gt;
      To create a Kubernetes machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/kubernetes-auth).
    &lt;/Step&gt;
    &lt;Step title="Obtain access an token"&gt;
      Run the `login` command with the following flags to obtain an access token:

    ```bash
      # --service-account-token-path is optional, and will default to '/var/run/secrets/kubernetes.io/serviceaccount/token' if not provided.
      infisical login --method=kubernetes --machine-identity-id=&lt;machine-identity-id&gt; --service-account-token-path=&lt;service-account-token-path&gt;
    ```
    &lt;/Step&gt;

  &lt;/Steps&gt;

&lt;/Accordion&gt;
  &lt;Accordion title="Native Azure"&gt;
    The Native Azure method is used to authenticate with Infisical when running in an Azure environment.

    &lt;ParamField query="Flags"&gt;
      &lt;Expandable title="properties"&gt;
          &lt;ParamField query="machine-identity-id" type="string" required&gt;
            Your machine identity ID.
          &lt;/ParamField&gt;
      &lt;/Expandable&gt;
    &lt;/ParamField&gt;

    &lt;Steps&gt;
      &lt;Step title="Create an Azure machine identity"&gt;
        To create an Azure machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/azure-auth).
      &lt;/Step&gt;
      &lt;Step title="Obtain an access token"&gt;
       Run the `login` command with the following flags to obtain an access token:

      ```bash
        infisical login --method=azure --machine-identity-id=&lt;machine-identity-id&gt;
      ```
      &lt;/Step&gt;
    &lt;/Steps&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="Native GCP ID Token"&gt;
    The Native GCP ID Token method is used to authenticate with Infisical when running in a GCP environment.

    &lt;ParamField query="Flags"&gt;
      &lt;Expandable title="properties"&gt;
          &lt;ParamField query="machine-identity-id" type="string" required&gt;
            Your machine identity ID.
          &lt;/ParamField&gt;
      &lt;/Expandable&gt;
    &lt;/ParamField&gt;

    &lt;Steps&gt;
      &lt;Step title="Create a GCP machine identity"&gt;
        To create a GCP machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/gcp-auth).
      &lt;/Step&gt;
      &lt;Step title="Obtain an access token"&gt;
        Run the `login` command with the following flags to obtain an access token:

      ```bash
        infisical login --method=gcp-id-token --machine-identity-id=&lt;machine-identity-id&gt;
      ```
      &lt;/Step&gt;
    &lt;/Steps&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="GCP IAM"&gt;
    The GCP IAM method is used to authenticate with Infisical with a GCP service account key.

    &lt;ParamField query="Flags"&gt;
      &lt;Expandable title="properties"&gt;
          &lt;ParamField query="machine-identity-id" type="string" required&gt;
          Your machine identity ID.
          &lt;/ParamField&gt;
          &lt;ParamField query="service-account-key-file-path" type="string" required&gt;
            Path to your GCP service account key file _(Must be in JSON format!)_
          &lt;/ParamField&gt;
      &lt;/Expandable&gt;
    &lt;/ParamField&gt;

    &lt;Steps&gt;
      &lt;Step title="Create a GCP machine identity"&gt;
        To create a GCP machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/gcp-auth).
      &lt;/Step&gt;
      &lt;Step title="Obtain an access token"&gt;
        Run the `login` command with the following flags to obtain an access token:

      ```bash
        infisical login --method=gcp-iam --machine-identity-id=&lt;machine-identity-id&gt; --service-account-key-file-path=&lt;service-account-key-file-path&gt;
      ```
      &lt;/Step&gt;
    &lt;/Steps&gt;

  &lt;/Accordion&gt;
  &lt;Accordion title="Native AWS IAM"&gt;
    The AWS IAM method is used to authenticate with Infisical with an AWS IAM role while running in an AWS environment like EC2, Lambda, etc.

    &lt;ParamField query="Flags"&gt;
      &lt;Expandable title="properties"&gt;
          &lt;ParamField query="machine-identity-id" type="string" required&gt;
            Your machine identity ID.
          &lt;/ParamField&gt;
      &lt;/Expandable&gt;
    &lt;/ParamField&gt;

    &lt;Steps&gt;
      &lt;Step title="Create an AWS machine identity"&gt;
        To create an AWS machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/aws-auth).
      &lt;/Step&gt;
      &lt;Step title="Obtain an access token"&gt;
        Run the `login` command with the following flags to obtain an access token:

      ```bash
        infisical login --method=aws-iam --machine-identity-id=&lt;machine-identity-id&gt;
      ```
      &lt;/Step&gt;
    &lt;/Steps&gt;

  &lt;/Accordion&gt;
    &lt;Accordion title="OIDC Auth"&gt;
    The OIDC Auth method is used to authenticate with Infisical via identity tokens with OIDC.

    &lt;ParamField query="Flags"&gt;
      &lt;Expandable title="properties"&gt;
          &lt;ParamField query="machine-identity-id" type="string" required&gt;
            Your machine identity ID.
          &lt;/ParamField&gt;
          &lt;ParamField query="oidc-jwt" type="string" required&gt;
            The OIDC JWT from the identity provider.
          &lt;/ParamField&gt;
      &lt;/Expandable&gt;
    &lt;/ParamField&gt;

    &lt;Steps&gt;
      &lt;Step title="Create an OIDC machine identity"&gt;
        To create an OIDC machine identity, follow the step by step guide outlined [here](/documentation/platform/identities/oidc-auth/general).
      &lt;/Step&gt;
      &lt;Step title="Obtain an access token"&gt;
        Run the `login` command with the following flags to obtain an access token:

      ```bash
        infisical login --method=oidc-auth --machine-identity-id=&lt;machine-identity-id&gt; --oidc-jwt=&lt;oidc-jwt&gt;
      ```
      &lt;/Step&gt;
    &lt;/Steps&gt;

  &lt;/Accordion&gt;
&lt;/AccordionGroup&gt;

### Machine Identity Authentication Quick Start

In this example we'll be using the `universal-auth` method to login to obtain an Infisical access token, which we will then use to fetch secrets with.

&lt;Steps&gt;
  &lt;Step title="Obtain an access token"&gt;
        ```bash
          export INFISICAL_TOKEN=$(infisical login --method=universal-auth --client-id=&lt;client-id&gt; --client-secret=&lt;client-secret&gt; --silent --plain) # silent and plain is important to ensure only the token itself is printed, so we can easily set it as an environment variable.
        ```

        Now that we've set the `INFISICAL_TOKEN` environment variable, we can use the CLI to interact with Infisical. The CLI will automatically check for the presence of the `INFISICAL_TOKEN` environment variable and use it for authentication.


        Alternatively, if you would rather use the `--token` flag to pass the token directly, you can do so by running the following command:

        ```bash
          infisical [command] --token=&lt;your-access-token&gt; # The token output from the login command.
        ```
    &lt;/Step&gt;

      &lt;Step title="Fetch all secrets from an evironment"&gt;
        ```bash
          infisical secrets --projectId=&lt;your-project-id --env=dev --recursive
        ```

        This command will fetch all secrets from the `dev` environment in your project, including all secrets in subfolders.

        &lt;Info&gt;
          The `--recursive`, and `--env` flag is optional and will fetch all secrets in subfolders. The default environment is `dev` if no `--env` flag is provided.
        &lt;/Info&gt;
    &lt;/Step&gt;

&lt;/Steps&gt;

And that's it! Now you're ready to start using the Infisical CLI to interact with your secrets, with the use of Machine Identities.
