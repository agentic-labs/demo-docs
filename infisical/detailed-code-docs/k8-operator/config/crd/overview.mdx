---
title: "Overview"
---

## High-level description
This directory contains configuration files for a Custom Resource Definition (CRD) named "InfisicalSecret" in a Kubernetes operator. The CRD is designed to manage Infisical secrets within a Kubernetes cluster. The configuration includes the main CRD definition, Kustomize configurations for customizing the deployment, and patches for enabling additional features such as webhooks and certificate management.

## What does it do?
The configuration in this directory defines and customizes the InfisicalSecret resource, which allows users to manage Infisical secrets in a Kubernetes-native way. It provides the following functionality:

1. Defines the structure and properties of the InfisicalSecret resource, including various authentication methods, managed secret references, and status conditions.
2. Allows for customization of the CRD deployment using Kustomize, with options to enable webhooks and cert-manager integration.
3. Provides patches for enabling certificate injection and version conversion capabilities, enhancing the security and compatibility of the CRD.

## Key Files
1. `bases/secrets.infisical.com_infisicalsecrets.yaml`: The main CRD definition file that outlines the structure and properties of the InfisicalSecret resource.

2. `kustomization.yaml`: A Kustomize configuration file that specifies how to customize the deployment of the CRD, including options for adding webhooks and certificate management.

3. `kustomizeconfig.yaml`: A configuration file for Kustomize that defines rules for substituting name and namespace references in the CRD, particularly for webhook configurations.

4. `patches/cainjection_in_infisicalsecrets.yaml`: A patch file that adds cert-manager annotations to the CRD for CA certificate injection.

5. `patches/webhook_in_infisicalsecrets.yaml`: A patch file that configures a conversion webhook for the CRD, enabling automatic version conversion of the custom resource.

## Dependencies
The configuration relies on the following external components:

1. Kubernetes API extension system: For defining and managing the custom resource.
2. Kustomize: A Kubernetes configuration management tool used for customizing the CRD deployment.
3. cert-manager (optional): Used for injecting CA certificates into the CRD for secure communication.

## Configuration
The CRD and its deployment can be configured through various means:

1. The main CRD file (`bases/secrets.infisical.com_infisicalsecrets.yaml`) defines the structure of the InfisicalSecret resource, including:
   - Multiple authentication methods (AWS IAM, Azure, GCP IAM, etc.)
   - Managed secret references
   - Resync intervals
   - Status conditions

2. The Kustomize configuration (`kustomization.yaml`) allows for:
   - Inclusion of the base CRD file
   - Application of strategic merge patches (commented out by default)
   - Enabling of webhooks and cert-manager integration (commented out by default)

3. The patches in the `patches` directory provide options for:
   - Injecting CA certificates using cert-manager
   - Configuring a conversion webhook for version compatibility

These configurations allow for flexible deployment and management of the InfisicalSecret CRD across different Kubernetes environments, with options to enhance security and maintain API compatibility as needed.