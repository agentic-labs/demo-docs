---
title: "sample.yaml"
---

## High-level description
This YAML file defines a custom resource of type `InfisicalSecret` for the Infisical Kubernetes Operator. It specifies configuration for authenticating with Infisical, fetching secrets, and managing them within a Kubernetes cluster.

## Code Structure
The YAML file is structured into standard Kubernetes resource fields: `apiVersion`, `kind`, `metadata`, and `spec`. The `spec` section contains the main configuration for the Infisical Secret.

## Symbols

### InfisicalSecret
#### Description
This custom resource defines how the Infisical Operator should authenticate, fetch secrets from Infisical, and manage them in the Kubernetes cluster.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| apiVersion | string | Specifies the API version for this custom resource |
| kind | string | Defines the type of the custom resource |
| metadata | object | Contains metadata about the resource |
| spec | object | Specifies the desired state and configuration for the Infisical Secret |

#### Internal Logic
The `spec` field contains the main configuration:
1. `hostAPI`: Specifies the Infisical API endpoint
2. `resyncInterval`: Defines how often to resync secrets (in minutes)
3. `authentication`: Configures the authentication method (Kubernetes Auth in this case)
4. `managedSecretReference`: Specifies how the fetched secrets should be managed in Kubernetes

## Dependencies
This YAML file depends on the Infisical Kubernetes Operator being installed in the cluster to process this custom resource.

### Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| hostAPI | string | https://app.infisical.com/api | The Infisical API endpoint |
| resyncInterval | integer | 10 | The interval (in minutes) for resyncing secrets |
| authentication.kubernetesAuth.identityId | string | &lt;&gt; | The identity ID for Kubernetes authentication |
| authentication.kubernetesAuth.serviceAccountRef | object | - | Reference to the Kubernetes service account for authentication |
| authentication.kubernetesAuth.secretsScope | object | - | Defines the scope of secrets to fetch |
| managedSecretReference | object | - | Specifies how the fetched secrets should be managed in Kubernetes |

## API/Interface Reference
This YAML file defines a custom resource that is processed by the Infisical Kubernetes Operator. It doesn't expose an API itself but rather configures how the operator should behave.

| Field | Description |
|:------|:------------|
| spec.hostAPI | The Infisical API endpoint |
| spec.resyncInterval | How often to resync secrets (in minutes) |
| spec.authentication.kubernetesAuth | Configuration for Kubernetes authentication |
| spec.managedSecretReference | How to manage the fetched secrets in Kubernetes |

Note: The actual processing of this custom resource is handled by the Infisical Kubernetes Operator, which is not shown in this file.