---
title: "deployment.yaml"
---

## High-level description
This YAML file defines a Kubernetes Deployment for an Nginx application. It specifies the deployment configuration, including the number of replicas, container image, and environment variables sourced from a Kubernetes Secret.

## Symbols

### Deployment
#### Description
This Kubernetes resource defines a Deployment named "nginx-deployment" that manages three replicas of an Nginx container.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| apiVersion | string | Specifies the Kubernetes API version for the Deployment resource (apps/v1) |
| kind | string | Defines the resource type as a Deployment |
| metadata | object | Contains metadata about the Deployment |
| spec | object | Defines the desired state of the Deployment |

#### Internal Logic
1. Creates a Deployment with 3 replicas of Nginx containers
2. Uses a selector to manage pods with the label `app: nginx`
3. Configures the pod template with the Nginx container
4. Sources environment variables from a Secret named "managed-secret"
5. Exposes port 80 for the Nginx container

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Kubernetes | The orchestration platform on which this Deployment will be created |
| Nginx | The web server image used in the container (version 1.14.2) |

### Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| replicas | integer | 3 | Number of desired pod replicas |
| image | string | nginx:1.14.2 | Container image to be used |

## Side Effects
- Creates and manages 3 replicas of Nginx pods
- Utilizes a Kubernetes Secret named "managed-secret" for environment variables

## Notes
The Deployment includes an annotation `secrets.infisical.com/auto-reload: "true"`, which suggests integration with Infisical, a secrets management tool. This annotation likely enables automatic reloading of secrets when they are updated.