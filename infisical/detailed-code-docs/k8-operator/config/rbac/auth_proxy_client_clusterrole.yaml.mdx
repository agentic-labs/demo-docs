---
title: "auth_proxy_client_clusterrole.yaml"
---

## High-level description
This YAML file defines a Kubernetes ClusterRole named "metrics-reader" that grants read access to the "/metrics" endpoint. It is part of the RBAC (Role-Based Access Control) configuration for a Kubernetes operator, specifically designed to allow access to metrics data.

## Symbols

### ClusterRole
#### Description
This ClusterRole defines permissions for accessing metrics data across the entire cluster. It is labeled for use with a Kubernetes operator and is managed by Kustomize.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| apiVersion | string | Specifies the Kubernetes API version for RBAC |
| kind | string | Defines the resource type as ClusterRole |
| metadata | object | Contains metadata about the ClusterRole |
| rules | array | Specifies the access rules for this ClusterRole |

#### Internal Logic
The ClusterRole grants read access ("get" verb) to the non-resource URL "/metrics". This allows entities with this role to retrieve metrics data from the specified endpoint.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Kubernetes RBAC API | Defines the structure and functionality of RBAC resources |
| Kustomize | Manages and customizes Kubernetes resources |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| name | string | metrics-reader | The name of the ClusterRole |
| nonResourceURLs | array | ["/metrics"] | The non-resource URL paths this role can access |
| verbs | array | ["get"] | The allowed actions on the specified non-resource URLs |

## Labels
The ClusterRole includes several labels that provide metadata about its purpose and management:

| Label | Value | Description |
|:------|:------|:------------|
| app.kubernetes.io/name | clusterrole | Indicates the resource type |
| app.kubernetes.io/instance | metrics-reader | Specifies the instance name |
| app.kubernetes.io/component | kube-rbac-proxy | Indicates the component this role is associated with |
| app.kubernetes.io/created-by | k8-operator | Specifies the creator of this resource |
| app.kubernetes.io/part-of | k8-operator | Indicates which larger application this resource belongs to |
| app.kubernetes.io/managed-by | kustomize | Specifies that this resource is managed by Kustomize |

These labels help in organizing, selecting, and managing the ClusterRole within the Kubernetes ecosystem.