---
title: "run-cli-tests.yml"
---

## High-level description
This GitHub Actions workflow file, named "Go CLI Tests," is designed to run tests for a Go-based CLI application. It is triggered on pull requests that modify files in the "cli" directory, can be manually dispatched, or called from other workflows. The workflow sets up a Go environment, installs dependencies, and runs tests with specific environment variables.

## Code Structure
The workflow consists of a single job named "test" with several steps that set up the environment and run the tests. It uses various GitHub Actions and environment variables to configure the test environment.

## Symbols

### `name`
#### Description
Defines the name of the GitHub Actions workflow as "Go CLI Tests".

### `on`
#### Description
Specifies the events that trigger the workflow:
1. Pull requests that are opened or synchronized, affecting files in the "cli" directory.
2. Manual trigger through workflow_dispatch.
3. Can be called from other workflows using workflow_call.

### `jobs.test`
#### Description
Defines the main job of the workflow, named "test".

#### Internal Logic
1. Sets the working directory to "./cli".
2. Runs on the latest Ubuntu runner.
3. Executes a series of steps to set up the environment and run tests.

### `jobs.test.steps`
#### Description
Defines the sequence of steps to be executed in the "test" job.

#### Internal Logic
1. Checks out the repository.
2. Sets up Go version 1.21.x.
3. Installs dependencies.
4. Runs Go tests with specific environment variables.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| actions/checkout@v4 | Checks out the repository |
| actions/setup-go@v4 | Sets up the Go environment |

## Configuration
The workflow uses several secrets as environment variables for the test execution:

| Option | Type | Description |
|:-------|:-----|:------------|
| CLI_TESTS_UA_CLIENT_ID | secret | User Agent Client ID |
| CLI_TESTS_UA_CLIENT_SECRET | secret | User Agent Client Secret |
| CLI_TESTS_SERVICE_TOKEN | secret | Service Token |
| CLI_TESTS_PROJECT_ID | secret | Project ID |
| CLI_TESTS_ENV_SLUG | secret | Environment Slug |
| CLI_TESTS_USER_EMAIL | secret | User Email |
| CLI_TESTS_USER_PASSWORD | secret | User Password |
| CLI_TESTS_INFISICAL_VAULT_FILE_PASSPHRASE | secret | Infisical Vault File Passphrase (commented out) |

## TODOs
The `INFISICAL_VAULT_FILE_PASSPHRASE` environment variable is commented out in the test step, which might indicate a pending task or a deliberate omission.