---
title: "report_test.go"
---

## High-level description
This file contains unit tests for the `report` package in the Infisical-merge project. It specifically tests the `Write` function, which is responsible for generating reports in different formats based on the provided findings and configuration.

## Symbols

### `TestReport`
#### Description
This function is the main test function that verifies the behavior of the `Write` function for different file extensions and input scenarios.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| t | *testing.T | The testing object provided by Go's testing framework |

#### Internal Logic
1. Defines a set of test cases with different file extensions and findings.
2. Iterates through each test case:
   - Creates a temporary file with the specified extension.
   - Calls the `Write` function with the test case parameters.
   - Reads the contents of the generated file.
   - Checks if the file is empty when it's not supposed to be, or non-empty when it should be empty.
   - Cleans up the temporary file.

The test cases cover various scenarios:
- Different file extensions (json, csv, etc.)
- Extensions with and without leading dots
- Case-insensitive extensions
- Invalid extensions
- Empty result expectations

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | File operations (creation, reading, removal) |
| path/filepath | File path manipulation |
| strconv | Converting integers to strings for file naming |
| testing | Go's testing framework |
| github.com/Infisical/infisical-merge/config | Importing the Config type |

## Constants
| Constant | Value | Description |
|:---------|:------|:------------|
| expectPath | "../testdata/expected/" | Path to expected test data (unused in this file) |
| tmpPath | "../testdata/tmp" | Path for temporary test files |

## Error Handling
The test function uses Go's testing framework to report errors. It checks for and reports errors during file operations and when unexpected results are encountered.

## TODOs
There is a commented-out test case for the "SARIF" extension, which might indicate a planned or incomplete feature:

```go
// {
// 	ext: "SARIF",
// 	findings: []Finding{
// 		{
// 			RuleID: "test-rule",
// 		},
// 	},
// },
```

This suggests that support for SARIF (Static Analysis Results Interchange Format) might be planned or under development.