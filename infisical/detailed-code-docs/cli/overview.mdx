---
title: "Overview"
---

## High-level description
The `cli` directory contains the core components of the Infisical command-line interface (CLI) tool. This tool is designed for secret management, security scanning, and integration with the Infisical platform. It includes functionality for detecting secrets in code repositories, managing configurations, interacting with the Infisical API, and generating reports.

## What does it do?
The Infisical CLI tool provides several key functionalities:

1. Secret Detection: It scans code repositories, files, and Git histories for potential secrets or sensitive information using configurable rules and patterns.

2. Configuration Management: It allows users to set up and customize the tool's behavior through configuration files and command-line options.

3. API Interaction: It communicates with the Infisical platform for authentication, secret management, and workspace operations.

4. Report Generation: It can generate reports of detected secrets in various formats, including JSON, CSV, and SARIF.

5. Command Execution: It provides a set of commands for operations like login, secret retrieval, and project initialization.

6. Cryptographic Operations: It includes functionality for secure data handling and communication.

## Entry points
The main entry point for the CLI is the `main.go` file in the root of the `cli` directory. This file sets up logging and executes the main command of the application.

The `packages/cmd` directory contains the implementations of various CLI commands, serving as entry points for different functionalities.

## Key Files and Directories
1. `main.go`: The main entry point for the CLI application.

2. `agent-config.yaml`: Configuration file for the Infisical agent, defining authentication, output sinks, and templates.

3. `config/`: Contains configuration-related code, including allowlists, rule definitions, and configuration loading logic.

4. `detect/`: Implements the core secret detection functionality, including scanning of files and Git repositories.

5. `packages/`: Contains various packages that form the core functionality of the CLI, including API communication, cryptographic operations, and command implementations.

6. `report/`: Handles the generation of reports in different formats based on the findings from secret detection.

7. `test/`: Contains a comprehensive test suite for the CLI tool, covering various functionalities and authentication methods.

8. `testdata/`: Provides test data, configuration files, and sample repositories for testing the CLI tool.

## Dependencies
The CLI relies on several external libraries, including:

1. `github.com/spf13/viper`: For configuration management.
2. `github.com/rs/zerolog`: For structured logging.
3. `github.com/spf13/cobra`: For building the CLI interface.
4. `github.com/go-resty/resty/v2`: For making HTTP requests to the Infisical API.
5. Various cryptographic libraries for secure operations.

## Configuration
The CLI tool is highly configurable, with options specified through:

1. Configuration files (e.g., `.infisical-scan.toml`, `agent-config.yaml`)
2. Environment variables
3. Command-line flags

These configurations allow users to customize secret detection rules, API endpoints, authentication methods, and other aspects of the tool's behavior.

In conclusion, the Infisical CLI tool provides a comprehensive set of features for secret management, security scanning, and integration with the Infisical platform. It is designed to be flexible, extensible, and secure, catering to various use cases in the realm of secret management and code security.