---
title: "export_test.go"
---

## High-level description
This Go test file contains unit tests for the export functionality of a CLI tool. It tests the export of secrets with and without imports using both Universal Auth and Service Token authentication methods.

## Symbols

### TestUniversalAuth_ExportSecretsWithImports
#### Description
This function tests the export of secrets with imports using Universal Auth.

#### Internal Logic
1. Performs machine identity login
2. Executes the CLI command to export secrets
3. Uses cupaloy to snapshot test the output

### TestServiceToken_ExportSecretsWithImports
#### Description
This function tests the export of secrets with imports using a Service Token.

#### Internal Logic
1. Executes the CLI command to export secrets using a Service Token
2. Uses cupaloy to snapshot test the output

### TestUniversalAuth_ExportSecretsWithoutImports
#### Description
This function tests the export of secrets without imports using Universal Auth.

#### Internal Logic
1. Performs machine identity login
2. Executes the CLI command to export secrets, explicitly excluding imports
3. Uses cupaloy to snapshot test the output

### TestServiceToken_ExportSecretsWithoutImports
#### Description
This function tests the export of secrets without imports using a Service Token.

#### Internal Logic
1. Executes the CLI command to export secrets using a Service Token, explicitly excluding imports
2. Uses cupaloy to snapshot test the output

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| testing | Go's built-in testing framework |
| github.com/bradleyjkemp/cupaloy/v2 | Snapshot testing library |

## Error Handling
Each test function checks for errors after executing the CLI command and after running the snapshot test. If an error occurs, the test fails with a descriptive error message using `t.Fatalf()`.

## References
The tests reference several unexported symbols that are likely defined in other files within the same package:

1. `MachineIdentityLoginCmd(t)`: A function that presumably handles machine identity login.
2. `ExecuteCliCommand()`: A function that executes CLI commands.
3. `FORMATTED_CLI_NAME`: A constant representing the name of the CLI tool being tested.
4. `creds`: A struct or variable containing various credentials and identifiers used in the tests.

These references suggest that there are other supporting files in the test suite that provide necessary setup and utility functions for these tests.