---
title: "main_test.go"
---

## High-level description
This file contains the TestMain function for the CLI tests. It sets up the CLI environment, performs user login and initialization before running the tests, and then exits with the appropriate code.

## Symbols

### TestMain
#### Description
TestMain is the entry point for running tests in this package. It performs setup operations, runs the tests, and handles the program exit.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| m | *testing.M | The testing framework's main type, which provides methods to run tests and get the exit code |

#### Outputs
This function doesn't return any value but calls `os.Exit()` with the test run's exit code.

#### Internal Logic
1. Setup:
   - Prints a message indicating CLI setup
   - Calls `SetupCli()` to set up the CLI environment
   - Prints a message for user login
   - Calls `UserLoginCmd()` to perform user login
   - Prints a message for Infisical initialization
   - Calls `UserInitCmd()` to initialize Infisical

2. Test Execution:
   - Calls `m.Run()` to execute all tests in the package
   - Stores the returned exit code

3. Exit:
   - Calls `os.Exit(code)` with the stored exit code to terminate the program

## References
The code references several functions that are not defined in this file:
- `SetupCli()`
- `UserLoginCmd()`
- `UserInitCmd()`

These functions are likely defined in other files within the same package or imported packages.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| fmt | Used for printing setup messages |
| os | Used for exiting the program with a specific code |
| testing | Provides the testing framework and the `testing.M` type |

Note: This file is a test setup file and doesn't contain actual test cases. It's responsible for preparing the environment for other tests in the package to run.