---
title: "Overview"
---

## High-level description
This directory contains the command implementations for the Infisical CLI tool. It defines various commands and subcommands that allow users to interact with the Infisical service, manage secrets, handle authentication, and perform various operations related to environment variables and configuration.

## What does it do?
The code in this directory provides the following main functionalities:

1. Authentication and user management:
   - Login and logout functionality
   - User profile switching and domain updating
   - Token management (creation, renewal, and service token handling)

2. Secrets management:
   - Creating, reading, updating, and deleting secrets
   - Generating example environment files
   - Scanning for leaked secrets in git history, directories, and files

3. Environment variable injection:
   - Injecting environment variables into processes
   - Exporting environment variables to various formats (dotenv, JSON, CSV, YAML)

4. Project initialization and configuration:
   - Connecting local projects with Infisical projects
   - Managing workspace configurations

5. Vault backend management:
   - Listing and setting vault backends for storing login tokens

6. Agent functionality:
   - Running a client daemon to manage authentication, secret retrieval, and template rendering

7. Folder operations:
   - Creating, retrieving, and deleting folders for organizing secrets

8. CLI utilities:
   - Generating man pages for the CLI tool
   - Resetting Infisical-related data on the user's machine

## Entry points
The main entry point for the CLI is likely the `root.go` file, which defines the root command and initializes the command structure. Other important files include:

- `login.go`: Handles user authentication and login processes
- `secrets.go`: Manages secret-related operations
- `run.go`: Implements the command for injecting environment variables into processes
- `export.go`: Handles exporting secrets to various formats
- `init.go`: Manages project initialization and configuration
- `agent.go`: Implements the agent functionality for continuous secret management

The control flow typically starts from the root command and branches out to specific subcommands based on user input. Data flow involves interaction with the Infisical API, local configuration files, and user input/output.

## Key Files
1. `root.go`: Defines the root command and initializes the CLI structure
2. `login.go`: Implements various authentication methods
3. `secrets.go`: Manages CRUD operations for secrets
4. `run.go`: Handles environment variable injection into processes
5. `export.go`: Implements secret exporting to different formats
6. `init.go`: Manages project initialization and configuration
7. `agent.go`: Implements the Infisical agent functionality
8. `scan.go`: Provides secret scanning capabilities
9. `folder.go`: Manages folder operations for organizing secrets
10. `user.go`: Handles user profile management

## Dependencies
The code relies on several external libraries and frameworks:

1. github.com/spf13/cobra: Command-line interface framework
2. github.com/go-resty/resty/v2: HTTP client for API requests
3. github.com/manifoldco/promptui: User prompts and input handling
4. github.com/posthog/posthog-go: Telemetry and analytics
5. github.com/rs/zerolog: Structured logging
6. gopkg.in/yaml.v2: YAML parsing and encoding
7. github.com/fatih/color: Colored console output
8. github.com/infisical/go-sdk: Infisical SDK for authentication and secret management

## Configuration
The CLI uses various configuration options, including:

1. Environment variables (e.g., INFISICAL_URL, INFISICAL_LOG_LEVEL)
2. Command-line flags for different commands
3. Configuration files (e.g., workspace config, agent config)
4. Vault backends for storing login tokens

The configuration is managed through a combination of the Cobra library's flag parsing, Viper for configuration management, and custom configuration file handling.

Have fun!