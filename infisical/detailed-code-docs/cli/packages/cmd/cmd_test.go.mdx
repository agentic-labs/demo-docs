---
title: "cmd_test.go"
---

## High-level description
This file contains a unit test for the `filterReservedEnvVars` function in the `cmd` package. The test verifies that the function correctly filters out reserved environment variables and their prefixes from a given map of environment variables.

## Symbols

### TestFilterReservedEnvVars
#### Description
This function is a unit test that checks the behavior of the `filterReservedEnvVars` function. It creates a map of environment variables, some of which are reserved or have reserved prefixes, and verifies that the function correctly filters out the reserved ones.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| t | *testing.T | The testing object provided by Go's testing framework |

#### Internal Logic
1. Arrange: Create a map of environment variables (`env`) with a mix of regular, reserved, and reserved-prefix variables.
2. Act: Call the `filterReservedEnvVars` function with the created map.
3. Assert: Check the resulting map to ensure:
   - The total number of remaining variables is correct (2 in this case).
   - Non-reserved variables ("test" and "test2") are still present.
   - Reserved variables ("HOME" and "PATH") are removed.
   - Variables with reserved prefixes ("XDG_SESSION_ID" and "LC_CTYPE") are removed.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| testing | Go's standard testing package for writing unit tests |
| github.com/Infisical/infisical-merge/packages/models | Provides the SingleEnvironmentVariable type used in the test |

## Notes
- The `filterReservedEnvVars` function is not shown in this file but is assumed to be defined elsewhere in the `cmd` package.
- The test focuses on the keys of the environment variables map, not the values, as indicated by the comment in the code.
- The test covers both exact matches for reserved variables (HOME, PATH) and prefix matches (XDG_, LC_).