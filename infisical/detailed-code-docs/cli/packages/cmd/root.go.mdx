---
title: "root.go"
---

## High-level description
This code defines the root command for the Infisical CLI, which is used to inject environment variables into processes. It sets up the command structure, initializes logging, and handles telemetry and configuration options.

## Code Structure
The code defines the `rootCmd` as the main command for the CLI. It also includes initialization functions (`init` and `initLog`) and an `Execute` function to run the command. The `Telemetry` variable is used to manage telemetry data collection.

## Symbols

### `rootCmd`
#### Description
The `rootCmd` is the main command for the Infisical CLI, defined using the Cobra library.

#### Internal Logic
- Sets the command name, short and long descriptions, and version.
- Disables the hidden default completion command.

### `Execute()`
#### Description
This function executes the root command and handles any errors that occur during execution.

#### Internal Logic
- Calls `rootCmd.Execute()` to run the command.
- If an error occurs, it exits the program with a status code of 1.

### `init()`
#### Description
Initializes the root command by setting up flags, initializing logging, and configuring telemetry.

#### Internal Logic
- Sets up persistent flags for log level, telemetry, domain, and silent mode.
- Configures the `INFISICAL_URL` based on flags or environment variables.
- Initializes the `Telemetry` object.
- Sets up a `PersistentPreRun` function to check for updates and handle the silent flag.

### `initLog()`
#### Description
Initializes the logging system based on the specified log level.

#### Internal Logic
- Retrieves the log level from the command flags.
- Sets the global log level using the zerolog library based on the specified level.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| os | For interacting with the operating system |
| strings | For string manipulation |
| zerolog | For logging |
| cobra | For building the CLI command structure |
| config | For accessing configuration variables |
| telemetry | For handling telemetry data |
| util | For utility functions |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| log-level | string | "info" | Sets the log level (trace, debug, info, warn, error, fatal) |
| telemetry | bool | true | Enables or disables telemetry data collection |
| domain | string | util.INFISICAL_DEFAULT_API_URL | Sets the backend API URL |
| silent | bool | false | Disables output of tip/info messages |

## Error Handling
The code uses the `util.HandleError()` function to handle errors, but the implementation is not shown in this file.

## Logging
The code uses the zerolog library for logging. The log level can be set using the `--log-level` flag or the `INFISICAL_LOG_LEVEL` environment variable.

## TODOs
There are no explicit TODOs in the code.