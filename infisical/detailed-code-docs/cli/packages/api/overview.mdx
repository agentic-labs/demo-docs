---
title: "Overview"
---

## High-level description
This directory contains the API client implementation for interacting with the Infisical service. It provides a comprehensive set of functions to handle authentication, workspace management, secret management, and other operations related to the Infisical platform. The code is organized into two main files: `api.go` and `model.go`.

## What does it do?
The API client in this directory allows developers to:

1. Authenticate users through a two-step login process
2. Manage workspaces and organizations
3. Retrieve, create, update, and delete secrets
4. Handle encrypted workspace keys
5. Create and manage service tokens
6. Perform Multi-Factor Authentication (MFA)
7. Manage folders within workspaces
8. Handle dynamic secret leases
9. Refresh access tokens

These functionalities enable secure communication with the Infisical backend, allowing applications to manage secrets and configurations in a centralized and secure manner.

## Key Files

### api.go
This file contains the core API client functions. Each function corresponds to a specific API endpoint and handles the HTTP request construction, sending, and response processing. Key functions include:

- `CallLogin1V2` and `CallLogin2V2` for the two-step authentication process
- `CallGetRawSecretsV3` for retrieving secrets
- `CallCreateRawSecretsV3` and `CallUpdateRawSecretsV3` for managing secrets
- `CallGetAllWorkSpacesUserBelongsTo` for workspace management
- `CallCreateServiceToken` for service token creation
- `CallVerifyMfaToken` for MFA verification

### model.go
This file defines the data structures used for API requests and responses. It includes structs for:

- Login processes (`LoginOneRequest`, `LoginOneResponse`, `LoginTwoRequest`, `LoginTwoResponse`)
- Secret management (`PullSecretsRequest`, `PullSecretsResponse`, `Secret`, `RawSecret`)
- Workspace key management (`GetEncryptedWorkspaceKeyRequest`, `GetEncryptedWorkspaceKeyResponse`)
- Service token creation (`CreateServiceTokenRequest`, `CreateServiceTokenResponse`)

These structures ensure type safety and consistent data formatting when communicating with the Infisical API.

## Dependencies
The API client relies on the following external libraries:

1. `github.com/go-resty/resty/v2`: Used for making HTTP requests to the Infisical API. Resty provides a simple and elegant way to handle RESTful API calls.

2. `github.com/rs/zerolog/log`: Used for logging throughout the API client. Zerolog is a fast and structured logger for Go.

3. `github.com/Infisical/infisical-merge/packages/config`: Used for configuration settings specific to the Infisical project.

The code also uses standard Go packages such as `fmt`, `net/http`, and `strings` for various utility functions.

## Configuration
The API client uses a constant `USER_AGENT` set to "cli" for identifying requests made to the Infisical API. This helps in tracking and differentiating requests made by the CLI tool.

The base URL for API requests is not hardcoded in the provided code snippets but is likely configured elsewhere in the project, possibly in the `config` package that is imported.

In summary, this API client provides a robust interface for interacting with the Infisical service, handling various aspects of secret management and user authentication. It's designed to be used as part of a larger CLI tool or application that needs to communicate with the Infisical backend securely.