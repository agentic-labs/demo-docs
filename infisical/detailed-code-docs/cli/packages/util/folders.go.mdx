---
title: "folders.go"
---

## High-level description
This Go package provides utility functions for managing folders in the Infisical system. It includes functions to retrieve, create, and delete folders using different authentication methods such as JWT tokens, service tokens, and machine identities.

## Code Structure
The code is organized into several main functions: `GetAllFolders`, `GetFoldersViaJTW`, `GetFoldersViaServiceToken`, `GetFoldersViaMachineIdentity`, `CreateFolder`, and `DeleteFolder`. These functions interact with the Infisical API to perform various folder-related operations.

## Symbols

### `GetAllFolders`
#### Description
This function retrieves all folders based on the provided parameters, using different authentication methods.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | models.GetAllFoldersParameters | Parameters for retrieving folders |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| []models.SingleFolder | []models.SingleFolder | List of retrieved folders |
| error | error | Error, if any |

#### Internal Logic
1. Checks the authentication method based on provided parameters.
2. Calls the appropriate function to retrieve folders (JWT, service token, or machine identity).
3. Returns the retrieved folders or an error.

### `GetFoldersViaJTW`
#### Description
Retrieves folders using a JWT token for authentication.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| JTWToken | string | JWT token for authentication |
| workspaceId | string | ID of the workspace |
| environmentName | string | Name of the environment |
| foldersPath | string | Path of the folders |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| []models.SingleFolder | []models.SingleFolder | List of retrieved folders |
| error | error | Error, if any |

### `GetFoldersViaServiceToken`
#### Description
Retrieves folders using a service token for authentication.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fullServiceToken | string | Full service token for authentication |
| workspaceId | string | ID of the workspace |
| environmentName | string | Name of the environment |
| foldersPath | string | Path of the folders |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| []models.SingleFolder | []models.SingleFolder | List of retrieved folders |
| error | error | Error, if any |

### `GetFoldersViaMachineIdentity`
#### Description
Retrieves folders using a machine identity access token for authentication.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| accessToken | string | Access token for authentication |
| workspaceId | string | ID of the workspace |
| envSlug | string | Environment slug |
| foldersPath | string | Path of the folders |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| []models.SingleFolder | []models.SingleFolder | List of retrieved folders |
| error | error | Error, if any |

### `CreateFolder`
#### Description
Creates a new folder in the Infisical system.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | models.CreateFolderParameters | Parameters for creating a folder |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| models.SingleFolder | models.SingleFolder | Created folder information |
| error | error | Error, if any |

### `DeleteFolder`
#### Description
Deletes a folder from the Infisical system.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | models.DeleteFolderParameters | Parameters for deleting a folder |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| []models.SingleFolder | []models.SingleFolder | List of remaining folders after deletion |
| error | error | Error, if any |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| github.com/Infisical/infisical-merge/packages/api | API calls to Infisical |
| github.com/Infisical/infisical-merge/packages/models | Data models |
| github.com/go-resty/resty/v2 | HTTP client for API requests |
| github.com/rs/zerolog/log | Logging |

## Error Handling
The code implements error handling by returning errors from functions and using `PrintErrorMessageAndExit` for critical errors that require termination of the program.

## Logging
The code uses the `zerolog` package for logging debug messages, particularly in the `GetAllFolders` function to indicate which authentication method is being used.