---
title: "Overview"
---

## High-level description
This utility package provides a collection of helper functions and tools for the Infisical CLI application. It includes functionality for managing user credentials, handling authentication, interacting with the Infisical API, managing secrets, and various other utility operations.

## What does it do?
The util package serves several key purposes:

1. Credential Management: It provides functions to store, retrieve, and manage user credentials securely using the system keyring.

2. Authentication: It includes utilities for handling different authentication methods, including JWT tokens, service tokens, and machine identities.

3. Secret Management: The package offers functions to retrieve, expand, and manipulate secrets, including support for cross-environment references and local backups.

4. Configuration Handling: It provides utilities to read and write configuration files for both user and workspace settings.

5. API Interaction: The package includes functions to interact with the Infisical API, including retrieving organization and workspace data.

6. Error Handling and Logging: It offers standardized error handling and logging functions to maintain consistency across the CLI application.

7. File and System Operations: The package provides utilities for file operations, Git interactions, and system-specific operations.

## Entry points
The main entry points for developers working with this package are:

1. Credential Management: `StoreUserCredsInKeyRing`, `GetUserCredsFromKeyRing`, `GetCurrentLoggedInUserDetails`
2. Secret Management: `GetPlainTextSecretsViaServiceToken`, `GetPlainTextSecretsV3`, `ExpandSecrets`
3. Configuration: `WriteInitalConfig`, `GetConfigFile`, `GetWorkSpaceFromFile`
4. Authentication: `GetInfisicalToken`, `UniversalAuthLogin`
5. API Interaction: `GetOrganizationsNameList`, `GetWorkspacesInOrganization`
6. Error Handling: `HandleError`, `PrintErrorAndExit`, `PrintWarning`

The package is designed to be used throughout the CLI application, providing a centralized set of utilities for common operations.

## Key Files
1. `credentials.go`: Handles user credential management and authentication.
2. `secrets.go`: Manages secret retrieval, expansion, and backup.
3. `config.go`: Handles reading and writing of configuration files.
4. `api.go`: Provides functions for interacting with the Infisical API.
5. `log.go`: Offers error handling and logging utilities.
6. `helper.go`: Contains various helper functions for common operations.

## Dependencies
The package relies on several external libraries:

1. `github.com/zalando/go-keyring`: For secure credential storage.
2. `github.com/go-resty/resty/v2`: For making HTTP requests to the Infisical API.
3. `github.com/rs/zerolog/log`: For structured logging.
4. `github.com/fatih/color`: For colored console output.
5. `github.com/spf13/cobra`: For command-line interface functionality.

## Configuration
The package uses several configuration options, including:

1. `CONFIG_FILE_NAME`: Name of the Infisical configuration file.
2. `INFISICAL_DEFAULT_API_URL`: Default API URL for Infisical.
3. `VAULT_BACKEND_AUTO_MODE` and `VAULT_BACKEND_FILE_MODE`: Constants for vault backend modes.
4. Environment variables for various authentication methods and settings.

The package reads and writes configuration files to manage user and workspace settings, allowing for persistent configuration across CLI invocations.

This utility package forms the backbone of the Infisical CLI, providing essential functionality for managing secrets, handling authentication, and interacting with the Infisical platform. It's designed to be flexible and extensible, supporting various authentication methods and secret management strategies.