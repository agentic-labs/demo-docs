---
title: "push-server.yml"
---

## High-level description
This GitHub Actions workflow file defines a CI/CD pipeline for building and pushing Docker images to Docker Hub whenever changes are pushed to the `main` branch or the workflow file itself. It builds multiple images, each representing a different component of the application, such as the server, ingestion worker, delete worker, etc.

## Code Structure
The code defines a single workflow named `Create Docker Images` with multiple jobs. Each job builds and pushes a specific Docker image. The jobs share a similar structure: checkout code, set up build environment, log in to Docker Hub, build the image, and push it with appropriate tags.

## Symbols
### `Create Docker Images`
#### Description
This workflow is triggered on push events to the `main` branch or the workflow file, or manually via workflow dispatch. It builds and pushes Docker images for various components of the application.

#### Inputs
None explicitly defined. However, it uses environment variables like `DOCKER_USERNAME` and `DOCKER_PASSWORD` from GitHub secrets.

#### Outputs
None explicitly defined. The main output is the successful building and pushing of Docker images to Docker Hub.

#### Internal Logic
The workflow consists of multiple jobs running in parallel. Each job follows these steps:
1. **Checkout Code:** Checks out the repository's code.
2. **Setup Build Environment:** Sets up the build environment using `docker/setup-buildx-action`.
3. **Login to Docker Hub:** Logs in to Docker Hub using credentials from GitHub secrets.
4. **Docker Meta:** Uses `docker/metadata-action` to generate image tags based on the branch and commit SHA.
5. **Build and Push Docker Image:** Builds the Docker image using the specified Dockerfile and pushes it to Docker Hub with the generated tags.

## Dependencies
This workflow relies on several GitHub Actions from the Docker ecosystem:
| Dependency | Purpose |
|:-----------|:--------|
| `actions/checkout@v4` | Checks out the repository's code. |
| `docker/setup-buildx-action@v3` | Sets up the Docker Buildx environment for building images. |
| `docker/login-action@v3` | Logs in to Docker Hub to push images. |
| `docker/metadata-action@v5` | Generates image tags based on branch and commit information. |
| `docker/build-push-action@v5` | Builds and pushes Docker images to a registry. |

## Configuration
The workflow uses GitHub secrets for storing sensitive information:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| `DOCKER_USERNAME` | `string` | N/A | Docker Hub username for authentication. |
| `DOCKER_PASSWORD` | `string` | N/A | Docker Hub password or access token for authentication. |

## Error Handling
The workflow relies on the error handling mechanisms of the individual GitHub Actions used. If any step within a job fails, the job will fail, and the workflow run will be marked as failed.

## Logging
Each GitHub Action used in the workflow logs its output to the workflow run log, providing visibility into the build and push process.
