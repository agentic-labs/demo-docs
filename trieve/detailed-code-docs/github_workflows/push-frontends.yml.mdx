---
title: "push-frontends.yml"
---

## High-level description
This GitHub Actions workflow builds and pushes Docker images for various frontend components of the Trieve application (chat, search, dashboard, analytics-site) to Docker Hub. It is triggered on push events to the `main` branch for specific paths within the repository, or manually via workflow dispatch.

## Code Structure
The workflow defines four jobs, one for each frontend component (chat, search, dashboard, analytics-site). Each job follows the same structure: checkout the code, set up buildx, log in to Docker Hub, configure metadata for the image, and finally build and push the image.

## Symbols
### `name`
#### Description
Defines the name of the workflow, displayed in the GitHub Actions interface.

#### Inputs
N/A - This is a top-level property of the workflow.

#### Outputs
N/A

#### Internal Logic
N/A

### `concurrency`
#### Description
Configures concurrency for the workflow, ensuring that only one workflow run is active for a given branch at a time.

#### Inputs
N/A - This is a top-level property of the workflow.

#### Outputs
N/A

#### Internal Logic
- `group`: Defines the concurrency group using the workflow name and branch name.
- `cancel-in-progress`: Cancels any in-progress workflow runs within the same concurrency group.

### `on`
#### Description
Specifies the events that trigger the workflow.

#### Inputs
N/A - This is a top-level property of the workflow.

#### Outputs
N/A

#### Internal Logic
- `workflow_dispatch`: Allows manual triggering of the workflow.
- `push`: Triggers the workflow on push events to the `main` branch for specific paths.

### `jobs`
#### Description
Defines the jobs that make up the workflow.

#### Inputs
N/A - This is a top-level property of the workflow.

#### Outputs
N/A

#### Internal Logic
Contains four jobs: `build_chat`, `build_search`, `build_dashboard`, and `build_analytics_site`. Each job follows a similar structure:

#### `build_chat`, `build_search`, `build_dashboard`, `build_analytics_site`
#### Description
These jobs build and push Docker images for the respective frontend components.

#### Inputs
N/A

#### Outputs
N/A

#### Internal Logic
Each job consists of the following steps:
- `Checkout the repo`: Checks out the repository code.
- `Setup buildx`: Sets up the buildx Docker builder.
- `Login to Docker Hub`: Logs in to Docker Hub using credentials stored in GitHub secrets.
- `Docker meta`: Configures metadata for the Docker image, including tags and labels.
- `Build and push Docker image`: Builds the Docker image using the specified Dockerfile and pushes it to Docker Hub.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| actions/checkout@v4 | Checks out the repository code. |
| docker/setup-buildx-action@v3 | Sets up the buildx Docker builder. |
| docker/login-action@v3 | Logs in to Docker Hub. |
| docker/metadata-action@v5 | Configures Docker image metadata. |
| docker/build-push-action@v5 | Builds and pushes Docker images. |

## TODOs
- The workflow includes commented-out steps for setting up QEMU. This might indicate potential future support for building and pushing images for different architectures.
- The `build_analytics_site` job does not utilize a build cache like the other jobs. This could be a potential improvement for build speed. 
