---
title: "utils.ts"
---

## High-level description
This code defines a custom test function that wraps Vitest's base test function. It sets default options for retry attempts and timeout duration for all tests using this wrapper.

## Symbols

### `test`
#### Description
A custom test function that wraps Vitest's base test function with predefined options for retry attempts and timeout duration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| name | string | The name of the test |
| fn | () =&gt; void | The test function to be executed |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| - | - | Returns the result of calling the base test function |

#### Internal Logic
1. Imports the base test function from Vitest.
2. Defines a new test function that takes a name and a test function as parameters.
3. Calls the base test function with the provided name, an options object specifying retry and timeout settings, and the provided test function.
4. The options object sets:
   - `retry: 3`: The test will be retried up to 3 times if it fails.
   - `timeout: 30_000`: The test will timeout after 30 seconds (30,000 milliseconds).

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| vitest | Provides the base test function that is being wrapped |

## References
This custom test function is used in various test files throughout the project, including:
- `clients/ts-sdk/src/functions/events/events.test.ts`
- `clients/ts-sdk/src/functions/chunks/chunk.test.ts`
- `clients/ts-sdk/src/functions/message/message.test.ts`
- `clients/ts-sdk/src/functions/analytics/analytics.test.ts`
- `clients/ts-sdk/src/functions/groups/chunkGroup.test.ts`
- `clients/ts-sdk/src/functions/topic/topic.test.ts`

In these files, the custom `test` function is imported and used to define individual test cases within describe blocks.

## Performance Considerations
The retry and timeout options set in this custom test function may impact the overall execution time of the test suite. Tests that consistently fail or take longer than 30 seconds to complete will be retried up to 3 times before being marked as failed, which could significantly increase the total test execution time.