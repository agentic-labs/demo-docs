---
title: "fetch-client.ts"
---

## High-level description
This file defines the `TrieveFetchClient` class, which is responsible for making HTTP requests to the Trieve API. It provides a flexible and type-safe way to interact with various API endpoints, handling authentication, request formatting, and response parsing.

## Code Structure
The file exports types from "./types.gen.ts" and defines the `TrieveFetchClient` class. The class contains methods for initializing the client and making HTTP requests. It uses TypeScript generics and conditional types to provide type safety and flexibility for different API endpoints.

## Symbols

### `TrieveFetchClient`
#### Description
A class that handles HTTP requests to the Trieve API, providing methods for authentication and request handling.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| opts | TrieveOpts | Configuration options for the client |

#### Internal Logic
- Initializes with API key, base URL, and debug mode
- Provides a `fetch` method for making HTTP requests to the API
- Handles request formatting, including path parameter replacement and header setting
- Processes responses, including error handling and JSON parsing

### `fetch` method
#### Description
Makes an HTTP request to the Trieve API with the specified parameters.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| path | P (extends Paths) | The API endpoint path |
| method | M (extends MethodsForPath&lt;P&gt; & HttpMethod) | The HTTP method |
| params | RequestParams&lt;P, M&gt; | Request parameters |
| signal | AbortSignal (optional) | AbortSignal for request cancellation |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| response | ResponseBody&lt;P, M&gt; | The parsed response from the API |

#### Internal Logic
1. Prepares headers, including Content-Type and Authorization
2. Processes request parameters, setting special headers and path parameters
3. Constructs the full URL and request body
4. Sends the HTTP request using the fetch API
5. Handles the response, including error checking and JSON parsing
6. Returns the parsed response or throws an error

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| fetch | Used for making HTTP requests |

## Error Handling
- Throws an error if the HTTP response is not ok (status outside 200-299 range)
- Attempts to parse the error response as JSON or text

## Logging
- If debug mode is enabled, logs request and response details to the console

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.