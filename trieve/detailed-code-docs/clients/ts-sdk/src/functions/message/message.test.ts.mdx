---
title: "message.test.ts"
---

## High-level description
This file contains unit tests for the message-related functions of the TrieveSDK. It tests the creation, editing, regeneration, and retrieval of messages within a topic.

## Code Structure
The file defines a test suite using Vitest, with each test focusing on a specific message-related function of the TrieveSDK. The tests are organized to verify the correct functionality and type safety of these operations.

## Symbols

### `describe("Message Tests", async () =&gt; { ... })`
#### Description
This is the main test suite for message-related functionality. It sets up the TrieveSDK instance and contains individual tests for different message operations.

#### Internal Logic
- Sets up a `TrieveSDK` instance before running the tests.
- Contains four separate test cases for different message operations.

### `test("createMessage", async () =&gt; { ... })`
#### Description
Tests the `createMessage` function of the TrieveSDK.

#### Internal Logic
- Calls `trieve.createMessage` with a topic ID and message content.
- Verifies that the returned data is of type string.

### `test("editMessage", async () =&gt; { ... })`
#### Description
Tests the `editMessage` function of the TrieveSDK.

#### Internal Logic
- Calls `trieve.editMessage` with a topic ID, message sort order, and new message content.
- Verifies that the returned data is of unknown type.

### `test("regenerateMessage", async () =&gt; { ... })`
#### Description
Tests the `regenerateMessage` function of the TrieveSDK.

#### Internal Logic
- Calls `trieve.regenerateMessage` with a topic ID, search query, and search type.
- Verifies that the returned data is of type string.

### `test("getAllMessagesForTopic", async () =&gt; { ... })`
#### Description
Tests the `getAllMessagesForTopic` function of the TrieveSDK.

#### Internal Logic
- Calls `trieve.getAllMessagesForTopic` with a topic ID.
- Verifies that the returned data is an array of Message objects.

## Dependencies
- `vitest`: Used for test assertions and type checking.
- `TrieveSDK`: The main SDK being tested.
- `Message`: A type from the generated types file.
- `EXAMPLE_TOPIC_ID`, `TRIEVE`: Constants imported from a separate file.

## Notes
- The tests use `expectTypeOf` for type checking, ensuring that the returned data matches the expected types.
- The `TRIEVE` constant is used as the SDK instance for all tests, likely configured with test credentials.
- The `EXAMPLE_TOPIC_ID` is used across tests, suggesting it's a pre-existing topic in the test environment.
- The tests are set up to retry up to 3 times and have a timeout of 30 seconds, as configured in the imported `test` function.