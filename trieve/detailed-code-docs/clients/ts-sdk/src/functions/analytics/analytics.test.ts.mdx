---
title: "analytics.test.ts"
---

## High-level description
This code file contains unit tests for the analytics functionality of the TrieveSDK. It tests various analytics methods such as CTR (Click-Through Rate) analytics, RAG (Retrieval-Augmented Generation) analytics, recommendation analytics, and search analytics.

## Code Structure
The code defines a test suite using Vitest, with a `beforeAll` hook to initialize the TrieveSDK instance. Each test case calls a specific analytics method of the TrieveSDK and checks the type of the returned data using Vitest's `expectTypeOf` assertion.

## References
- TrieveSDK from "../../sdk"
- Various response types from "../../types.gen"
- Constants (CHUNK_EXAMPLE_ID, TRIEVE) from "../../__tests__/constants"
- Custom test utility from "../../__tests__/utils"

## Symbols

### `describe("Analytics Tests", async () =&gt; { ... })`
#### Description
This is the main test suite for analytics functionality.

#### Internal Logic
1. Initializes the TrieveSDK instance in the `beforeAll` hook.
2. Contains individual test cases for different analytics methods.

### `test("ctr analytics get", async () =&gt; { ... })`
#### Description
Tests the getCTRAnalytics method of TrieveSDK.

#### Internal Logic
1. Calls `trieve.getCTRAnalytics` with `type: "search_ctr_metrics"`.
2. Asserts that the returned data type matches `CTRAnalyticsResponse`.

### `test("sendCTRAnalytics", async () =&gt; { ... })`
#### Description
Tests the sendCTRAnalytics method of TrieveSDK.

#### Internal Logic
1. Calls `trieve.sendCTRAnalytics` with sample data.
2. Asserts that the returned data type is void.

### `test("rag analytics get", async () =&gt; { ... })`
#### Description
Tests the getRagAnalytics method of TrieveSDK.

#### Internal Logic
1. Calls `trieve.getRagAnalytics` with `type: "rag_queries"`.
2. Asserts that the returned data type matches `RAGAnalyticsResponse`.

### `test("recommendation analytics get", async () =&gt; { ... })`
#### Description
Tests the getRecommendationAnalytics method of TrieveSDK.

#### Internal Logic
1. Calls `trieve.getRecommendationAnalytics` with `type: "low_confidence_recommendations"`.
2. Asserts that the returned data type matches `RecommendationAnalyticsResponse`.

### `test("getSearchAnalytics", async () =&gt; { ... })`
#### Description
Tests the getSearchAnalytics method of TrieveSDK.

#### Internal Logic
1. Calls `trieve.getSearchAnalytics` with `type: "count_queries"`.
2. Asserts that the returned data type matches `SearchAnalyticsResponse`.

## Dependencies
- Vitest: Used for testing and assertions.
- TrieveSDK: The main SDK being tested.
- Various response types from types.gen.ts.
- Constants and utility functions from __tests__ folder.