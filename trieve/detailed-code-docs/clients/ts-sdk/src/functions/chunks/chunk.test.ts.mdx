---
title: "chunk.test.ts"
---

## High-level description
This file contains unit tests for the chunk-related methods of the TrieveSDK. It tests various functionalities such as searching, creating chunks, autocomplete, recommending chunks, and performing RAG operations on chunks.

## Code Structure
The file defines a test suite using Vitest, with each test focusing on a specific method of the TrieveSDK related to chunk operations. The tests primarily check the type correctness of the returned data using Vitest's `expectTypeOf` function.

## References
- TrieveSDK from "../../sdk"
- Various types from "../../types.gen"
- Constants from "../../__tests__/constants"
- Custom test utility from "../../__tests__/utils"

## Symbols

### `describe("Chunk Methods Test", async () =&gt; { ... })`
#### Description
This is the main test suite for chunk-related methods of the TrieveSDK.

#### Internal Logic
1. Initializes a TrieveSDK instance before all tests.
2. Contains individual tests for various chunk-related methods.

### `test("search", async () =&gt; { ... })`
#### Description
Tests the search functionality of the TrieveSDK.

#### Internal Logic
1. Calls the `search` method with a query and search type.
2. Checks if the returned data type matches `SearchResponseBody`.

### `test("create chunk", async () =&gt; { ... })`
#### Description
Tests the chunk creation functionality of the TrieveSDK.

#### Internal Logic
1. Calls the `createChunk` method with chunk HTML.
2. Checks if the returned data type matches `ReturnQueuedChunk`.

### `test("autocomplete", async () =&gt; { ... })`
#### Description
Tests the autocomplete functionality of the TrieveSDK.

#### Internal Logic
1. Calls the `autocomplete` method with a query and search type.
2. Checks if the returned data type matches `SearchResponseTypes`.

### `test("getRecommendedChunks", async () =&gt; { ... })`
#### Description
Tests the chunk recommendation functionality of the TrieveSDK.

#### Internal Logic
1. Calls the `getRecommendedChunks` method with positive chunk IDs.
2. Checks if the returned data type matches `RecommendResponseTypes`.

### `test("ragOnChunk", async () =&gt; { ... })`
#### Description
Tests the RAG (Retrieval-Augmented Generation) functionality on chunks.

#### Internal Logic
1. Calls the `ragOnChunk` method with chunk IDs and previous messages.
2. Checks if the returned data type is a string.

### `test("countChunksAboveThreshold", async () =&gt; { ... })`
#### Description
Tests the functionality to count chunks above a certain threshold.

#### Internal Logic
1. Calls the `countChunksAboveThreshold` method with limit, query, and search type.
2. Checks if the returned data type matches `CountChunkQueryResponseBody`.

### `test("scroll", async () =&gt; { ... })`
#### Description
Tests the scroll functionality for chunks.

#### Internal Logic
1. Calls the `scroll` method with an empty object.
2. Checks if the returned data type matches `ScrollChunksResponseBody`.

### `test("updateChunk", async () =&gt; { ... })`
#### Description
Tests the chunk update functionality.

#### Internal Logic
1. Calls the `updateChunk` method with tracking ID and chunk HTML.
2. Checks if the returned data type is void.

### `test("updateChunkByTrackingId", async () =&gt; { ... })`
#### Description
Tests the chunk update functionality using tracking ID.

#### Internal Logic
1. Calls the `updateChunkByTrackingId` method with tracking ID and chunk HTML.
2. Checks if the returned data type is void.

### `test("getChunksByIds", async () =&gt; { ... })`
#### Description
Tests retrieving chunks by their IDs.

#### Internal Logic
1. Calls the `getChunksByIds` method with an array of chunk IDs.
2. Checks if the returned data type is an array of `ChunkReturnTypes`.

### `test("getChunksByTrackingIds", async () =&gt; { ... })`
#### Description
Tests retrieving chunks by their tracking IDs.

#### Internal Logic
1. Calls the `getChunksByTrackingIds` method with an array of tracking IDs.
2. Checks if the returned data type is an array of `ChunkReturnTypes`.

## Dependencies
- Vitest: Used for testing and type checking.
- TrieveSDK: The main SDK being tested.
- Various types from the generated types file.
- Constants for example data used in tests.
- Custom test utility for retry and timeout configuration.