---
title: "advancedSearch.ts"
---

## High-level description
This TypeScript code demonstrates an advanced search using the Trieve API. It sends a search request with specific parameters like query, search type, filters, and pagination to retrieve relevant chunks of data from a specified dataset. The retrieved chunks are then printed to the console.

## References
- `trieve`: An instance of the `Trieve` class from the `trieve-fetch-client` library, likely initialized with API key and base URL.
- `EXAMPLE_DATASET_ID`: A constant likely representing the ID of the target dataset for the search.
- `SearchResponseBody`: A type from the `trieve-fetch-client` library defining the structure of the search response.

## Symbols
### `main`
#### Description
This asynchronous function encapsulates the logic for performing the advanced search and logging the results.

#### Inputs
This function takes no direct inputs.

#### Outputs
This function does not return any value.

#### Internal Logic
1. **Sends a search request:**
   - Uses the `trieve.fetch` method to send a POST request to the `/api/chunk/search` endpoint.
   - Provides search parameters within the `data` object:
     - `query`: "This is an advanced search" - the search query string.
     - `search_type`: "hybrid" - specifies the type of search to perform.
     - `score_threshold`: 0.002 - minimum score for a chunk to be included in the results.
     - `highlight_options`: configures how matching chunks are highlighted.
     - `page_size`: 20 - maximum number of results per page.
     - `page`: 1 - the page number of results to retrieve.
     - `filters`: applies additional filtering to the search results, in this case excluding chunks with specific metadata.
   - Sets `datasetId` to `EXAMPLE_DATASET_ID` to target the specific dataset.
2. **Processes the search response:**
   - Asserts the response type as `SearchResponseBody`.
   - Extracts the retrieved chunks from the `searchResponse.chunks` property.
3. **Logs the results:**
   - Prints the retrieved chunks to the console.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| trieve-fetch-client | Provides the `Trieve` class and related types for interacting with the Trieve API. |

## Error Handling
The code does not implement specific error handling beyond the implicit error handling provided by the `await` keyword, which would throw any errors encountered during the asynchronous operations.
