---
title: "service.yaml"
---

## High-level description
This code defines a Kubernetes Service named "qdrant" using a Helm template. It exposes the qdrant application, allowing internal or external access depending on the configured service type. The service routes traffic to pods matching the specified selector labels.

## Code Structure
The code uses Helm templating features like `include`, `with`, `if`, and `range` to dynamically generate the service definition based on values provided during deployment. It defines metadata, spec (including type, ports, and selector), and optionally includes additional labels and annotations.

## Symbols
### `helm/charts/qdrant/templates/service.yaml`
#### Description
This file defines a Kubernetes Service resource for the qdrant application using a Helm template. It allows customization of service parameters like type, ports, load balancer IP, and selector labels.

#### Inputs
This template uses values from `values.yaml` or user-provided overrides during Helm installation/upgrade. Key input values include:
| Name | Type | Description |
|:-----|:-----|:------------|
| `service.type` | string | Kubernetes service type (default: "ClusterIP"). |
| `service.loadBalancerIP` | string |  Specific IP address to assign to the service's load balancer (optional). |
| `service.ports` | list | List of port definitions for the service. Each port definition includes name, port, targetPort, and protocol. |
| `service.additionalLabels` | map | Additional labels to add to the service (optional). |
| `service.annotations` | map | Annotations to add to the service (optional). |

#### Outputs
This template generates a Kubernetes YAML manifest for a Service object.

#### Internal Logic
1. **Metadata:**
    - Sets the service name using `qdrant.fullname` (likely a combination of release name and chart name).
    - Adds labels from `qdrant.labels` and optionally includes additional labels from `service.additionalLabels`.
    - Includes annotations from `service.annotations` if provided.
2. **Spec:**
    - Sets the service type from `service.type` (defaults to "ClusterIP").
    - Sets the load balancer IP from `service.loadBalancerIP` if provided.
    - Defines the service ports based on the `service.ports` list. Each port definition includes name, port, targetPort, and protocol (defaults to "TCP").
    - Sets the selector labels using `qdrant.selectorLabels` to target pods belonging to the qdrant application.

## References
- `qdrant.fullname`: A Helm template function providing the full name of the qdrant release.
- `qdrant.labels`: A Helm template function providing default labels for the qdrant application.
- `qdrant.selectorLabels`: A Helm template function providing labels used to select pods belonging to the qdrant application.

## Dependencies
This code depends on the Kubernetes API version `v1` for defining the Service resource. It also relies on Helm templating functions and values provided during deployment.
