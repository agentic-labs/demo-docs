---
title: "service-headless.yaml"
---

## High-level description
This code defines a Kubernetes Service of type `ClusterIP` named `[release-name]-qdrant-headless`. This service is intended to provide headless service discovery for Qdrant pods within the Kubernetes cluster. It does not expose the service externally.

## Code Structure
The code defines a single Kubernetes Service resource. It uses values from `Values.service` to define ports and labels. It also uses templates to dynamically generate the service name and selector labels.

## References
* `qdrant.fullname`: A template function that likely generates the full name of the Qdrant deployment.
* `qdrant.labels`: A template function that likely generates common labels for Qdrant resources.
* `qdrant.selectorLabels`: A template function that likely generates labels used to select Qdrant pods.

## Symbols
### `service-headless.yaml`
#### Description
This file defines a Kubernetes Service resource that provides headless service discovery for Qdrant pods within the cluster.

#### Inputs
This template uses values from `Values.yaml`:
| Name | Type | Description |
|:-----|:-----|:------------|
| `.Values.service.ports` | list | A list of ports to expose on the service. Each port should have a `name`, `port`, and `targetPort`. |
| `.Values.service.additionalLabels` | map | Additional labels to add to the service. |

#### Internal Logic
The template uses the following Kubernetes concepts:
* `clusterIP: None`: This configures the service as a headless service, meaning it does not get assigned a cluster IP address.
* `publishNotReadyAddresses: true`: This ensures that endpoints for pods that are not yet ready are still included in the service's endpoints list.
* `selector`: This field defines labels that are used to select pods that should be included in the service.

## Dependencies
This code depends on the Kubernetes API version `v1` for defining the Service resource.

## Configuration
This template uses values from `Values.yaml` to configure the service. See the "Inputs" section for details.
