---
title: "pdb.yaml"
---

## High-level description
This code defines a Kubernetes PodDisruptionBudget (PDB) for the Qdrant application. It ensures a minimum number of Qdrant pods are available during voluntary disruptions like node upgrades or maintenance. The PDB is enabled based on the `podDisruptionBudget.enabled` configuration value.

## Code Structure
The code uses conditional logic based on the `Values` object to dynamically generate the PDB definition. It includes settings for maximum unavailable pods, minimum available pods, and unhealthy pod eviction policy, all configurable through `Values`.

## Symbols
### `helm/charts/qdrant/templates/pdb.yaml`
#### Description
This code defines a Kubernetes PodDisruptionBudget (PDB) using a YAML template. It sets parameters to control the allowed disruption of Qdrant pods during voluntary events like cluster maintenance.

#### Inputs
This template uses values from the `Values` object passed to the Helm chart.
| Name | Type | Description |
|:-----|:-----|:------------|
| `Values.podDisruptionBudget.enabled` | boolean | Enables or disables the PDB. |
| `Values.podDisruptionBudget.maxUnavailable` | int | Maximum number of pods that can be unavailable during disruption. |
| `Values.podDisruptionBudget.minAvailable` | int | Minimum number of pods that must remain available during disruption. |
| `Values.podDisruptionBudget.unhealthyPodEvictionPolicy` | string | Policy for evicting unhealthy pods before reaching the disruption limit. |

#### Outputs
A Kubernetes YAML definition for a PodDisruptionBudget object.

#### Internal Logic
1. **Conditional PDB Creation:** The PDB is created only if `Values.podDisruptionBudget.enabled` is true.
2. **Parameterization:** The `maxUnavailable`, `minAvailable`, and `unhealthyPodEvictionPolicy` fields are set based on corresponding values in the `Values` object.
3. **Label Matching:** The PDB uses labels defined by `qdrant.selectorLabels` to match the Qdrant pods.

## Dependencies
* **Helm:** This code is a Helm template and relies on Helm for rendering and deployment.
* **Kubernetes:** The output YAML defines a Kubernetes PodDisruptionBudget object.

## Configuration
The PDB behavior is controlled by the following configuration options within the `Values` object:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| `podDisruptionBudget.enabled` | boolean |  | Enables or disables the PDB. |
| `podDisruptionBudget.maxUnavailable` | int |  | Maximum number of pods that can be unavailable during disruption. |
| `podDisruptionBudget.minAvailable` | int |  | Minimum number of pods that must remain available during disruption. |
| `podDisruptionBudget.unhealthyPodEvictionPolicy` | string |  | Policy for evicting unhealthy pods before reaching the disruption limit. | 
