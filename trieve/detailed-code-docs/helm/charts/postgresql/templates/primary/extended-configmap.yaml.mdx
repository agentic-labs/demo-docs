---
title: "extended-configmap.yaml"
---

## High-level description
This code defines a Kubernetes ConfigMap named "&lt;release-name&gt;-extended-configuration" in the Helm template for a PostgreSQL primary instance. This ConfigMap is conditionally created based on the value of `postgresql.v1.primary.createExtendedConfigmap` and contains PostgreSQL configuration settings from `values.yaml`.

## Code Structure
This code uses Helm templating to define a Kubernetes ConfigMap. It includes other template files to determine the ConfigMap's name, namespace, labels, and content.

## References
* `postgresql.v1.primary.createExtendedConfigmap`: This template function likely determines whether to create the ConfigMap.
* `postgresql.v1.primary.fullname`: This template function likely provides the full name of the PostgreSQL primary instance.
* `common.labels.standard`: This template function likely provides standard labels for the ConfigMap.
* `common.tplvalues.render`: This template function likely renders values from `values.yaml`.

## Symbols
### `extended-configmap.yaml`
#### Description
This file defines a Kubernetes ConfigMap containing extended configuration for a PostgreSQL primary instance.

#### Inputs
Uses values from `values.yaml`:
* `.Release.Namespace`: The Kubernetes namespace for the release.
* `.Values.commonLabels`: Custom labels to apply to the ConfigMap.
* `.Values.commonAnnotations`: Custom annotations to apply to the ConfigMap.
* `.Values.primary.extendedConfiguration`: PostgreSQL configuration settings to include in the ConfigMap.

#### Outputs
A Kubernetes ConfigMap named "&lt;release-name&gt;-extended-configuration" containing PostgreSQL configuration settings.

#### Internal Logic
1. **Conditional Creation:** The ConfigMap is created only if `postgresql.v1.primary.createExtendedConfigmap` evaluates to true.
2. **Name and Namespace:** The ConfigMap's name is derived from the release name and the namespace is determined from `.Release.Namespace`.
3. **Labels and Annotations:** Standard labels are applied using `common.labels.standard` and custom labels from `.Values.commonLabels` are added. Similarly, annotations are applied from `.Values.commonAnnotations`.
4. **Configuration Data:** The `override.conf` key in the ConfigMap data contains PostgreSQL configuration settings rendered from `.Values.primary.extendedConfiguration`.

## Dependencies
* Helm

## Configuration
This template uses values from `values.yaml` to configure the ConfigMap. The following keys are particularly relevant:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| `postgresql.v1.primary.createExtendedConfigmap` | boolean |  | Determines whether to create the ConfigMap. |
| `commonLabels` | object |  | Custom labels to apply to the ConfigMap. |
| `commonAnnotations` | object |  | Custom annotations to apply to the ConfigMap. |
| `primary.extendedConfiguration` | string |  | PostgreSQL configuration settings to include in the ConfigMap. | 
