---
title: "extended-configmap.yaml"
---

## High-level description
This code defines a Kubernetes ConfigMap named `&lt;release-name&gt;-read-replicas-extended-configuration` in a Helm template. This ConfigMap is specifically created for read replicas in a PostgreSQL setup and is designed to hold custom configuration overrides. The content of the ConfigMap is populated from the `readReplicas.extendedConfiguration` field in the Helm values file.

## References
- `postgresql.v1.readReplicas.createExtendedConfigmap`: This appears to be a Helm function that determines whether the ConfigMap should be created. Its implementation is not provided in the given context.
- `postgresql.v1.readReplica.fullname`: This is likely another Helm function that generates the full name of the read replica, which is used as part of the ConfigMap name.
- `common.labels.standard`: This Helm template is expected to provide standard labels for the ConfigMap.
- `common.tplvalues.render`: This Helm template is used to render values from the provided dictionary.
- `readReplicas.extendedConfiguration`: This field in the Helm values file is expected to contain the actual PostgreSQL configuration overrides.

## Symbols
### `extended-configmap.yaml`
#### Description
This code defines a Kubernetes ConfigMap resource in a Helm template. The ConfigMap is intended to store extended configuration overrides for PostgreSQL read replicas.

#### Inputs
This code snippet doesn't have explicit input parameters. It relies on values passed to it through the Helm context.

#### Outputs
This code doesn't return any values. It's a Helm template that generates a Kubernetes ConfigMap object.

#### Internal Logic
1. **Conditional Creation:** The ConfigMap is created only if the result of the Helm function `postgresql.v1.readReplicas.createExtendedConfigmap` is true.
2. **Name and Namespace:** The ConfigMap is named using the output of `postgresql.v1.readReplica.fullname` appended with "-extended-configuration". It's placed in the namespace specified by `.Release.Namespace`.
3. **Labels:** Standard labels are added to the ConfigMap using the `common.labels.standard` template. An additional label `app.kubernetes.io/component: read` is added to identify it as related to read replicas.
4. **Annotations:** If `commonAnnotations` are defined in the Helm values, they are added to the ConfigMap using the `common.tplvalues.render` template.
5. **Data:** The ConfigMap contains a single data key `override.conf`. The content of this key is populated by rendering the `readReplicas.extendedConfiguration` value from the Helm values file using the `common.tplvalues.render` template.

## Side Effects
- **ConfigMap Creation:** This code, when rendered by Helm, will create a ConfigMap in the Kubernetes cluster.
- **Configuration Override:** The created ConfigMap is intended to be used by PostgreSQL read replicas to apply custom configuration overrides.

## Dependencies
- This code depends on the Helm templating engine for rendering and on Kubernetes for deployment.

## Configuration
This code snippet itself doesn't define any configuration options. However, it relies on the following configuration values passed through the Helm context:
- `.Release.Namespace`: The Kubernetes namespace where the ConfigMap should be created.
- `.Values.commonLabels`: A dictionary of common labels to be applied to the ConfigMap.
- `.Values.commonAnnotations`: A dictionary of annotations to be applied to the ConfigMap.
- `.Values.readReplicas.extendedConfiguration`: The actual PostgreSQL configuration overrides to be stored in the ConfigMap.

## TODOs
This code snippet doesn't contain any TODOs.
