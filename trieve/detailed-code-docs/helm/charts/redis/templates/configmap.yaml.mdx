---
title: "configmap.yaml"
---

## High-level description
This code defines a Kubernetes ConfigMap for a Redis deployment using Helm templating. It generates configuration files (`redis.conf`, `master.conf`, `replica.conf`, and optionally `sentinel.conf`) based on user-provided values and includes logic for common, master, replica, and sentinel configurations.

## References
- `redis.createConfigmap`: This appears to be a Helm template function that determines whether to create the ConfigMap.
- `common.names.fullname`: Returns the full name of the release.
- `common.names.namespace`: Returns the namespace of the release.
- `common.labels.standard`: Returns a standard set of labels.
- `common.tplvalues.render`: Renders a template with provided values.
- `common.names.fullname`: Returns the full name of the release.
- `common.names.namespace`: Returns the namespace of the release.
- `clusterDomain`: Refers to the cluster's domain name.

## Symbols
### `configmap.yaml`
#### Description
This file defines a Kubernetes ConfigMap resource that holds configuration files for a Redis deployment. It uses Helm templating to dynamically generate the configuration based on user-provided values.

#### Inputs
This file uses values passed to the Helm template, including:
- `.Values.commonConfiguration`: Common Redis configuration.
- `.Values.master.*`: Configuration specific to Redis master nodes.
- `.Values.replica.*`: Configuration specific to Redis replica nodes.
- `.Values.sentinel.*`: Configuration specific to Redis Sentinel instances.

#### Outputs
A Kubernetes ConfigMap resource with the following data:
- `redis.conf`: Common Redis configuration.
- `master.conf`: Configuration specific to Redis master nodes.
- `replica.conf`: Configuration specific to Redis replica nodes.
- `sentinel.conf`: Configuration specific to Redis Sentinel instances (if enabled).

#### Internal Logic
The template uses conditional logic (`{{- if ... }}`) to include configuration sections based on user-provided values. It also uses loops (`{{- range ... }}`) to iterate over lists, such as disabled commands.

## Dependencies
This code depends on the following Helm libraries:
| Dependency | Purpose |
|:-----------|:--------|
| `include` | Used to include other Helm templates.
| `printf` | Used for string formatting.
| `template` | Used to render Helm templates.
| `dict` | Used to create dictionaries.
| `nindent` | Used to indent text.
| `quote` | Used to quote strings.

## Configuration
This code relies on user-provided values passed to the Helm chart. These values configure various aspects of the Redis deployment, including common settings, master and replica configurations, and Sentinel settings.
