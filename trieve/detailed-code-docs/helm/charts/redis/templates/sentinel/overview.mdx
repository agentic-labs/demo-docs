---
title: "Overview"
---

## High-level description
This directory contains Helm chart templates for deploying Redis Sentinel in a Kubernetes environment. It includes configurations for horizontal pod autoscaling, node services, port allocation, main service, and the StatefulSet for Redis Sentinel nodes. These templates work together to create a robust and scalable Redis Sentinel deployment with various configuration options.

## What does it do?
The templates in this directory collectively deploy and manage a Redis Sentinel cluster in Kubernetes. Here's a breakdown of the main functionalities:

1. Horizontal Pod Autoscaling (HPA): Automatically scales the number of Redis Sentinel replicas based on CPU or memory usage.
2. Node Services: Creates individual Kubernetes Services for each Redis Sentinel node, exposing both Sentinel and Redis ports.
3. Port Allocation: Dynamically allocates and manages NodePorts for Redis and Sentinel services to avoid conflicts.
4. Main Service: Defines the main Kubernetes Service for the Redis Sentinel deployment, supporting various service types (ClusterIP, NodePort, LoadBalancer).
5. StatefulSet: Deploys Redis Sentinel nodes as a StatefulSet, ensuring stable network identities and persistent storage for each node.

These components work together to provide a flexible and scalable Redis Sentinel deployment that can be easily configured and managed in a Kubernetes environment.

## Entry points
The main entry point for this directory is the `statefulset.yaml` file, which defines the core Redis Sentinel deployment. Other important files include:

1. `hpa.yaml`: Configures horizontal pod autoscaling for the Redis Sentinel nodes.
2. `node-services.yaml`: Creates individual services for each Redis Sentinel node.
3. `ports-configmap.yaml`: Manages port allocation for Redis and Sentinel services.
4. `service.yaml`: Defines the main Kubernetes Service for the Redis Sentinel deployment.

The control flow typically starts with the StatefulSet deployment, followed by the creation of associated services and configuration resources. The HPA is applied to manage scaling based on resource utilization.

## Dependencies
These templates rely on the following external dependencies:

1. Kubernetes API: The templates use various Kubernetes resources (StatefulSet, Service, ConfigMap, etc.) and require a compatible Kubernetes cluster.
2. Helm: The templating system uses Helm functions and helpers for rendering and managing the deployment.
3. Redis: The deployed containers use Redis images for both the Redis server and Sentinel components.
4. Prometheus (optional): If metrics are enabled, a Prometheus exporter container is included in the deployment.

## Configuration
The templates in this directory are highly configurable through values provided in the `values.yaml` file of the parent chart. Key configuration options include:

1. Redis architecture (standalone or replication)
2. Number of replicas
3. Service type (ClusterIP, NodePort, LoadBalancer)
4. Persistence settings for Redis and Sentinel data
5. Authentication and TLS settings
6. Metrics export configuration
7. Resource limits and requests
8. Affinity and anti-affinity rules

These configuration options allow for flexible deployment scenarios, from simple development setups to complex production environments with high availability and security requirements.