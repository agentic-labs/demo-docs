---
title: "secret.yaml"
---

## High-level description
This code defines a Kubernetes Secret manifest for Redis authentication. It conditionally creates the Secret if authentication is enabled and no existing Secret is provided. The Secret stores the Redis password in base64 encoded format.

## Code Structure
The code uses conditional logic to determine whether to create the Secret. It leverages Go templating to dynamically generate values for the Secret's metadata and data.

## References
* `common.names.fullname`: Template function to generate the full name of the resource.
* `common.names.namespace`: Template function to retrieve the namespace.
* `common.labels.standard`: Template function to generate standard labels.
* `common.tplvalues.render`: Template function to render template values.
* `redis.password`: Template function to generate the Redis password.

## Symbols
### `secret.yaml`
#### Description
This file defines a Kubernetes Secret manifest for storing the Redis password used for authentication.

#### Inputs
This template uses values from the `Values` object passed to the Helm chart. The relevant values are:
| Name | Type | Description |
|:-----|:-----|:------------|
| `Values.auth.enabled` | boolean | Flag indicating whether Redis authentication is enabled. |
| `Values.auth.existingSecret` | string | Name of an existing Secret to use for authentication. |
| `Values.commonLabels` | object | Custom labels to apply to the Secret. |
| `Values.secretAnnotations` | object | Custom annotations to apply to the Secret. |
| `Values.commonAnnotations` | object | Common annotations to apply to the Secret. |

#### Outputs
The template renders a Kubernetes Secret manifest in YAML format.

#### Internal Logic
1. **Conditional Creation:** The Secret is created only if `Values.auth.enabled` is true and `Values.auth.existingSecret` is not set.
2. **Metadata Generation:** The Secret's metadata (name, namespace, labels, and annotations) is generated using template functions and values from the `Values` object.
3. **Password Encoding:** The `redis.password` template function generates the Redis password, which is then base64 encoded and stored in the `redis-password` data field.

## Dependencies
This code depends on the following Helm template functions:
| Dependency | Purpose |
|:-----------|:--------|
| `template` | Renders a named template. |
| `include` | Includes a template function's output. |
| `quote` | Quotes a string. |
| `nindent` | Indents a string. |
| `b64enc` | Base64 encodes a string. |

## Configuration
This code relies on configuration values passed to the Helm chart through the `Values` object. See the "Inputs" section for details on the relevant configuration options.
