---
title: "Overview"
---

## High-level description
This directory contains Helm chart templates for deploying Redis in Kubernetes. It includes configurations for various Redis deployment scenarios, including standalone, replication, and sentinel architectures. The templates cover aspects such as pod deployment, service exposure, security, monitoring, and scaling.

## What does it do?
The templates in this directory work together to deploy and manage Redis instances in a Kubernetes environment. Key functionalities include:

1. Deploying Redis master and replica nodes as StatefulSets or Deployments.
2. Setting up Redis Sentinel for high availability and automatic failover.
3. Configuring network policies to control traffic to and from Redis pods.
4. Managing TLS certificates for secure communication.
5. Creating ConfigMaps for Redis configuration and startup scripts.
6. Setting up monitoring with Prometheus ServiceMonitors and PrometheusRules.
7. Configuring horizontal pod autoscaling for Redis and Sentinel pods.
8. Managing RBAC with ServiceAccounts, Roles, and RoleBindings.
9. Exposing Redis services with various service types (ClusterIP, NodePort, LoadBalancer).
10. Providing service binding capabilities for connecting applications to Redis.

These templates allow for flexible and customizable Redis deployments, suitable for various use cases from development to production environments.

## Entry points
The main entry points for this directory are:

1. `master/application.yaml`: Defines the Redis master deployment.
2. `replicas/application.yaml`: Defines the Redis replica deployments.
3. `sentinel/statefulset.yaml`: Defines the Redis Sentinel deployment.
4. `service.yaml`: Defines the main Redis service.
5. `networkpolicy.yaml`: Defines network policies for Redis pods.

The control flow typically starts with the deployment of Redis master and replica nodes, followed by the creation of associated services, network policies, and monitoring resources. If Sentinel is enabled, it is deployed to manage high availability and failover.

## Key Files
1. `configmap.yaml`: Defines ConfigMaps for Redis configuration.
2. `health-configmap.yaml`: Contains scripts for Redis health checks.
3. `scripts-configmap.yaml`: Contains scripts for starting and managing Redis nodes.
4. `secret.yaml`: Manages Redis authentication secrets.
5. `tls-secret.yaml`: Manages TLS certificates for secure Redis communication.
6. `metrics-svc.yaml`: Exposes Redis metrics for monitoring.
7. `servicemonitor.yaml`: Defines Prometheus ServiceMonitor for Redis metrics.
8. `prometheusrule.yaml`: Defines Prometheus alerting rules for Redis.
9. `pdb.yaml`: Defines PodDisruptionBudget for Redis pods.
10. `role.yaml` and `rolebinding.yaml`: Define RBAC rules for Redis pods.

## Dependencies
These templates rely on the following external dependencies:

1. Kubernetes API: The templates use various Kubernetes resources and require a compatible Kubernetes cluster.
2. Helm: The templating system uses Helm functions and helpers for rendering and managing the deployment.
3. Redis: The deployed containers use Redis images for both the Redis server and Sentinel components.
4. Prometheus (optional): If metrics are enabled, Prometheus is used for monitoring and alerting.
5. cert-manager (optional): Can be used for managing TLS certificates if not using self-signed certificates.

## Configuration
The templates in this directory are highly configurable through values provided in the `values.yaml` file of the parent chart. Key configuration options include:

1. Redis architecture (standalone, replication, or sentinel)
2. Number of replicas for Redis and Sentinel
3. Service types and configurations
4. Persistence settings
5. Authentication and TLS settings
6. Metrics and monitoring configurations
7. Resource limits and requests
8. Affinity and anti-affinity rules
9. Network policy settings
10. RBAC configurations

These configuration options allow for flexible deployment scenarios, from simple development setups to complex production environments with high availability, security, and monitoring requirements.