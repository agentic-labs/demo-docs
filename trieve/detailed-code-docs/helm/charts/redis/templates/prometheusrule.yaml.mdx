---
title: "prometheusrule.yaml"
---

## High-level description
This code defines a Kubernetes PrometheusRule object for monitoring Redis. It sets up a PrometheusRule resource with rules for collecting and alerting on Redis metrics. The rule is deployed only if metrics and PrometheusRule are enabled in the values.

## Code Structure
This code is a Helm template that uses conditional logic and includes other templates to generate a Kubernetes YAML manifest. 

## References
- `common.names.fullname`: Generates the full name for the PrometheusRule resource.
- `common.names.namespace`: Determines the namespace for the resource.
- `common.labels.standard`: Includes standard labels for the resource.
- `common.tplvalues.render`: Renders template values.

## Symbols
### `helm/charts/redis/templates/prometheusrule.yaml`
#### Description
This code defines a Kubernetes PrometheusRule object for monitoring Redis. It uses Helm templating to customize the resource based on provided values.

#### Inputs
This template uses values from `values.yaml` or those provided during Helm installation:
| Name | Type | Description |
|:-----|:-----|:------------|
| `.Values.metrics.enabled` | bool | Enables/disables metrics collection. |
| `.Values.metrics.prometheusRule.enabled` | bool | Enables/disables the PrometheusRule. |
| `.Values.metrics.prometheusRule.namespace` | string | Namespace for the PrometheusRule. |
| `.Values.metrics.prometheusRule.additionalLabels` | map | Additional labels for the PrometheusRule. |
| `.Values.commonLabels` | map | Common labels to apply to the resource. |
| `.Values.commonAnnotations` | map | Common annotations to apply to the resource. |
| `.Values.metrics.prometheusRule.rules` | list | List of Prometheus rules for monitoring Redis. |

#### Outputs
A Kubernetes YAML manifest defining a PrometheusRule resource.

#### Internal Logic
- It checks if metrics and PrometheusRule are enabled.
- If enabled, it creates a PrometheusRule resource with the specified name, namespace, labels, and annotations.
- It includes standard labels and any additional labels provided.
- It renders the provided Prometheus rules into the `spec.groups.rules` field.

## Dependencies
This code depends on the following Helm libraries:
| Dependency | Purpose |
|:-----------|:--------|
| `template` | Used for rendering other templates. |
| `include` | Used for including other templates. |
| `dict` | Used for creating dictionaries. |
| `nindent` | Used for indenting text. |
| `quote` | Used for quoting strings. |

## Configuration
This code relies on configuration values passed to the Helm chart. See the "Inputs" section for details on configurable options.

## Error Handling
This code does not implement specific error handling.

## Logging
This code does not implement logging.
