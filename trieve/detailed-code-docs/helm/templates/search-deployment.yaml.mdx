---
title: "search-deployment.yaml"
---

## High-level description
This code defines a Kubernetes Deployment named "search" using Helm templating. This deployment is responsible for deploying the "search" service within a Kubernetes cluster, specifying its container image, exposed ports, and environment variables.

## References
This Helm template references values from `values.yaml` for configuration:
- `.Release.Name`: The name of the Helm release.
- `.Values.environment`: The target environment (e.g., "local").
- `.Values.containers.search.tag`: The Docker image tag for the search service.
- `.Values.config.vite.*`: Various configuration values for the Vite frontend framework.

## Symbols
### `search` (Deployment)
#### Description
This symbol defines a Kubernetes Deployment named "search" responsible for managing the deployment and scaling of the search service.

#### Inputs
This resource doesn't take direct inputs. It relies on values provided through the Helm `values.yaml` file.

#### Outputs
This resource creates a Deployment in the Kubernetes cluster.

#### Internal Logic
- **`metadata.name`**: Sets the name of the Deployment to "search".
- **`metadata.labels`**: Defines labels for the Deployment, including the application name and instance.
- **`spec.selector`**: Specifies how to select Pods belonging to this Deployment.
- **`spec.template`**: Defines the Pod template for the Deployment.
    - **`metadata.labels`**: Defines labels for the Pods.
    - **`spec.containers`**: Defines the containers within the Pod.
        - **`name`**: Sets the container name to "search".
        - **`image`**: Dynamically constructs the Docker image name and tag based on the environment and configured values.
        - **`ports`**: Exposes port 80 from the container.
        - **`env`**: Defines environment variables for the container:
            - `VITE_API_HOST`: The hostname of the API.
            - `VITE_SEARCH_UI_URL`: The URL of the search UI.
            - `VITE_DASHBOARD_URL`: The URL of the dashboard.

## Dependencies
- Kubernetes API (`apps/v1` for Deployment)

## Configuration
This template relies on configuration values provided through a Helm `values.yaml` file. Key configuration options include:
| Option | Description |
|:-------|:------------|
| `.Release.Name` | The name of the Helm release. |
| `.Values.environment` | The target environment (e.g., "local"). |
| `.Values.containers.search.tag` | The Docker image tag for the search service. |
| `.Values.config.vite.apiHost` | The hostname of the API. |
| `.Values.config.vite.searchUiUrl` | The URL of the search UI. |
| `.Values.config.vite.dashboardUrl` | The URL of the dashboard. |
