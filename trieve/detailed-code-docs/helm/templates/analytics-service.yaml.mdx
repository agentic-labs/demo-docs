---
title: "analytics-service.yaml"
---

## High-level description
This code defines a Kubernetes Service named "analytics-service" that exposes port 80 for a deployment named "trieve" with the label "analytics". This allows internal and external access to the "trieve" deployment.

## Code Structure
This code defines a single Kubernetes Service resource. It uses variables for the name and selector to allow for easy reuse and customization.

## Symbols
### `analytics-service`
#### Description
This symbol defines a Kubernetes Service resource named "analytics-service". It exposes port 80 for the "trieve" deployment with the label "analytics".

#### Inputs
This code block doesn't have explicit inputs. It uses variables defined outside of the code block.

#### Outputs
This code defines a Kubernetes Service resource in YAML format.

#### Internal Logic
The code defines a Service with the following specifications:

* **type: ClusterIP**: This creates a service that is only accessible from within the Kubernetes cluster.
* **ports**: This section defines the ports that the service will expose.
    * **port**: The port number that the service will expose. In this case, it's port 80.
    * **targetPort**: The port number that the pods in the deployment are listening on.
    * **protocol**: The protocol used by the port. In this case, it's TCP.
    * **name**: The name of the port. In this case, it's "analytics".
* **selector**: This section defines which pods the service will route traffic to.
    * **app.kubernetes.io/name**: The name of the deployment. In this case, it's "analytics".
    * **app.kubernetes.io/instance**: The instance name of the deployment. In this case, it's "trieve".

This configuration ensures that any traffic sent to port 80 of the "analytics-service" will be routed to the pods belonging to the "trieve" deployment with the label "analytics".
