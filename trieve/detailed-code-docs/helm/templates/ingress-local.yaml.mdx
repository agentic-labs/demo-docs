---
title: "ingress-local.yaml"
---

## High-level description
This code defines four Kubernetes Ingress resources for different services: `dashboard-service`, `chat-service`, `server-service`, and `search-service`. These Ingress resources are applied only when the `environment` value in the Helm chart is set to "local".

## Symbols
### `ingress-local.yaml`
#### Description
This file defines four Kubernetes Ingress resources that route traffic from specific hostnames to corresponding services within the cluster. The Ingress resources are applied conditionally based on the `environment` value being "local".

#### Inputs
This file uses values from a Helm chart:
| Name | Type | Description |
|:-----|:-----|:------------|
| `.Values.domain` | string | The domain name used for the Ingress hostnames. |
| `.Values.environment` | string | The environment for which the Ingress resources are applied. |

#### Internal Logic
The file uses a conditional block (`{{- if eq .Values.environment "local" }}`) to apply the Ingress resources only when the `environment` value is "local".

For each service (dashboard, chat, server, search), the file defines an Ingress resource with the following structure:
- `apiVersion`: networking.k8s.io/v1
- `kind`: Ingress
- `metadata.name`: A unique name for the Ingress resource.
- `spec.ingressClassName`: `nginx` (assumes an Nginx Ingress controller is installed).
- `spec.rules`: A list of rules that define how traffic should be routed. Each rule specifies:
    - `host`: The hostname that the rule should match.
    - `http.paths`: A list of paths that the rule should match. Each path specifies:
        - `path`: The path to match.
        - `pathType`: The type of path matching to use (in this case, `Prefix`).
        - `backend`: The service to which traffic should be routed. The backend specifies:
            - `service.name`: The name of the service.
            - `service.port.number`: The port number of the service.

#### Side Effects
This code, when applied to a Kubernetes cluster, creates Ingress resources that expose the defined services on the specified hostnames. This allows external access to these services.

#### Performance Considerations
The performance of the Ingress resources depends on the underlying Ingress controller and the configuration of the services. 
