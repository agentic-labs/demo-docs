---
title: "syncqdrant-deployment.yaml"
---

## High-level description
This YAML file defines a Kubernetes Deployment for a service named "sync-qdrant". This service is responsible for synchronizing data with a Qdrant vector database and likely handles tasks like indexing, updating, and managing vector embeddings. The deployment is configured with various environment variables that control its behavior, including connections to other services like Redis, PostgreSQL, and potentially external APIs.

## References
This code references values from a `values.yaml` file (not provided) using Helm templating syntax (e.g., `{{ .Values.config.trieve.adminApiKey }}`). These values likely contain configuration details for the deployment, such as API keys, URLs, and other service-specific settings.

## Symbols
### `sync-qdrant` Deployment
#### Description
This deployment defines the configuration for running the "sync-qdrant" service within a Kubernetes cluster. It specifies the container image, environment variables, resource limits, and other deployment parameters.

#### Inputs
This deployment does not take direct inputs. It relies on the configuration values provided through the Helm chart.

#### Outputs
This deployment creates a Kubernetes Deployment object that manages the lifecycle of the "sync-qdrant" pods.

#### Internal Logic
The deployment uses a single container named "sync-qdrant". The container image is determined based on the `environment` value. It uses a ternary operator to choose between "trieve/" (default), "localhost:5001/" (for local development), and a custom registry based on `Values.environment`.

The container is configured with a large number of environment variables that define its connection to various services and its operational parameters. These include:

- API keys and URLs for services like Trieve, Qdrant, Redis, PostgreSQL, OpenAI, and Stripe.
- Configuration for SMTP, S3 storage, and OIDC authentication.
- Settings for vector quantization, replication factor, and other Qdrant-specific parameters.
- Flags for enabling features like analytics and unlimited usage.

#### Side Effects
This deployment creates Kubernetes pods and potentially other resources like services and configmaps depending on the Helm chart's configuration.

## Dependencies
This deployment depends on several external services and libraries, as indicated by the environment variables. These dependencies likely include:

| Dependency | Purpose |
|:-----------|:--------|
| Qdrant | Vector database for storing and querying embeddings |
| Redis | In-memory data store for caching and pub/sub |
| PostgreSQL | Relational database for persistent data storage |
| OpenAI | API for accessing large language models |
| Stripe | Payment processing platform |
| Tika | Content extraction library |
| S3 | Object storage service |
| OIDC | Authentication protocol |

## Configuration
The deployment's configuration is entirely driven by values provided through the Helm chart. These values are accessed using the `Values` object and likely define settings for all the dependencies listed above, as well as application-specific parameters.

## Error Handling
The code does not explicitly define error handling mechanisms within the deployment configuration. Error handling is likely implemented within the "sync-qdrant" application code itself.

## Logging
The code does not specify logging configurations. Logging is likely handled within the "sync-qdrant" application code and configured through its own mechanisms.
