---
title: "ResultsPage.tsx"
---

## High-level description
This code represents a ResultsPage component for a search application. It displays search results, including chunks of text with associated metadata, and provides functionality for pagination, chat interactions, and result filtering. The component also handles user interactions such as bookmarking, deleting, and rating search results.

## Code Structure
The ResultsPage component is the main symbol, which uses several other components and utilities. It manages the state of search results, pagination, and user interactions. It interacts with an API to fetch and manipulate data, and uses context for accessing dataset and user information.

## Symbols

### ResultsPage
#### Description
The main component that renders the search results page. It manages the state of search results, handles pagination, and provides various user interaction features.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| search | SearchStore | Contains search-related state and functions |
| rateQuery | Accessor&lt;boolean&gt; | Indicates whether to show the query rating modal |
| setRatingQuery | Setter&lt;boolean&gt; | Function to set the query rating modal visibility |

#### Internal Logic
1. Fetches chunk collections and bookmarks on component mount
2. Handles pagination and result fetching based on search parameters
3. Manages state for various UI elements (modals, chat, selected chunks)
4. Renders search results, including group-oriented results if applicable
5. Provides functionality for rating queries, downloading files, and chatting with results

### parseServerTimings
#### Description
A utility function that parses server timing information from response headers.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| labels | string[] | Array of server timing labels |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ServerTiming[] | Array of parsed server timing objects |

### ShowServerTimings
#### Description
A component that renders a collapsible section showing server timing information.

### fetchChunkCollections
#### Description
Fetches chunk collections from the API for the current dataset.

### rateQuery
#### Description
Sends a query rating to the API.

### handleDownloadFile
#### Description
Initiates a file download for a given file ID.

### fetchBookmarks
#### Description
Fetches bookmarks for the current chunks from the API.

## Dependencies
- solid-js: For reactive programming and component rendering
- solid-icons: For icon components
- sanitize-html: For sanitizing HTML content
- @solidjs/router: For routing functionality

## Configuration
The component uses environment variables for API host configuration:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| VITE_API_HOST | string | undefined | The API host URL |

## Error Handling
The component uses try-catch blocks for API calls and displays error toasts using the `createToast` function when errors occur.

## Logging
The component doesn't implement explicit logging, but it uses `console.error` for logging errors in some cases.

## Performance Considerations
- The component uses pagination to limit the number of results fetched at once.
- It implements debouncing for search queries to reduce unnecessary API calls.
- Server-side timings are captured and can be displayed for performance analysis.