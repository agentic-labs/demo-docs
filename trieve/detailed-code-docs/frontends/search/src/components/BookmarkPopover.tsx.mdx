---
title: "BookmarkPopover.tsx"
---

## High-level description
This code defines a `BookmarkPopover` component in React, which allows users to manage groups for a specific chunk of data. It provides functionality to view, add, and remove chunks from groups, as well as create new groups.

## Code Structure
The main component `BookmarkPopover` uses several hooks and sub-components to manage its state and render the UI. It interacts with an API to fetch and update data related to chunk groups and bookmarks.

## Symbols

### BookmarkPopover
#### Description
The main component that renders a popover for managing chunk groups and bookmarks.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| chunkMetadata | ChunkMetadata | Metadata of the chunk being managed |
| chunkGroups | ChunkGroupDTO[] | List of available chunk groups |
| totalGroupPages | number | Total number of pages for chunk groups |
| setLoginModal | Setter&lt;boolean&gt; | Function to set login modal visibility |
| bookmarks | ChunkBookmarksDTO[] | List of bookmarks for the chunk |
| setChunkGroups | Setter&lt;ChunkGroupDTO[]&gt; | Function to update chunk groups |

#### Internal Logic
1. Initializes state variables for managing groups, bookmarks, and UI elements.
2. Uses `createEffect` to handle data fetching and updates based on state changes.
3. Implements functions to fetch groups and bookmarks from the API.
4. Renders a popover with a list of groups, checkboxes for group membership, and pagination controls.
5. Provides functionality to create new groups.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Core library for reactive programming |
| solid-headless | UI components for the popover |
| solid-icons | Icons used in the UI |

## Error Handling
The component handles API errors by setting the `notLoggedIn` state to true when receiving a 401 status code.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /dataset/groups/${datasetId}/${page} | GET | Fetch chunk groups for a dataset |
| /chunk_group/chunks | POST | Fetch bookmarks for chunks |
| /chunk_group/chunk/${groupId} | POST/DELETE | Add/remove a chunk to/from a group |
| /chunk_group | POST | Create a new group |

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.