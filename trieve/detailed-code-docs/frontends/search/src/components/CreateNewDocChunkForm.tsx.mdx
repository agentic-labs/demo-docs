---
title: "CreateNewDocChunkForm.tsx"
---

## High-level description
This code defines a React component called `CreateNewDocChunkForm` that allows users to create and submit new document chunks. It includes various input fields for metadata, content, and advanced options. The component handles form submission, error handling, and user authentication.

## Code Structure
The main component `CreateNewDocChunkForm` contains multiple state variables using `createSignal` for form inputs and UI control. It also uses the `DatasetAndUserContext` for user and dataset information. The component renders a form with various input fields and a rich text editor (TinyEditor) for the chunk content. The form submission is handled by the `submitDocChunk` function, which sends a POST request to create a new chunk.

## Symbols

### CreateNewDocChunkForm
#### Description
This is the main functional component that renders the form for creating a new document chunk.

#### Internal Logic
1. Initializes state variables for form inputs and UI control.
2. Retrieves the current dataset from the context.
3. Renders a form with various input fields for chunk metadata and content.
4. Handles form submission through the `submitDocChunk` function.
5. Sends a POST request to create a new chunk when the form is submitted.
6. Handles errors and displays a login modal if the user is not authenticated.
7. Navigates to the newly created chunk page on successful submission.

### submitDocChunk
#### Description
This function handles the form submission and sends a POST request to create a new document chunk.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| e | Event | The form submission event |

#### Internal Logic
1. Prevents default form submission behavior.
2. Validates the chunk content.
3. Prepares the request body with form data.
4. Sends a POST request to create a new chunk.
5. Handles the response, including error cases and authentication issues.
6. Navigates to the newly created chunk page on success.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component rendering |
| @solidjs/router | For navigation and routing |
| shared/ui | For reusable UI components (JsonInput, Tooltip) |

## Configuration
The component uses environment variables for configuration:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| VITE_API_HOST | string | undefined | The API host URL |

## Error Handling
The component handles various error scenarios:
1. Displays error messages for invalid inputs.
2. Shows a login modal if the user is not authenticated.
3. Handles API errors and displays them to the user.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /chunk | POST | CreateChunkDTO | CreateChunkDTO | Creates a new document chunk |

This component provides a comprehensive interface for creating new document chunks with various metadata and content options. It handles user input, form submission, and error scenarios while integrating with the application's authentication and routing systems.