---
title: "UserAuthContext.tsx"
---

## High-level description
This code defines a UserAuthContext and a UserAuthContextProvider component in React using SolidJS. It manages user authentication, handles login, and provides user information to child components through context. The component also integrates with OrgContextProvider and TopBarLayout for organization and layout management.

## Code Structure
The main components are:
1. UserContext: A context for storing user information.
2. UserAuthContextProvider: A component that manages user authentication and provides user context.
3. login function: Handles user authentication and fetches user data.

The UserAuthContextProvider uses SolidJS's createSignal, createContext, and other hooks to manage state and context. It also utilizes the OrgContextProvider and TopBarLayout components for additional functionality.

## Symbols

### UserContext
#### Description
A context created to store and provide user information throughout the application.

### UserAuthContextProvider
#### Description
A component that manages user authentication and provides user context to its children.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | ParentComponent | The child components to be wrapped by this provider |

#### Internal Logic
1. Creates a signal for storing user information.
2. Defines a login function to authenticate the user and fetch user data.
3. Uses onMount to call the login function when the component mounts.
4. Renders the UserContext.Provider, OrgContextProvider, and TopBarLayout components when user information is available.

### login
#### Description
An asynchronous function that handles user authentication and fetches user data.

#### Internal Logic
1. Sends a request to the authentication endpoint.
2. Redirects to the login page if the user is not authenticated.
3. Fetches and sets the user data if authentication is successful.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Provides core functionality for state management and component rendering |
| @solidjs/router | Used for navigation and redirection |
| shared/types | Imports type definitions |
| ../utils/apiHost | Imports the API host configuration |
| ./OrgContext | Imports the OrgContextProvider component |
| ../layouts/TopBarLayout | Imports the TopBarLayout component |

## Configuration
The component uses the `apiHost` configuration from `../utils/apiHost` for API requests.

## Error Handling
The login function handles authentication errors by redirecting to the login page if the user is not authenticated (status 401).

## Side Effects
The component has a side effect of fetching user data when mounted, which may trigger API calls and state updates.