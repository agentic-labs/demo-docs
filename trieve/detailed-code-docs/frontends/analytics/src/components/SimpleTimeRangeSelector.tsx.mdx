---
title: "SimpleTimeRangeSelector.tsx"
---

## High-level description
This code defines a simple time range selector component and a custom hook for managing time range selection in an analytics context. It provides functionality to select predefined date ranges and automatically determine appropriate granularity for data analysis based on the selected range.

## Code Structure
The file contains two main exports: `useSimpleTimeRange` hook and `SimpleTimeRangeSelector` component. The hook manages the state and logic for time range selection, while the component renders the UI for selecting a date range option.

## Symbols

### `getReasonableGranularityFromDateRange`
#### Description
This function determines an appropriate granularity for data analysis based on the selected date range.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dateRange | DateRangeOption | The selected date range option |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| granularity | AnalyticsParams["granularity"] | The determined granularity |

#### Internal Logic
- Uses a switch statement to map date range labels to appropriate granularities.
- Default granularity is "hour" if no specific case matches.

### `useSimpleTimeRange`
#### Description
A custom hook that manages the state and logic for time range selection in analytics.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| filter | Memo&lt;{ date_range: { gt: Date } }&gt; | The date range filter |
| granularity | Memo&lt;AnalyticsParams["granularity"]&gt; | The calculated granularity |
| dateOption | Accessor&lt;DateRangeOption&gt; | The current date option |
| setDateOption | (date: DateRangeOption) =&gt; void | Function to update the date option |

#### Internal Logic
- Creates signals for managing the selected date option.
- Uses `createMemo` to derive the granularity and filter based on the selected date option.

### `SimpleTimeRangeSelector`
#### Description
A component that renders a select input for choosing a date range option.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| label | JSX.Element (optional) | Label for the select input |
| dateOption | DateRangeOption | The currently selected date option |
| setDateOption | (date: DateRangeOption) =&gt; void | Function to update the selected date option |

#### Internal Logic
- Renders a `Select` component from the shared UI library.
- Uses the `dateRanges` array (imported from FilterBar) for options.
- Calls the `setDateOption` function when a new option is selected.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component creation |
| shared/types | For type definitions (AnalyticsParams) |
| shared/ui | For the Select component |
| ./FilterBar | For DateRangeOption and dateRanges |

This code provides a reusable solution for time range selection in analytics contexts, offering both a UI component and a custom hook for easy integration into other parts of the application.