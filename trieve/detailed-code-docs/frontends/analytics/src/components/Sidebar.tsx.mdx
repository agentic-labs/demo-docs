---
title: "Sidebar.tsx"
---

## High-level description
The `Sidebar` component renders a side navigation bar for the Trieve Analytics application. It displays navigation links, organization and dataset selection dropdowns, and user account options.

## Code Structure
The `Sidebar` component uses the `OrgContext` and `UserContext` to access organization and user data. It renders a list of navigation links using the `navbarRoutes` array. The `Select` component is used for both organization and dataset selection. The `orgDatasetParams` memo is used to construct the URL for the dashboard link.

## References
- `OrgContext`: Provides access to the selected organization and a function to change it.
- `UserContext`: Provides access to the logged-in user's information.
- `Select`: A shared UI component for rendering a select dropdown.
- `usePathname`: A custom hook for getting the current pathname.
- `useBetterNav`: A custom hook for navigating while preserving query parameters.

## Symbols

### `Sidebar`
#### Description
This component renders the sidebar of the application, including navigation links, organization and dataset selection, and user account options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| datasetOptions | `DatasetAndUsage[]` | An array of available datasets and their usage information. |
| selectedDataset | `DatasetAndUsage | null` | The currently selected dataset. |
| setSelectedDataset | `(dataset: DatasetAndUsage) =&gt; void` | A function to update the selected dataset. |

#### Outputs
This component doesn't have explicit outputs. It renders the sidebar directly to the DOM.

#### Internal Logic
1. **Retrieves context:** Gets the `userContext` and `orgContext` from their respective providers.
2. **Gets pathname and navigation function:** Uses the `usePathname` and `useBetterNav` hooks to get the current pathname and a navigation function that preserves query parameters.
3. **Defines logout function:** Defines a `logOut` function that makes a DELETE request to the `/auth` endpoint to log the user out.
4. **Creates `orgDatasetParams` memo:** Creates a memo that dynamically constructs the URL parameters for the dashboard link based on the selected organization and dataset.
5. **Renders sidebar:** Renders the sidebar with the Trieve logo, organization and dataset selection dropdowns, navigation links, dashboard and API docs links, and user account options.

## Side Effects
- **Navigation:** The `navigate` function from `useBetterNav` updates the browser's URL when a navigation link is clicked.
- **Logout:** The `logOut` function redirects the user to the logout URL provided by the server after a successful logout request.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Core library for building the component's UI and logic. |
| shared/types | Provides type definitions for `DatasetAndUsage`. |
| ../hooks/usePathname | Custom hook for getting the current pathname. |
| ../utils/useBetterNav | Custom hook for navigating while preserving query parameters. |
| shared/ui | Provides the `Select` component. |
| solid-icons/ai | Provides icons from the Ant Design library. |
| ../utils/apiHost | Provides the base URL for the API. |
| solid-icons/io | Provides icons from the Ionicons library. |
| solid-icons/hi | Provides icons from the Heroicons library. |
| solid-icons/tb | Provides icons from the Tabler Icons library. |

### Configuration
- `import.meta.env.VITE_DASHBOARD_URL`: This environment variable defines the base URL for the dashboard.

## Error Handling
- The `logOut` function logs an error to the console if the logout request fails.

## Logging
- The `logOut` function logs an error to the console if the logout request fails.
