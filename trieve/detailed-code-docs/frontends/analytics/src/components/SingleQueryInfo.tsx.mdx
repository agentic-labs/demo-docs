---
title: "SingleQueryInfo.tsx"
---

## High-level description
This code defines a `SingleQuery` component in React that displays detailed information about a specific search query. It fetches query data based on a provided query ID and dataset context, then renders various aspects of the query including its metadata, results, and request parameters.

## Code Structure
The main `SingleQuery` component uses the `createQuery` hook to fetch data. It then renders a `DataDisplay` component with the fetched data. The `DataDisplay` component further breaks down the information into smaller, more specific components like `DataSquare` and `ResultCard`.

## Symbols

### SingleQuery
#### Description
The main component that fetches and displays information about a single search query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| queryId | string | The ID of the query to fetch and display |

#### Internal Logic
1. Uses `DatasetContext` to get the current dataset.
2. Fetches query data using `createQuery` hook.
3. Renders `DataDisplay` component with fetched data.

### DataDisplay
#### Description
A component that renders the detailed view of a search query.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | NonNullable&lt;typeof query.data&gt; | The query data to display |

#### Internal Logic
1. Displays query text, timestamp, and various metadata using `DataSquare` components.
2. Renders request parameters and results.

### DataSquare
#### Description
A reusable component for displaying a labeled piece of data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| label | string | The label for the data |
| value | number \| string | The value to display |

### ResultCard
#### Description
A component that displays information about a single search result.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | SearchQueryEvent["results"][0] | A single result from the search query |

#### Internal Logic
1. Parses and validates result metadata using `usefulMetadataSchema`.
2. Displays result ID, score, and a preview of the content.
3. Provides a button to show full JSON metadata in a modal.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/solid-query | For data fetching and caching |
| solid-js | For reactive programming and component creation |
| date-fns | For date formatting |
| zod | For runtime type checking |
| solid-icons/vs | For icons |
| shared/ui | For reusable UI components |
| shared/types | For type definitions |

## Error Handling
The code doesn't implement explicit error handling for the query fetch. It relies on the error handling provided by the `createQuery` hook.

## Performance Considerations
The component uses `createMemo` for computing the dataset name, which helps optimize performance by memoizing the result.

This component provides a detailed view of a single search query, including its metadata and results. It uses various sub-components to organize and display the information in a structured manner. The use of context and query hooks suggests it's part of a larger application dealing with analytics or search functionality.