---
title: "RagAnalyticsPage.tsx"
---

## High-level description
The `RagAnalyticsPage` component displays a page dedicated to analyzing RAG (Retrieval Augmented Generation) usage data. It provides a UI for filtering data by date range and RAG type, and renders two charts: `RAGUsageGraph` and `RagQueries`.

## Code Structure
The `RagAnalyticsPage` component uses the `createStore` hook to manage the filter state for the analytics data. It also uses the `createSignal` hook to manage the state of a fake RAG type dropdown, which is used to simplify the UI for selecting between "chosen chunks", "all chunks", or "both". The `createEffect` hook is used to synchronize the fake RAG type with the real filter value. The component then renders a `DateRangePicker` and a `Select` dropdown for filtering the data, and passes the filter values to the `RAGUsageGraph` and `RagQueries` components.

## References
- `RequiredRAGAnalyticsFilter` (from `shared/types.ts`): Defines the type of the filter object used for RAG analytics.
- `DateRangePicker` (from `shared/ui`): A component for selecting a date range.
- `Select` (from `shared/ui`): A component for selecting an option from a dropdown list.
- `RagQueries` (from `../components/charts/RagQueries`): A component that displays a table of RAG queries.
- `RAGUsageGraph` (from `../components/charts/RAGUsageGraph`): A component that displays a graph of RAG usage over time.

## Symbols

### `RagAnalyticsPage`
#### Description
This component renders the RAG Analytics page, providing UI elements for filtering data and displaying two charts: `RAGUsageGraph` and `RagQueries`.

#### Inputs
This is a top-level component and doesn't take any inputs.

#### Outputs
This component renders JSX, resulting in the RAG Analytics page.

#### Internal Logic
1. **Initializes filter state:**
   - Uses `createStore` to create a reactive `filter` object with default values for date range, RAG type, and granularity.
2. **Manages fake RAG type:**
   - Uses `createSignal` to manage the `fakeType` state, which represents the selected option in the simplified RAG type dropdown.
   - Uses `createEffect` to synchronize the `fakeType` with the `rag_type` property of the `filter` object. If `fakeType` is "both", `rag_type` is set to `undefined`.
3. **Renders UI elements:**
   - A `div` containing a `Select` component for choosing the RAG type and a `DateRangePicker` component for selecting the date range.
   - A `div` containing the `RAGUsageGraph` and `RagQueries` components, passing the `filter` object as props.

## Dependencies
- `solid-js/store`: Used for state management.
- `solid-js`: Used for creating reactive variables and effects.
- `shared/ui`: Provides UI components like `DateRangePicker` and `Select`.
- `../components/charts/RagQueries`: Provides the `RagQueries` component.
- `../components/charts/RAGUsageGraph`: Provides the `RAGUsageGraph` component.
- `date-fns`: Used for date manipulation.

