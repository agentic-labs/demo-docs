---
title: "TrendExplorer.tsx"
---

## High-level description
The `TrendExplorer` component displays a table of trending search topics within a dataset. Each row in the table represents a topic, its density, and average search score. Clicking on a row reveals a modal with a list of searches associated with that topic.

## Code Structure
The `TrendExplorer` component uses the `createQuery` hook to fetch trending topics data. It then renders a `Table` component, which iterates over the data and displays each topic in a `TopicRow`. The `TopicRow` component also uses `createQuery` to fetch searches related to a specific topic when the row is clicked.

## References
- `getTrendsBubbles` from `../api/trends`
- `getQueriesForTopic` from `../api/trends`
- `FullScreenModal`, `Table`, `Tr` from `shared/ui`
- `parseCustomDateString` from `../utils/formatDate`
- `toTitleCase` from `../utils/titleCase`

## Symbols

### `TrendExplorer`
#### Description
This component fetches and displays a table of trending search topics within a dataset.

#### Inputs
This component does not take any props.

#### Outputs
This component renders a table of trending search topics.

#### Internal Logic
1. **Fetch Dataset Context:** Retrieves the currently selected dataset's ID.
2. **Fetch Trends Data:** Uses `createQuery` to fetch trending topics data using `getTrendsBubbles` from the API.
3. **Render Table:** Renders a `Table` component with the fetched trends data.
4. **Display Loading State:** Shows a "Loading..." message while the trends data is being fetched.
5. **Display Empty State:** Shows a "No trends found for this dataset" message if no trends are found.
6. **Render Topic Rows:** For each trend topic, renders a `TopicRow` component.

### `TopicRow`
#### Description
This component represents a single row in the trends table, displaying a topic and its details.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| topic | `SearchClusterTopics` | An object containing information about a trending topic. |
| datasetId | `string` | The ID of the currently selected dataset. |

#### Outputs
This component renders a table row representing a single trending topic.

#### Internal Logic
1. **Handle Row Click:** When the row is clicked, toggles the visibility of a modal.
2. **Fetch Topic Searches:** Uses `createQuery` to fetch searches related to the topic when the modal is open, using `getQueriesForTopic` from the API.
3. **Render Topic Details:** Displays the topic's name, density, and average score in the table cells.
4. **Render Modal:** Renders a `FullScreenModal` component that shows a list of searches related to the topic when open.

### `SearchQueryEventModal`
#### Description
This component displays detailed information about a single search query event.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| searchEvent | `SearchQueryEvent` | An object containing information about a search query event. |

#### Outputs
This component renders a modal with detailed information about a search query event.

#### Internal Logic
1. **Format Date:** Parses and formats the `created_at` timestamp of the search event.
2. **Render Search Details:** Displays the following information about the search event:
    - Results obtained date
    - Number of results obtained
    - Search type
    - Latency
    - Top score

### `SmallCol`
#### Description
This component is a simple helper component for displaying a label and value pair.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| label | `string` | The label to display. |
| value | `string` | `number` | The value to display. |

#### Outputs
This component renders a label and value pair.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @tanstack/solid-query | Used for data fetching and caching. |
| solid-js | The underlying JavaScript library used for building the UI. |
| shared/ui | Provides shared UI components like `FullScreenModal`, `Table`, and `Tr`. |
| ../api/trends | Provides API functions for fetching trends data. |
| ../utils/formatDate | Provides utility functions for formatting dates. |
| ../utils/titleCase | Provides a utility function for converting strings to title case. |

## Error Handling
The code includes basic error handling for API requests. If a request fails, an error message is logged to the console.

## Logging
The code does not implement any specific logging mechanisms.
