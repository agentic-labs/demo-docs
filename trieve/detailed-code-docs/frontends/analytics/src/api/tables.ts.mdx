---
title: "tables.ts"
---

## High-level description
The `getSearchQueries` function fetches search query data from the analytics API endpoint. It takes search parameters and a dataset ID as input and returns an array of `SearchQueryEvent` objects representing the retrieved search queries.

## References
- `SearchQueriesTablesParams`: Defines the type for the search parameters.
- `transformAnalyticsFilter`: A utility function to format date values within the filter object.
- `apiHost`: A constant representing the base URL of the API.
- `SearchQueryResponse`: Defines the type for the API response.

## Symbols

### `getSearchQueries`
#### Description
This asynchronous function sends a POST request to the `/analytics/search` API endpoint to retrieve search query data based on the provided parameters and dataset ID.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| params | `SearchQueriesTablesParams` | An object containing filter, pagination, sorting, and dataset ID information. |
| datasetId | `string` | The ID of the dataset for which to retrieve search queries. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| queries | `SearchQueryEvent[]` | An array of `SearchQueryEvent` objects representing the retrieved search queries. |

#### Internal Logic
1. **Construct API URL:** The function builds the API endpoint URL using the `apiHost` constant and the `/analytics/search` path.
2. **Prepare Request Body:** It creates a JSON payload for the POST request, including transformed filter values, pagination details, sorting options, and the "search_queries" type.
3. **Send API Request:** The function sends a POST request to the constructed URL with the prepared body, including credentials and dataset ID in the headers.
4. **Handle Response:**
   - If the response is successful (status code 200-299), it parses the JSON response as a `SearchQueryResponse` object and returns the `queries` array.
   - If the response indicates an error, it throws an error with the response status text.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| `fetch` |  Used to make the API request. |

## Error Handling
The function includes basic error handling by checking the `ok` status of the `fetch` response. If the response is not ok, it throws an error.
