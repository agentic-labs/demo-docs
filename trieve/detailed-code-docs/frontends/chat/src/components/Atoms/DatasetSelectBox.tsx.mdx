---
title: "DatasetSelectBox.tsx"
---

## High-level description
The `DatasetSelectBox` component is a dropdown menu that allows users to select a dataset from a list. It provides search functionality for datasets and displays the currently selected dataset. This component is part of a larger application that deals with dataset management and user interactions.

## Code Structure
The main component `DatasetSelectBox` uses several Solid.js primitives and custom hooks. It interacts with the `UserContext` to access and update the current dataset. The component renders a Popover from the Terracotta library, which contains the dataset selection interface.

## Symbols

### DatasetSelectBox
#### Description
This is the main component that renders a dropdown for dataset selection. It includes a search input for filtering datasets and a list of selectable datasets.

#### Internal Logic
1. Initializes state variables and accesses the UserContext.
2. Creates a memoized search function using `createMemo` to filter datasets based on user input.
3. Implements a focus mechanism for the search input.
4. Renders a Popover component with a button to toggle the dataset list.
5. When open, displays a search input (if there are more than 5 datasets) and a list of datasets using the `DatasetSelectionList` component.

#### Performance Considerations
The component uses `createMemo` for efficient dataset filtering, which will only recompute when the search query or dataset list changes.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Core library for reactive UI components |
| terracotta | UI component library for the Popover and Menu |
| @nozbe/microfuzz | Fuzzy search functionality for dataset filtering |
| solid-icons | Icon components for UI elements |

## Side Effects
The component uses `onMount` to focus the search input when the component is mounted.

## Error Handling
There is no explicit error handling in this component. It assumes that the necessary context and data are available.

## API/Interface Reference
This component relies on the `UserContext` for accessing and updating dataset information. It expects the following interface:

| Property | Type | Description |
|:---------|:-----|:------------|
| datasetsAndUsages | Accessor&lt;DatasetAndUsageDTO[]&gt; | List of available datasets |
| currentDataset | Accessor&lt;DatasetAndUsageDTO&gt; | Currently selected dataset |
| setCurrentDataset | (dataset: DatasetAndUsageDTO) =&gt; void | Function to update the current dataset |

The component also uses the `DatasetSelectionList` sub-component, which is responsible for rendering the list of selectable datasets.