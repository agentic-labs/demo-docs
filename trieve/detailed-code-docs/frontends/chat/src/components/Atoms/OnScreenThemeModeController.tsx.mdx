---
title: "OnScreenThemeModeController.tsx"
---

## High-level description
This code defines a React component for controlling the theme mode (light/dark) of a web application. It provides functions to set, get, and clear the theme mode, as well as a visual controller component with buttons to switch between light, dark, and system themes.

## Code Structure
The code consists of four main functions (`setThemeMode`, `getThemeMode`, `clearThemeMode`) and one main component (`OnScreenThemeModeController`). These functions are used within the component to manage the theme state and update the UI accordingly.

## Symbols

### `setThemeMode`
#### Description
Sets the theme mode for the application by updating the document's class list and storing the mode in local storage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | "light" \| "dark" | The desired theme mode |

#### Internal Logic
1. Determines the opposite mode
2. Removes the opposite mode class from the document
3. Stores the new mode in local storage
4. Adds the new mode class to the document

### `getThemeMode`
#### Description
Retrieves the current theme mode from local storage.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | string | The current theme mode ("light", "dark", or "system") |

### `clearThemeMode`
#### Description
Clears the theme mode from local storage and sets the theme based on the system preference.

#### Internal Logic
1. Removes the theme from local storage
2. Checks the system preference for dark mode
3. Updates the document's class list accordingly

### `OnScreenThemeModeController`
#### Description
A React component that renders buttons for controlling the theme mode.

#### Internal Logic
1. Creates a signal for the current mode
2. Renders buttons for dark and light modes
3. Handles click events to update the theme mode

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-icons/bi | Provides icons for the theme mode buttons |
| solid-js | Used for state management (createSignal) |

## Side Effects
- Modifies the `classList` of the `document.documentElement`
- Interacts with `localStorage` to store and retrieve the theme mode
- Checks system preferences using `window.matchMedia`

This component provides a user-friendly way to control the application's theme, allowing users to switch between light and dark modes or use their system preference. It persists the user's choice in local storage for consistency across page reloads.