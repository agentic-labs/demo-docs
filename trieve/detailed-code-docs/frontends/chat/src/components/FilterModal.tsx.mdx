---
title: "FilterModal.tsx"
---

## High-level description
This code defines a FilterModal component in React, which allows users to create and manage filters for data querying. It provides a user interface for setting up different types of filters such as match, geo_radius, range, and date_range, and manages the state of these filters.

## Code Structure
The main components are:
1. `FilterModal`: The parent component that manages the overall filter state and rendering.
2. `FilterItem`: A sub-component that handles individual filter items.

These components use various Solid.js primitives like `createSignal`, `createEffect`, and `createMemo` for state management and reactivity.

## Symbols

### FilterModal
#### Description
The main component that renders the filter modal and manages the overall filter state.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| showFilterModal | Accessor&lt;boolean&gt; | Controls the visibility of the modal |
| setShowFilterModal | (open: boolean) =&gt; void | Function to set the visibility of the modal |

#### Internal Logic
1. Initializes filter states for different types (must, must_not, should).
2. Manages the current filter type selection.
3. Handles saving filters to local storage.
4. Renders filter type selection and individual filter items.

### FilterItem
#### Description
A component that renders and manages an individual filter item.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| initialFilter | Filter (optional) | Initial filter data |
| onFilterChange | (filter: Filter) =&gt; void | Callback function when filter changes |

#### Internal Logic
1. Manages the state of a single filter item.
2. Renders different input fields based on the filter mode (geo_radius, range, date_range, match).
3. Updates the filter state and calls the onFilterChange callback when inputs change.

## Dependencies
The component uses several Solid.js imports and a UserContext for accessing dataset information.

## Configuration
The component doesn't have explicit configuration options but relies on environment variables for API host information.

## Error Handling
There's no explicit error handling in this component. Error handling might be delegated to parent components or global error handlers.

## Logging
No explicit logging mechanisms are implemented in this component.

## Performance Considerations
The component uses `createMemo` for memoization of the current dataset filters key, which can help optimize performance by avoiding unnecessary recalculations.

This component is crucial for implementing advanced filtering functionality in the chat application, allowing users to refine their data queries based on various criteria.