---
title: "ScoreChunk.tsx"
---

## High-level description
This code defines a React component called `ScoreChunk` that displays detailed information about a chunk of text, including metadata, content, and various user interaction features. It's designed to be used in a chat or search interface, allowing users to view and interact with chunks of information.

## Code Structure
The main component `ScoreChunk` uses several Solid.js features like `createSignal`, `createMemo`, and `Show` for reactive state management and conditional rendering. It also imports various utility functions and types from other files in the project.

## References
- `sanitizeHtml` from 'sanitize-html'
- `Tooltip` from 'shared/ui'
- Various icon components from 'solid-icons'
- Types and interfaces from '../utils/apiTypes'

## Symbols

### `ScoreChunk`
#### Description
The main component that renders a chunk of information with metadata, content, and interaction features.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | ScoreChunkProps | Contains all the necessary data and configuration for the chunk |

#### Internal Logic
1. Initializes state for expansion, copying, and metadata display
2. Handles copying chunk content to clipboard
3. Renders metadata, content, and interaction buttons
4. Implements expandable content view
5. Sanitizes and displays HTML content

### `formatDate`
#### Description
Formats a Date object into a string with the format "MM/DD/YYYY".

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| date | Date | The date to be formatted |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| formattedDate | string | The formatted date string |

### `getLocalTime`
#### Description
Converts a UTC date string to the local time of the user's system.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| strDate | string \| Date | The UTC date to be converted |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| localTime | Date | The converted local time |

## Side Effects
- Copies chunk content to clipboard when the copy button is clicked
- Expands/collapses content view based on user interaction

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component rendering |
| sanitize-html | To sanitize HTML content for safe rendering |
| shared/ui | For the Tooltip component |
| solid-icons | For various icon components used in the UI |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| sanitzerOptions | object | (defined in code) | Configuration for HTML sanitization |
| linesBeforeShowMore | number | 12 | Number of lines to show before "Show More" button |

## Error Handling
The component doesn't implement explicit error handling, but it uses optional chaining and nullish coalescing to handle potential undefined or null values.

## Performance Considerations
- The component uses `createMemo` for computed values to optimize performance
- HTML content is sanitized, which may impact performance for large chunks of text