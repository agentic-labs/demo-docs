---
title: "apiTypes.ts"
---

## High-level description
This file, `apiTypes.ts`, defines various TypeScript interfaces and utility functions for handling API-related data structures and operations in a chat application. It includes definitions for chunk metadata, user data, organizations, datasets, and various helper functions for type checking and data manipulation.

## Code Structure
The file consists of multiple interface definitions, type guards (functions that check if a value matches a specific interface), and utility functions. These are organized to handle different aspects of the application's data model, including user management, chunk handling, and dataset operations.

## Symbols

### `ChunkMetadata`
#### Description
Defines the structure for metadata associated with a chunk of information.

#### Inputs
N/A (It's an interface definition)

#### Outputs
N/A (It's an interface definition)

### `indirectHasOwnProperty`
#### Description
A utility function to safely check if an object has a specific property.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| obj | unknown | The object to check |
| prop | string | The property name to look for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the object has the property, false otherwise |

### `isChunkMetadata`
#### Description
A type guard function to check if a value conforms to the ChunkMetadata interface.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| chunk | unknown | The value to check |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| result | boolean | True if the value is a ChunkMetadata, false otherwise |

### `detectReferralToken`
#### Description
Detects and stores a referral token in local storage.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| queryParamT | string \| undefined \| null | The referral token from query parameters |

#### Outputs
N/A (Stores the token in localStorage)

### `getReferralTokenArray`
#### Description
Retrieves the array of referral tokens from local storage.

#### Inputs
N/A

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tokens | string[] | Array of stored referral tokens |

## Dependencies
The file doesn't explicitly import any external libraries, but it relies on browser APIs like `localStorage` and standard JavaScript/TypeScript features.

## Error Handling
The file includes several type guard functions (e.g., `isChunkMetadata`, `isUserDTO`) that can be used for runtime type checking to prevent type-related errors.

## API/Interface Reference
This file defines numerous interfaces that represent the structure of data used in API communications, including:
- `ChunkMetadata`
- `UserDTO`
- `OrganizationDTO`
- `DatasetDTO`
- `UsageDTO`
- `Topic`

These interfaces can be used throughout the application to ensure type safety when working with API data.