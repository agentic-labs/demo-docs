---
title: "DateRangePicker.tsx"
---

## High-level description
This code defines a `DateRangePicker` component in React, which allows users to select a date range. It uses the `@rnwonder/solid-date-picker` library for the core date picking functionality and adds custom styling and preset options. The component also provides granularity suggestions based on the selected date range.

## Code Structure
The file contains several utility functions and two main components: `DateRangePicker` and `Presets`. The `DateRangePicker` component uses the `Presets` component to display preset date ranges. The code also includes type definitions and helper functions for date manipulation and formatting.

## Symbols

### `getGranularitySuggestion`
#### Description
This function suggests a granularity (second, minute, hour, or day) based on the selected date range.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| range | DateRangeFilter | The selected date range |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| granularity | AnalyticsParams["granularity"] | The suggested granularity |

#### Internal Logic
It calculates the difference between start and end dates and returns an appropriate granularity based on the time span.

### `transformOurTypeToTheirs`
#### Description
Converts the internal `DateRangeFilter` type to the `PickerAloneValue` type used by the date picker library.

### `transformTheirTypeToOurs`
#### Description
Converts the date picker library's `DateObjectUnits` type back to the internal `DateRangeFilter` type.

### `getLabelFromRange`
#### Description
Generates a human-readable label for the selected date range.

### `unitIsToday`
#### Description
Checks if a given `DateObjectUnits` represents today's date.

### `DateRangePicker`
#### Description
The main component that renders the date range picker with custom input and preset options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | DateRangePickerProps | Component props including value, onChange, and other options |

#### Internal Logic
- Uses `createMemo` to transform the date range value
- Handles date range changes and updates the parent component
- Renders a custom input and the date picker with preset options

### `CustomInput`
#### Description
A custom input component used to display the selected date range and trigger the date picker.

### `Presets`
#### Description
A component that renders preset date range options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | PresetsProps | Component props including presets, onChange, and other options |

#### Internal Logic
Renders a list of preset date range options and handles selection.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @rnwonder/solid-date-picker | Core date picker functionality |
| date-fns | Date manipulation and formatting |
| solid-js | Reactive state management |
| solid-icons/tb | Icon components |

## Configuration
The component uses custom CSS styles defined in `datePickerStyles.css` for styling the date picker.

## Error Handling
The code includes basic error handling, such as throwing an error when required date range values are missing.