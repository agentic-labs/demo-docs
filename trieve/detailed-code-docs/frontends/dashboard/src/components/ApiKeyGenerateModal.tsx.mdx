---
title: "ApiKeyGenerateModal.tsx"
---

## High-level description
This code defines a React component called `ApiKeyGenerateModal` that allows users to generate new API keys with specific permissions and scopes. It provides a form for users to input key details and handles the API key generation process.

## Code Structure
The main component `ApiKeyGenerateModal` uses various Solid.js primitives and components from external libraries. It manages the state of the form, handles user interactions, and communicates with the backend API to generate and display the new API key.

## References
- UserContext
- createToast
- MultiSelect
- Tooltip
- ApiRoutes

## Symbols

### ApiKeyGenerateModal
#### Description
A modal component for generating new API keys with customizable permissions and scopes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| openModal | Accessor&lt;boolean&gt; | Controls the visibility of the modal |
| closeModal | () =&gt; void | Function to close the modal |
| refetch | (info?: unknown) =&gt; ApiKeyRespBody[] \| Promise&lt;ApiKeyRespBody[]&gt; \| null \| undefined | Function to refetch API keys after generation |

#### Internal Logic
1. Initializes state variables for form inputs and API key generation.
2. Fetches available datasets based on selected organizations.
3. Handles form submission and API key generation.
4. Manages the display of generated API key and error handling.
5. Provides options for customizing API key permissions and scopes.

## Side Effects
- Fetches datasets when selected organizations change.
- Calls the `refetch` function after successful API key generation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component rendering |
| terracotta | For UI components like Dialog, Disclosure, etc. |
| shared/types | For type definitions |
| solid-icons/fa | For icons |

## Error Handling
The component uses `createToast` to display error messages if API key generation fails.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /user/api_key | POST | API key details | SetUserApiKeyResponse | Generates a new API key |

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.