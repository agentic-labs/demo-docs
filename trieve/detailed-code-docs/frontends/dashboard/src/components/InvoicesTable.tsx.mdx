---
title: "InvoicesTable.tsx"
---

## High-level description
The `InvoicesTable` component is a Solid.js component that fetches and displays a table of invoices for a selected organization. It uses the UserContext to get the selected organization and makes an API call to retrieve the invoices. The component then renders a table with invoice details such as date, status, total amount, and a link to view the invoice on Stripe.

## Code Structure
The main symbols in this code are:
1. `InvoicesTable`: The main functional component.
2. `selectedOrganization`: A memoized value derived from the UserContext.
3. `orgInvoices`: A signal that holds the fetched invoice data.
4. `createEffect`: Used to fetch invoices when the selected organization changes.

These symbols work together to fetch and display the invoice data based on the selected organization.

## Symbols

### InvoicesTable
#### Description
This is the main functional component that renders the invoices table.

#### Internal Logic
1. It uses the UserContext to get the selected organization.
2. It creates a signal `orgInvoices` to store the fetched invoice data.
3. It uses `createEffect` to fetch invoices when the selected organization changes.
4. It renders a table with invoice details if there are any invoices.

### selectedOrganization
#### Description
A memoized value that returns the currently selected organization from the UserContext.

### orgInvoices
#### Description
A signal that holds the array of StripeInvoice objects fetched from the API.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | Provides reactive primitives and components |
| solid-icons/tb | Provides the TbFileInvoice icon |
| ../contexts/UserContext | Provides user and organization context |
| ../types/apiTypes | Provides the StripeInvoice type |
| ../formatters | Provides formatting functions for date and currency |

## Error Handling
The component handles a 403 error response from the API by displaying a toast message suggesting that the user should sign out and sign back in due to recent role changes.

## Performance Considerations
The component uses `createMemo` and `createEffect` to efficiently manage reactivity and avoid unnecessary re-renders or API calls.

## TODOs
There are no explicit TODOs in the code.