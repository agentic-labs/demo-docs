---
title: "NewDatasetModal.tsx"
---

## High-level description
This code defines a React component called `NewDatasetModal` that allows users to create a new dataset. It provides a form with various configuration options for the dataset, including organization selection, dataset name, embedding model, distance metric, and an option to fill with example data.

## Code Structure
The main component `NewDatasetModal` uses several hooks and components from SolidJS and other libraries. It manages the state of the form inputs and handles the dataset creation process. The component renders a modal dialog with form fields and submission logic.

## References
- UserContext
- createNewDataset (from api/createDataset)
- uploadSampleData (from api/uploadSampleData)
- ServerEnvsConfiguration, availableDistanceMetrics, availableEmbeddingModels (from shared/types)
- defaultServerEnvsConfiguration (from pages/Dashboard/Dataset/DatasetSettingsPage)
- createToast (from components/ShowToasts)

## Symbols

### NewDatasetModal
#### Description
A modal component for creating a new dataset with various configuration options.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | NewDatasetModalProps | Contains isOpen and closeModal properties |

#### Internal Logic
1. Initializes state for server configuration, dataset name, and other form inputs.
2. Uses UserContext to get the selected organization.
3. Defines a createDataset function to handle form submission.
4. Renders a modal dialog with form fields for dataset configuration.
5. Handles form submission and dataset creation, including optional sample data upload.

### createDataset
#### Description
An async function that handles the creation of a new dataset.

#### Internal Logic
1. Retrieves the selected organization ID.
2. Calls the createNewDataset API function with form data.
3. Optionally uploads sample data if the checkbox is selected.
4. Handles success and error cases, showing appropriate toasts.
5. Navigates to the new dataset page on success.

## Side Effects
- Creates a new dataset in the backend.
- Optionally uploads sample data to the new dataset.
- Shows toast notifications for success or error cases.
- Navigates to the new dataset page on successful creation.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component rendering |
| terracotta | For UI components like Dialog, DialogPanel, etc. |
| @solidjs/router | For navigation after dataset creation |

## Error Handling
The component handles errors during dataset creation by catching exceptions and displaying error messages using the createToast function.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.