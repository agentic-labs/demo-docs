---
title: "ApiKeys.tsx"
---

## High-level description
This code defines the `ApiKeys` component, which displays and manages API keys for a user. It allows users to view existing API keys, create new ones, and delete existing keys. The component interacts with a backend API to fetch, create, and delete API keys.

## Code Structure
The main `ApiKeys` component uses several Solid.js primitives and custom hooks. It fetches API keys, manages the state for creating new keys, and handles the deletion of existing keys. The component also renders a table of existing API keys and a modal for creating new keys.

## References
- `ApiKeyGenerateModal`: Used to create new API keys
- `UserContext`: Provides user and organization information
- `formatDate`: Utility function to format dates

## Symbols

### `ApiKeys`
#### Description
The main component that renders the API keys interface, including a table of existing keys and controls for managing them.

#### Internal Logic
1. Fetches API keys from the server
2. Renders a table of existing API keys
3. Provides functionality to delete API keys
4. Renders a button to open the API key generation modal

#### Side Effects
- Fetches API keys from the server on component mount
- Deletes API keys when the delete button is clicked

### `currentUserRole`
#### Description
A memoized function that determines the current user's role in the selected organization.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| currentUserRole | number | The user's role in the selected organization |

### `deleteApiKey`
#### Description
A function that deletes an API key both from the local state and the server.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | The ID of the API key to delete |

#### Side Effects
- Removes the API key from the local state
- Sends a DELETE request to the server to remove the API key
- Refetches the API keys list if the deletion is successful

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive primitives and components |
| solid-icons/fa | For icons used in the component |
| shared/types | For type definitions |

## Error Handling
The component doesn't implement explicit error handling for API requests. Errors during API key fetching or deletion might not be properly handled or displayed to the user.

## Performance Considerations
The component uses `createResource` to fetch API keys, which provides automatic caching and refetching capabilities. However, for large numbers of API keys, the rendering of the table might become a performance bottleneck.