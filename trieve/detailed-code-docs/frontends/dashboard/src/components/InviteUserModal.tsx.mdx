---
title: "InviteUserModal.tsx"
---

## High-level description
This code defines a React component called `InviteUserModal` that renders a modal dialog for inviting new users to an organization. It allows the user to input an email address and select a role for the new user, then sends an invitation request to the server.

## Code Structure
The main component `InviteUserModal` uses several hooks and context from Solid.js and other custom components. It manages the state for email, role, and sending status, and handles the invitation process through a fetch request to the server.

## References
- `UserContext` from "../contexts/UserContext"
- `DefaultError`, `fromI32ToUserRole`, `UserRole`, `fromUserRoleToI32`, `stringToUserRole` from "shared/types"
- `createToast` from "./ShowToasts"

## Symbols

### InviteUserModal
#### Description
A functional component that renders a modal dialog for inviting new users to an organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | InviteUserModalProps | Contains `isOpen` accessor and `closeModal` function |

#### Internal Logic
1. Initializes state for email, role, and sending status.
2. Uses `UserContext` to get the current user's role and organization.
3. Handles form submission by sending a POST request to the server.
4. Renders a form with input fields for email and role selection.
5. Displays success or error messages using `createToast`.

## Side Effects
- Sends a POST request to the server to create an invitation.
- Updates the UI based on the server response.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component rendering |
| terracotta | For UI components (Dialog, DialogOverlay, DialogPanel, DialogTitle) |
| shared/types | For type definitions and utility functions |

## Error Handling
- Displays error messages using `createToast` if the invitation request fails.
- Handles server errors by parsing the response and showing the error message.

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| /invitation | POST | Invitation details | Success/Error | Creates a new user invitation |

The component sends a POST request to the `/invitation` endpoint with the following data:
- organization_id
- email
- user_role
- app_url
- redirect_uri

The response is handled to show success or error messages to the user.