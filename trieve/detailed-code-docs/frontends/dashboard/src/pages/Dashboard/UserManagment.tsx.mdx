---
title: "UserManagment.tsx"
---

## High-level description
This code implements a user management interface for a dashboard application. It allows administrators to view, invite, edit, and remove users within an organization. The component handles user roles, invitations, and provides functionality to manage user permissions.

## Code Structure
The main `UserManagement` component contains several interconnected functions and state variables. It uses the `UserContext` for organization and user data, and interacts with an API to fetch and modify user information. The component also integrates with modal components for inviting and editing users.

## Symbols

### UserManagement
#### Description
The main component that renders the user management interface. It handles fetching users and invitations, and provides functionality to manage users within an organization.

#### Internal Logic
1. Fetches users and invitations for the selected organization.
2. Renders a table of users or invitations based on the current view.
3. Provides buttons to invite new users, edit user roles, and remove users.
4. Handles API calls for user management actions.

### getUsers
#### Description
Fetches the list of users for the selected organization.

#### Inputs
None

#### Outputs
None (updates the `users` state)

#### Internal Logic
1. Makes a GET request to the API to fetch users.
2. Handles potential 403 errors by showing a toast message.
3. Updates the `users` state with the fetched data.

### getInvitations
#### Description
Fetches the list of invitations for the selected organization.

#### Inputs
None

#### Outputs
None (updates the `invitations` state)

#### Internal Logic
1. Makes a GET request to the API to fetch invitations.
2. Handles potential 403 errors by showing a toast message.
3. Validates and updates the `invitations` state with the fetched data.

### removeUser
#### Description
Removes a user from the organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | The ID of the user to remove |

#### Outputs
None

#### Internal Logic
1. Prompts for user confirmation.
2. Makes a DELETE request to the API to remove the user.
3. Refreshes the user list and shows a success/error toast.

### deleteInvitation
#### Description
Deletes an invitation from the organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| id | string | The ID of the invitation to delete |

#### Outputs
None

#### Internal Logic
1. Makes a DELETE request to the API to delete the invitation.
2. Refreshes the invitation list and shows a success/error toast.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component rendering |
| terracotta | For UI components like Dialog |
| solid-icons | For icons used in the interface |
| shared/types | For type definitions and utility functions |

## Error Handling
The component uses try-catch blocks and checks response status codes to handle API errors. It displays error messages using toast notifications.

## API/Interface Reference
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| /organization/users/:orgId | GET | Fetch users for an organization |
| /invitation/:orgId | GET | Fetch invitations for an organization |
| /organization/:orgId/user/:userId | DELETE | Remove a user from an organization |
| /invitation/:id | DELETE | Delete an invitation |

The component also interacts with `InviteUserModal` and `EditUserModal` components for additional user management functionality.