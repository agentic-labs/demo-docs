---
title: "DatasetSettingsPage.tsx"
---

## High-level description
This file, `DatasetSettingsPage.tsx`, is a React component that provides a user interface for managing dataset settings in a dashboard. It allows users to configure various aspects of a dataset, including LLM settings, embedding settings, and additional options. The component also includes functionality for saving changes and managing the dataset (clearing or deleting).

## Code Structure
The file defines several components that work together to create the dataset settings page:
- `ServerSettingsForm`: Renders the main form for configuring dataset settings.
- `DangerZoneForm`: Provides options for clearing or deleting the dataset.
- `SaveButton`: A reusable button component for saving changes.
- `DatasetSettingsSidebar`: Renders a sidebar with navigation links to different sections of the settings page.
- `DatasetSettingsPage`: The main component that combines all the above components and manages the overall state and logic of the settings page.

## Symbols

### `ServerSettingsForm`
#### Description
This component renders a form for configuring various server settings for the dataset.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| serverConfig | Accessor&lt;ServerEnvsConfiguration&gt; | An accessor function that returns the current server configuration |
| setServerConfig | Function | A function to update the server configuration |

#### Internal Logic
The component renders multiple sections for different types of settings:
1. General LLM Settings
2. Penalties and Parameters
3. Prompt Settings
4. BM25 Settings (conditionally rendered)

Each section contains input fields that are bound to the `serverConfig` state and update it using the `setServerConfig` function.

### `DangerZoneForm`
#### Description
This component provides options for clearing or deleting the current dataset.

#### Internal Logic
- Uses the `DatasetContext` to access the current dataset information.
- Implements confirmation flows for both clearing and deleting the dataset.
- Makes API calls to clear or delete the dataset based on user actions.

### `SaveButton`
#### Description
A reusable button component for saving changes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| onSave | Function | A callback function to be called when the save button is clicked |

### `DatasetSettingsSidebar`
#### Description
Renders a sidebar with navigation links to different sections of the settings page.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| onSave | Function | A callback function to be called when the save button in the sidebar is clicked |

#### Internal Logic
- Manages the selected section state.
- Renders links to different sections of the settings page.
- Includes the `SaveButton` component.

### `DatasetSettingsPage`
#### Description
The main component that combines all other components and manages the overall state and logic of the settings page.

#### Internal Logic
- Uses the `DatasetContext` to access the current dataset information.
- Manages the `serverConfig` state and provides functions to update it.
- Implements the `onSave` function to save changes to the server configuration.
- Renders the `ServerSettingsForm`, `DangerZoneForm`, and `DatasetSettingsSidebar` components.

## Dependencies
- SolidJS for reactive state management and component rendering.
- `DatasetContext` for accessing dataset information.
- `createToast` for displaying notifications.
- Various UI components from the shared UI library.

## Configuration
The component uses environment variables for configuration:
- `VITE_BM25_ACTIVE`: Determines whether BM25 settings should be displayed.
- `VITE_API_HOST`: The API host for making server requests.

## Error Handling
The component uses the `createToast` function to display error messages when API calls fail or when there are validation errors.

## API/Interface Reference
The component interacts with the server API to save dataset configuration changes and manage the dataset:
| Endpoint | Method | Description |
|:---------|:-------|:------------|
| `/dataset` | PUT | Updates the dataset configuration |
| `/dataset/${datasetId}` | DELETE | Deletes the dataset |
| `/dataset/clear/${datasetId}` | PUT | Clears all chunks in the dataset |