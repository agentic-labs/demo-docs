---
title: "Billing.tsx"
---

## High-level description
The `Billing.tsx` file implements a billing component for a dashboard, displaying subscription plans and invoices for an organization. It fetches and displays the current organization's subscription details, available plans, and past invoices, allowing users to manage their subscription.

## Code Structure
The main `Billing` component uses several hooks and sub-components to manage state and render the billing information. It interacts with the `UserContext` to get organization details and makes API calls to fetch subscription and invoice data.

## References
- `UserContext` from "../../contexts/UserContext"
- `OrganizationAndSubAndPlan` from "shared/types"
- `PlansTable` from "../../components/PlansTable"
- `createToast` from "../../components/ShowToasts"
- `InvoicesTable` from "../../components/InvoicesTable"

## Symbols

### `Billing`
#### Description
The main component that renders the billing page, including the plans table and invoices table.

#### Internal Logic
1. Retrieves the selected organization from the `UserContext`.
2. Fetches the organization's subscription and plan details using an API call.
3. Renders the `PlansTable` and `InvoicesTable` components.

### `createEffect` (for fetching organization data)
#### Description
A side effect that fetches the organization's subscription and plan details when the selected organization changes.

#### Internal Logic
1. Makes an API call to fetch organization data.
2. Handles potential 403 errors by showing a toast message.
3. Updates the `orgSubPlan` state with the fetched data.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive programming and component creation |
| @solidjs/router | For routing (implied by the import statement) |

## Error Handling
The component handles a 403 error when fetching organization data by displaying a toast message suggesting the user sign out and sign back in due to potential role changes.

## Side Effects
The component has side effects for fetching organization data and cleaning up the abort controller when the component is unmounted.

This documentation provides a comprehensive overview of the `Billing.tsx` file, explaining its purpose, structure, and key components. It highlights the main functionality of managing and displaying billing information for an organization within a dashboard context.