---
title: "UserContext.tsx"
---

## High-level description
This code defines the UserContext and UserContextWrapper components in React. It manages user authentication, organization selection, and provides a context for user-related data throughout the application.

## Code Structure
The main symbols in this code are:
1. `UserContext`: A React context for storing user-related data.
2. `UserContextWrapper`: A component that provides the UserContext to its children and manages user authentication and organization selection.

## Symbols

### UserContext
#### Description
A React context that provides user-related data and functions to components throughout the application.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| user | Accessor&lt;SlimUser \| null&gt; \| null | The current user's data |
| setUser | (user: SlimUser \| null) =&gt; void | Function to update the user data |
| selectedOrganizationId | Accessor&lt;string \| null&gt; \| null | The ID of the currently selected organization |
| setSelectedOrganizationId | (id: string \| null) =&gt; void | Function to update the selected organization ID |
| loading | Accessor&lt;boolean&gt; \| null | Indicates if user data is being loaded |
| login | () =&gt; void | Function to initiate user login |
| logout | () =&gt; void | Function to log out the user |

### UserContextWrapper
#### Description
A component that wraps its children with the UserContext provider and manages user authentication and organization selection.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | UserStoreContextProps | The props for the component, including children to be wrapped |

#### Internal Logic
1. Initializes state for user, selectedOrganizationId, and loading.
2. Defines a login function that fetches user data from the API.
3. Uses createEffect to handle organization selection based on URL parameters or user data.
4. Uses createEffect to call login on component mount.
5. Renders its children wrapped in the UserContext.Provider when not loading, otherwise shows a loading spinner.

## Side Effects
- Fetches user data from the API
- Updates the URL based on organization selection
- Stores and retrieves data from localStorage

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive state management and component creation |
| shared/types | For type definitions (SlimUser, Notification) |

## Error Handling
The code implements basic error handling in the login function, logging errors to the console and displaying error toasts to the user.

## Logging
The code uses console.error for logging errors during the login process.

___

This documentation provides a comprehensive overview of the UserContext and UserContextWrapper components, their purpose, and how they manage user-related data in the application. The UserContextWrapper serves as a central point for user authentication and organization management, providing this data to the rest of the application through the UserContext.