---
title: "Overview"
---

## High-level description
This code defines a custom hook `useDatasetPages` that manages pagination, searching, and fetching of datasets for an organization. It provides functionality to load datasets, handle pagination, search datasets, and remove datasets.

## Code Structure
The main function `useDatasetPages` uses several SolidJS primitives like `createSignal`, `createEffect`, and `createMemo` to manage state and reactivity. It interacts with an API to fetch datasets and provides methods to manipulate the dataset list.

## Symbols

### useDatasetPages
#### Description
A custom hook that manages the fetching and pagination of datasets for an organization.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| props | Object | Contains org (Accessor&lt;Organization \| undefined&gt;), page (Accessor&lt;number&gt;), searchQuery (Accessor&lt;string&gt;), and setPage (function) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| Object | Object | Contains datasets (Accessor&lt;DatasetAndUsage[]&gt;), maxPageDiscovered (Accessor&lt;number&gt;), maxDatasets (Accessor&lt;number&gt;), removeDataset (function), and hasLoaded (Accessor&lt;boolean&gt;) |

#### Internal Logic
1. Fetches datasets from the API using the `getDatasets` function.
2. Manages pagination and searching of datasets.
3. Provides a method to remove a dataset from the list.
4. Uses memoization to filter and slice the dataset list based on search query and pagination.

### getDatasets
#### Description
An asynchronous function that fetches datasets from the API.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| orgId | string | The ID of the organization |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| results | DatasetAndUsage[] | An array of fetched datasets |

#### Internal Logic
1. Fetches datasets in batches of `FETCHING_SIZE`.
2. Continues fetching until no more datasets are available or an error occurs.
3. Handles pagination on the API side using limit and offset parameters.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| solid-js | For reactive primitives like createSignal, createEffect, and createMemo |
| @nozbe/microfuzz | For fuzzy search functionality |
| shared/types | For type definitions like DatasetAndUsage and Organization |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| FETCHING_SIZE | number | 1000 | The number of datasets to fetch in each API call |
| PAGE_SIZE | number | 20 | The number of datasets to display per page |

## Error Handling
The code includes basic error handling in the `getDatasets` function, where it catches errors during the fetch operation and stops further fetching attempts.

## Performance Considerations
1. The code uses batched fetching to retrieve datasets, which can help with performance for large dataset collections.
2. Memoization is used to optimize the filtering and slicing of datasets based on search queries and pagination.

This hook provides a comprehensive solution for managing dataset pagination and searching in a SolidJS application, with considerations for performance and error handling.