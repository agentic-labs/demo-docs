---
title: "Overview"
---

## High-level description
The `server/src/data` directory contains essential data structures, models, and schema definitions for the Trieve application. It serves as the core data layer, defining the structure of various entities such as users, topics, messages, chunks, datasets, and organizations. This directory also includes the database schema and relationships between different tables.

## What does it do?
This directory provides the foundation for data management in the Trieve application. It defines:

1. Data models: Structs and enums representing various entities in the application, such as users, topics, messages, and chunks.
2. Database schema: Table definitions for storing these entities in the database.
3. Data transfer objects (DTOs): Structures for transferring data between different parts of the application.
4. Conversion methods: Functions to convert between different representations of data (e.g., database models to DTOs).
5. Utility methods: Helper functions for data manipulation and calculations (e.g., geographic distance calculations).

These components work together to provide a structured way of handling data throughout the application, from database interactions to API responses.

## Entry points
The main entry point for this directory is the `mod.rs` file, which exposes two submodules:

1. `models`: Contains the data structures and associated methods for various entities in the application.
2. `schema`: Defines the database schema using the Diesel ORM library.

The data flow typically starts from the database schema, which defines how data is stored. The models then provide a Rust representation of this data, along with methods to create, manipulate, and convert between different representations. These models are used throughout the application for data processing, API interactions, and business logic implementation.

## Key Files

### models.rs
This file contains the core data structures used throughout the application. Key components include:

1. Entity structs: `User`, `Topic`, `Message`, `ChunkMetadata`, `Dataset`, etc.
2. Data transfer objects: `UserDTO`, `ScoreChunkDTO`, `DatasetDTO`, etc.
3. Utility structs: `GeoInfo`, `GeoInfoWithBias`, etc.
4. Enums: `RoleProxy`, `GeoTypes`, `EventType`, etc.
5. Conversion methods: Functions to convert between different data representations.

These structures and methods form the backbone of data handling in the application, providing type-safe and structured ways to work with various entities.

### schema.rs
This file defines the database schema using Diesel's table! macro. It includes:

1. Table definitions: `users`, `organizations`, `datasets`, `chunk_metadata`, etc.
2. Column specifications: Defining the structure and data types for each table.
3. Table relationships: Using the joinable! macro to define foreign key relationships between tables.

The schema definitions ensure that the application's data model aligns with the database structure, enabling type-safe database operations through the Diesel ORM.

## Dependencies
The main external dependency used in this directory is the Diesel ORM library. Diesel is used for:

1. Defining the database schema (`schema.rs`)
2. Mapping Rust structs to database tables
3. Generating type-safe database queries

Version information is not explicitly provided in the given code snippets.

## Configuration
While there's no explicit configuration file in this directory, the `DatasetConfiguration` struct in `models.rs` suggests that there are configurable settings for datasets. This struct includes fields like:

- `chunk_size`: Integer
- `qdrant_config`: JSON value
- `embedding_config`: JSON value
- `reranking_config`: JSON value
- `auto_vectorize_chunks`: Boolean
- `default_page_size`: Integer

These fields likely control various aspects of dataset behavior and processing within the application.

In summary, the `server/src/data` directory provides a robust foundation for data management in the Trieve application, defining the structure and relationships of various entities, and enabling type-safe database interactions through the use of the Diesel ORM.