---
title: "schema.rs"
---

## High-level description
This code defines the database schema for an application using the Diesel ORM library in Rust. It defines various tables representing entities like users, organizations, datasets, chunks, and their relationships. It also specifies relationships between these tables using Diesel's joinable macro.

## Code Structure
The code consists of multiple `diesel::table!` macro calls, each defining a table and its columns. The `diesel::joinable!` macro then defines relationships between these tables based on foreign key constraints.

## Symbols
### `diesel::table!`
#### Description
This macro is used to define a database table and its columns. It maps a Rust struct to a database table, allowing Diesel to interact with the database using type-safe queries.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table_name (id) | string | The name of the table in the database, followed by the primary key column in parentheses. |
| { column_definitions } | code block | Definitions of each column in the table, specifying their names and data types. |

#### Outputs
This macro doesn't return a value but generates code that Diesel uses to map Rust structs to database tables.

#### Internal Logic
The macro parses the provided table and column definitions and generates the necessary code for Diesel to interact with the database. This includes defining structs representing each table and its columns, as well as implementing traits that allow Diesel to perform CRUD operations.

### `diesel::joinable!`
#### Description
This macro defines relationships between tables based on foreign key constraints. It allows Diesel to perform joins between tables using type-safe queries.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| table1 -&gt; table2 (column_name) | table identifiers | Specifies a relationship between `table1` and `table2` where `table1` has a foreign key referencing `column_name` in `table2`. |

#### Outputs
This macro doesn't return a value but generates code that Diesel uses to perform joins between tables.

#### Internal Logic
The macro analyzes the provided table relationships and generates code that allows Diesel to build join queries. This includes defining methods on the structs representing each table that allow accessing related data from other tables.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| diesel | Object-relational mapper (ORM) library for Rust, used to interact with the database. |

## Error Handling
This code doesn't implement specific error handling. Any errors during database operations will be handled by Diesel and propagated to the calling code.
