---
title: "schema.rs"
---

## High-level description
This file, `schema.rs`, defines the database schema for a data management system using the Diesel ORM (Object-Relational Mapping) in Rust. It outlines various tables and their relationships, covering aspects such as user management, dataset organization, chunk metadata, and billing information.

## Code Structure
The code consists of multiple `diesel::table!` macro invocations, each defining a database table with its columns and types. The file also includes `diesel::joinable!` and `diesel::allow_tables_to_appear_in_same_query!` macro calls to define relationships between tables and allow them to be used together in queries.

## Symbols

### `diesel::table!` macro invocations
#### Description
Each `diesel::table!` macro defines a database table structure, specifying column names, types, and primary keys.

#### Internal Logic
The macro creates Rust structures that represent database tables, allowing for type-safe database operations using Diesel ORM.

### `diesel::joinable!` macro invocations
#### Description
These macros define relationships between tables, typically representing foreign key connections.

### `diesel::allow_tables_to_appear_in_same_query!` macro invocation
#### Description
This macro allows the listed tables to be used together in the same database query.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Diesel | ORM for Rust, used for defining database schema and operations |

## Tables
Here's a brief overview of some key tables defined in the schema:

1. `chunk_group`: Represents groups of data chunks with metadata.
2. `chunk_metadata`: Stores metadata for individual data chunks.
3. `datasets`: Defines datasets within the system.
4. `files`: Represents file information associated with datasets.
5. `organizations`: Stores information about organizations using the system.
6. `users`: Contains user information.
7. `topics`: Represents conversation topics.
8. `messages`: Stores individual messages within topics.
9. `stripe_plans` and `stripe_subscriptions`: Handle billing and subscription information.

Each table is defined with various columns, including primary keys, foreign keys, and specific data fields relevant to the table's purpose.

## Error Handling
This schema file doesn't implement explicit error handling, as it's primarily a declarative structure. Error handling would typically be implemented in the code that interacts with this schema.

## API/Interface Reference
This schema file doesn't directly expose an API. It defines the database structure that would be used by other parts of the application to interact with the database.

Note: This schema appears to be automatically generated by Diesel CLI, as indicated by the comment at the top of the file. Any modifications to the database structure should likely be made through migrations rather than directly editing this file.