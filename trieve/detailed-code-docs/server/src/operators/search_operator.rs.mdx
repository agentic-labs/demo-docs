---
title: "search_operator.rs"
---

Here's a high-level description of the `search_operator.rs` file:

The `search_operator.rs` file is a core component of the Trieve server, responsible for implementing various search functionalities. It provides functions for searching chunks of data using different methods such as semantic search, full-text search, and hybrid search. The file also includes operations for handling group searches, reranking results, and managing search-related data structures.

## Code Structure

The file defines several structs and functions that work together to perform search operations:

1. `SearchResult`: Represents a single search result with a score and point ID.
2. `SearchChunkQueryResult`: Contains search results, total pages, and batch lengths.
3. `RetrievePointQuery`: Represents a query to retrieve points from the search index.
4. Various functions for assembling filters, retrieving points, and processing search results.

## Main Functionalities

1. Assembling Qdrant filters based on various search criteria.
2. Retrieving points from the Qdrant search index.
3. Performing semantic, full-text, and hybrid searches on chunks.
4. Handling group-based searches and retrieving chunks for groups.
5. Reranking search results based on various criteria.
6. Managing search-related data structures and conversions between them.

## Key Components

1. `assemble_qdrant_filter`: Builds a Qdrant filter based on search parameters.
2. `retrieve_qdrant_points_query`: Retrieves points from the Qdrant index.
3. `search_chunks_query`: Performs a search on chunks using specified criteria.
4. `search_hybrid_chunks`: Executes a hybrid search combining semantic and full-text methods.
5. `rerank_chunks`: Reranks search results based on various factors.

The file integrates with other parts of the system, such as the Qdrant search engine, database operations, and data models defined elsewhere in the project.