---
title: "Overview"
---

## High-level description
This directory contains handler modules for various aspects of the Trieve server application. These handlers implement the business logic for different API endpoints, managing operations related to analytics, authentication, data chunks, datasets, events, files, groups, invitations, messages, metrics, organizations, payments (via Stripe), topics, and users.

## What does it do?
The handlers in this directory collectively form the core functionality of the Trieve API. They process incoming HTTP requests, interact with the database and external services, and return appropriate responses. Here's a brief overview of the main functionalities:

1. Analytics: Collect and provide various analytics data.
2. Authentication: Manage user login, logout, and session handling.
3. Data chunks: Handle creation, retrieval, and search of data chunks.
4. Datasets: Manage dataset operations like creation, updating, and deletion.
5. Events: Handle event logging and retrieval.
6. Files: Manage file uploads, downloads, and metadata.
7. Groups: Handle grouping of data chunks.
8. Invitations: Manage user invitations to organizations.
9. Messages: Handle chat-like messaging functionality.
10. Metrics: Collect and expose Prometheus metrics.
11. Organizations: Manage organization-related operations.
12. Payments: Handle Stripe integration for subscriptions and payments.
13. Topics: Manage topic-related operations for conversations.
14. Users: Handle user management and API key operations.

## Entry points
The main entry point for this directory is the `mod.rs` file, which exports all the handler modules. Each handler module (`*_handler.rs`) contains functions that serve as entry points for specific API endpoints. These functions are typically used in the route definitions of the web server.

## Key Files
1. `analytics_handler.rs`: Handles analytics-related operations.
2. `auth_handler.rs`: Manages authentication and authorization.
3. `chunk_handler.rs`: Handles operations related to data chunks.
4. `dataset_handler.rs`: Manages dataset-related operations.
5. `file_handler.rs`: Handles file upload and management.
6. `message_handler.rs`: Manages chat-like messaging functionality.
7. `organization_handler.rs`: Handles organization-related operations.
8. `stripe_handler.rs`: Manages Stripe integration for payments.
9. `user_handler.rs`: Handles user management operations.

## Dependencies
The handlers rely on several external libraries and internal modules:

1. actix-web: Web framework for handling HTTP requests and responses.
2. serde: For serialization and deserialization of JSON data.
3. diesel: ORM for database operations.
4. utoipa: For API documentation generation.
5. openai_dive: For integration with OpenAI services.
6. qdrant_client: For vector database operations.
7. redis: For caching and message queuing.
8. stripe: For payment processing.

Internal dependencies include various operator modules for database operations, middleware for authentication, and custom error types.

## Configuration
The handlers often use configuration values from environment variables, such as API keys, database connection strings, and feature flags. These are typically accessed through a configuration module or directly from environment variables.

Key configurable aspects include:
- Database connection details
- Redis connection details
- Stripe API keys and webhook secrets
- OpenAI API keys
- S3 bucket configurations for file storage
- Rate limiting and usage quotas

The handlers are designed to be flexible and can adapt their behavior based on these configurations, allowing for easy deployment in different environments (development, staging, production) with appropriate settings.