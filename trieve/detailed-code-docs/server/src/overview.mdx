---
title: "Overview"
---

## High-level description
The `server/src` directory contains the core implementation of the Trieve server application. It includes various components such as API handlers, data models, error handling, middleware, utility functions, and worker processes. The server is built using the Actix Web framework and integrates with multiple databases and external services.

## What does it do?
The Trieve server provides a comprehensive API for managing and searching datasets, handling user authentication, processing files, and integrating with external services like Stripe for payments. Key functionalities include:

1. User and organization management
2. Dataset and chunk management
3. File processing and ingestion
4. Search operations (including hybrid semantic and full-text search)
5. Analytics and event tracking
6. Authentication and authorization
7. API versioning
8. Integration with external services (e.g., OpenAI for language models, Stripe for payments)
9. Background processing for tasks like data ingestion and reindexing

## Entry points
The main entry point for the server is the `main.rs` file, which delegates to the `trieve_server::main()` function defined in `lib.rs`. The `lib.rs` file sets up the server configuration, initializes databases and services, and defines the API routes.

Key modules and their roles:
- `handlers`: Contains API endpoint implementations
- `operators`: Implements core business logic and database operations
- `data`: Defines data models and database schema
- `middleware`: Implements request processing middleware (e.g., authentication, API versioning)
- `errors`: Defines custom error types and handling

## Key Files
1. `lib.rs`: Main server setup and configuration
2. `handlers/chunk_handler.rs`: Manages operations on data chunks
3. `handlers/auth_handler.rs`: Handles user authentication
4. `operators/search_operator.rs`: Implements search functionality
5. `data/models.rs`: Defines core data structures
6. `middleware/auth_middleware.rs`: Implements authentication middleware

## Dependencies
The server relies on several external libraries and services:
- Actix Web: Web framework
- Diesel: ORM for database operations
- Qdrant: Vector database for semantic search
- Redis: Caching and message queue
- OpenAI: Language model integration
- Stripe: Payment processing
- Sentry: Error tracking and logging

## Configuration
The server uses environment variables for configuration, including:
- Database connection strings (PostgreSQL, Redis, Qdrant)
- API keys for external services (OpenAI, Stripe)
- Server settings (e.g., host, port)
- Feature flags and versioning information

## Error Handling
The application uses a custom `ServiceError` enum for consistent error handling across different components. This allows for proper error propagation and conversion to appropriate HTTP responses.

In summary, the `server/src` directory contains a complex and feature-rich server application that provides a wide range of functionalities for managing and searching datasets, with integrations for various external services and a focus on scalability and performance.