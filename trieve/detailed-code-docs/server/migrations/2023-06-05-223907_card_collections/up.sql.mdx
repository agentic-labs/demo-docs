---
title: "up.sql"
---

## High-level description
This SQL script creates a new table named `card_collection` in the database. The table is designed to store information about collections of cards, including details such as the collection's author, name, visibility status, description, and timestamps for creation and updates.

## Symbols

### `card_collection` table
#### Description
The `card_collection` table is created to store information about card collections. It includes fields for identifying the collection, its author, name, public visibility status, description, and timestamps for tracking creation and updates.

#### Internal Logic
The table is created with the following columns:

1. `id`: A UUID (Universally Unique Identifier) serving as the primary key for the table.
2. `author_id`: A UUID referencing the `id` column in the `users` table, establishing a foreign key relationship.
3. `name`: A text field to store the name of the card collection.
4. `is_public`: A boolean field indicating whether the collection is public or private, with a default value of `FALSE`.
5. `description`: A text field to store the description of the card collection.
6. `created_at`: A timestamp field to record when the collection was created, defaulting to the current time.
7. `updated_at`: A timestamp field to record when the collection was last updated, defaulting to the current time.

## Dependencies
This migration script relies on the existence of a `users` table in the database, as it references the `id` column of that table for the `author_id` foreign key.

## Performance Considerations
The use of UUID as the primary key (`id`) and foreign key (`author_id`) may have performance implications for large datasets compared to integer-based keys. However, UUIDs offer benefits such as uniqueness across distributed systems and potential for easier data merging.

## References
This migration script references the `users` table, specifically its `id` column, through the foreign key constraint on the `author_id` column.

## Notes
- The `is_public` field defaults to `FALSE`, implying that collections are private by default.
- Both `created_at` and `updated_at` fields are automatically set to the current time when a record is inserted, using the `NOW()` function.
- The script uses the PostgreSQL-style `UUID` data type, indicating that this migration is likely intended for a PostgreSQL database.