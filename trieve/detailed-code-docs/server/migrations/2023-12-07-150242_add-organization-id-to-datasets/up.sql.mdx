---
title: "up.sql"
---

## High-level description
This SQL script modifies the `datasets` table in a database schema. It adds a new column `organization_id` referencing the `organizations` table, sets a default value for existing datasets, and establishes a foreign key constraint.

## Symbols
### `up.sql`
#### Description
This SQL script adds a new column named `organization_id` to the `datasets` table and associates it with the `organizations` table through a foreign key relationship. 

#### Internal Logic
1. **Add Column:** An `organization_id` column of type `UUID` is added to the `datasets` table with a default value of `NULL`.
2. **Update Existing Data:**  The script updates the newly added `organization_id` column in the `datasets` table. It sets the `organization_id` for each dataset to the `id` of the organization named 'DEFAULT' from the `organizations` table.
3. **Set Column to Not Null:** The `organization_id` column is altered to not allow `NULL` values.
4. **Add Foreign Key Constraint:** A foreign key constraint `datasets_organization_id_fkey` is added to the `datasets` table. This constraint references the `id` column of the `organizations` table, ensuring referential integrity between the two tables.

#### Side Effects
- Modifies the database schema by altering the `datasets` table.
- Updates existing data in the `datasets` table.
- Establishes a foreign key constraint between `datasets` and `organizations` tables. 
