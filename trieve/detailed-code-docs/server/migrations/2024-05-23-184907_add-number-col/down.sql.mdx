---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert the changes made in the corresponding `up.sql` file. It removes a column named `num_value` from the `chunk_metadata` table and drops an index that was likely created for that column.

## Symbols

### ALTER TABLE chunk_metadata DROP COLUMN num_value;
#### Description
This SQL command removes the `num_value` column from the `chunk_metadata` table.

#### Internal Logic
1. Identifies the `chunk_metadata` table.
2. Removes the `num_value` column from the table structure.

### DROP INDEX IF EXISTS idx_num_val_chunk_metadata;
#### Description
This SQL command drops the index named `idx_num_val_chunk_metadata` if it exists.

#### Internal Logic
1. Checks if an index named `idx_num_val_chunk_metadata` exists.
2. If the index exists, it is removed from the database.

## Side Effects
- The `chunk_metadata` table structure is modified by removing the `num_value` column.
- Any data stored in the `num_value` column will be permanently lost.
- The index `idx_num_val_chunk_metadata` is removed, which may affect query performance for operations that previously used this index.

## Dependencies
This script relies on the existence of:
1. The `chunk_metadata` table
2. The `num_value` column in the `chunk_metadata` table
3. Potentially, the `idx_num_val_chunk_metadata` index

## Error Handling
The script uses the `IF EXISTS` clause when dropping the index. This prevents errors if the index doesn't exist, making the script more robust and idempotent.

## TODOs
The comment at the top of the file, `-- This file should undo anything in `up.sql``, serves as a reminder and documentation for developers. It indicates that this script is intended to reverse the changes made by the corresponding `up.sql` migration file.