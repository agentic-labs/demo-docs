---
title: "down.sql"
---

## High-level description
This SQL script reverts the changes made by the migration `2024-02-01-003109_fix_events_upload`. It drops the function `public.update_notification_count()` and renames the table `dataset_event_counts` back to `dataset_notification_counts`.

## Symbols

### `DROP FUNCTION IF EXISTS public.update_notification_count() CASCADE;`
#### Description
This statement drops the function named `update_notification_count` in the `public` schema if it exists. The `CASCADE` option ensures that any objects depending on this function are also dropped.

#### Internal Logic
- Checks if the function `public.update_notification_count` exists in the `public` schema.
- If it exists, drops the function and any dependent objects due to the `CASCADE` option.

### `ALTER TABLE dataset_event_counts RENAME TO dataset_notification_counts;`
#### Description
This statement renames the table `dataset_event_counts` to `dataset_notification_counts`.

#### Internal Logic
- Renames the table `dataset_event_counts` to `dataset_notification_counts`. This assumes that the table `dataset_event_counts` exists and there is no existing table named `dataset_notification_counts`.
