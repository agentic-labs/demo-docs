---
title: "up.sql"
---

## High-level description
This SQL migration script adds two new columns to the `chunk_group` table: `metadata` and `tag_set`. It also creates indexes on these new columns to improve query performance.

## Symbols

### ALTER TABLE chunk_group ADD COLUMN metadata JSONB NULL DEFAULT '{}'::JSONB;
#### Description
This statement adds a new column named `metadata` to the `chunk_group` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| metadata | JSONB | Stores JSON data for additional metadata |

#### Internal Logic
- The column is of type JSONB, which allows for storing JSON data.
- It is nullable, meaning it can contain NULL values.
- The default value is an empty JSON object (`'{}'::JSONB`).

### ALTER TABLE chunk_group ADD COLUMN tag_set text NULL;
#### Description
This statement adds a new column named `tag_set` to the `chunk_group` table.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tag_set | text | Stores a set of tags as text |

#### Internal Logic
- The column is of type text, which can store string data.
- It is nullable, allowing NULL values.

### CREATE INDEX idx_chunk_group_metadata ON chunk_group(metadata);
#### Description
This statement creates an index on the `metadata` column of the `chunk_group` table.

#### Internal Logic
- The index is named `idx_chunk_group_metadata`.
- It is created on the `metadata` column of the `chunk_group` table.
- This index will improve query performance when searching or filtering based on the `metadata` column.

### CREATE INDEX idx_chunk_group_tag_set ON chunk_group(tag_set);
#### Description
This statement creates an index on the `tag_set` column of the `chunk_group` table.

#### Internal Logic
- The index is named `idx_chunk_group_tag_set`.
- It is created on the `tag_set` column of the `chunk_group` table.
- This index will improve query performance when searching or filtering based on the `tag_set` column.

## Performance Considerations
The addition of indexes on the new columns (`metadata` and `tag_set`) will improve query performance for operations that involve these columns. However, it's important to note that while indexes speed up read operations, they can slightly slow down write operations due to the need to update the index.