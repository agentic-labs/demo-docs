---
title: "up.sql"
---

## High-level description
This SQL script modifies the `chunk_group` table by adding two new columns: `metadata` and `tag_set`, and creates indexes for these new columns. 

## Symbols
### `ALTER TABLE chunk_group ADD COLUMN metadata JSONB NULL DEFAULT '{}'::JSONB;`
#### Description
This statement adds a new column named `metadata` to the `chunk_group` table. 

#### Inputs
N/A - This is a SQL statement, not a function.
#### Outputs
N/A - This is a SQL statement, not a function.
#### Internal Logic
- `ALTER TABLE chunk_group`: Specifies that the `chunk_group` table is being altered.
- `ADD COLUMN metadata`: Adds a new column named `metadata`.
- `JSONB`: Defines the data type of the new column as JSONB, which is a specialized data type for storing JSON (JavaScript Object Notation) data.
- `NULL`: Allows the column to contain NULL values, meaning the field can be left blank.
- `DEFAULT '{}'::JSONB`: Sets the default value of the `metadata` column to an empty JSON object (`{}`) if no value is provided during insertion.

### `ALTER TABLE chunk_group ADD COLUMN tag_set text NULL;`
#### Description
This statement adds a new column named `tag_set` to the `chunk_group` table. 

#### Inputs
N/A - This is a SQL statement, not a function.
#### Outputs
N/A - This is a SQL statement, not a function.
#### Internal Logic
- `ALTER TABLE chunk_group`: Specifies that the `chunk_group` table is being altered.
- `ADD COLUMN tag_set`: Adds a new column named `tag_set`.
- `text`: Defines the data type of the new column as text, which can store a string of characters.
- `NULL`: Allows the column to contain NULL values, meaning the field can be left blank.

### `CREATE INDEX idx_chunk_group_metadata ON chunk_group(metadata);`
#### Description
This statement creates an index on the `metadata` column of the `chunk_group` table.

#### Inputs
N/A - This is a SQL statement, not a function.
#### Outputs
N/A - This is a SQL statement, not a function.
#### Internal Logic
- `CREATE INDEX idx_chunk_group_metadata`: Creates an index named `idx_chunk_group_metadata`. Indexes are used to speed up data retrieval operations.
- `ON chunk_group(metadata)`: Specifies that the index is created on the `metadata` column of the `chunk_group` table.

### `CREATE INDEX idx_chunk_group_tag_set ON chunk_group(tag_set);`
#### Description
This statement creates an index on the `tag_set` column of the `chunk_group` table.

#### Inputs
N/A - This is a SQL statement, not a function.
#### Outputs
N/A - This is a SQL statement, not a function.
#### Internal Logic
- `CREATE INDEX idx_chunk_group_tag_set`: Creates an index named `idx_chunk_group_tag_set`. Indexes are used to speed up data retrieval operations.
- `ON chunk_group(tag_set)`: Specifies that the index is created on the `tag_set` column of the `chunk_group` table.
