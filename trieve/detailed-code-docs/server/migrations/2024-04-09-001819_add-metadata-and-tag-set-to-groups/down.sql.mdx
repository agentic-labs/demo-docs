---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert the changes made in the corresponding `up.sql` file. It removes the `metadata` and `tag_set` columns from the `chunk_group` table and drops the associated indexes.

## Symbols

### ALTER TABLE chunk_group DROP COLUMN IF EXISTS metadata
#### Description
This SQL command removes the `metadata` column from the `chunk_group` table if it exists.

### ALTER TABLE chunk_group DROP COLUMN IF EXISTS tag_set
#### Description
This SQL command removes the `tag_set` column from the `chunk_group` table if it exists.

### DROP INDEX IF EXISTS idx_chunk_group_metadata
#### Description
This SQL command drops the index named `idx_chunk_group_metadata` if it exists. This index was likely created for the `metadata` column in the `up.sql` file.

### DROP INDEX IF EXISTS idx_chunk_group_tag_set
#### Description
This SQL command drops the index named `idx_chunk_group_tag_set` if it exists. This index was likely created for the `tag_set` column in the `up.sql` file.

## Side Effects
- Removes the `metadata` column from the `chunk_group` table, potentially causing loss of data stored in this column.
- Removes the `tag_set` column from the `chunk_group` table, potentially causing loss of data stored in this column.
- Drops the indexes associated with the `metadata` and `tag_set` columns, which may affect query performance on these columns if they still exist in other parts of the database.

## Performance Considerations
Dropping columns and indexes are generally fast operations, but the exact performance impact depends on the size of the table and the database system being used. These operations may briefly lock the table, potentially affecting concurrent operations on the `chunk_group` table.