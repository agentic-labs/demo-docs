---
title: "down.sql"
---

## High-level description
This SQL script performs database migration rollback operations, specifically reverting changes related to adding "metadata" and "tag_set" columns to the "chunk_group" table. It's intended to be executed as part of a database migration rollback process.

## Symbols

### `down.sql`
#### Description
This SQL script undoes the changes introduced by the corresponding `up.sql` migration script. It removes columns and indexes related to "metadata" and "tag_set" from the "chunk_group" table.

#### Internal Logic
1. **`ALTER TABLE chunk_group DROP COLUMN IF EXISTS metadata;`**: This statement attempts to drop the "metadata" column from the "chunk_group" table. The `IF EXISTS` clause ensures that the operation doesn't fail if the column doesn't exist.
2. **`ALTER TABLE chunk_group DROP COLUMN IF EXISTS tag_set;`**: Similar to the previous statement, this one attempts to drop the "tag_set" column from the "chunk_group" table, again with the `IF EXISTS` clause for safety.
3. **`DROP INDEX IF EXISTS idx_chunk_group_metadata;`**: This statement attempts to drop the index named "idx_chunk_group_metadata". The `IF EXISTS` clause prevents errors if the index doesn't exist.
4. **`DROP INDEX IF EXISTS idx_chunk_group_tag_set;`**: This statement attempts to drop the index named "idx_chunk_group_tag_set", also with the `IF EXISTS` clause for safety. 
