---
title: "up.sql"
---

## High-level description
This SQL script creates an index on the `metadata` column of the `card_metadata` table. The index is a GIN (Generalized Inverted Index) index, which is suitable for indexing JSONB data.

## Symbols

### `CREATE INDEX json_gin`
#### Description
This statement creates a new index named `json_gin` on the `card_metadata` table. The index is created using the GIN method, which is specifically designed for indexing JSONB data types.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This statement modifies the database schema by creating an index.

#### Internal Logic
* **`CREATE INDEX`**: This clause initiates the creation of a new index.
* **`json_gin`**: This is the user-defined name given to the new index.
* **`ON card_metadata`**: This specifies the table on which the index will be created.
* **`USING gin`**: This specifies the index method to be used. GIN is chosen because the indexed column (`metadata`) contains JSONB data.
* **`(metadata)`**: This defines the column on which the index will be built.

#### Side Effects
This statement modifies the database schema by creating a new index. This index will improve the performance of queries that filter or sort by the `metadata` column, which contains JSONB data.

#### Performance Considerations
Creating an index generally improves the speed of data retrieval but may slightly slow down data insertion and updates. The choice of index type (GIN in this case) is crucial for performance and should be aligned with the data type and expected query patterns. 
