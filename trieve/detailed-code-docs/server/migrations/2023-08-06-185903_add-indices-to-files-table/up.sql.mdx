---
title: "up.sql"
---

## High-level description
This SQL script defines a database migration that adds indices to the `files` and `card_files` tables. These indices are intended to improve query performance by speeding up lookups based on commonly used columns.

## Symbols
### `up.sql`
#### Description
This SQL script adds indices to the `files` and `card_files` tables. It specifically creates indices on the `user_id`, `private`, `created_at`, and `updated_at` columns for both tables. Additionally, it creates indices on `card_id` and `file_id` for the `card_files` table.

#### Internal Logic
The script uses the `CREATE INDEX` statement to create the indices. Each index is given a name (e.g., `idx_files_user_id`) and is defined on a specific table and column (e.g., `files (user_id)`).

* **`files` table indices:**
    * `idx_files_user_id`: This index will speed up queries that filter or sort by the `user_id` column.
    * `idx_files_private`: This index will speed up queries that filter by the `private` column.
    * `idx_files_created_at`: This index will speed up queries that filter or sort by the `created_at` column.
    * `idx_files_updated_at`: This index will speed up queries that filter or sort by the `updated_at` column.

* **`card_files` table indices:**
    * `idx_card_files_card_id`: This index will speed up queries that filter or sort by the `card_id` column.
    * `idx_card_files_file_id`: This index will speed up queries that filter or sort by the `file_id` column.
    * `idx_card_files_created_at`: This index will speed up queries that filter or sort by the `created_at` column.
    * `idx_card_files_updated_at`: This index will speed up queries that filter or sort by the `updated_at` column.

#### Side Effects
This script modifies the database schema by adding the specified indices to the `files` and `card_files` tables. 
