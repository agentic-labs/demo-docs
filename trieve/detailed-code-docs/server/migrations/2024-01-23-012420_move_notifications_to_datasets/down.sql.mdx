---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert the changes made in the corresponding `up.sql` file. It undoes the migration of notifications from a user-based system to a dataset-based system by modifying the structure of notification-related tables.

## Symbols

### SQL Migration Script
#### Description
This script contains SQL commands to revert changes made to the notification system, specifically moving from a dataset-centric approach back to a user-centric approach.

#### Internal Logic
1. Adds a `user_uuid` column to the `dataset_notification_counts` table.
2. Removes the `dataset_uuid` column from the `dataset_notification_counts` table.
3. Renames the `dataset_notification_counts` table back to `user_notification_counts`.
4. Adds a `user_uuid` column to the `file_upload_completed_notifications` table.

## Side Effects
- The structure of the `dataset_notification_counts` table is modified.
- The `dataset_notification_counts` table is renamed to `user_notification_counts`.
- The `file_upload_completed_notifications` table is modified.

These changes will affect any queries or operations that were using the modified tables and columns.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| PostgreSQL | The SQL syntax suggests this script is intended for a PostgreSQL database |

## TODOs
The comment "Your SQL goes here" suggests that this might be a template or placeholder file. Ensure that all necessary SQL commands have been added and reviewed before executing this migration.