---
title: "up.sql"
---

## High-level description
This SQL migration script updates the `events` table by replacing the prefix 'card_' with 'chunk_' in the `event_type` column for all records where the `event_type` starts with 'card_'.

## Symbols

### SQL UPDATE Statement
#### Description
This SQL statement modifies existing records in the `events` table, specifically targeting the `event_type` column.

#### Internal Logic
1. The `UPDATE` clause specifies that we're modifying the `events` table.
2. The `SET` clause uses the `REPLACE` function to change the `event_type` column's value.
3. The `REPLACE` function replaces all occurrences of 'card_' with 'chunk_' in the `event_type` column.
4. The `WHERE` clause filters the rows to be updated, selecting only those where `event_type` starts with 'card_'.

## Side Effects
This migration will modify the `events` table, changing the `event_type` values for potentially multiple rows. It's important to note that this change is not reversible without additional data or a complementary down migration script.

## Performance Considerations
The performance of this update operation depends on the number of rows in the `events` table and how many of them have an `event_type` starting with 'card_'. For large tables, this operation could potentially be slow and might lock the table during execution.

## Dependencies
This migration script relies on standard SQL syntax and functions, specifically:
| Dependency | Purpose |
|:-----------|:--------|
| REPLACE function | Used to substitute 'card_' with 'chunk_' in the `event_type` column |
| LIKE operator | Used in the WHERE clause to filter rows where `event_type` starts with 'card_' |

## Error Handling
This script does not include explicit error handling. Any SQL errors that occur during execution will need to be handled by the migration system running this script.

## TODOs
There are no explicit TODOs in this migration script. However, it's worth considering creating a corresponding down migration script to reverse this change if needed.