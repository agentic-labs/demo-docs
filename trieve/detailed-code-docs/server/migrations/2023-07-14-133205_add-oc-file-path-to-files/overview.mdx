---
title: "Overview"
---

## High-level description
This directory contains SQL migration files for adding a new column `oc_file_path` to the `files` table in the database. The migration is dated 2023-07-14 and is identified by the timestamp 133205. The directory includes two SQL files: `up.sql` for applying the change and `down.sql` for reverting it.

## What does it do?
This migration modifies the database structure by adding a new column to store file paths for OpenCore (OC) files. Here's a simple explanation of what happens:

1. When the migration is applied (using `up.sql`):
   - A new column called `oc_file_path` is added to the `files` table.
   - This column can store text data and is allowed to be empty (null).
   - Existing rows in the table will have this new column, but it will be empty for them.

2. If the migration needs to be undone (using `down.sql`):
   - The `oc_file_path` column is removed from the `files` table.
   - Any data stored in this column will be permanently deleted.

This change allows the application to store and manage OpenCore file paths alongside other file information in the database.

## Key Files

1. `up.sql`:
   - This file contains the SQL command to add the new `oc_file_path` column to the `files` table.
   - It uses the `ALTER TABLE` command to modify the existing table structure.
   - The new column is defined as `TEXT` type and allows `NULL` values.

   ```sql
   ALTER TABLE files
   ADD COLUMN oc_file_path TEXT NULL;
   ```

2. `down.sql`:
   - This file contains the SQL command to remove the `oc_file_path` column from the `files` table.
   - It also uses the `ALTER TABLE` command, but with the `DROP COLUMN` clause.

   ```sql
   ALTER TABLE files
   DROP COLUMN oc_file_path;
   ```

## Configuration
This migration doesn't require any specific configuration. However, it's important to note that the migration system likely uses the directory name (2023-07-14-133205_add-oc-file-path-to-files) to determine the order and purpose of this migration.

## Side Effects
Applying this migration will have the following effects:
- The `files` table schema will be modified.
- Existing applications or queries that interact with the `files` table may need to be updated to account for the new column.
- Rolling back this migration will permanently delete any data stored in the `oc_file_path` column.

## Performance Considerations
- Adding or removing a column can be a potentially time-consuming operation, especially if the `files` table contains a large number of rows.
- The operation might require a table lock, which could temporarily impact the availability of the `files` table for other operations.
- The exact performance impact will depend on the specific database system being used and the size of the `files` table.

It's recommended to test this migration on a copy of the production database to assess its impact before applying it to the live system.