---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made in the corresponding `up.sql` file. It undoes modifications to the `events` table, removing new columns, adding back old columns, and renaming the table back to its original name.

## Symbols

### SQL Migration Script
#### Description
This script performs a series of ALTER TABLE operations to revert changes made to the `events` table, effectively restoring it to its previous state as `file_upload_completed_notifications`.

#### Internal Logic
1. Drops the `event_type` column from the `events` table.
2. Drops the `event_data` column from the `events` table.
3. Adds a `user_read` column of type BOOLEAN with a NOT NULL constraint and a default value of false.
4. Adds a `collection_id` column of type UUID.
5. Renames the `events` table back to `file_upload_completed_notifications`.

## Side Effects
- The `events` table structure is modified.
- The table name is changed from `events` to `file_upload_completed_notifications`.
- Data in the dropped columns (`event_type` and `event_data`) will be lost.
- New columns (`user_read` and `collection_id`) are added, potentially affecting existing queries or application logic.

## Performance Considerations
- Depending on the size of the table and the database system, these ALTER TABLE operations might lock the table and could potentially impact performance during execution.
- Adding columns with a NOT NULL constraint (like `user_read`) might require a full table scan to set the default value for existing rows.

## Error Handling
This script does not include explicit error handling. It's assumed that the database system will handle errors (e.g., if a column doesn't exist when trying to drop it).

## TODOs
The comment at the top of the file, `-- This file should undo anything in `up.sql``, serves as a reminder of the purpose of this migration script and implies that there should be a corresponding `up.sql` file with the reverse operations.