---
title: "down.sql"
---

## High-level description
This SQL script defines a database migration that reverts changes made in a corresponding `up.sql` migration. It specifically targets a table related to file upload completed notifications, reversing column additions, deletions, and a table rename.

## Symbols
### `down.sql`
#### Description
This SQL script undoes the changes introduced by the `up.sql` migration, effectively reverting the database schema to its previous state.

#### Internal Logic
1. **`ALTER TABLE events DROP COLUMN event_type;`**: Removes the `event_type` column from the `events` table.
2. **`ALTER TABLE events DROP COLUMN event_data;`**: Removes the `event_data` column from the `events` table.
3. **`ALTER TABLE events ADD COLUMN user_read BOOLEAN NOT NULL DEFAULT false;`**: Adds the `user_read` column to the `events` table, setting it as a non-nullable boolean with a default value of `false`.
4. **`ALTER TABLE events ADD COLUMN collection_id UUID;`**: Adds the `collection_id` column to the `events` table, using the `UUID` data type.
5. **`ALTER TABLE events RENAME TO file_upload_completed_notifications;`**: Renames the `events` table back to `file_upload_completed_notifications`.

These steps suggest that the `up.sql` migration likely involved removing the `user_read` and `collection_id` columns, adding `event_type` and `event_data` columns, and renaming the `file_upload_completed_notifications` table to `events`. This `down.sql` script reverses those actions.
