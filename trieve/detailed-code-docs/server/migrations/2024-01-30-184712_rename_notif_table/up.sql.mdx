---
title: "up.sql"
---

## High-level description
This SQL script renames the `file_upload_completed_notifications` table to `events` and modifies its structure to store different types of events. It removes columns specific to file upload notifications and adds columns for event type and data.

## Symbols
### `up.sql`
#### Description
This SQL script defines the migration steps to rename the `file_upload_completed_notifications` table to `events` and modify its schema. 

#### Internal Logic
1. **Rename Table:** `ALTER TABLE file_upload_completed_notifications RENAME TO events;` renames the existing `file_upload_completed_notifications` table to `events`.
2. **Drop Columns:**
    - `ALTER TABLE events DROP COLUMN user_read;` removes the `user_read` column.
    - `ALTER TABLE events DROP COLUMN group_uuid;` removes the `group_uuid` column.
3. **Add Columns:**
    - `ALTER TABLE events ADD COLUMN event_type VARCHAR(255) NOT NULL;` adds a new column `event_type` to store the type of event, which is a string with a maximum length of 255 characters and cannot be NULL.
    - `ALTER TABLE events ADD COLUMN event_data JSONB NOT NULL;` adds a new column `event_data` to store event-specific data in JSONB format, which also cannot be NULL. 
