---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for modifying the `users` table in a database. The migration is dated 2024-04-02 and is designed to remove three columns from the `users` table: `username`, `visible_email`, and `website`. The directory includes both "up" and "down" migration scripts to allow for applying and reverting these changes.

## What does it do?
The migration scripts in this directory perform the following actions:

1. The "up" migration (`up.sql`):
   - Removes the `username` column from the `users` table
   - Removes the `visible_email` column from the `users` table
   - Removes the `website` column from the `users` table

2. The "down" migration (`down.sql`):
   - Adds back the `username` column to the `users` table as a TEXT field
   - Adds back the `visible_email` column to the `users` table as a BOOLEAN field with a NOT NULL constraint and a default value of FALSE
   - Adds back the `website` column to the `users` table as a TEXT field

These migrations allow the database schema to be updated to remove certain user-related fields, possibly for privacy or structural reasons, while also providing a way to revert these changes if needed.

## Key Files

1. `up.sql`: This file contains the SQL statements to apply the migration, removing the specified columns from the `users` table.

   ```sql
   ALTER TABLE users DROP COLUMN username;
   ALTER TABLE users DROP COLUMN visible_email;
   ALTER TABLE users DROP COLUMN website;
   ```

2. `down.sql`: This file contains the SQL statements to revert the migration, adding back the removed columns to the `users` table.

   ```sql
   ALTER TABLE users ADD COLUMN username TEXT;
   ALTER TABLE users ADD COLUMN visible_email BOOLEAN NOT NULL DEFAULT FALSE;
   ALTER TABLE users ADD COLUMN website TEXT;
   ```

These files work together to provide a reversible change to the database schema. The `up.sql` script is typically run when updating the database to a newer version, while the `down.sql` script can be used to roll back the changes if necessary.

## Configuration
The migration is identified by its timestamp in the directory name: `2024-04-02-020426`. This timestamp is likely used by a database migration tool to track which migrations have been applied and in what order.

No additional configuration files or environment variables are present in this directory. The migration relies solely on the SQL statements contained in the `up.sql` and `down.sql` files.