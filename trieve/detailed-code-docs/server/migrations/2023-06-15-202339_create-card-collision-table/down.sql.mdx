---
title: "down.sql"
---

## High-level description
This SQL migration file is designed to undo the changes made in the corresponding `up.sql` file. It drops the `card_collisions` table and removes a unique constraint from the `card_metadata` table.

## Symbols

### DROP TABLE card_collisions
#### Description
This SQL command removes the `card_collisions` table from the database schema.

#### Internal Logic
The `DROP TABLE` command completely removes the specified table and all its data from the database. This operation is irreversible without a backup.

### ALTER TABLE card_metadata DROP CONSTRAINT uq_qdrant_point_id
#### Description
This SQL command removes a unique constraint named `uq_qdrant_point_id` from the `card_metadata` table.

#### Internal Logic
The `ALTER TABLE` command is used to modify the structure of an existing table. The `DROP CONSTRAINT` clause removes the specified constraint from the table, in this case, a unique constraint on the `qdrant_point_id` column (assumed based on the constraint name).

## Side Effects
- Permanent deletion of the `card_collisions` table and all its data.
- Removal of the unique constraint on the `qdrant_point_id` column in the `card_metadata` table, potentially allowing duplicate values in this column.

## Error Handling
This script does not include explicit error handling. If the tables or constraints do not exist when this script is run, it may result in SQL errors.

## TODOs
The comment at the top of the file suggests that this script should undo everything done in the corresponding `up.sql` file. It's important to ensure that this down migration exactly reverses all changes made in the up migration to maintain database consistency.