---
title: "up.sql"
---

## High-level description
This SQL script creates two indexes on the `user_api_key` table: one for the `api_key_hash` column and another for the `blake3_hash` column. These indexes are intended to improve the performance of queries that search for API keys using these hash values.

## Symbols
### `CREATE INDEX IF NOT EXISTS user_api_key_api_key_hash_index ON user_api_key (api_key_hash);`
#### Description
This statement creates an index named `user_api_key_api_key_hash_index` on the `api_key_hash` column of the `user_api_key` table if it doesn't already exist. This index will speed up lookups based on the `api_key_hash` value.

#### Internal Logic
- `CREATE INDEX IF NOT EXISTS`: This clause ensures that the index is created only if an index with the same name doesn't already exist.
- `user_api_key_api_key_hash_index`: This is the name assigned to the new index.
- `ON user_api_key`: This specifies the table on which the index is created.
- `(api_key_hash)`: This defines the column on which the index is created.

### `CREATE INDEX IF NOT EXISTS user_api_key_blake3_hash_index ON user_api_key (blake3_hash);`
#### Description
This statement is similar to the previous one, but it creates an index named `user_api_key_blake3_hash_index` on the `blake3_hash` column of the `user_api_key` table. This index will speed up lookups based on the `blake3_hash` value.

#### Internal Logic
- `CREATE INDEX IF NOT EXISTS`: This clause ensures that the index is created only if an index with the same name doesn't already exist.
- `user_api_key_blake3_hash_index`: This is the name assigned to the new index.
- `ON user_api_key`: This specifies the table on which the index is created.
- `(blake3_hash)`: This defines the column on which the index is created.
