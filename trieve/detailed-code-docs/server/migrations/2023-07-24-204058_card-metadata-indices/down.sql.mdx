---
title: "down.sql"
---

## High-level description
This SQL script is designed to undo the changes made by the corresponding `up.sql` migration. It drops several indices that were previously created on the `card_metadata` and `card_collisions` tables in the database.

## Symbols

### DROP INDEX statements
#### Description
Each `DROP INDEX` statement removes a specific index from the database. These indices were likely created to improve query performance on certain columns of the `card_metadata` and `card_collisions` tables.

#### Internal Logic
The script drops the following indices:
1. `idx_card_metadata_private`
2. `idx_card_metadata_oc_file_path`
3. `idx_card_metadata_link`
4. `idx_card_metadata_created_at`
5. `idx_card_metadata_updated_at`
6. `idx_card_collisions_collision_qdrant_id`
7. `idx_card_metadata_id`

Each index is dropped using the standard SQL syntax `DROP INDEX index_name;`.

## Side Effects
Dropping these indices will likely result in slower query performance for operations that previously utilized these indices. However, it will also reduce the storage space required for the database and potentially speed up write operations on the affected tables.

## Performance Considerations
Removing indices can have significant performance implications:
1. Queries that relied on these indices for faster data retrieval may become slower.
2. Write operations (INSERT, UPDATE, DELETE) on the affected tables may become faster, as the database no longer needs to update the index structures.
3. The overall database size may decrease due to the removal of index structures.

It's important to note that this migration should only be run if you're certain that these indices are no longer needed or if you're reverting a previous migration that added these indices.