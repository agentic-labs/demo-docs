---
title: "Overview"
---

## High-level description
This directory contains SQL migration files for creating and dropping indices on the `card_metadata` and `card_collisions` tables in the database. The migration is dated 2023-07-24, indicating when it was created or intended to be applied.

## What does it do?
The migration files in this directory add and remove database indices, which are special lookup tables that the database search engine can use to speed up data retrieval. Specifically:

1. The `up.sql` file creates seven new indices on various columns of the `card_metadata` and `card_collisions` tables. These indices are designed to improve the performance of queries that frequently search, filter, or sort by these columns.

2. The `down.sql` file removes these same indices, effectively undoing the changes made by the `up.sql` file. This could be used to revert the database to its previous state if needed.

These changes can significantly impact the performance of database operations. Adding indices typically speeds up read operations (like SELECT queries) at the cost of slowing down write operations (like INSERT, UPDATE, or DELETE queries) and increasing storage usage. Removing indices reverses these effects.

## Key Files

1. `up.sql`: This file contains the SQL commands to create the new indices. It's the "forward" migration that adds the new database features.

2. `down.sql`: This file contains the SQL commands to drop the indices created by `up.sql`. It's the "rollback" migration that undoes the changes if needed.

Both files are crucial for managing the database schema and ensuring that changes can be applied or reverted consistently across different environments.

## Configuration
While there are no explicit configuration files in this directory, the naming of the migration folder (`2023-07-24-204058_card-metadata-indices`) follows a specific format:

- Date: 2023-07-24
- Time: 20:40:58
- Description: card-metadata-indices

This naming convention is likely used by a database migration tool to determine the order in which migrations should be applied and to provide a human-readable description of what each migration does.

The indices created in this migration are:

1. `idx_card_metadata_private` on `card_metadata.private`
2. `idx_card_metadata_oc_file_path` on `card_metadata.oc_file_path`
3. `idx_card_metadata_link` on `card_metadata.link`
4. `idx_card_metadata_created_at` on `card_metadata.created_at`
5. `idx_card_metadata_updated_at` on `card_metadata.updated_at`
6. `idx_card_collisions_collision_qdrant_id` on `card_collisions.collision_qdrant_id`
7. `idx_card_metadata_id` on `card_metadata.id`

These index names follow a convention of `idx_&lt;table_name&gt;_&lt;column_name&gt;`, which makes their purpose clear and helps maintain consistency in the database schema.