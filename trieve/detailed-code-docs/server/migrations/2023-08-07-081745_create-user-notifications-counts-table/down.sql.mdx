---
title: "down.sql"
---

## High-level description
This SQL script handles the database migration rollback for removing the "user notification counts" feature. It undoes the changes introduced by the corresponding `up.sql` script.

## Code Structure
The script performs actions in reverse order compared to the `up.sql` script, ensuring proper dependency resolution during rollback. It first drops triggers, then the helper function, and finally the table itself.

## Symbols

### `DROP TRIGGER IF EXISTS update_verification_notification_count ON verification_notifications`
#### Description
This statement attempts to drop the trigger named `update_verification_notification_count` associated with the `verification_notifications` table. The `IF EXISTS` clause ensures that the operation doesn't fail if the trigger doesn't exist.

#### Internal Logic
- Checks if the trigger `update_verification_notification_count` exists on the `verification_notifications` table.
- If it exists, the trigger is dropped.
- If it doesn't exist, the statement does nothing.

### `DROP TRIGGER IF EXISTS update_file_upload_notification_count ON file_upload_completed_notifications`
#### Description
This statement attempts to drop the trigger named `update_file_upload_notification_count` associated with the `file_upload_completed_notifications` table. The `IF EXISTS` clause ensures that the operation doesn't fail if the trigger doesn't exist.

#### Internal Logic
- Checks if the trigger `update_file_upload_notification_count` exists on the `file_upload_completed_notifications` table.
- If it exists, the trigger is dropped.
- If it doesn't exist, the statement does nothing.

### `DROP FUNCTION IF EXISTS update_notification_count()`
#### Description
This statement attempts to drop the function named `update_notification_count()`. The `IF EXISTS` clause ensures that the operation doesn't fail if the function doesn't exist.

#### Internal Logic
- Checks if the function `update_notification_count()` exists.
- If it exists, the function is dropped.
- If it doesn't exist, the statement does nothing.

### `DROP TABLE IF EXISTS user_notification_counts`
#### Description
This statement attempts to drop the table named `user_notification_counts`. The `IF EXISTS` clause ensures that the operation doesn't fail if the table doesn't exist.

#### Internal Logic
- Checks if the table `user_notification_counts` exists.
- If it exists, the table is dropped.
- If it doesn't exist, the statement does nothing.
