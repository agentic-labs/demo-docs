---
title: "down.sql"
---

## High-level description
This SQL script is designed to undo the changes made by the corresponding `up.sql` migration. It removes triggers, a function, and a table related to user notification counts in a database system.

## Symbols

### DROP TRIGGER statements
#### Description
These statements remove two triggers from the database:
1. `update_verification_notification_count` on the `verification_notifications` table
2. `update_file_upload_notification_count` on the `file_upload_completed_notifications` table

#### Internal Logic
The `IF EXISTS` clause is used to prevent errors if the triggers don't exist when trying to drop them.

### DROP FUNCTION statement
#### Description
This statement removes the `update_notification_count()` function from the database.

#### Internal Logic
The `IF EXISTS` clause is used to prevent errors if the function doesn't exist when trying to drop it.

### DROP TABLE statement
#### Description
This statement removes the `user_notification_counts` table from the database.

#### Internal Logic
The `IF EXISTS` clause is used to prevent errors if the table doesn't exist when trying to drop it.

## Dependencies
This script depends on the existence of the following database objects:
| Dependency | Purpose |
|:-----------|:--------|
| `verification_notifications` table | Referenced in trigger drop statement |
| `file_upload_completed_notifications` table | Referenced in trigger drop statement |
| `update_notification_count()` function | Referenced in function drop statement |
| `user_notification_counts` table | Referenced in table drop statement |

## Error Handling
The script uses `IF EXISTS` clauses in all drop statements to prevent errors if the objects being dropped do not exist. This makes the migration more robust and allows it to be run multiple times without failing.