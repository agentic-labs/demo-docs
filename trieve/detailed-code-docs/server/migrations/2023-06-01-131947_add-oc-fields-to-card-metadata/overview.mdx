---
title: "Overview"
---

## High-level description
This directory contains SQL migration files for adding a new field, `oc_file_path`, to the `card_metadata` table in the database. The migration is dated June 1, 2023, and is specifically designed to add and remove a column related to Original Content (OC) file paths.

## What does it do?
This migration adds a new capability to the card metadata system. It introduces a new field called `oc_file_path` to store the file path of original content associated with a card. This allows the system to link cards with specific files, potentially enabling features like displaying or managing original content directly from the card interface.

The migration is reversible, meaning it can be applied (using the "up" script) to add the new field, or rolled back (using the "down" script) to remove the field if needed. This flexibility is crucial for database management and version control in software development.

## Key Files

1. `up.sql`: This file contains the SQL commands to add the new `oc_file_path` column to the `card_metadata` table. Here's what it does:

   ```sql
   ALTER TABLE card_metadata
   ADD COLUMN oc_file_path TEXT NULL;
   ```

   This command adds a new column named `oc_file_path` to the `card_metadata` table. The column is of type TEXT and allows NULL values, meaning it's optional and can be left empty.

2. `down.sql`: This file contains the SQL commands to reverse the changes made by `up.sql`. Here's its content:

   ```sql
   ALTER TABLE card_metadata
   DROP COLUMN oc_file_path;
   ```

   This command removes the `oc_file_path` column from the `card_metadata` table, effectively undoing the changes made by the "up" migration.

## Dependencies
This migration depends on the existence of the `card_metadata` table in the database. It doesn't introduce any new external dependencies or libraries.

## Configuration
There are no specific configuration files or environment variables associated with this migration. The migration is executed as part of the database migration process, which is typically managed by a database migration tool or framework used in the project.

## Notes
1. The migration is timestamped (2023-06-01-131947), which is a common practice in database migrations to ensure they are applied in the correct order.
2. The `oc_file_path` column is nullable, indicating that not all cards are required to have an associated original content file.
3. The use of TEXT type for the file path allows for storing long file paths if necessary.
4. This migration demonstrates good database management practices by providing both "up" and "down" scripts, allowing for easy application and rollback of changes.
5. Care should be taken when running the "down" migration in a production environment, as it will permanently remove the `oc_file_path` data from the `card_metadata` table.