---
title: "up.sql"
---

## High-level description
This SQL script creates a new table named `files` in the database. This table is designed to store metadata about files uploaded by users, including their association with a user, file name, MIME type, privacy setting, and timestamps.

## Symbols
### `CREATE TABLE files`
#### Description
This SQL statement creates a new table named `files` with specific columns to store file metadata.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This statement creates a table as a side effect.

#### Internal Logic
The statement defines the following columns for the `files` table:

- `id`: A universally unique identifier (UUID) serving as the primary key for each file entry.
- `user_id`: A UUID referencing the `id` column of the `users` table, establishing a foreign key relationship to indicate file ownership.
- `file_name`: A text field storing the original name of the uploaded file.
- `mime_type`: A text field storing the MIME type of the file (e.g., 'image/jpeg', 'text/plain'), indicating its format.
- `private`: A boolean flag indicating whether the file is private (accessible only by the owner) or public.
- `created_at`: A timestamp field automatically populated with the current time when a new file record is created.
- `updated_at`: A timestamp field automatically updated with the current time whenever the file record is modified.

## References
- This script references the `users` table through the `user_id` foreign key constraint. This implies the existence of a `users` table in the database schema.

## Side Effects
- **Creates a new table named `files`** in the database schema.
- **Enforces data integrity** through the primary key constraint on `id` and the foreign key constraint on `user_id`.
- **Sets default values** for `created_at` and `updated_at` columns using `NOW()`. 
