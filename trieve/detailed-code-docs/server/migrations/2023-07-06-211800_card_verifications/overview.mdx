---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for creating and dropping a `card_verification` table in a database. The migration is dated 2023-07-06, and it's designed to manage the structure for storing card verification data, particularly focusing on similarity scores for cards.

## What does it do?
These migration scripts allow the database to be updated or rolled back as needed. The "up" migration creates a new table called `card_verification` to store information about card verifications, including a unique identifier, a reference to a card's metadata, and a similarity score. This table is likely used in a process that checks the similarity or authenticity of cards, possibly involving image comparison.

The "down" migration provides the ability to remove this table, which is useful for development purposes or if the feature needs to be rolled back.

## Key Files

1. `up.sql`: This file contains the SQL script to create the `card_verification` table. It defines the structure of the table, including its columns and relationships to other tables.

2. `down.sql`: This file contains the SQL script to drop the `card_verification` table, effectively reversing the changes made by the up migration.

## Configuration
The migration scripts use SQL statements that are likely compatible with PostgreSQL, given the use of UUID data types. The scripts don't require any additional configuration, but they do assume the existence of a `card_metadata` table in the database.

Here's a breakdown of the `card_verification` table structure created by the `up.sql` script:

```sql
CREATE TABLE card_verification (
    id UUID PRIMARY KEY,
    card_id UUID REFERENCES card_metadata(id),
    similarity_score BIGINT NOT NULL
);
```

- `id`: A UUID that serves as the primary key for each verification record.
- `card_id`: A UUID that references the `id` column in the `card_metadata` table, establishing a relationship between a verification and a specific card.
- `similarity_score`: A large integer (BIGINT) that must have a value (NOT NULL), likely representing the result of a similarity check.

The `down.sql` script simply drops this table:

```sql
DROP TABLE IF EXISTS card_verification;
```

This structure suggests that the application is dealing with card verifications, possibly as part of a security or authenticity check system. The similarity score could be used to determine how closely a card matches a reference image or data, which might be useful in detecting counterfeit or altered cards.