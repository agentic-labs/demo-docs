---
title: "up.sql"
---

## High-level description
This SQL script creates two indexes in the database: one on the `organization_id` column of the `datasets` table and another on the `plan_id` column of the `stripe_subscriptions` table. These indexes are created only if they don't already exist.

## Symbols
### `CREATE INDEX IF NOT EXISTS datasets_organization_id_index ON datasets (organization_id);`
#### Description
This statement creates an index named `datasets_organization_id_index` on the `organization_id` column of the `datasets` table if an index with the same name doesn't already exist. This index will speed up queries that filter or join on the `organization_id` column.

#### Internal Logic
- `CREATE INDEX IF NOT EXISTS`: This clause ensures that the index is created only if an index with the same name doesn't already exist.
- `datasets_organization_id_index`: This is the name of the index being created.
- `ON datasets`: This specifies the table on which the index is created.
- `(organization_id)`: This specifies the column on which the index is created.

### `CREATE INDEX IF NOT EXISTS stripe_subscriptions_plan_id_index ON stripe_subscriptions (plan_id);`
#### Description
This statement creates an index named `stripe_subscriptions_plan_id_index` on the `plan_id` column of the `stripe_subscriptions` table if an index with the same name doesn't already exist. This index will speed up queries that filter or join on the `plan_id` column.

#### Internal Logic
- `CREATE INDEX IF NOT EXISTS`: This clause ensures that the index is created only if an index with the same name doesn't already exist.
- `stripe_subscriptions_plan_id_index`: This is the name of the index being created.
- `ON stripe_subscriptions`: This specifies the table on which the index is created.
- `(plan_id)`: This specifies the column on which the index is created.
