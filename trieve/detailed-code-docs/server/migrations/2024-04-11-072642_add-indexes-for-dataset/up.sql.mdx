---
title: "up.sql"
---

## High-level description
This SQL script creates two indexes in the database: one on the `organization_id` column of the `datasets` table and another on the `plan_id` column of the `stripe_subscriptions` table. These indexes are created only if they don't already exist.

## Symbols
### `CREATE INDEX IF NOT EXISTS datasets_organization_id_index ON datasets (organization_id);`
#### Description
This statement creates an index named `datasets_organization_id_index` on the `organization_id` column of the `datasets` table if an index with the same name doesn't already exist. This index can speed up queries that filter or join on the `organization_id` column.

#### Internal Logic
- `CREATE INDEX IF NOT EXISTS`: This clause ensures that the index is created only if an index with the same name doesn't already exist, preventing errors if the script is run multiple times.
- `datasets_organization_id_index`: This is the name assigned to the new index.
- `ON datasets`: This specifies the table on which the index will be created.
- `(organization_id)`: This defines the column on which the index will be created.

### `CREATE INDEX IF NOT EXISTS stripe_subscriptions_plan_id_index ON stripe_subscriptions (plan_id);`
#### Description
This statement is similar to the previous one but creates an index named `stripe_subscriptions_plan_id_index` on the `plan_id` column of the `stripe_subscriptions` table. This index can speed up queries that filter or join on the `plan_id` column.

#### Internal Logic
- `CREATE INDEX IF NOT EXISTS`: This clause ensures that the index is created only if an index with the same name doesn't already exist, preventing errors if the script is run multiple times.
- `stripe_subscriptions_plan_id_index`: This is the name assigned to the new index.
- `ON stripe_subscriptions`: This specifies the table on which the index will be created.
- `(plan_id)`: This defines the column on which the index will be created.

## Performance Considerations
Creating indexes can significantly improve query performance, especially for large tables. However, it's important to note that indexes also consume storage space and can slightly impact the performance of data insertion and updates. 
