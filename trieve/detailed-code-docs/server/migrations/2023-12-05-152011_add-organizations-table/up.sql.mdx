---
title: "up.sql"
---

## High-level description
This SQL migration script creates a new table called `organizations` and adds an index to it. The table is designed to store information about organizations, including a unique identifier, name, configuration, and timestamps for creation and updates.

## Symbols

### CREATE TABLE organizations
#### Description
This SQL command creates a new table named `organizations` with five columns to store organization data.

#### Internal Logic
The table is created with the following columns:
1. `id`: A UUID (Universally Unique Identifier) that serves as the primary key. It's automatically generated using the `gen_random_uuid()` function.
2. `name`: A unique text field to store the organization's name.
3. `configuration`: A JSONB field to store configuration data for the organization.
4. `created_at`: A timestamp field that automatically sets to the current time when a record is created.
5. `updated_at`: A timestamp field that automatically sets to the current time when a record is created or updated.

### CREATE INDEX idx_organizations_name
#### Description
This SQL command creates an index on the `name` column of the `organizations` table to improve query performance when searching or filtering by organization name.

## Performance Considerations
The addition of an index on the `name` column will improve the performance of queries that search or filter organizations by name. However, it may slightly impact the performance of insert and update operations on the table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| gen_random_uuid() | PostgreSQL function used to generate a random UUID for the `id` column |

## Notes
It's worth noting that a related migration file `2024-01-11-050932_drop-configuration-col-from-organization/up.sql` later drops the `configuration` column from the `organizations` table. This suggests that the structure of the `organizations` table has evolved over time, and the `configuration` column is no longer needed or has been moved elsewhere.