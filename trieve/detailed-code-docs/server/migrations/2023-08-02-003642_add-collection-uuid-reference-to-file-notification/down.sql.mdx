---
title: "down.sql"
---

## High-level description
This SQL script is designed to undo the changes made in the corresponding `up.sql` migration. It removes a foreign key constraint from the `file_upload_completed_notifications` table, effectively reverting it to its original state without the reference to the `collections` table.

## Symbols

### SQL Script
#### Description
The script performs a series of steps to remove a foreign key constraint from the `file_upload_completed_notifications` table without losing any data.

#### Internal Logic
1. Creates a temporary table `file_upload_completed_notifications_temp` with the original structure (without foreign key constraint).
2. Copies all data from the existing `file_upload_completed_notifications` table to the temporary table.
3. Drops the original `file_upload_completed_notifications` table.
4. Recreates the `file_upload_completed_notifications` table with the original structure (without foreign key constraint).
5. Copies all data back from the temporary table to the newly created table.
6. Drops the temporary table.

## Side Effects
- Removes the foreign key constraint on the `collection_uuid` column in the `file_upload_completed_notifications` table.
- Temporarily creates and then drops a table named `file_upload_completed_notifications_temp`.
- Preserves all existing data in the `file_upload_completed_notifications` table.

## Performance Considerations
This migration involves copying data twice and creating/dropping tables, which could be resource-intensive for large datasets. It's advisable to run this migration during low-traffic periods if the table contains a significant amount of data.

## TODOs
The comment at the top of the file suggests that this script should undo anything in `up.sql`. It's important to ensure that this down migration exactly reverses the changes made in the corresponding up migration.