---
title: "up.sql"
---

## High-level description
This SQL script modifies the `invitations` table in a database. It adds a required `organization_id` column with a foreign key constraint referencing the `organizations` table and removes the `referral_tokens` column. 

## Symbols

### `ALTER TABLE invitations ADD COLUMN organization_id UUID NOT NULL;`
#### Description
This statement adds a new column named `organization_id` to the `invitations` table. 

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
- `ALTER TABLE invitations`: Specifies that the `invitations` table is being modified.
- `ADD COLUMN`: Indicates that a new column is being added.
- `organization_id`: The name of the new column.
- `UUID`: The data type of the new column, which is a universally unique identifier.
- `NOT NULL`:  A constraint that prevents the `organization_id` column from containing null values.

### `ALTER TABLE invitations ADD CONSTRAINT invitations_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES organizations(id);`
#### Description
This statement adds a foreign key constraint to the `invitations` table.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
- `ALTER TABLE invitations`: Specifies that the `invitations` table is being modified.
- `ADD CONSTRAINT invitations_organization_id_fkey`: Adds a constraint named `invitations_organization_id_fkey`.
- `FOREIGN KEY (organization_id)`: Defines `organization_id` as the foreign key.
- `REFERENCES organizations(id)`: Specifies that the foreign key references the `id` column in the `organizations` table.

### `ALTER TABLE invitations DROP COLUMN referral_tokens;`
#### Description
This statement removes the `referral_tokens` column from the `invitations` table.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
- `ALTER TABLE invitations`: Specifies that the `invitations` table is being modified.
- `DROP COLUMN`: Indicates that a column is being removed.
- `referral_tokens`: The name of the column to be removed.
