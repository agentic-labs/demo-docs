---
title: "up.sql"
---

## High-level description
This SQL script creates a new table named `collections_from_files` in the database. This table is designed to store a many-to-many relationship between `card_collection` and `files` tables, tracking which files belong to which card collections. 

## Code Structure
The code consists of a single SQL statement that defines the structure of the `collections_from_files` table. It specifies columns for IDs, foreign keys to relate to `card_collection` and `files` tables, and timestamps for tracking creation and update times.

## Symbols
### `CREATE TABLE collections_from_files`
#### Description
This SQL statement creates a new table named `collections_from_files`.

#### Internal Logic
The statement defines the following columns for the table:
- `id`: A UUID serving as the primary key for the table.
- `collection_id`: A UUID referencing the `id` column of the `card_collection` table. This acts as a foreign key and enforces a relationship where each entry in `collections_from_files` must correspond to an existing `card_collection`. The `ON DELETE CASCADE` clause ensures that if a `card_collection` is deleted, associated records in `collections_from_files` are also deleted.
- `file_id`: A UUID referencing the `id` column of the `files` table. This is also a foreign key, establishing a link to a specific file. Similar to `collection_id`, it also uses `ON DELETE CASCADE` for referential integrity.
- `created_at`: A timestamp field automatically populated with the current time when a new record is inserted.
- `updated_at`: A timestamp field automatically updated to the current time whenever the record is modified. 
