---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for renaming various database entities from "card" to "chunk" in a software application. The migration is designed to update the database schema, reflecting a terminology change in the application from "card" to "chunk".

## What does it do?
The migration scripts in this directory perform a comprehensive renaming operation across multiple database tables and columns. They change all references from "card" to "chunk" in table names and column names. This includes renaming tables such as "card_collection" to "chunk_collection", and columns like "card_html" to "chunk_html". 

The purpose of this change is likely to align the database terminology with updated application logic or conceptual changes in the software. For example, what was previously referred to as a "card" in the application is now being called a "chunk".

The directory contains two main scripts:
1. An "up" script that applies the changes, renaming from "card" to "chunk".
2. A "down" script that reverts these changes, renaming back from "chunk" to "card".

This allows for bidirectional migration, enabling developers to apply or revert the changes as needed during development or deployment processes.

## Key Files

### up.sql
This file contains the SQL statements to rename tables and columns from "card" to "chunk". It includes ALTER TABLE statements for renaming tables such as:
- `card_collection` to `chunk_collection`
- `card_metadata` to `chunk_metadata`
- `cut_cards` to `cut_chunks`

It also renames columns within these tables, for example:
- `card_html` to `chunk_html` in the `card_metadata` table
- `card_count` to `chunk_count` in the `stripe_plans` table

### down.sql
This file contains the reverse operations of `up.sql`. It renames tables and columns back from "chunk" to "card". For example:
- `chunk_collection` back to `card_collection`
- `chunk_html` back to `card_html` in the `card_metadata` table

## Dependencies
These migration scripts depend on a SQL database system that supports ALTER TABLE statements for renaming tables and columns. The syntax used is compatible with most modern relational database management systems such as PostgreSQL or MySQL.

## Configuration
The migration scripts do not require explicit configuration. However, they assume a specific database schema exists before execution. The database should contain the tables and columns mentioned in the scripts.

It's important to note that these migrations will affect the database schema and potentially impact application code that interacts with the database. After applying these migrations, developers should update any application code, ORM configurations, or database queries that reference the old table and column names to use the new "chunk" terminology.

When executing these migrations, it's recommended to:
1. Run them during a low-traffic period to minimize disruption, as they may temporarily lock affected tables.
2. Ensure a database backup is in place before applying the changes.
3. Test the application thoroughly after applying the migration to ensure all database interactions are functioning correctly with the new schema.

The presence of both "up" and "down" scripts allows for easy application and reversal of the changes, which is particularly useful in development and testing environments where flexibility is needed.