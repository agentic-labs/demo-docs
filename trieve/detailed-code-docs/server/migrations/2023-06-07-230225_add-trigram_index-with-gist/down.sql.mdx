---
title: "down.sql"
---

## High-level description
This SQL migration file is designed to undo the changes made in the corresponding `up.sql` file. It removes a GiST index and the PostgreSQL trigram extension, effectively reverting the database to its state before these features were added.

## Symbols

### DROP INDEX IF EXISTS idx_gist;
#### Description
This SQL command removes the GiST (Generalized Search Tree) index named `idx_gist` if it exists in the database.

#### Internal Logic
- The `IF EXISTS` clause ensures that the command doesn't throw an error if the index doesn't exist.
- This command is idempotent, meaning it can be run multiple times without causing issues.

### DROP EXTENSION IF EXISTS pg_trgm;
#### Description
This SQL command removes the PostgreSQL trigram extension (`pg_trgm`) if it exists in the database.

#### Internal Logic
- The `IF EXISTS` clause ensures that the command doesn't throw an error if the extension is not installed.
- This command is idempotent, meaning it can be run multiple times without causing issues.
- Removing this extension will disable trigram-based text search functionality in the database.

## Side Effects
- Removing the GiST index may impact query performance for operations that were using this index.
- Dropping the `pg_trgm` extension will remove trigram-based text search capabilities from the database, potentially affecting any queries or functions that rely on this functionality.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| PostgreSQL | The database system on which these SQL commands are executed |

## Error Handling
The `IF EXISTS` clauses in both commands provide basic error handling by preventing errors when the index or extension doesn't exist.

## TODOs
- This file contains a comment suggesting that it should undo anything in `up.sql`. Developers should ensure that this file correctly reverses all operations performed in the corresponding `up.sql` file.