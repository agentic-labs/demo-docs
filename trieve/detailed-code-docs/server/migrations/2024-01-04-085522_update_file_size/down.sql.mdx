---
title: "down.sql"
---

## High-level description
This SQL script performs a database migration rollback, specifically reverting changes related to file size tracking. It drops a trigger and a function that were previously created to manage file storage counts.

## Symbols

### `DROP TRIGGER IF EXISTS update_files_storage_with_update_trigger ON files`
#### Description
This statement attempts to drop a trigger named `update_files_storage_with_update_trigger` associated with the `files` table. The `IF EXISTS` clause ensures that the operation proceeds without errors even if the trigger doesn't exist. This trigger was likely responsible for updating file storage counts in response to data modifications within the `files` table.

#### Internal Logic
- Checks if the trigger `update_files_storage_with_update_trigger` exists on the `files` table.
- If the trigger exists, it is dropped.
- If the trigger doesn't exist, the statement has no effect.

### `DROP FUNCTION IF EXISTS update_files_storage_counts_with_update()`
#### Description
This statement attempts to drop a function named `update_files_storage_counts_with_update()`. The `IF EXISTS` clause ensures that the operation proceeds without errors even if the function doesn't exist. This function likely contained the logic for calculating and updating file storage counts, potentially triggered by the dropped trigger.

#### Internal Logic
- Checks if the function `update_files_storage_counts_with_update()` exists.
- If the function exists, it is dropped.
- If the function doesn't exist, the statement has no effect.
