---
title: "down.sql"
---

## High-level description
This SQL script defines a database migration that reverts a change made in another migration file, likely named `up.sql`. It recreates a table named `stripe_customers` which stores information about Stripe customers.

## Symbols

### `stripe_customers` table
#### Description
This table stores information about Stripe customers. Each row represents a unique customer and includes their Stripe ID, email address, creation timestamp, update timestamp, and a foreign key referencing the `users` table.

#### Columns
| Name | Type | Description |
|:-----|:-----|:------------|
| id | UUID | Unique identifier for the customer record (primary key) |
| stripe_id | TEXT | Unique identifier of the customer in Stripe |
| email | VARCHAR(100) | Email address of the customer (can be NULL, unique) |
| created_at | TIMESTAMP | Timestamp of when the record was created |
| updated_at | TIMESTAMP | Timestamp of when the record was last updated |

#### Constraints
* `PRIMARY KEY (id)`: Ensures each customer record has a unique identifier.
* `UNIQUE (stripe_id)`: Ensures each Stripe customer ID is unique in the table.
* `UNIQUE (email)`: Ensures each email address is associated with only one customer record.
* `FOREIGN KEY (email) REFERENCES users(email)`: Establishes a relationship between the `stripe_customers` and `users` tables, ensuring that the email address used for a Stripe customer exists in the `users` table.
