---
title: "up.sql"
---

## High-level description
This SQL script creates a new table named `card_collection_bookmarks` in the database. The table is designed to store bookmarks for cards within collections, establishing relationships between card collections and card metadata.

## Symbols

### `card_collection_bookmarks` table
#### Description
This table is created to store bookmarks that associate cards with collections. It allows users to bookmark specific cards within a collection, providing a way to mark or save important or relevant cards for quick access or reference.

#### Internal Logic
The table is structured with the following columns:
1. `id`: A unique identifier for each bookmark entry.
2. `collection_id`: References the `card_collection` table, indicating which collection the bookmark belongs to.
3. `card_metadata_id`: References the `card_metadata` table, specifying which card is bookmarked.
4. `created_at`: Timestamp for when the bookmark was created.
5. `updated_at`: Timestamp for when the bookmark was last updated.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| card_collection | The `collection_id` column references the `id` column in the `card_collection` table |
| card_metadata | The `card_metadata_id` column references the `id` column in the `card_metadata` table |

## Error Handling
The script includes foreign key constraints (`REFERENCES` clauses) to ensure data integrity. If an attempt is made to insert a bookmark with non-existent `collection_id` or `card_metadata_id`, the database will raise an error.

## Performance Considerations
1. The `id` column is set as the PRIMARY KEY, which automatically creates an index on this column, optimizing queries that search or join on this field.
2. Consider creating indexes on `collection_id` and `card_metadata_id` columns if there will be frequent queries filtering or joining on these columns.