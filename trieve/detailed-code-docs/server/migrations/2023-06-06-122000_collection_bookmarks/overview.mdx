---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for creating and dropping a table named `card_collection_bookmarks`. The migration is dated 2023-06-06-122000, indicating it was created on June 6, 2023, at 12:20:00. The purpose of this migration is to introduce a new table that associates card collections with specific card metadata, essentially creating a bookmarking system for card collections.

## What does it do?
The migration scripts in this directory perform the following actions:

1. Create a new table: The `up.sql` script creates a table called `card_collection_bookmarks`. This table is designed to store relationships between card collections and individual card metadata. It can be thought of as a way to bookmark or associate specific cards with collections.

2. Define table structure: The new table includes columns for a unique identifier, references to both a card collection and card metadata, and timestamps for creation and update times.

3. Establish relationships: The table sets up foreign key relationships with existing `card_collection` and `card_metadata` tables, ensuring data integrity and consistency across the database.

4. Provide rollback capability: The `down.sql` script allows for the removal of the `card_collection_bookmarks` table, effectively undoing the changes made by the `up.sql` script.

This migration enables the application to track which cards are associated with or bookmarked in specific collections, potentially allowing for features like favoriting cards within a collection or creating custom subsets of cards.

## Key Files

1. `up.sql`
   - Purpose: Creates the `card_collection_bookmarks` table.
   - Content: SQL statement to create the table with its columns and constraints.
   - Key features:
     - Defines a UUID primary key
     - Creates foreign key relationships with `card_collection` and `card_metadata` tables
     - Includes timestamp columns for creation and update times

2. `down.sql`
   - Purpose: Provides a way to revert the changes made by `up.sql`.
   - Content: SQL statement to drop the `card_collection_bookmarks` table.
   - Key feature: Allows for easy rollback of the migration if needed

## Configuration
This migration does not require any specific configuration. However, it's important to note that the migration relies on the existence of two other tables in the database:

1. `card_collection`: Referenced by the `collection_id` foreign key
2. `card_metadata`: Referenced by the `card_metadata_id` foreign key

Ensure that these tables exist in the database before running this migration.

The migration uses the following SQL data types and constraints:

- `UUID`: For unique identifiers
- `TIMESTAMP`: For storing date and time information
- `NOT NULL`: To ensure required fields are always populated
- `DEFAULT NOW()`: To automatically set the current timestamp for creation and update times
- `REFERENCES`: To establish foreign key relationships

When executing this migration, make sure the database user has the necessary permissions to create tables and establish foreign key relationships.