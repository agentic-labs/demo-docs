---
title: "down.sql"
---

## High-level description
This SQL script reverts database schema changes that were presumably introduced in a migration named `2023-09-15-061217_metadata_json_columns`. It specifically targets the `card_metadata` and `files` tables, reversing column renames and drops.

## Code Structure
The script consists of two sets of SQL `ALTER TABLE` statements, one set for each table: `card_metadata` and `files`. Each set reverses the changes made in the corresponding 'up' migration.

## Symbols

### `ALTER TABLE card_metadata RENAME COLUMN tag_set TO oc_file_path;`
#### Description
This statement renames the column `tag_set` in the `card_metadata` table back to its original name, `oc_file_path`. This suggests that in the 'up' migration, `oc_file_path` was renamed to `tag_set`.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema as a side effect.

#### Side Effects
- Renames the `tag_set` column in the `card_metadata` table to `oc_file_path`.

### `ALTER TABLE card_metadata DROP COLUMN metadata;`
#### Description
This statement drops the `metadata` column from the `card_metadata` table. This indicates that the 'up' migration likely added this column.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema as a side effect.

#### Side Effects
- Removes the `metadata` column from the `card_metadata` table.

### `ALTER TABLE files RENAME COLUMN tag_set TO oc_file_path;`
#### Description
This statement renames the column `tag_set` in the `files` table back to its original name, `oc_file_path`. This suggests a similar rename operation was performed in the 'up' migration.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema as a side effect.

#### Side Effects
- Renames the `tag_set` column in the `files` table to `oc_file_path`.
