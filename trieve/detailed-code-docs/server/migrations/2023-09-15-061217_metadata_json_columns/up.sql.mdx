---
title: "up.sql"
---

## High-level description
This SQL script performs a database migration, specifically altering the structure of the `card_metadata` and `files` tables. It renames the `oc_file_path` column to `tag_set` in both tables and adds a new JSONB column named `metadata` to the `card_metadata` table. 

## Symbols

### `ALTER TABLE card_metadata RENAME COLUMN oc_file_path TO tag_set;`
#### Description
This statement renames the `oc_file_path` column in the `card_metadata` table to `tag_set`.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema and doesn't return a value.

#### Internal Logic
This statement uses the `ALTER TABLE ... RENAME COLUMN ... TO ...;` syntax to rename a column within an existing table.

### `ALTER TABLE card_metadata ADD COLUMN metadata JSONB NULL DEFAULT '{}'::JSONB;`
#### Description
This statement adds a new column named `metadata` to the `card_metadata` table. The column's data type is JSONB, allowing it to store JSON (JavaScript Object Notation) data. It's defined as nullable (`NULL`) with a default value of an empty JSON object (`'{}'::JSONB`).

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema and doesn't return a value.

#### Internal Logic
This statement uses the `ALTER TABLE ... ADD COLUMN ...` syntax to add a new column to an existing table. The column definition specifies the data type (`JSONB`), nullability (`NULL`), and a default value (`'{}'::JSONB`).

### `ALTER TABLE files RENAME COLUMN oc_file_path TO tag_set;`
#### Description
This statement renames the `oc_file_path` column in the `files` table to `tag_set`.

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema and doesn't return a value.

#### Internal Logic
This statement uses the `ALTER TABLE ... RENAME COLUMN ... TO ...;` syntax to rename a column within an existing table. 
