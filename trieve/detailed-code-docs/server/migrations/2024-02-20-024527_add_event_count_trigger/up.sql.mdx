---
title: "up.sql"
---

## High-level description
This SQL script defines a trigger named `update_event_count` in the database. This trigger automatically executes the `update_notification_count()` function whenever an insert, delete, or update operation occurs on the `public.events` table. 

## Symbols

### `update_event_count`
#### Description
This trigger ensures that the notification count is updated whenever there are changes in the `public.events` table. It achieves this by calling the `update_notification_count()` function after each row is inserted, deleted, or updated in the `public.events` table.

#### Inputs
This trigger implicitly uses the data modified in the `public.events` table as input for the `update_notification_count()` function.

#### Outputs
This trigger itself doesn't have any direct outputs. However, it indirectly affects the data modified by the `update_notification_count()` function.

#### Internal Logic
1. **Trigger Activation:** The trigger is activated `after` each `insert`, `delete`, or `update` operation on the `public.events` table.
2. **Row-Level Trigger:** The phrase `for each row` indicates that the trigger operates at the row level, meaning it's executed once for every row affected by the triggering event.
3. **Function Execution:** For each affected row, the trigger executes the `update_notification_count()` function.

## References
- **`public.events` table:** The trigger is defined on this table, indicating that it tracks changes related to events.
- **`update_notification_count()` function:** This function is called by the trigger to update the notification count based on the changes in the `public.events` table. The exact logic of this function is defined elsewhere. 
