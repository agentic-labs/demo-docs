---
title: "up.sql"
---

## High-level description
This SQL migration file adds a new column called `size` to the `files` table. The column is designed to store the size of files, likely in bytes, as a non-nullable `bigint` with a default value of 0.

## Symbols

### ALTER TABLE files
#### Description
This SQL command modifies the structure of the existing `files` table by adding a new column.

#### Internal Logic
1. Targets the `files` table for modification.
2. Adds a new column named `size`.
3. Sets the data type of the new column to `bigint`.
4. Specifies that the column cannot contain NULL values (NOT NULL).
5. Sets a default value of 0 for the new column.

## Side Effects
- This migration will modify the schema of the `files` table in the database.
- Any existing rows in the `files` table will have the new `size` column added with the default value of 0.
- Future insertions into the `files` table will require a value for the `size` column (or will use the default value of 0 if not specified).

## Performance Considerations
- Adding a column to an existing table with a default value is generally a fast operation in most database systems, as it doesn't require updating existing rows.
- However, if the `files` table contains a large number of rows, this operation might take some time to complete, depending on the database system and hardware.

## Notes
- This migration is part of a series, as indicated by the timestamp in the filename (2023-06-25-205401).
- There should be a corresponding `down.sql` file to revert this change if needed.
- The `bigint` data type is used, which allows for storing very large file sizes (up to 8 bytes or 64 bits), suitable for files up to approximately 8 exabytes in size.