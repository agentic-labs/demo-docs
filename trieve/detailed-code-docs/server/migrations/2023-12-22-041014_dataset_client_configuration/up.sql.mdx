---
title: "up.sql"
---

## High-level description
This SQL script performs a database migration. It renames the existing `configuration` column to `server_configuration` and adds a new column named `client_configuration` to the `datasets` table. 

## Symbols

### `ALTER TABLE datasets RENAME COLUMN configuration TO server_configuration;`
#### Description
This statement renames the existing column `configuration` in the `datasets` table to `server_configuration`.

#### Internal Logic
This is a standard SQL `ALTER TABLE` statement with the `RENAME COLUMN` clause. It renames an existing column without modifying its data type or constraints.

### `ALTER TABLE datasets ADD COLUMN client_configuration JSONB NOT NULL DEFAULT '{}';`
#### Description
This statement adds a new column named `client_configuration` to the `datasets` table.

#### Inputs
N/A - This statement operates on the table schema and doesn't take explicit inputs.

#### Outputs
N/A - This statement modifies the table schema and doesn't return explicit outputs.

#### Internal Logic
This is another standard SQL `ALTER TABLE` statement, this time with the `ADD COLUMN` clause. It defines a new column with the following properties:

* **`client_configuration`**: The name of the new column.
* **`JSONB`**: The data type of the column, indicating it will store JSON documents in a binary format.
* **`NOT NULL`**: A constraint specifying that this column cannot contain null values.
* **`DEFAULT '{}'`**:  A default value for the column. In this case, it's an empty JSON object (`{}`). This ensures that every new row inserted into the `datasets` table will have an empty JSON object in the `client_configuration` column unless a value is explicitly provided. 
