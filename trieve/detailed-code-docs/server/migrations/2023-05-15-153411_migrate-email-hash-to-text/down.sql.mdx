---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made to the `users` table, specifically altering the data types of the `email` and `hash` columns. It's intended to undo the modifications implemented in the corresponding `up.sql` file.

## Symbols

### SQL Migration Script
#### Description
This script modifies the `users` table by changing the data types of two columns:
1. The `email` column is altered to use the `VARCHAR(100)` data type.
2. The `hash` column is altered to use the `VARCHAR(122)` data type.

#### Internal Logic
The script uses the `ALTER TABLE` SQL command to modify the existing `users` table. It employs two `ALTER COLUMN` clauses to change the data types of the `email` and `hash` columns:

1. `ALTER COLUMN email TYPE VARCHAR(100)`: This changes the data type of the `email` column to `VARCHAR(100)`, which is a variable-length character string with a maximum length of 100 characters.

2. `ALTER COLUMN hash TYPE VARCHAR(122)`: This changes the data type of the `hash` column to `VARCHAR(122)`, which is a variable-length character string with a maximum length of 122 characters.

## Side Effects
Executing this migration script will modify the structure of the `users` table in the database. It will change the data types of the `email` and `hash` columns, which may affect how data is stored and retrieved for these fields.

## Performance Considerations
Changing column data types in a large table can be a time-consuming operation, especially if the table contains a significant amount of data. The execution time of this migration may vary depending on the size of the `users` table and the database system's performance characteristics.

## Error Handling
This script does not include explicit error handling. If an error occurs during the execution (e.g., if the columns don't exist or if there are data type incompatibilities), the database system will likely raise an error and roll back the changes.

## TODOs
The script includes a comment suggesting that it should undo anything in the `up.sql` file. Developers should ensure that this script correctly reverts all changes made in the corresponding `up.sql` migration.