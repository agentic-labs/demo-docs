---
title: "up.sql"
---

## High-level description
This SQL script drops three existing indexes and creates a new one on the `chunk_metadata` table. The new index `idx_chunk_metadata_json` is a GIN index on the `metadata` column using `jsonb_path_ops`.

## Symbols
### `DROP INDEX idx_card_metadata_link`
#### Description
This statement drops the existing index named `idx_card_metadata_link`.

### `DROP INDEX idx_chunk_metadata_created_at`
#### Description
This statement drops the existing index named `idx_chunk_metadata_created_at`.

### `DROP INDEX idx_chunk_metadata_time_stamp`
#### Description
This statement drops the existing index named `idx_chunk_metadata_time_stamp`.

### `CREATE INDEX idx_chunk_metadata_json ON chunk_metadata USING gin (metadata jsonb_path_ops)`
#### Description
This statement creates a new index named `idx_chunk_metadata_json` on the `chunk_metadata` table. 

#### Internal Logic
- It uses the GIN (Generalized Inverted Index) method, which is suitable for indexing composite values like JSONB.
- The index is created on the `metadata` column, which is assumed to be of JSONB data type.
- `jsonb_path_ops` specifies the operator class to use for the index. This class provides operators optimized for searching within JSONB values. 
