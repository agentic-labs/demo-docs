---
title: "down.sql"
---

## High-level description
This SQL script defines a database migration that adds several indexes to the `chunk_metadata` table. These indexes are designed to improve query performance for various fields, including `link`, `metadata`, `tag_set`, `updated_at`, `created_at`, and `time_stamp`.

## Symbols
### `down.sql`
#### Description
This SQL script defines the "down" migration for a database schema change. It reverts the changes made by the corresponding "up" migration. In this case, it adds back indexes to the `chunk_metadata` table that were likely removed in the "up" migration.

#### Internal Logic
The script creates six indexes:

1. **`idx_link_gin`**: A GIN index on the `link` column using the `gin_trgm_ops` operator class for trigram similarity search.
2. **`json_gin`**: A GIN index on the `metadata` column, which likely stores JSON data.
3. **`idx_gist`**: A GIN index on the `tag_set` column using the `gin_trgm_ops` operator class for trigram similarity search.
4. **`idx_card_metadata_updated_at`**: A B-tree index on the `updated_at` column.
5. **`idx_card_metadata_created_at`**: A B-tree index on the `created_at` column.
6. **`card_time_stamp_index`**: A B-tree index on the `time_stamp` column.

These indexes are likely intended to speed up queries that filter or order by these columns. 
