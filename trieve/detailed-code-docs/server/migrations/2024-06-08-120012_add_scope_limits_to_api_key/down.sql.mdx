---
title: "down.sql"
---

## High-level description
This SQL script contains database migration commands to revert changes introduced by a corresponding `up.sql` migration related to adding scope limits to API keys. It specifically removes the columns `dataset_ids` and `organization_ids` from the `user_api_key` table.

## Symbols

### `ALTER TABLE user_api_key DROP COLUMN IF EXISTS dataset_ids;`
#### Description
This SQL statement removes the `dataset_ids` column from the `user_api_key` table if it exists. The `IF EXISTS` clause prevents an error if the column doesn't exist.

#### Internal Logic
1. **Check for Column Existence:** The database checks if a column named `dataset_ids` exists in the `user_api_key` table.
2. **Conditional Drop:** If the column exists, it is dropped from the table. If it doesn't exist, no action is taken.

### `ALTER TABLE user_api_key DROP COLUMN IF EXISTS organization_ids;`
#### Description
This SQL statement is functionally identical to the previous one, but it targets the `organization_ids` column instead of `dataset_ids`. It removes the column from the `user_api_key` table if it exists, and does nothing if it doesn't.
