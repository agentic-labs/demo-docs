---
title: "up.sql"
---

## High-level description
This SQL script adds two new columns, `dataset_ids` and `organization_ids`, to the `user_api_key` table. These columns are intended to store arrays of IDs, likely representing datasets and organizations respectively, that are associated with a particular API key. This suggests a mechanism for scoping API key access to specific resources. 

## Symbols

### `ALTER TABLE user_api_key ADD COLUMN dataset_ids TEXT[] DEFAULT NULL;`
#### Description
This statement adds a new column named `dataset_ids` to the existing `user_api_key` table. 

#### Inputs
N/A - This is a SQL statement, not a function with inputs.

#### Outputs
N/A - This statement modifies the database schema, it doesn't return any output.

#### Internal Logic
- **`ALTER TABLE user_api_key`**: This part specifies that the existing table `user_api_key` is being modified.
- **`ADD COLUMN dataset_ids`**: This instructs the database to add a new column with the name `dataset_ids`.
- **`TEXT[]`**: This defines the data type of the new column as an array of text strings. This suggests that the column will store a list of IDs, potentially representing datasets.
- **`DEFAULT NULL`**: This sets the default value of the `dataset_ids` column to `NULL` for all existing and new rows in the table. This means that if no value is provided for this column when a new row is inserted, it will default to `NULL`.

### `ALTER TABLE user_api_key ADD COLUMN organization_ids TEXT[] DEFAULT NULL;`
#### Description
This statement is structurally identical to the previous one, but it adds a column named `organization_ids` instead of `dataset_ids`. This column is also of type `TEXT[]` and defaults to `NULL`. The purpose is likely to store an array of organization IDs associated with the API key. 
