---
title: "up.sql"
---

## High-level description
This SQL script adds two new columns, `dataset_ids` and `organization_ids`, to the `user_api_key` table. These columns are intended to store arrays of IDs, likely representing datasets and organizations respectively, that are associated with a particular API key, effectively limiting the scope of the API key. 

## Symbols
### `ALTER TABLE user_api_key ADD COLUMN dataset_ids TEXT[] DEFAULT NULL;`
#### Description
This statement adds a new column named `dataset_ids` to the `user_api_key` table. 

#### Inputs
N/A - This is a SQL statement, not a function.
#### Outputs
N/A - This is a SQL statement, not a function.
#### Internal Logic
- `ALTER TABLE user_api_key`: This part specifies that we are modifying the existing table named `user_api_key`.
- `ADD COLUMN dataset_ids`: This instructs the database to add a new column with the name `dataset_ids`.
- `TEXT[]`: This defines the data type of the new column as an array of text strings. This suggests that each API key can be associated with multiple dataset IDs.
- `DEFAULT NULL`: This sets the default value of the `dataset_ids` column to `NULL` for all existing rows in the table. This means that if a new API key is created and no `dataset_ids` are explicitly provided, the column will be set to `NULL`.

### `ALTER TABLE user_api_key ADD COLUMN organization_ids TEXT[] DEFAULT NULL;`
#### Description
This statement adds a new column named `organization_ids` to the `user_api_key` table. It follows the same structure and logic as the previous statement for `dataset_ids`.

#### Inputs
N/A - This is a SQL statement, not a function.
#### Outputs
N/A - This is a SQL statement, not a function.
#### Internal Logic
- `ALTER TABLE user_api_key`: This part specifies that we are modifying the existing table named `user_api_key`.
- `ADD COLUMN organization_ids`: This instructs the database to add a new column with the name `organization_ids`.
- `TEXT[]`: This defines the data type of the new column as an array of text strings. This suggests that each API key can be associated with multiple organization IDs.
- `DEFAULT NULL`: This sets the default value of the `organization_ids` column to `NULL` for all existing rows in the table. This means that if a new API key is created and no `organization_ids` are explicitly provided, the column will be set to `NULL`.
