---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to undo the changes made by the corresponding `up.sql` file. It removes the `tag_set_array` column from three tables: `chunk_metadata`, `chunk_group`, and `files`.

## Symbols

### ALTER TABLE statements
#### Description
These SQL statements are used to modify the structure of existing tables by removing a specific column.

#### Internal Logic
The script executes three separate `ALTER TABLE` statements, each targeting a different table:

1. Removes the `tag_set_array` column from the `chunk_metadata` table.
2. Removes the `tag_set_array` column from the `chunk_group` table.
3. Removes the `tag_set_array` column from the `files` table.

Each statement uses the `DROP COLUMN` clause to remove the specified column from its respective table.

## Side Effects
Executing this migration script will result in the permanent removal of the `tag_set_array` column from the three mentioned tables. This action will delete all data stored in these columns across all rows in the affected tables.

## Dependencies
This script assumes the existence of the following database objects:
1. A table named `chunk_metadata`
2. A table named `chunk_group`
3. A table named `files`
4. A column named `tag_set_array` in each of these tables

The script will fail if any of these objects do not exist in the database at the time of execution.

## Error Handling
This script does not include explicit error handling. If an error occurs during execution (e.g., if a table or column doesn't exist), the database management system will likely raise an error and roll back the transaction.

## TODOs
The comment at the top of the file, `-- This file should undo anything in `up.sql``, serves as a reminder of the purpose of this migration script. It suggests that there is a corresponding `up.sql` file that initially added the `tag_set_array` column to these tables, and this script is designed to reverse those changes.