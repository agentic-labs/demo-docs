---
title: "up.sql"
---

## High-level description
This SQL migration script adds a new column named `tag_set_array` to three existing tables: `chunk_metadata`, `chunk_group`, and `files`. The new column is designed to store an array of text values, representing tags associated with each record in these tables.

## Symbols

### ALTER TABLE statements

#### Description
The script contains three `ALTER TABLE` statements, each adding the `tag_set_array` column to a different table.

#### Internal Logic
For each table (`chunk_metadata`, `chunk_group`, and `files`):
1. Adds a new column named `tag_set_array`.
2. Sets the data type of the column to `TEXT[]`, which represents an array of text values.
3. Sets a default value of an empty array (`'{}'`) for the new column.

### `tag_set_array` column

#### Description
A new column added to store an array of tags for each record in the respective tables.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| tag_set_array | TEXT[] | An array of text values representing tags |

#### Default Value
An empty array (`'{}'`) is set as the default value for the `tag_set_array` column in all three tables.

## Side Effects
- Modifies the schema of three existing tables: `chunk_metadata`, `chunk_group`, and `files`.
- Existing records in these tables will have an empty array as the value for the new `tag_set_array` column.

## Performance Considerations
Adding a new column to existing tables with a default value is generally a fast operation in most database systems. However, if the tables contain a large number of records, this operation might take some time to complete.