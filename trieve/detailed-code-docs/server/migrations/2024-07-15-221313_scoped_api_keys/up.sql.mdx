---
title: "up.sql"
---

## High-level description
This SQL script adds a new column named `scopes` to the `user_api_key` table. The column is intended to store an array of text values and is added in a way that ensures the migration is idempotent - it won't fail if the column already exists.

## Symbols
### `ALTER TABLE user_api_key ADD COLUMN IF NOT EXISTS scopes text[];`
#### Description
This SQL statement modifies the existing `user_api_key` table by adding a new column named `scopes`.

#### Internal Logic
1. **`ALTER TABLE user_api_key`**: This part specifies that the table named `user_api_key` is being modified.
2. **`ADD COLUMN IF NOT EXISTS scopes`**: This clause adds a new column named `scopes` to the table. The `IF NOT EXISTS` ensures that the operation is idempotent - if the column already exists, the statement will not fail.
3. **`text[]`**: This defines the data type of the new column as an array of text strings. 
