---
title: "up.sql"
---

## High-level description
This SQL script adds a new column named `scopes` to the `user_api_key` table. The column is of type `text[]` which represents an array of text values in PostgreSQL. The `IF NOT EXISTS` clause ensures that the column is added only if it doesn't already exist, preventing errors if the script is run multiple times.

## Symbols

### `ALTER TABLE user_api_key ADD COLUMN IF NOT EXISTS scopes text[];`
#### Description
This SQL statement modifies the existing `user_api_key` table by adding a new column named `scopes`.

#### Internal Logic
1. **`ALTER TABLE user_api_key`**: This part specifies that the table `user_api_key` is being modified.
2. **`ADD COLUMN IF NOT EXISTS scopes`**: This instructs the database to add a new column named `scopes`. The `IF NOT EXISTS` clause ensures that the operation is idempotent - it will only add the column if a column with the same name doesn't already exist.
3. **`text[]`**: This defines the data type of the new `scopes` column as an array of text strings.

#### Side Effects
This script modifies the database schema by adding a new column to the `user_api_key` table. 
