---
title: "down.sql"
---

## High-level description
This SQL script is a database migration file that reverts a change related to user API keys. Specifically, it drops the `scopes` column from the `user_api_key` table. This suggests that the `up.sql` migration likely added this column to manage API key permissions.

## Symbols
### `ALTER TABLE user_api_key DROP COLUMN IF EXISTS scopes;`
#### Description
This SQL statement removes the `scopes` column from the `user_api_key` table if it exists. The `IF EXISTS` clause ensures that the statement executes successfully even if the column has already been dropped, preventing errors during rollback.

#### Internal Logic
- **`ALTER TABLE user_api_key`**: This clause initiates an alteration to the existing `user_api_key` table.
- **`DROP COLUMN IF EXISTS scopes`**: This clause specifies the action to be performed. It attempts to drop (delete) a column named `scopes`. The `IF EXISTS` clause makes the operation conditional, only dropping the column if it exists in the table. This prevents errors if the column is already absent.

#### Side Effects
- **Database Schema Change**: This statement modifies the database schema by removing the `scopes` column from the `user_api_key` table. This impacts how API key permissions are stored and managed. Data previously stored in the `scopes` column will be permanently deleted. 
