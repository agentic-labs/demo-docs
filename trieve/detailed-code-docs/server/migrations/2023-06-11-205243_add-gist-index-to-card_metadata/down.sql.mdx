---
title: "down.sql"
---

## High-level description
This SQL script contains database migration steps to revert changes related to adding a GIN index and a `card_metadata_tsvector` column to the `card_metadata` table. This likely reverses a migration that implemented full-text search functionality.

## Symbols
### `DROP INDEX IF EXISTS idx_card_metadata_tsvector`
#### Description
This statement attempts to drop the index named `idx_card_metadata_tsvector`. The `IF EXISTS` clause ensures that the operation doesn't fail if the index doesn't exist.

#### Internal Logic
1. **Check for existence:** The database checks if an index with the name `idx_card_metadata_tsvector` exists.
2. **Drop index:** If the index exists, it is dropped. If it doesn't exist, no action is taken.

### `ALTER TABLE card_metadata DROP COLUMN IF EXISTS card_metadata_tsvector`
#### Description
This statement attempts to drop the column named `card_metadata_tsvector` from the `card_metadata` table. The `IF EXISTS` clause ensures that the operation doesn't fail if the column doesn't exist.

#### Internal Logic
1. **Check for existence:** The database checks if a column named `card_metadata_tsvector` exists in the `card_metadata` table.
2. **Drop column:** If the column exists, it is dropped. If it doesn't exist, no action is taken.
