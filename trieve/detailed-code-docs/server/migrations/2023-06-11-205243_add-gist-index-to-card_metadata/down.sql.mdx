---
title: "down.sql"
---

## High-level description
This SQL script performs a database migration that reverts changes related to full-text search capabilities on the `card_metadata` table. It removes a GIN index and a `tsvector` column used for text search indexing.

## Symbols

### `DROP INDEX IF EXISTS idx_card_metadata_tsvector`
#### Description
This statement attempts to drop an index named `idx_card_metadata_tsvector` if it exists. This index is likely a GIN index used for full-text search on the `card_metadata_tsvector` column. The `IF EXISTS` clause ensures that the statement doesn't fail if the index doesn't exist.

#### Internal Logic
- Checks if the index `idx_card_metadata_tsvector` exists.
- If it exists, the index is dropped.
- If it doesn't exist, the statement does nothing.

### `ALTER TABLE card_metadata DROP COLUMN IF EXISTS card_metadata_tsvector`
#### Description
This statement modifies the `card_metadata` table by dropping the `card_metadata_tsvector` column if it exists. This column likely stored a `tsvector` data type used for full-text search indexing. The `IF EXISTS` clause ensures that the statement doesn't fail if the column doesn't exist.

#### Internal Logic
- Checks if the column `card_metadata_tsvector` exists in the `card_metadata` table.
- If it exists, the column is dropped.
- If it doesn't exist, the statement does nothing.
