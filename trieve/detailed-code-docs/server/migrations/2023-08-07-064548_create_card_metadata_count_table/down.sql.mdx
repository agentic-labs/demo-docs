---
title: "down.sql"
---

## High-level description
This SQL script defines the "down" migration for reverting changes introduced by the "up" migration related to the `card_metadata_count` table. It ensures that the database schema is rolled back to its previous state by dropping the trigger, trigger function, and the table itself.

## Symbols

### `DROP TRIGGER IF EXISTS card_metadata_count_trigger ON card_metadata;`
#### Description
This statement drops the trigger named `card_metadata_count_trigger` associated with the `card_metadata` table if it exists. This ensures that the trigger is removed without raising an error if it's already absent.

#### Internal Logic
- It checks if a trigger named `card_metadata_count_trigger` exists on the `card_metadata` table.
- If the trigger exists, it is dropped.
- If the trigger doesn't exist, the statement does nothing.

### `DROP FUNCTION IF EXISTS update_card_metadata_count();`
#### Description
This statement drops the function named `update_card_metadata_count` if it exists. This function is likely responsible for updating the `card_metadata_count` table and is no longer needed after the table is dropped.

#### Internal Logic
- It checks if a function named `update_card_metadata_count` exists.
- If the function exists, it is dropped.
- If the function doesn't exist, the statement does nothing.

### `DROP TABLE IF EXISTS card_metadata_count;`
#### Description
This statement drops the table named `card_metadata_count` if it exists. This is the main action of the "down" migration, reverting the creation of this table.

#### Internal Logic
- It checks if a table named `card_metadata_count` exists.
- If the table exists, it is dropped.
- If the table doesn't exist, the statement does nothing.
