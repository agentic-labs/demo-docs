---
title: "down.sql"
---

## High-level description
This SQL script defines the "down" migration for reverting changes introduced by the "up" migration related to the `card_metadata_count` table. It ensures that the database schema is rolled back to its previous state by dropping the trigger, trigger function, and the table itself.

## Symbols

### `DROP TRIGGER IF EXISTS card_metadata_count_trigger ON card_metadata;`
#### Description
This statement attempts to drop a trigger named `card_metadata_count_trigger` associated with the `card_metadata` table. The `IF EXISTS` clause ensures that the operation proceeds without errors even if the trigger doesn't exist.

#### Internal Logic
1. **Check for Existence:** The database checks if a trigger named `card_metadata_count_trigger` exists on the `card_metadata` table.
2. **Drop Trigger:** If the trigger exists, it is dropped, removing any associated actions that were set to execute upon events on the `card_metadata` table.
3. **No Action (if not exists):** If the trigger doesn't exist, the statement completes without any action.

### `DROP FUNCTION IF EXISTS update_card_metadata_count();`
#### Description
This statement attempts to drop a function named `update_card_metadata_count`. The `IF EXISTS` clause ensures that the operation proceeds without errors even if the function doesn't exist.

#### Internal Logic
1. **Check for Existence:** The database checks if a function named `update_card_metadata_count` exists.
2. **Drop Function:** If the function exists, it is dropped, removing its definition and making it unavailable for use.
3. **No Action (if not exists):** If the function doesn't exist, the statement completes without any action.

### `DROP TABLE IF EXISTS card_metadata_count;`
#### Description
This statement attempts to drop a table named `card_metadata_count`. The `IF EXISTS` clause ensures that the operation proceeds without errors even if the table doesn't exist.

#### Internal Logic
1. **Check for Existence:** The database checks if a table named `card_metadata_count` exists.
2. **Drop Table:** If the table exists, it is dropped, along with all its data and associated constraints.
3. **No Action (if not exists):** If the table doesn't exist, the statement completes without any action.
