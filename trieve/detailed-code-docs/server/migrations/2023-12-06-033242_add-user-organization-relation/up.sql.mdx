---
title: "up.sql"
---

## High-level description
This SQL script defines a database migration that adds a new column `organization_id` to the `users` table and establishes a foreign key constraint to the `organizations` table. This implies a one-to-many relationship where a user belongs to one organization.

## Symbols

### `ALTER TABLE users ADD COLUMN organization_id UUID NOT NULL;`
#### Description
This statement adds a new column named `organization_id` to the `users` table. 

#### Internal Logic
* `ALTER TABLE users`: This part specifies that we are modifying the existing table named `users`.
* `ADD COLUMN organization_id`: This adds a new column with the name `organization_id`.
* `UUID`: This defines the data type of the new column as UUID (Universally Unique Identifier), commonly used for primary keys and foreign keys.
* `NOT NULL`: This constraint ensures that every user record must have a value for `organization_id`, meaning a user cannot exist without being associated with an organization.

### `ALTER TABLE users ADD CONSTRAINT users_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES organizations(id);`
#### Description
This statement adds a foreign key constraint to the `users` table, linking it to the `organizations` table.

#### Internal Logic
* `ALTER TABLE users`: Similar to the previous statement, this indicates modification of the `users` table.
* `ADD CONSTRAINT users_organization_id_fkey`: This adds a new constraint named `users_organization_id_fkey`. Naming constraints is a good practice for managing them later.
* `FOREIGN KEY (organization_id)`: This defines the column `organization_id` in the `users` table as a foreign key.
* `REFERENCES organizations(id)`: This part links the foreign key to the `id` column of the `organizations` table. This establishes the relationship that any value in `users.organization_id` must match a valid `id` in the `organizations` table, ensuring referential integrity.
