---
title: "down.sql"
---

## High-level description
This SQL script defines the down migration for reverting changes introduced by the `2023-05-10-032820_create_user_plans_table` migration. It drops the `user_plans` table and the `idx_user_plans_stripe_customer_id` index if they exist.

## Symbols

### `DROP TABLE IF EXISTS user_plans;`
#### Description
This statement attempts to drop the `user_plans` table. The `IF EXISTS` clause ensures that the statement executes successfully even if the table doesn't exist.

#### Internal Logic
1. Checks if a table named `user_plans` exists in the database.
2. If the table exists, it is dropped.
3. If the table doesn't exist, no action is taken.

### `DROP INDEX IF EXISTS idx_user_plans_stripe_customer_id;`
#### Description
This statement attempts to drop the `idx_user_plans_stripe_customer_id` index. The `IF EXISTS` clause ensures that the statement executes successfully even if the index doesn't exist.

#### Internal Logic
1. Checks if an index named `idx_user_plans_stripe_customer_id` exists in the database.
2. If the index exists, it is dropped.
3. If the index doesn't exist, no action is taken. 
