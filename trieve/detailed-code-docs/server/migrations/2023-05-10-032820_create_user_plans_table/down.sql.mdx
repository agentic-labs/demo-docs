---
title: "down.sql"
---

## High-level description
This SQL script defines the down migration for reverting changes made by the `up.sql` migration related to the `user_plans` table. It ensures that the table and associated index are safely dropped from the database if they exist.

## Symbols

### `DROP TABLE IF EXISTS user_plans;`
#### Description
This statement attempts to drop the `user_plans` table only if it exists in the database. This prevents errors if the table is already absent.

#### Internal Logic
- It uses the `DROP TABLE` statement to remove the table.
- The `IF EXISTS` clause checks for the table's existence before attempting the drop, ensuring the operation doesn't fail if the table is already absent.

### `DROP INDEX IF EXISTS idx_user_plans_stripe_customer_id;`
#### Description
This statement attempts to drop the index named `idx_user_plans_stripe_customer_id` only if it exists in the database. This prevents errors if the index is already absent.

#### Internal Logic
- It uses the `DROP INDEX` statement to remove the index.
- The `IF EXISTS` clause checks for the index's existence before attempting the drop, ensuring the operation doesn't fail if the index is already absent.
