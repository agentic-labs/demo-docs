---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert the changes made in the corresponding `up.sql` file. It modifies the foreign key constraint on the `user_organizations` table, removing the cascade delete behavior for the `organization_id` column.

## Symbols

### SQL Commands

#### Description
The script contains two main SQL commands that alter the `user_organizations` table:

1. Drops the existing foreign key constraint.
2. Adds a new foreign key constraint without cascade delete.

#### Internal Logic
1. The first `ALTER TABLE` statement removes the existing foreign key constraint named `user_organizations_organization_id_fkey`.
2. The second `ALTER TABLE` statement adds a new foreign key constraint named `fk_organization_id`, which references the `id` column in the `organizations` table.

## Side Effects
- Modifies the database schema by changing the foreign key relationship between `user_organizations` and `organizations` tables.
- Removes the cascade delete behavior, which means that deleting an organization will no longer automatically delete related entries in the `user_organizations` table.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| PostgreSQL | This SQL script is written for PostgreSQL database systems. |

## Error Handling
This script does not include explicit error handling. If an error occurs during execution, it will be handled by the database management system or the migration tool running the script.

## TODOs
The script includes a comment indicating that it should undo anything in the corresponding `up.sql` file. This serves as a reminder for developers to ensure that this down migration correctly reverts all changes made in the up migration.