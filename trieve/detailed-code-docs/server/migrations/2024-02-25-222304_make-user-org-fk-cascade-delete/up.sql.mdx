---
title: "up.sql"
---

## High-level description
This SQL migration script modifies the foreign key constraint in the `user_organizations` table to implement cascading delete for the `organization_id` column. This change ensures that when an organization is deleted, all related entries in the `user_organizations` table are automatically removed.

## Symbols

### SQL Migration Script
#### Description
The script alters the `user_organizations` table by dropping an existing foreign key constraint and adding a new one with cascading delete functionality.

#### Internal Logic
1. Drops the existing foreign key constraint named `fk_organization_id` from the `user_organizations` table.
2. Adds a new foreign key constraint named `user_organizations_organization_id_fkey` to the `user_organizations` table.
   - References the `id` column in the `organizations` table.
   - Implements `ON UPDATE CASCADE` and `ON DELETE CASCADE` behaviors.

## Side Effects
- When an organization is deleted from the `organizations` table, all corresponding entries in the `user_organizations` table will be automatically deleted.
- Updates to the `id` column in the `organizations` table will cascade to the `organization_id` column in the `user_organizations` table.

## Performance Considerations
- This change may impact the performance of delete operations on the `organizations` table, as it will trigger cascading deletes in the `user_organizations` table.
- Large-scale deletions of organizations could potentially lead to longer execution times due to the cascading effect.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| organizations table | Referenced by the foreign key constraint |
| user_organizations table | Table being modified |

Note: This migration assumes the existence of both `organizations` and `user_organizations` tables in the database schema.