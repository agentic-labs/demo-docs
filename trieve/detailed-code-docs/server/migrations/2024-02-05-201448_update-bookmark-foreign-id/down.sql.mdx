---
title: "down.sql"
---

## High-level description
This SQL migration script is designed to revert changes made to the `chunk_group_bookmarks` table. It removes a foreign key constraint and replaces it with a different one, effectively undoing the changes implemented in the corresponding `up.sql` file.

## Symbols

### SQL Commands

#### Description
The script contains two main SQL commands: `ALTER TABLE` statements that modify the structure of the `chunk_group_bookmarks` table.

#### Internal Logic

1. The first `ALTER TABLE` statement drops the foreign key constraint named `chunk_group_bookmarks_chunk_metadata_id_fkey`.

2. The second `ALTER TABLE` statement adds a new foreign key constraint named `card_collection_bookmarks_card_metadata_id_fkey`. This constraint links the `chunk_metadata_id` column in the `chunk_group_bookmarks` table to the `id` column in the `chunk_metadata` table.

## Side Effects
- The foreign key relationship between `chunk_group_bookmarks` and `chunk_metadata` tables is modified.
- The constraint name is changed from `chunk_group_bookmarks_chunk_metadata_id_fkey` to `card_collection_bookmarks_card_metadata_id_fkey`.
- The new constraint includes `ON DELETE CASCADE` and `ON UPDATE CASCADE` clauses, which will propagate deletions and updates from the referenced table to the referencing table.

## Notes
- This script is intended to be run as part of a database migration rollback process.
- The comment at the top of the file indicates that this script should undo the changes made in the corresponding `up.sql` file.
- The change in constraint names (from `chunk_group_bookmarks_chunk_metadata_id_fkey` to `card_collection_bookmarks_card_metadata_id_fkey`) suggests that there might have been a renaming of tables or a conceptual change from "card collections" to "chunk groups" in the database schema.