---
title: "Overview"
---

## High-level description
This directory contains SQL migration scripts for removing the `expires_at` column from the `invitations` table in a database. The migration is dated 2024-05-07, indicating when this change was implemented or planned. The purpose of these scripts is to modify the database schema, specifically to remove the expiration functionality from invitations.

## What does it do?
The migration scripts in this directory perform the following actions:

1. The "up" migration removes the `expires_at` column from the `invitations` table. This effectively eliminates the ability to set an expiration date for invitations in the system.

2. The "down" migration adds the `expires_at` column back to the `invitations` table. This allows for reverting the changes made by the "up" migration if necessary.

These scripts are typically used in database version control systems to manage changes to the database schema over time. They allow developers to apply or revert changes to the database structure in a controlled and reversible manner.

## Key Files

1. `up.sql`:
   - This file contains the SQL command to remove the `expires_at` column from the `invitations` table.
   - The main command is: `ALTER TABLE invitations DROP COLUMN expires_at;`
   - This script is run when applying the migration to update the database schema.

2. `down.sql`:
   - This file contains the SQL command to add the `expires_at` column back to the `invitations` table.
   - The main command is: `ALTER TABLE invitations ADD COLUMN expires_at timestamp;`
   - This script is run when reverting the migration to restore the previous database schema.

## Dependencies
The SQL syntax used in these migration scripts is compatible with PostgreSQL, which is likely the database system being used for this project. The exact version of PostgreSQL is not specified, but the commands used are standard SQL operations that should work with most recent versions of PostgreSQL.

## Side Effects and Performance Considerations

### up.sql (Removing the column)
- Permanently removes the `expires_at` column and all its data from the `invitations` table.
- May require updates to any queries, applications, or processes that relied on the `expires_at` column.
- Could temporarily lock the `invitations` table during the column removal, potentially impacting database performance briefly.
- Might slightly improve query performance on the `invitations` table due to reduced data size, although the impact is likely minimal unless the table is very large.

### down.sql (Adding the column back)
- Modifies the structure of the `invitations` table by adding the `expires_at` column.
- Existing rows in the `invitations` table will have the new `expires_at` column added with NULL values unless explicitly set.
- Applications or queries that rely on the structure of the `invitations` table may need to be updated to account for the new column.
- For very large tables, this operation might take some time and could potentially lock the table during the process.

It's important to note that these migrations should be tested thoroughly in a non-production environment before being applied to a production database to ensure that all dependent systems and applications can handle the schema change correctly.