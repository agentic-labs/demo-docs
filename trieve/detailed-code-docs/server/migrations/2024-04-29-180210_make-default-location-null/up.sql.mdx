---
title: "up.sql"
---

## High-level description
This SQL script performs a database migration that alters the `chunk_metadata` table. It first drops the existing `location` column if it exists and then recreates it as a JSONB column with a default value of NULL.

## Symbols
### `ALTER TABLE chunk_metadata DROP COLUMN IF EXISTS location;`
#### Description
This statement attempts to drop the `location` column from the `chunk_metadata` table if it exists. The `IF EXISTS` clause ensures that the statement doesn't fail if the column doesn't exist.

#### Internal Logic
- Checks if a column named `location` exists in the `chunk_metadata` table.
- If the column exists, it is dropped.
- If the column doesn't exist, the statement does nothing.

### `ALTER TABLE chunk_metadata ADD COLUMN location JSONB DEFAULT NULL;`
#### Description
This statement adds a new column named `location` to the `chunk_metadata` table. The column is of type JSONB and has a default value of NULL.

#### Internal Logic
- Adds a new column named `location` to the `chunk_metadata` table.
- The data type of the new column is set to JSONB, allowing it to store JSON objects.
- The default value of the column is set to NULL, meaning that new rows inserted into the table will have a NULL value for the `location` column unless explicitly specified.
