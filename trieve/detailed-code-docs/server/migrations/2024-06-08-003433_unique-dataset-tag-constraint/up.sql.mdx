---
title: "up.sql"
---

## High-level description
This SQL script modifies the `dataset_tags` table by dropping existing constraints and adding a new unique constraint. The new constraint ensures that the combination of `dataset_id` and `tag` is unique within the table.

## Symbols

### `ALTER TABLE dataset_tags`
#### Description
This statement modifies the existing `dataset_tags` table. It is used three times to perform different alterations.

#### Internal Logic
1. **`DROP CONSTRAINT IF EXISTS dataset_tags_tag;`**: This statement attempts to drop a constraint named `dataset_tags_tag` if it exists. This is done to prepare for creating a new unique constraint without conflicts.
2. **`DROP CONSTRAINT IF EXISTS dataset_tags_id_dataset_id;`**: Similar to the previous statement, this drops a constraint named `dataset_tags_id_dataset_id` if it exists, also to avoid conflicts.
3. **`ADD CONSTRAINT dataset_tags_dataset_id_tag_key UNIQUE (dataset_id, tag);`**: This statement adds a new constraint named `dataset_tags_dataset_id_tag_key` to the table. This constraint enforces uniqueness on the combination of the `dataset_id` and `tag` columns. This means that no two rows in the `dataset_tags` table can have the same values for both `dataset_id` and `tag`. 
