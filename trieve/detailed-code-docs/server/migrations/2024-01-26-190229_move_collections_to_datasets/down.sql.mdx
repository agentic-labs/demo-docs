---
title: "down.sql"
---

## High-level description
This SQL script reverts the database schema changes introduced by the migration `2024-01-26-190229_move_collections_to_datasets`. It essentially undoes the process of moving collections to datasets.

## Symbols

### `ALTER TABLE chunk_collections ADD COLUMN author_id uuid;`
#### Description
This statement adds back the `author_id` column of type `uuid` to the `chunk_collections` table. This suggests that the `up.sql` script likely removed this column as part of moving collections to datasets.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
This is a standard SQL `ALTER TABLE` statement. It adds a new column named `author_id` to the `chunk_collections` table. The data type of the new column is `uuid`.

### `ALTER TABLE user_collection_counts ADD COLUMN user_id uuid;`
#### Description
This statement adds back the `user_id` column of type `uuid` to the `user_collection_counts` table. This indicates that the `up.sql` script might have removed this column during the migration.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
This is a standard SQL `ALTER TABLE` statement. It adds a new column named `user_id` to the `user_collection_counts` table. The data type of the new column is `uuid`.

### `ALTER TABLE chunk_collections DROP COLUMN dataset_id;`
#### Description
This statement removes the `dataset_id` column from the `chunk_collections` table. This implies that the `up.sql` script likely added this column to associate collections with datasets.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
This is a standard SQL `ALTER TABLE` statement. It removes the column named `dataset_id` from the `chunk_collections` table.

### `ALTER TABLE dataset_collection_counts RENAME TO user_collection_counts;`
#### Description
This statement renames the table `dataset_collection_counts` back to its original name, `user_collection_counts`. This suggests that the `up.sql` script renamed this table as part of the migration to datasets.

#### Inputs
N/A - This is a SQL statement, not a function.

#### Outputs
N/A - This is a SQL statement, not a function.

#### Internal Logic
This is a standard SQL `ALTER TABLE` statement. It renames the table `dataset_collection_counts` to `user_collection_counts`. This suggests that the original table name was likely related to users and their collection counts, and the `up.sql` script renamed it to reflect the association with datasets. This statement reverts that change.
