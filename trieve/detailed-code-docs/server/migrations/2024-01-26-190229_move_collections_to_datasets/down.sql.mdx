---
title: "down.sql"
---

## High-level description
This SQL script reverts the database schema changes introduced by the migration `2024-01-26-190229_move_collections_to_datasets`. It essentially undoes the process of moving collections to datasets, restoring the database to its previous state.

## Symbols
### `down.sql`
#### Description
This SQL script contains a series of commands to revert database schema changes related to moving collections to datasets. It performs the following actions:

1. **Adds back `author_id` column to `chunk_collections` table:** This likely restores the association of collections with their original authors.
2. **Adds `user_id` column to `user_collection_counts` table:** This seems to reintroduce a direct link between users and collection counts.
3. **Removes `dataset_id` column from `chunk_collections` table:** This severs the connection between collections and datasets, established during the migration.
4. **Renames `dataset_collection_counts` table back to `user_collection_counts`:** This reverts the table name change, suggesting that collection counts were originally associated with users.

#### Internal Logic
The script uses standard SQL `ALTER TABLE` commands to modify the database schema. It adds and drops columns, and renames a table to undo the changes made in the `up.sql` migration. 
