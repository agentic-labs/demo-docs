---
title: "down.sql"
---

## High-level description
This SQL script reverts the changes introduced by the migration `2024-06-10-065428_add-dataset-soft-delete`. It removes the `deleted` column and its associated index `idx_dataset_deleted` from the `datasets` table. This suggests the migration likely implemented soft delete functionality for datasets, and this script undoes that change.

## Symbols

### `ALTER TABLE datasets DROP COLUMN IF EXISTS deleted;`
#### Description
This statement removes the `deleted` column from the `datasets` table if it exists. The `IF EXISTS` clause ensures that the statement executes successfully even if the column is already absent, preventing errors during rollback.

#### Internal Logic
- Checks if a column named `deleted` exists in the `datasets` table.
- If the column exists, it is dropped from the table.
- If the column doesn't exist, the statement does nothing.

### `DROP INDEX IF EXISTS idx_dataset_deleted;`
#### Description
This statement drops the index named `idx_dataset_deleted` if it exists. Similar to the previous statement, the `IF EXISTS` clause prevents errors if the index is already absent.

#### Internal Logic
- Checks if an index named `idx_dataset_deleted` exists.
- If the index exists, it is dropped.
- If the index doesn't exist, the statement does nothing.
