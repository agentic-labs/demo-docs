---
title: "up.sql"
---

## High-level description
This SQL migration script removes null values from the `qdrant_point_id` column in the `chunk_metadata` table, makes the column not nullable, and drops the `chunk_collisions` table. The purpose is to clean up the database schema and ensure data integrity.

## Symbols

### DELETE Statement
#### Description
Removes all rows from the `chunk_metadata` table where the `qdrant_point_id` is null.

#### Internal Logic
1. Selects all rows in the `chunk_metadata` table where `qdrant_point_id` is NULL.
2. Deletes these selected rows from the table.

### ALTER TABLE Statement
#### Description
Modifies the `chunk_metadata` table to make the `qdrant_point_id` column not nullable.

#### Internal Logic
1. Alters the `chunk_metadata` table.
2. Changes the `qdrant_point_id` column to disallow NULL values.

### DROP TABLE Statement
#### Description
Removes the `chunk_collisions` table from the database if it exists.

#### Internal Logic
1. Checks if the `chunk_collisions` table exists.
2. If it does, drops (deletes) the table from the database schema.

## Side Effects
- Rows with null `qdrant_point_id` in the `chunk_metadata` table will be permanently deleted.
- The `chunk_metadata` table structure will be modified, disallowing null values in the `qdrant_point_id` column.
- The `chunk_collisions` table will be completely removed from the database if it exists.

## Error Handling
The script uses the `IF EXISTS` clause in the DROP TABLE statement to prevent errors if the `chunk_collisions` table doesn't exist.

## TODOs
There are no explicit TODOs in this migration script.