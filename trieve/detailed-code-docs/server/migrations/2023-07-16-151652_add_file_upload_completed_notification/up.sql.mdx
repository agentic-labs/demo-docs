---
title: "up.sql"
---

## High-level description
This SQL migration script creates a new table named `file_upload_completed_notifications` in the database. The table is designed to store notifications for users when file uploads are completed, associated with specific collections.

## Symbols

### `file_upload_completed_notifications` table
#### Description
This table is created to store notifications related to completed file uploads. It includes fields for identifying the notification, the user, the associated collection, the read status of the notification, and timestamps for creation and updates.

#### Internal Logic
The table is created with the following columns:

1. `id`: A UUID serving as the primary key for each notification.
2. `user_uuid`: A UUID identifying the user associated with the notification.
3. `collection_uuid`: A UUID identifying the collection associated with the notification.
4. `user_read`: A boolean flag indicating whether the user has read the notification.
5. `created_at`: A timestamp recording when the notification was created.
6. `updated_at`: A timestamp recording when the notification was last updated.

Both `created_at` and `updated_at` columns have a default value of the current timestamp (`NOW()`).

## Dependencies
This migration script relies on the PostgreSQL database system, as evidenced by the use of PostgreSQL-specific data types like UUID.

## Configuration
The table is configured with the following default behaviors:
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| user_read | boolean | false | Indicates whether the notification has been read by the user |
| created_at | TIMESTAMP | NOW() | Sets the creation time to the current timestamp |
| updated_at | TIMESTAMP | NOW() | Sets the last update time to the current timestamp |

## Notes
- This migration is part of a series, as indicated by the timestamp in the filename (2023-07-16-151652).
- The script is designed to be run as an "up" migration, meaning it's used to apply changes to the database schema.
- There is likely a corresponding "down" migration script to revert these changes if needed.
- The use of UUIDs for `id`, `user_uuid`, and `collection_uuid` suggests a distributed system where globally unique identifiers are necessary.
- The `user_read` flag allows for tracking whether a user has seen or acknowledged the notification.
- The `created_at` and `updated_at` fields enable tracking of when notifications are created and modified, which can be useful for sorting, filtering, or maintenance purposes.