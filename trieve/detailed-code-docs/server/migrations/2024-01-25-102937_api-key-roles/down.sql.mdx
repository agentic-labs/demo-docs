---
title: "down.sql"
---

## High-level description
This SQL migration file is designed to revert the changes made in the corresponding `up.sql` file. It removes the `role` column from the `user_api_key` table in the database schema.

## Symbols

### ALTER TABLE user_api_key DROP COLUMN role;
#### Description
This SQL statement removes the `role` column from the `user_api_key` table.

#### Internal Logic
1. The `ALTER TABLE` command is used to modify the structure of an existing table.
2. `user_api_key` is the name of the table being altered.
3. `DROP COLUMN` is used to remove a column from the table.
4. `role` is the name of the column being removed.

## Side Effects
- This migration will permanently remove the `role` column and all its data from the `user_api_key` table.
- Any queries or application code that previously relied on the `role` column in the `user_api_key` table will no longer function correctly after this migration is applied.

## Performance Considerations
- Dropping a column is generally a fast operation, but the exact performance impact depends on the database system and the size of the table.
- For large tables, this operation might require a table rewrite, which could temporarily lock the table and impact database performance during the migration.

## Dependencies
This migration file likely depends on:
1. The existence of the `user_api_key` table in the database schema.
2. The presence of the `role` column in the `user_api_key` table, which was presumably added by the corresponding `up.sql` migration.

## Error Handling
- If the `role` column does not exist in the `user_api_key` table when this migration is run, it will likely result in an error.
- The specific error handling depends on the database system and the migration tool being used.

## Notes
- This migration is part of a pair (along with the `up.sql` file) that allows for bidirectional schema changes.
- It's important to run this migration only when reverting the changes made by the corresponding `up.sql` migration.
- Care should be taken to ensure that removing the `role` column doesn't break any application functionality that depends on it.