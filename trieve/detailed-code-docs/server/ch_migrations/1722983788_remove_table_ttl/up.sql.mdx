---
title: "up.sql"
---

## High-level description
This SQL script removes the Time-To-Live (TTL) settings from five specific tables in a database. The purpose is to disable automatic data expiration for these tables, allowing the data to persist indefinitely.

## Symbols

### ALTER TABLE statements
#### Description
Each `ALTER TABLE` statement in this script is used to remove the TTL (Time-To-Live) setting from a specific table. TTL is typically used in databases to automatically delete old data after a certain period. By removing the TTL, the data in these tables will no longer be automatically deleted based on time.

#### Internal Logic
The script executes five separate `ALTER TABLE` statements, each targeting a different table:

1. `dataset_events`
2. `search_queries`
3. `rag_queries`
4. `recommendations`
5. `ctr_data`

For each table, the `REMOVE TTL` clause is applied, which disables any previously set TTL configuration.

## Side Effects
Removing the TTL from these tables will result in the following side effects:

1. Data retention: All data in these tables will now be retained indefinitely, unless manually deleted or managed through other processes.
2. Storage impact: Over time, these tables may grow larger as old data is no longer automatically removed.
3. Query performance: Depending on the volume of data and how these tables are used, query performance might be affected as the tables grow larger.

## Performance Considerations
While this script itself is lightweight and should execute quickly, the long-term performance implications of removing TTL should be considered:

1. Database size: Without TTL, the database size may increase more rapidly, potentially affecting storage costs and backup times.
2. Query optimization: As tables grow, it may become more important to optimize queries and indexes on these tables to maintain performance.
3. Data management: A strategy for managing old data may need to be implemented to prevent unbounded growth of these tables.

## TODOs
Consider implementing alternative data retention policies or archiving strategies for these tables to manage data growth over time.