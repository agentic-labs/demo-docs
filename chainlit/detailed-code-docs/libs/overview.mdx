---
title: "Overview"
---

## High-level description
The `libs` directory contains two main subdirectories: `copilot` and `react-client`. These subdirectories house the core components for implementing a customizable chat widget and a React-based client library for interacting with Chainlit applications, respectively. Together, they provide a comprehensive solution for building and integrating interactive chat interfaces into web applications.

## What does it do?
The code in this directory enables developers to:

1. Create and customize a feature-rich chat widget that can be easily integrated into various web applications.
2. Establish real-time communication with a Chainlit server using WebSocket connections.
3. Manage chat sessions, send and receive messages, and handle various types of chat-related data.
4. Implement user interactions such as file uploads, audio recording, and custom actions.
5. Customize the appearance and behavior of the chat interface, including theme selection and internationalization support.
6. Handle authentication and token management for secure communication with the server.
7. Access and modify chat configurations and settings programmatically.

## Entry points
The main entry points for the `libs` directory are:

1. For the chat widget (`copilot`):
   - `src/widget.tsx`: The main `Widget` component that renders the floating action button and manages the chat interface visibility.
   - `src/chat/index.tsx`: The `ChatWrapper` component that sets up the chat session and provides the global message sending function.

2. For the React client library (`react-client`):
   - `src/api/index.tsx`: Defines the core `ChainlitAPI` client for server interactions.
   - Various hook files (e.g., `useChatInteract.ts`, `useChatData.ts`, `useChatSession.ts`) that provide access to different functionalities of the library.

The data flow in this system typically follows this pattern:
1. The `Widget` component manages the overall visibility of the chat interface.
2. The `ChainlitAPI` client handles communication with the Chainlit server.
3. React hooks provided by the `react-client` library manage state and interactions.
4. Various components in the `copilot` directory handle specific aspects of the chat interface, such as message display, user input, and profile management.

## Key Files
1. In `copilot`:
   - `src/widget.tsx`: Main widget component
   - `src/appWrapper.tsx`: Sets up the application environment
   - `src/api.ts`: Creates a configured API client
   - `src/chat/index.tsx`: Contains the `ChatWrapper` component
   - `src/chat/body.tsx`: Defines the main chat interface container
   - `src/components/Input.tsx`: Handles user input and message submission

2. In `react-client`:
   - `src/api/index.tsx`: Core `ChainlitAPI` client
   - `src/useChatInteract.ts`: Functions for chat interactions
   - `src/useChatData.ts`: Access to chat-related data
   - `src/useChatSession.ts`: Manages WebSocket connections and chat session state
   - `src/useAudio.ts`: Handles audio functionality
   - `src/useConfig.ts`: Manages Chainlit configuration
   - `src/state.ts`: Contains Recoil atoms and selectors for state management

## Dependencies
Both subdirectories rely on several common dependencies:
- React: Core library for building user interfaces
- Recoil: State management library
- Material-UI (@mui/material): UI component library (used in `copilot`)
- socket.io-client: WebSocket client for real-time communication
- TypeScript: For type-safe development

Additional notable dependencies include:
- Vite and Storybook (in `copilot`): For build process and component development
- SWR and jwt-decode (in `react-client`): For data fetching and token handling

## Configuration
Both subdirectories offer extensive configuration options:

1. In `copilot`, the widget is configurable through the `IWidgetConfig` interface, allowing customization of server URL, theme, font, button appearance, and more.

2. In `react-client`, configuration includes API settings, authentication options, audio settings, and chat behavior defaults. These are managed through Recoil states and can be accessed using provided hooks.

Both projects use TypeScript with strict configurations to ensure type safety and enable modern JavaScript features. The `copilot` directory also includes Vite configuration for the build process and module resolution.

To use these libraries, developers need to set up the necessary providers and configurations in their React applications. For the `react-client` library, this involves wrapping the application in Recoil and ChainlitContext providers, as demonstrated in the provided code snippet.

In summary, the `libs` directory provides a comprehensive toolkit for building and integrating customizable, feature-rich chat interfaces into web applications, with a focus on real-time communication, state management, and extensibility.