---
title: "Overview"
---

## High-level description
This directory contains utility functions for a React client application. It includes modules for grouping data, managing messages, and handling authentication tokens. These utilities provide essential functionality for organizing and manipulating data within the application.

## What does it do?
The utils directory provides several key functionalities:

1. Data Grouping: It offers a function to group threads based on their creation dates, categorizing them into "Today", "Yesterday", "Previous 7 days", "Previous 30 days", or by month and year for older threads.

2. Message Management: It provides a set of functions for handling chat-like messages, including nesting messages, adding new messages, updating existing messages, and deleting messages. These functions maintain the structure and state of conversations within the application.

3. Token Management: It includes functions for handling authentication tokens, allowing the application to store, retrieve, and remove tokens from the browser's local storage.

These utilities work together to support the core functionality of the React client application, enabling efficient data organization, message handling, and user authentication.

## Key Files

1. group.ts
   - Contains the `groupByDate` function for categorizing threads based on their creation dates.
   - Used in the application's state management to organize thread history.

2. message.ts
   - Provides a comprehensive set of functions for managing chat messages.
   - Includes operations like nesting messages, adding new messages, updating message content, and deleting messages.
   - These functions maintain the structure and state of conversations in the application.

3. token.ts
   - Offers utility functions for managing authentication tokens.
   - Provides methods to get, set, and remove tokens from the browser's local storage.
   - Ensures consistent token handling across the application.

## Dependencies
The utils directory primarily relies on internal types and interfaces defined elsewhere in the application. The main external dependency is the browser's `localStorage` API, which is used for token management.

## Configuration
There are no specific configuration files for this utils directory. However, the token management module uses a constant `tokenKey` to define the key used for storing and retrieving tokens from local storage. This key can be modified if needed to change the storage identifier for tokens.

Here's an example of how the `groupByDate` function from `group.ts` might be used:

```typescript
import { groupByDate } from './utils/group';
import { IThread } from './types';

const threads: IThread[] = [
  // ... array of thread objects
];

const groupedThreads = groupByDate(threads);

console.log(groupedThreads);
// Output: 
// {
//   "Today": [...],
//   "Yesterday": [...],
//   "Previous 7 days": [...],
//   "Previous 30 days": [...],
//   "January 2023": [...],
//   // ... other categories
// }
```

And here's an example of how the token management functions from `token.ts` might be used:

```typescript
import { getToken, setToken, removeToken } from './utils/token';

// Storing a token
setToken('my-auth-token');

// Retrieving the token
const token = getToken();
console.log(token); // Output: 'my-auth-token'

// Removing the token
removeToken();

console.log(getToken()); // Output: undefined
```

These utility functions provide a solid foundation for managing data, messages, and authentication in the React client application. They abstract away common operations, making it easier for developers to work with threads, messages, and tokens throughout the application.