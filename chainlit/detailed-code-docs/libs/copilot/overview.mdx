---
title: "Overview"
---

## High-level description
This directory contains the core components and logic for implementing a customizable chat widget in a Chainlit application. It includes the main widget component, chat interface, API client, and various utility functions and types. The project is set up as a React application using Vite as the build tool and Storybook for component development and documentation.

## What does it do?
The code in this directory creates a comprehensive chat widget with the following functionalities:

1. Renders a floating action button (FAB) that can be clicked to open a chat interface.
2. Provides a customizable chat interface with features such as:
   - Message display for various content types (text, images, etc.)
   - User input handling
   - File uploads and attachments
   - Feedback system for rating and commenting on messages
   - Custom actions that can be triggered by users
   - Chat session management and connectivity
3. Supports multiple chat profiles and allows users to switch between them.
4. Implements a side view for displaying additional element information.
5. Offers theme customization (light/dark mode) and other appearance settings.
6. Handles API communication with a Chainlit server for chat functionality.
7. Provides internationalization support.

The widget is designed to be easily integrated into various web applications and can be customized through a configuration object.

## Entry points
The main entry point for the widget is the `Widget` component in `src/widget.tsx`. This component renders the floating action button and manages the visibility of the chat interface. The chat interface itself is implemented in the `chat` directory, with `ChatWrapper` in `src/chat/index.tsx` serving as the main component for the chat functionality.

The data flow in this system is as follows:
1. `Widget` component manages the overall visibility of the chat interface.
2. `AppWrapper` in `src/appWrapper.tsx` sets up the necessary context providers and global state management.
3. `ChatWrapper` establishes the chat session and provides the global message sending function.
4. Various components in the `chat` and `components` directories handle specific aspects of the chat interface, such as message display, user input, and profile management.

## Key Files
1. `src/widget.tsx`: Defines the main `Widget` component that renders the floating action button and manages the chat interface visibility.
2. `src/appWrapper.tsx`: Sets up the application environment with necessary context providers and configuration.
3. `src/api.ts`: Provides the `makeApiClient` function for creating a configured API client to communicate with the Chainlit server.
4. `src/chat/index.tsx`: Contains the `ChatWrapper` component, which sets up the chat session and connection.
5. `src/chat/body.tsx`: Defines the `ChatBody` component, which is the main container for the chat interface.
6. `src/components/Input.tsx`: Handles user input, file uploads, and message submission.
7. `vite.config.ts`: Configures the Vite build process for the project.
8. `stories/AppWrapper.stories.ts`: Defines Storybook stories for the `AppWrapper` component, allowing for visual testing and documentation.

## Dependencies
The project relies on several external libraries and frameworks:

1. React: Core library for building the user interface.
2. Recoil: State management library.
3. Material-UI (@mui/material): UI component library for Material Design.
4. @chainlit/app: Custom components and utilities specific to the Chainlit application.
5. @chainlit/react-client: Custom hooks and types for the Chainlit React client.
6. sonner: Library for displaying toast notifications.
7. Vite: Build tool and development server.
8. Storybook: Development environment for UI components.

## Configuration
The widget is highly configurable through the `IWidgetConfig` interface defined in `src/types.ts`. Key configuration options include:

- `chainlitServer`: URL of the Chainlit server
- `theme`: Light or dark theme
- `fontFamily`: Custom font family
- `button`: Customization options for the floating action button
- `accessToken`: Optional authentication token

The project uses TypeScript with a strict configuration, as defined in `tsconfig.json` and `tsconfig.node.json`. This ensures type safety and enables the use of modern JavaScript features.

The Vite configuration in `vite.config.ts` sets up the build process, including plugins for React support, SVG handling, and TypeScript path resolution. It also configures module resolution to prevent conflicts with packages in @chainlit/react-components.

In summary, this directory implements a feature-rich, customizable chat widget for Chainlit applications, providing a flexible and interactive user experience that can be easily integrated into various web applications. The project is set up with modern development tools and practices, enabling efficient development, testing, and documentation of the widget components.