---
title: "appWrapper.tsx"
---

## High-level description
The `AppWrapper` component is a React component that serves as the main wrapper for the Chainlit widget application. It sets up the necessary context providers and global state management for the app, including API client initialization, internationalization, and widget configuration.

## Code Structure
The `AppWrapper` component is the main export of this file. It uses several context providers (`ChainlitContext`, `RecoilRoot`, and `WidgetContext`) to wrap the main `App` component, providing it with the necessary dependencies and configuration.

## References
- `makeApiClient` from 'api'
- `App` from 'app'
- `WidgetContext` from 'context'
- `RecoilRoot` from 'recoil'
- `IWidgetConfig` from 'types'
- `i18nSetupLocalization` from '@chainlit/app/src/i18n'
- `ChainlitContext` from '@chainlit/react-client'

## Symbols

### `i18nSetupLocalization()`
#### Description
This function is called to set up localization for the application. It's imported from the Chainlit app's i18n module and executed before the component definition.

### `AppWrapper`
#### Description
The main component that wraps the entire application, providing necessary contexts and configuration.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| widgetConfig | IWidgetConfig | Configuration object for the widget |

#### Internal Logic
1. Initializes the API client using the `makeApiClient` function with the `chainlitServer` from the widget configuration.
2. Wraps the main `App` component with the following providers:
   - `ChainlitContext.Provider`: Provides the API client to the app
   - `RecoilRoot`: Sets up Recoil for state management
   - `WidgetContext.Provider`: Provides the access token from the widget configuration
3. Passes the `widgetConfig` to the `App` component

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| recoil | State management |
| @chainlit/app | Chainlit application utilities |
| @chainlit/react-client | Chainlit React client utilities |

## Configuration
The component accepts a `widgetConfig` prop of type `IWidgetConfig`, which includes:
| Option | Type | Description |
|:-------|:-----|:------------|
| chainlitServer | string | URL of the Chainlit server |
| accessToken | string (optional) | Access token for authentication |

## API/Interface Reference
The `AppWrapper` component doesn't expose an API directly, but it sets up the necessary context and configuration for the Chainlit widget to function within a React application.