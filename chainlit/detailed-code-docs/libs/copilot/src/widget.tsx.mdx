---
title: "widget.tsx"
---

## High-level description
This code defines a React component called `Widget` that renders a floating action button (FAB) with a popover. The widget is customizable through a configuration object and serves as an interface for a copilot or chat-like functionality.

## Code Structure
The `Widget` component uses the `useState` hook to manage the state of the popover. It renders a `PopOver` component and a `Fab` (Floating Action Button) from Material-UI. The appearance and behavior of the button are controlled by the provided configuration.

## References
- `PopOver` component from 'popover'
- Material-UI components: `CloseIcon`, `Box`, `Fab`, `Fade`
- `MessageCircleIcon` from '@chainlit/app/src/assets/MessageCircle'
- `IWidgetConfig` interface from 'types'

## Symbols

### Widget
#### Description
The `Widget` component is the main export of this file. It creates a customizable floating action button that toggles a popover when clicked.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| config | IWidgetConfig | Configuration object for the widget |

#### Internal Logic
1. Sets up state for the popover anchor element
2. Defines button styles based on the provided configuration
3. Renders a `PopOver` component and a `Fab` component
4. Toggles the popover visibility when the button is clicked
5. Displays either a custom image or a default message circle icon when closed
6. Shows a close icon when the popover is open

## Side Effects
The component manages the state of the popover, which affects the UI but doesn't have any external side effects.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For creating the component and managing state |
| @mui/material | For UI components (Fab, Box, Fade) |
| @mui/icons-material | For the CloseIcon |

## Configuration
The widget's appearance and behavior can be customized through the `config` prop, which follows the `IWidgetConfig` interface. Key configuration options include:

| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| button.style | object | {} | Custom styles for the button |
| button.imageUrl | string | undefined | Custom image URL for the button |

## Error Handling
This component doesn't implement specific error handling mechanisms. It relies on React's error boundaries for catching and handling runtime errors.

## API/Interface Reference
The `Widget` component doesn't expose an API but accepts a configuration object as a prop. The structure of this object is defined by the `IWidgetConfig` interface in the 'types.ts' file.