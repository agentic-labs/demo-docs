---
title: "container.tsx"
---

## High-level description
This code defines a React component called `MessageContainer` that renders a container for chat messages. It handles the display of messages, user interactions, and various UI elements related to the chat interface. The component is designed to work with a chat application that uses Recoil for state management and includes features like feedback, file uploads, and custom actions.

## Code Structure
The main `MessageContainer` component is a memoized functional component that takes several props and uses various hooks to manage its state and behavior. It interacts with the application's global state using Recoil and custom hooks like `useConfig` and `useChatInteract`. The component also handles user interactions such as uploading files, providing feedback, and executing custom actions.

## Symbols

### MessageContainer
#### Description
A memoized React component that renders a container for chat messages and related UI elements.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| askUser | IAsk \| undefined | Configuration for asking the user for input |
| loading | boolean | Indicates if the chat is in a loading state |
| actions | IAction[] | Array of available actions |
| elements | IMessageElement[] | Array of message elements to display |
| messages | IStep[] | Array of chat messages |
| onFeedbackUpdated | function | Callback for updating feedback |
| onFeedbackDeleted | function | Callback for deleting feedback |
| callAction | function \| undefined | Function to call when an action is triggered |

#### Internal Logic
1. Uses various hooks to access configuration and chat interaction functions.
2. Memoizes context and callback functions to optimize performance.
3. Prepares message actions by mapping over the input actions and adding onClick handlers.
4. Renders a `CMessageContainer` component with the prepared props and memoized context.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| recoil | State management library |
| sonner | Toast notification library |
| @chainlit/app | Custom components and utilities |
| @chainlit/react-client | Custom hooks and types |

## Configuration
The component uses configuration options from the `useConfig` hook, including:
- `dataPersistence`: Enables feedback functionality
- `features.unsafe_allow_html`: Allows HTML content in messages
- `features.latex`: Enables LaTeX rendering
- `ui.name`: Sets the UI name

## Error Handling
The component uses toast notifications to display errors, particularly when calling actions fails.

## Side Effects
- Updates the side view state when clicking on certain message elements.
- Calls external functions for feedback updates and deletions.
- Triggers file uploads and action calls based on user interactions.

This component serves as a central part of the chat interface, managing the display and interaction with chat messages and related UI elements. It's designed to be flexible and reusable within the larger chat application context.