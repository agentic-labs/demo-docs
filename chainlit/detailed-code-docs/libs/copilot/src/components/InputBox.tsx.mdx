---
title: "InputBox.tsx"
---

## High-level description
This code defines an `InputBox` component for a chat interface. It handles user input, file uploads, and message submission in a React-based application using Recoil for state management and Material-UI for styling.

## Code Structure
The `InputBox` component is the main export. It uses various hooks and components to manage user input, file uploads, and message submission. The component renders a `ScrollDownButton` when auto-scroll is disabled and an `Input` component for user interaction.

## References
- `@chainlit/app/src/components/atoms/buttons/scrollDownButton`
- `@chainlit/app/src/state/chat`
- `@chainlit/app/src/state/userInputHistory`
- `@chainlit/react-client`

## Symbols

### `InputBox`
#### Description
A memoized React component that renders the input box for the chat interface.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fileSpec | FileSpec | Specification for file uploads |
| onFileUpload | (payload: File[]) =&gt; void | Callback for file upload |
| onFileUploadError | (error: string) =&gt; void | Callback for file upload errors |
| setAutoScroll | (autoScroll: boolean) =&gt; void | Function to set auto-scroll state |
| autoScroll | boolean | Current auto-scroll state |

#### Internal Logic
1. Uses various hooks to manage state and interactions.
2. Defines `onSubmit` and `onReply` callbacks for handling message submission.
3. Renders a `ScrollDownButton` when auto-scroll is disabled.
4. Renders an `Input` component with necessary props for user interaction.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| recoil | State management |
| uuid | Generating unique IDs |
| @mui/material | UI components |
| @chainlit/app | Various components and state management |
| @chainlit/react-client | Authentication and chat interaction hooks |

## Error Handling
The component doesn't implement specific error handling beyond passing the `onFileUploadError` prop to the `Input` component.

## Performance Considerations
The component is memoized using `React.memo` to prevent unnecessary re-renders. It also uses `useCallback` for the `onSubmit` and `onReply` functions to maintain referential equality across renders.