---
title: "Input.tsx"
---

## High-level description
This code defines a React component called `Input` that renders an input box for a chat interface. It includes functionality for submitting messages, handling file uploads, and managing attachments. The component is designed to be used within a larger chat application and integrates with various state management and UI libraries.

## Code Structure
The `Input` component is the main export of this file. It uses several hooks and sub-components to manage its state and render its UI. The component is wrapped with `memo` for performance optimization. It interacts with global state using Recoil and utilizes Material-UI components for the UI.

## Symbols

### `Input`
#### Description
A React component that renders an input box for a chat interface. It handles user input, file attachments, and message submission.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fileSpec | FileSpec | Specification for file uploads |
| onFileUpload | (payload: File[]) =&gt; void | Callback for file upload |
| onFileUploadError | (error: string) =&gt; void | Callback for file upload errors |
| onSubmit | (message: string, attachments?: IAttachment[]) =&gt; void | Callback for message submission |
| onReply | (message: string) =&gt; void | Callback for replying to a message |

#### Internal Logic
1. Manages local state for input value and composition status.
2. Handles key presses for submission and history navigation.
3. Renders a text input field with various buttons for actions like file upload and settings.
4. Manages attachments and displays them above the input field.
5. Handles paste events for file uploads.
6. Focuses the input field when appropriate.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| recoil | State management |
| @mui/material | UI components |
| @chainlit/app | Custom components and hooks |
| @chainlit/react-client | Chat data and interaction hooks |

## Configuration
The component uses various configuration options from the chat settings and file specifications. These are passed as props or accessed through hooks.

## Error Handling
Error handling for file uploads is delegated to the `onFileUploadError` callback prop.

## Performance Considerations
The component is wrapped with `memo` to prevent unnecessary re-renders. It also uses `useCallback` for memoizing functions to optimize performance.