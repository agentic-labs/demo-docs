---
title: "app.tsx"
---

## High-level description
This code defines a React component `App` that serves as the main application wrapper for a widget-based interface. It handles theme configuration, internationalization, and renders the main widget component with appropriate context and styling.

## Code Structure
The `App` component uses various hooks and context providers to set up the application state and render the widget. It interacts with the `WidgetContext`, `ChainlitContext`, and various Material-UI components to create a themed and internationalized user interface.

## References
- `WidgetContext` from 'context'
- `Widget` component from 'widget'
- Various components and utilities from '@chainlit/app' and '@chainlit/react-client'
- Material-UI components and theming utilities

## Symbols

### `App`
#### Description
The main component that sets up the application environment and renders the widget.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| widgetConfig | IWidgetConfig | Configuration object for the widget |

#### Internal Logic
1. Sets up various states and contexts using hooks.
2. Configures the access token when it changes.
3. Sets up the theme based on the widget configuration and project settings.
4. Configures internationalization by fetching and applying translations.
5. Renders the `ThemeProvider` with the configured theme, a `Toaster` for notifications, and the main `Widget` component.

### `useEffect` for access token
#### Description
Sets the access token when the `widgetConfig.accessToken` changes.

### `useEffect` for theme and i18n setup
#### Description
Configures the theme and sets up internationalization when the config is available.

## Side Effects
- Modifies the global `window.theme` object.
- Changes the application's language using i18n.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| recoil | State management |
| sonner | Toast notifications |
| @mui/material | UI components and theming |
| @chainlit/app | Various utilities and components |
| @chainlit/react-client | API client and hooks |

## Configuration
The component uses the `IWidgetConfig` interface for configuration options, which includes properties like `chainlitServer`, `theme`, `fontFamily`, and others.

## Error Handling
The component includes basic error logging for issues with fetching translations.

## Performance Considerations
The component uses `useEffect` hooks to manage side effects and avoid unnecessary re-renders. It also conditionally renders based on the availability of the configuration and theme.