---
title: "content.spec.tsx"
---

## High-level description
This file contains unit tests for the `MessageContent` component, which is responsible for rendering message content in a chat-like interface. The tests focus on verifying the correct rendering of message content, highlighting of sources, and handling of special characters in source names.

## Symbols

### `it('renders the message content', ...)`
#### Description
This test verifies that the `MessageContent` component correctly renders the given message content.

#### Internal Logic
1. Renders the `MessageContent` component with a simple message.
2. Checks if the rendered output contains the expected text.

### `it('highlights multiple sources correctly (no substring matching)', ...)`
#### Description
This test ensures that the `MessageContent` component correctly highlights multiple sources in the message content without substring matching issues.

#### Internal Logic
1. Renders the `MessageContent` component with a message containing multiple sources.
2. Verifies that each source is rendered as a link in the document.

### `it('highlights sources containing regex characters correctly', ...)`
#### Description
This test checks if the `MessageContent` component can correctly highlight sources that contain special regex characters.

#### Internal Logic
1. Renders the `MessageContent` component with a message containing sources with special characters.
2. Verifies that each source with special characters is rendered as a link in the document.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @testing-library/react | Provides utilities for testing React components |
| vitest | Testing framework used for running the tests |
| components/molecules/messages/components/MessageContent | The component being tested |
| client-types/ | Provides type definitions used in the tests |

## Notes
1. There is a commented-out test case at the end of the file. This test appears to be for checking if the component preserves box size when collapsing, but it's currently disabled.
2. The tests make use of the `render` function from `@testing-library/react` to render the `MessageContent` component.
3. The `toBeInTheDocument` matcher is used to check if elements are present in the rendered output.
4. The tests use mock data to simulate different scenarios for the `MessageContent` component.

## References
The tests reference the `MessageContent` component, which is defined in `frontend/src/components/molecules/messages/components/MessageContent.tsx`. This component handles the rendering of message content, including input and output, and supports features like collapsing long content and highlighting sources.

The tests also use the `ITextElement` type from `libs/react-client/src/types/element.ts`, which defines the structure of text elements used in the messages.