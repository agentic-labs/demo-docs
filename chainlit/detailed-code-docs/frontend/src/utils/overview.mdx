---
title: "Overview"
---

## High-level description
The `frontend/src/utils` directory contains utility functions that provide essential functionality for processing messages, manipulating objects, and handling routing in the frontend application. These utilities are designed to be reusable across different components and modules of the application.

## What does it do?
This directory houses three main utility files:

1. `message.ts`: Processes and prepares message content for display in a chat or messaging application. It handles formatting, code highlighting, and management of inline and reference elements within messages.

2. `omit.ts`: Provides a function to create a new object by excluding specified properties from an existing object. This is particularly useful for managing component props or API payloads.

3. `router.ts`: Contains a function to retrieve the base path for the application's router, which is crucial for correct routing and API request handling, especially when the app is not hosted at the root of a domain.

## Key Files

### message.ts
This file exports a `prepareContent` function that processes message elements, formats code blocks, and handles inline and reference elements. It uses helper functions like `isForIdMatch` and `escapeRegExp` to achieve its functionality. The main steps include:

1. Creating a regular expression from element names
2. Sorting element names by length
3. Processing content by replacing element references with appropriate formatting
4. Handling inline and reference elements separately
5. Applying code block formatting if a language is specified

Example usage:
```typescript
const { preparedContent, inlinedElements, refElements } = prepareContent(elements, content, id, language);
```

### omit.ts
This file exports an `omit` function that creates a new object by copying all properties from the input object except for the specified properties. It's particularly useful when working with component props or API payloads.

Example usage:
```typescript
const newObject = omit(originalObject, 'propertyToOmit1', 'propertyToOmit2');
```

### router.ts
This file contains a `getRouterBasename` function that retrieves the base path for the router by looking for a specific meta tag in the HTML document. This function is crucial for ensuring correct routing and API request handling.

Example usage:
```typescript
const basename = getRouterBasename();
```

## Dependencies
The utilities in this directory primarily rely on TypeScript and the browser's DOM API. They don't explicitly import external libraries, but they do use types from other parts of the application, such as `IMessageElement` from 'client-types/'.

## Configuration
While there are no explicit configuration files in this directory, the `router.ts` utility relies on a meta tag in the HTML document with the property "og:root_path" to determine the router's base name. This can be considered a form of configuration that affects the behavior of the routing utility.

```html
&lt;meta property="og:root_path" content="/app-base-path"&gt;
```

These utility functions play a crucial role in the application's functionality, providing essential services for message processing, object manipulation, and routing. They are designed to be efficient and reusable, contributing to the overall maintainability and performance of the frontend application.