---
title: "query.ts"
---

## High-level description
This code defines a custom React hook called `useQuery` that provides an easy way to access and parse URL query parameters in a React application. It utilizes the `useLocation` hook from `react-router-dom` and the `useMemo` hook from React to efficiently create and memoize a `URLSearchParams` object.

## Symbols

### `useQuery`
#### Description
`useQuery` is a custom React hook that returns a memoized `URLSearchParams` object, allowing efficient access to URL query parameters.

#### Inputs
This hook doesn't take any direct inputs, but it internally uses the `useLocation` hook from `react-router-dom`.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| URLSearchParams object | URLSearchParams | A memoized object that provides methods to read URL query parameters |

#### Internal Logic
1. The hook uses `useLocation` to get the current location object, destructuring the `search` property.
2. It then uses `useMemo` to create and memoize a new `URLSearchParams` object from the `search` string.
3. The memoized value is only recalculated when the `search` string changes, optimizing performance by avoiding unnecessary recalculations.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | For using the `useMemo` hook |
| react-router-dom | For using the `useLocation` hook |

## Usage Examples
Based on the related code snippets provided, we can see how `useQuery` is used in different parts of the application:

1. In `AuthCallback.tsx`:
   ```typescript
   const query = useQuery();
   const token = query.get('access_token');
   ```
   Here, `useQuery` is used to extract the `access_token` from the URL query parameters.

2. In `Login.tsx`:
   ```typescript
   const query = useQuery();
   setError(query.get('error') || '');
   ```
   In this case, `useQuery` is used to check for an `error` parameter in the URL.

3. In `Element.tsx`:
   ```typescript
   const query = useQuery();
   const threadId = query.get('thread');
   ```
   Here, `useQuery` is used to get the `thread` parameter from the URL.

These examples demonstrate how `useQuery` provides a convenient way to access URL query parameters across different components in the application, enhancing code readability and maintainability.