---
title: "router.tsx"
---

## High-level description
This code defines the routing configuration for a React application using React Router. It sets up various routes and their corresponding components, including a home page, environment settings, thread view, element view, login page, and authentication callback.

## Code Structure
The code imports necessary components and functions, then exports a `router` object created using `createBrowserRouter`. This router object contains an array of route configurations and uses a custom basename obtained from the `getRouterBasename` function.

## References
- Various page components (`Home`, `Env`, `Thread`, `Element`, `Login`, `AuthCallback`)
- `getRouterBasename` function from 'utils/router'
- React Router components and functions

## Symbols

### `router`
#### Description
The main router configuration object created using `createBrowserRouter`. It defines the application's routes and their corresponding components.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| routes | Array of route objects | Defines the paths and components for each route |
| options | Object | Configuration options for the router |

#### Internal Logic
1. Defines routes for various pages (Home, Env, Thread, Element, Login, AuthCallback)
2. Sets up a catch-all route that redirects to the home page
3. Uses `getRouterBasename()` to set the router's basename

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react-router-dom | Provides routing functionality for the React application |

## Configuration
The router's basename is configured using the `getRouterBasename()` function, which retrieves the root path from a meta tag in the HTML document.

## API/Interface Reference
| Route | Component | Description |
|:------|:----------|:------------|
| / | Home | Renders the home page |
| /env | Env | Renders the environment settings page |
| /thread/:id? | Thread | Renders the thread view, with an optional ID parameter |
| /element/:id | Element | Renders the element view with a required ID parameter |
| /login | Login | Renders the login page |
| /login/callback | AuthCallback | Handles authentication callback |
| * | Navigate | Redirects all other routes to the home page |

This router configuration sets up the main structure of the application, defining how different URLs should be handled and which components should be rendered for each route.