---
title: "AppWrapper.tsx"
---

## High-level description
AppWrapper is a React component that serves as a wrapper for the main App component. It handles authentication, language settings, and routing for the application. The component ensures that unauthenticated users are redirected to the login page and manages language translations for the app.

## Code Structure
The AppWrapper component uses several custom hooks (useAuth, useConfig, useApi) and the react-i18next library for internationalization. It checks the authentication status and handles language changes based on the configured language.

## Symbols

### AppWrapper
#### Description
The main functional component that wraps the App component and manages authentication and language settings.

#### Internal Logic
1. Checks authentication status using `useAuth` hook.
2. Retrieves language configuration using `useConfig` hook.
3. Fetches translations using `useApi` hook.
4. Redirects unauthenticated users to the login page if necessary.
5. Updates language resources when translations are available.
6. Renders the main App component when authentication is ready.

### handleChangeLanguage
#### Description
A function that updates the language resources and changes the current language.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| languageBundle | any | The language resource bundle to be added |

#### Internal Logic
1. Adds the provided language bundle to the i18n resources.
2. Changes the current language to the one specified in the configuration.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| react-i18next | Internationalization library for React |
| @chainlit/react-client | Custom hooks for authentication, API calls, and configuration |

## References
- `App`: The main application component that is wrapped by AppWrapper.
- `getRouterBasename`: A utility function to get the base path for routing.

## Side Effects
- Redirects the user to the login page if not authenticated.
- Updates the language resources and changes the current language.

## Performance Considerations
The component uses the `useEffect` hook to handle language changes, which ensures that translations are only updated when necessary, avoiding unnecessary re-renders.

## Error Handling
The component doesn't implement explicit error handling. However, it uses the `useApi` hook, which likely handles API-related errors internally.

## Notes
- The component relies heavily on custom hooks from the @chainlit/react-client library, which abstracts away much of the authentication and configuration logic.
- The language change logic is triggered whenever new translations are fetched, allowing for dynamic language updates.
- The component renders null if the authentication is not ready, preventing the main App from rendering until authentication is complete.