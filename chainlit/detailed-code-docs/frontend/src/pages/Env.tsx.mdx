---
title: "Env.tsx"
---

## High-level description
This code defines a React component for an environment configuration page. It allows users to input and save required API keys or other environment variables, which are then stored locally and in the application state.

## Code Structure
The main component `Env` uses various hooks and libraries to manage form state, navigation, and translations. It renders a form with input fields for each required environment variable and handles form submission.

## References
- `useConfig` hook from '@chainlit/react-client'
- `TextInput` component from 'components/atoms/inputs/TextInput'
- `Translator` and `useTranslation` from 'components/i18n/Translator'
- `Header` component from 'components/organisms/header'
- `useLayoutMaxWidth` hook from 'hooks/useLayoutMaxWidth'
- `userEnvState` from 'state/user'

## Symbols

### Env
#### Description
The main functional component that renders the environment configuration page.

#### Internal Logic
1. Retrieves the current user environment and configuration.
2. Sets up form validation schema and initial values based on required keys.
3. Handles form submission, saving values to localStorage and updating the application state.
4. Renders input fields for each required key and a submit button.

### useFormik
#### Description
A hook from the Formik library used to manage form state and validation.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| initialValues | object | Initial form values |
| validationSchema | object | Yup schema for form validation |
| onSubmit | function | Function to handle form submission |

### renderInput
#### Description
A helper function that renders a `TextInput` component for each required environment variable.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| key | string | The name of the environment variable |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| component | JSX.Element | A TextInput component |

## Side Effects
- Updates localStorage with new environment variables on form submission.
- Updates the `userEnvState` Recoil atom on form submission.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| formik | Form state management and validation |
| react-router-dom | Navigation |
| recoil | State management |
| sonner | Toast notifications |
| yup | Schema validation |
| @mui/material | UI components |
| @chainlit/react-client | Configuration hook |

## Error Handling
Form validation errors are handled by Formik and displayed in the TextInput components.

## Logging
The code uses the `toast.success` function to display a success message when the form is submitted successfully.