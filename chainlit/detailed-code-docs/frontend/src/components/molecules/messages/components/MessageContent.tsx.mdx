---
title: "MessageContent.tsx"
---

## High-level description
The `MessageContent` component is responsible for rendering the content of a message in a chat-like interface. It handles both input and output content, supports markdown rendering, and manages the display of inlined elements and references. The component also implements a collapsible feature for long messages.

## Code Structure
The main `MessageContent` component is a memoized functional component that processes the message content, prepares it for rendering, and handles the display of various elements such as markdown, inlined elements, and collapsible sections.

## Symbols

### `MessageContent`
#### Description
This is the main component that renders the content of a message. It processes the input and output content, applies markdown formatting, and handles the display of inlined elements and references.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| message | IStep | The message object containing input, output, and other properties |
| elements | IMessageElement[] | Array of message elements to be processed and displayed |
| preserveSize | boolean | Optional flag to preserve the size of the content when collapsing |
| allowHtml | boolean | Optional flag to allow HTML rendering in markdown |
| latex | boolean | Optional flag to enable LaTeX rendering |

#### Internal Logic
1. Processes the message content using the `prepareContent` utility function.
2. Determines if the content should be collapsed based on line count and content length.
3. Renders input and output markdown content separately.
4. Applies collapsible functionality if the content exceeds the specified limits.
5. Renders inlined elements using the `InlinedElements` component.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| react | Core React library |
| @mui/material | Material-UI components for styling |
| utils/message | Utility function for preparing message content |
| components/atoms/Collapse | Collapsible component for long messages |
| components/atoms/elements/InlinedElements | Component for rendering inlined elements |
| components/molecules/BlinkingCursor | Component for rendering a blinking cursor |
| components/molecules/Markdown | Component for rendering markdown content |

## Configuration
| Option | Type | Default | Description |
|:-------|:-----|:--------|:------------|
| COLLAPSE_MIN_LINES | number | 50 | Maximum number of lines before collapsing content |
| COLLAPSE_MIN_LENGTH | number | 3000 | Maximum number of characters before collapsing content |

## TODOs
There are no explicit TODOs in the code.