---
title: "Message.tsx"
---

## High-level description
This code defines a React component called `Message` that renders different types of messages (user, assistant, or step) in a chat-like interface. It handles various message types, nested messages, and includes features like avatars, content collapsing, and action buttons.

## Code Structure
The main `Message` component is a memoized functional component that renders different message types based on the `message` prop. It uses several sub-components like `MessageAvatar`, `MessageContent`, `MessageActions`, and `MessageButtons` to compose the full message display. The component also handles nested messages and steps recursively.

## Symbols

### `Message`
#### Description
The main component that renders a message in the chat interface. It handles different message types and layouts based on the input props.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| message | IStep | The message object to be rendered |
| showAvatar | boolean | Whether to show the avatar (default: true) |
| elements | IMessageElement[] | Array of message elements |
| actions | IAction[] | Array of actions for the message |
| isRunning | boolean | Indicates if the message is currently running |
| indent | number | Indentation level for nested messages |
| isScorable | boolean | Indicates if the message can be scored |
| scorableRun | IStep | The scorable run associated with the message |

#### Internal Logic
1. Determines the message type (user, assistant, or step).
2. Applies conditional rendering based on the message type and configuration.
3. Handles nested messages and steps recursively.
4. Applies styling and animations for highlighted messages.

### `MessageContent`
#### Description
A sub-component that renders the actual content of the message, including input and output.

### `MessageAvatar`
#### Description
Renders the avatar for the message author.

### `MessageActions`
#### Description
Renders action buttons associated with the message.

### `MessageButtons`
#### Description
Renders buttons for message-related actions like copying content or providing feedback.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @emotion/react | For styling and animations |
| @mui/material | UI components |
| @chainlit/react-client | Custom hooks and utilities |
| react | Core React library |

## Configuration
The component uses various configuration options from the `MessageContext` and `useConfig` hook, such as `allowHtml`, `latex`, and UI settings.

## Error Handling
Error handling is not explicitly implemented in this component. It relies on the error handling mechanisms of its sub-components and the overall application structure.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.