---
title: "UploadButton.tsx"
---

## High-level description
This code defines a React component called `UploadButton` that renders a button for file uploads. It integrates with the `useUpload` hook and Material-UI components to provide a user-friendly interface for attaching files in a chat or messaging context.

## Code Structure
The main component `UploadButton` uses several hooks and components:
- `useUpload`: A custom hook for handling file uploads
- `useConfig`: A hook to access the application configuration
- `useMediaQuery`: A Material-UI hook for responsive design
- Various Material-UI components for UI elements

## Symbols

### UploadButton
#### Description
A functional component that renders a file upload button with a tooltip.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| disabled | boolean | Optional. If true, the button is disabled |
| fileSpec | FileSpec | Specifies file upload constraints |
| onFileUpload | function | Callback function when files are uploaded |
| onFileUploadError | function | Callback function when an error occurs during upload |

#### Internal Logic
1. Uses `useConfig` to get the application configuration.
2. Initializes the `useUpload` hook with the provided specifications and callbacks.
3. Determines the button size based on the screen size using `useMediaQuery`.
4. Renders nothing if upload is not available or not enabled in the config.
5. Renders an `IconButton` wrapped in a `Tooltip`, using the `getRootProps` and `getInputProps` from the upload hook.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| @mui/material | UI components and theming |
| @chainlit/react-client | Configuration and file specification types |
| react-dropzone | File upload functionality (via useUpload hook) |

## Error Handling
Error handling is delegated to the `onFileUploadError` prop, which is passed to the `useUpload` hook.

## Performance Considerations
The component uses `useMediaQuery` for responsive design, which may have a slight performance impact on re-renders when the screen size changes.