---
title: "input.tsx"
---

## High-level description
This code defines a React component called `Input` that renders a chat input box with various features such as file attachments, speech-to-text, and input history. It handles user input, file uploads, and submission of messages in a chat interface.

## Code Structure
The main `Input` component is a memo-ized functional component that uses various React hooks and Recoil state management. It integrates with other components like `HistoryButton`, `UploadButton`, `MicButton`, and `SubmitButton` to provide a comprehensive input experience.

## Symbols

### Input
#### Description
The main component that renders the chat input box with various features.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| fileSpec | FileSpec | Specification for file uploads |
| onFileUpload | (payload: File[]) =&gt; void | Callback for file upload |
| onFileUploadError | (error: string) =&gt; void | Callback for file upload errors |
| onSubmit | (message: string, attachments?: IAttachment[]) =&gt; void | Callback for submitting a message |
| onReply | (message: string) =&gt; void | Callback for replying to a message |

#### Internal Logic
1. Manages state for input value, attachments, and composition status.
2. Handles key presses for submission and history navigation.
3. Manages focus and disabled states based on various conditions.
4. Renders TextField with custom input and output adorments.
5. Handles paste events for text and file data.

## Side Effects
- Focuses the input field when not loading or disabled.
- Listens for paste events to handle file uploads.

## Dependencies
The component relies on various external libraries and internal modules:
- React and its hooks
- Recoil for state management
- Material-UI components
- Custom components like HistoryButton, UploadButton, MicButton, and SubmitButton
- Translation utilities

## Configuration
The component uses various configuration options from the chat settings and file specifications.

## Error Handling
Error handling is primarily delegated to the parent component through callback functions like `onFileUploadError`.

## Performance Considerations
- The component is memoized to prevent unnecessary re-renders.
- It uses `useCallback` for function memoization to optimize performance.

This component serves as a central part of the chat interface, handling user input and integrating various features to enhance the chat experience.