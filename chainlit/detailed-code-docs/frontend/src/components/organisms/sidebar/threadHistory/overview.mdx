---
title: "Overview"
---

## High-level description
This directory contains components and logic for managing and displaying a thread history sidebar in a chat application. It includes functionality for listing threads, filtering and searching through them, and deleting individual threads.

## What does it do?
The thread history sidebar allows users to:
1. View a list of their past chat threads, grouped by time periods (Today, Yesterday, Previous 7 days, Previous 30 days).
2. Search for specific threads using a text input.
3. Filter threads based on feedback (positive, negative, or all).
4. Navigate between different threads.
5. Delete individual threads with a confirmation dialog.
6. Load more threads as the user scrolls down the list.

The sidebar provides an intuitive interface for users to manage their chat history, quickly find relevant conversations, and clean up their thread list as needed.

## Entry points
The main entry point for this feature is the `index.tsx` file, which exports the `ThreadHistory` component. This component orchestrates the overall functionality of the thread history sidebar, including:

- Fetching and managing thread data
- Handling pagination and scrolling
- Rendering the filters and thread list

The data flow in this feature is primarily top-down:
1. The `ThreadHistory` component fetches and manages the thread data.
2. It passes this data to the `ThreadList` component for rendering.
3. User interactions (like searching or filtering) update the Recoil state, which triggers re-fetching and re-rendering of the thread list.

## Key Files
1. `ThreadList.tsx`: Renders the list of threads, grouped by time periods. It handles thread selection and deletion.

2. `Thread.tsx`: Represents an individual thread in the list. It manages the display of thread messages and feedback handling.

3. `DeleteThreadButton.tsx`: Provides functionality for deleting a thread, including a confirmation dialog and error handling.

4. `filters/index.tsx`: Combines the search bar and feedback selection components into a single filter interface.

5. `filters/SearchBar.tsx`: Implements a debounced search input for finding specific threads.

6. `filters/FeedbackSelect.tsx`: Provides a dropdown for filtering threads based on feedback.

## Dependencies
The components in this directory rely on several external libraries:

1. React (v18.2.0 or compatible): Core library for building the user interface.
2. Recoil (v0.7.7 or compatible): State management library for handling global application state.
3. Material-UI (v5.x): React component library for consistent and customizable UI elements.
4. react-router-dom: For handling navigation between threads.
5. @chainlit/react-client: Custom library providing chat-related hooks and utilities.
6. i18next: Internationalization framework for supporting multiple languages.
7. Lodash: Utility library, used for functions like debounce and efficient data manipulation.

These libraries were chosen to provide a robust, efficient, and maintainable solution for building complex UI components with state management, routing, and internationalization support.

## Configuration
While there are no specific configuration files in this directory, the components interact with global Recoil states that need to be properly set up in the application:

1. `threadHistoryState`: Manages the current thread history data.
2. `accessTokenState`: Stores the user's access token for API requests.
3. `threadsFiltersState`: Handles the current filter settings for the thread list.

Additionally, the internationalization keys used in these components should be defined in the application's translation files. Some key prefixes include:

- `components.organisms.threadHistory.sidebar.filters`
- `components.organisms.sidebar.threadHistory`

Ensure that these keys are properly defined in your translation files for all supported languages to maintain a fully localized user interface.

The components in this directory are designed to be flexible and reusable, allowing for easy integration into the larger chat application structure. They provide a comprehensive solution for managing and displaying chat thread history, enhancing the overall user experience of the application.