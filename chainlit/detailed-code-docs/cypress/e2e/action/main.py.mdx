---
title: "main.py"
---

## High-level description
This code defines a Chainlit application with various action callbacks and a chat start function. It demonstrates the usage of Chainlit's action system, including creating, sending, and removing actions, as well as handling user interactions with these actions.

## Code Structure
The code is structured with several action callback functions and a main chat start function. The action callbacks handle different types of actions, while the main function sets up the initial message with multiple actions and an ask action message.

## Symbols

### `on_action()` (for "test action")
#### Description
This function is an action callback for the "test action". It sends a message confirming the execution of the test action.

#### Inputs
None

#### Outputs
None

#### Internal Logic
The function sends a message with the content "Executed test action!" using the `cl.Message` class.

### `on_action()` (for "removable action")
#### Description
This function is an action callback for the "removable action". It sends a message confirming the execution and then removes the action.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| action | cl.Action | The action object that triggered the callback |

#### Outputs
None

#### Internal Logic
1. Sends a message confirming the execution of the removable action.
2. Removes the action using the `action.remove()` method.

### `on_action()` (for "multiple actions")
#### Description
This function is an action callback for "multiple actions". It sends a message with the action ID and removes the action.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| action | cl.Action | The action object that triggered the callback |

#### Outputs
None

#### Internal Logic
1. Sends a message with the action ID.
2. Removes the action using the `action.remove()` method.

### `on_action()` (for "all actions removed")
#### Description
This function is an action callback for "all actions removed". It sends a message confirming all actions have been removed and then removes all actions from a stored message.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| _ | cl.Action | The action object (unused in this function) |

#### Outputs
None

#### Internal Logic
1. Sends a message confirming all actions have been removed.
2. Retrieves a stored message from the user session.
3. Removes all actions from the retrieved message using `remove_actions()`.

### `main()`
#### Description
This is the main function that runs on chat start. It sets up the initial message with multiple actions and sends an ask action message.

#### Inputs
None

#### Outputs
None

#### Internal Logic
1. Creates a list of `cl.Action` objects with various configurations.
2. Sends an initial message with all the created actions.
3. Stores the message in the user session for later reference.
4. Sends an `AskActionMessage` with two actions for the user to choose from.
5. If the user selects an action, it sends a confirmation message with the selected action's value.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| chainlit | The main library used for creating the chat application and handling actions |

## API/Interface Reference
| Endpoint | Method | Request | Response | Description |
|:---------|:-------|:--------|:---------|:------------|
| @cl.action_callback | Decorator | - | - | Registers a function as an action callback |
| @cl.on_chat_start | Decorator | - | - | Registers a function to run when a chat session starts |

This code demonstrates the use of Chainlit's action system, showcasing various ways to create, handle, and remove actions in a chat application. It provides examples of different action configurations and how to respond to user interactions with these actions.