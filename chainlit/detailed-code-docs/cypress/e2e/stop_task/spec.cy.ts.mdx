---
title: "spec.cy.ts"
---

## High-level description
This Cypress test file (`spec.cy.ts`) defines a test suite for the "Stop task" functionality. It verifies that a user can stop a task in progress and that the UI updates accordingly.

## Code Structure
The test suite uses utility functions from `testUtils.ts` to set up the test environment and interact with the application. It defines a single test case that checks the behavior of stopping a task.

## References
- `../../support/testUtils`: Imports utility functions for test setup and interaction.

## Symbols

### `describeSyncAsync('Stop task', (mode) =&gt; {...})`
#### Description
This function creates two test suites, one for synchronous and one for asynchronous execution modes, both testing the "Stop task" functionality.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| mode | ExecutionMode | The execution mode (sync or async) passed to the test suite |

#### Internal Logic
1. Sets up the test server before running the tests.
2. Defines a single test case for stopping a task.

### `it('should be able to stop a task', () =&gt; {...})`
#### Description
This test case verifies that a user can stop a task and that the UI updates correctly.

#### Internal Logic
1. Submits a message to start a task.
2. Clicks the stop button and verifies it disappears.
3. Waits for 1 second.
4. Checks that there are 3 steps in the task progress.
5. Verifies that the last step indicates the task was manually stopped.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| Cypress | End-to-end testing framework |

## Error Handling
This test file does not implement explicit error handling. It relies on Cypress's built-in assertion and error reporting mechanisms.

## Performance Considerations
The test includes a 1-second wait after clicking the stop button. This might need adjustment based on the application's actual response time to ensure test reliability.