---
title: "utils.ts"
---

## High-level description
This code provides utility functions and constants for running Cypress end-to-end tests for a Chainlit application. It includes functions for executing commands, running tests, and defines important constants and enums used across the testing framework.

## Code Structure
The code defines several constants, an enum, and two main functions: `runTests` and `runCommand`. These are used to set up the testing environment and execute Cypress tests.

## Symbols

### `ROOT`
#### Description
Represents the root directory of the project.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ROOT | string | The current working directory path |

### `E2E_DIR`
#### Description
Represents the directory containing end-to-end tests.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| E2E_DIR | string | The path to the Cypress e2e test directory |

### `BACKEND_DIR`
#### Description
Represents the directory containing the backend code.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| BACKEND_DIR | string | The path to the backend directory |

### `CHAINLIT_PORT`
#### Description
Defines the port number on which the Chainlit server runs.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| CHAINLIT_PORT | number | The port number (8000) |

### `ExecutionMode`
#### Description
An enum defining the execution modes for the tests.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| ExecutionMode | enum | Defines 'Async' and 'Sync' execution modes |

### `runTests`
#### Description
Runs Cypress tests for a specified test name or pattern.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| matchName | string | The name or pattern to match test files |

#### Internal Logic
1. Runs a command to start the Chainlit server.
2. Executes Cypress tests matching the specified name or pattern.

### `runCommand`
#### Description
Executes a shell command synchronously.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| command | string | The command to execute |
| cwd | string | The working directory (default: ROOT) |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| output | string | The command's output |

#### Internal Logic
Uses `execSync` to run the command with UTF-8 encoding, inheriting stdio, and using the current process environment.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| child_process | For executing shell commands |
| path | For handling file paths |

## References
This utility file is referenced in:
- `cypress/support/e2e.ts`: Uses `runTests` function to execute Cypress tests.
- `cypress/support/testUtils.ts`: Imports `ExecutionMode` enum for test configuration.

These utilities form the backbone of the Cypress testing setup for the Chainlit application, providing essential functions and constants used throughout the test suite.