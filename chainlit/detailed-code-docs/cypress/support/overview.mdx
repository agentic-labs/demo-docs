---
title: "Overview"
---

## High-level description
This directory contains support files for Cypress end-to-end tests in the Chainlit project. It includes utility functions, test runners, and configuration files that facilitate the execution of tests in both synchronous and asynchronous modes. The code in this directory sets up the testing environment, manages test execution, and provides helper functions for interacting with the Chainlit chat interface.

## What does it do?
The code in this directory performs several key functions:

1. Sets up and runs the Chainlit server for testing purposes.
2. Executes Cypress tests, allowing for both synchronous and asynchronous test modes.
3. Provides utility functions for common test operations, such as submitting messages to the chat interface, opening and closing chat history, and interacting with the Copilot feature.
4. Manages environment variables and configuration settings for the test environment.
5. Offers functions to kill processes on specific ports, which is useful for ensuring a clean test environment.
6. Defines constants and enums used throughout the testing framework, such as directory paths and execution modes.

These functionalities work together to create a robust testing environment for the Chainlit application, allowing developers to write and run comprehensive end-to-end tests that simulate user interactions with the chat interface.

## Entry points
The main entry point for the Cypress tests is the `e2e.ts` file. This file sets up the environment, executes the tests based on an optional filter, and handles the process exit based on the test results. It uses the `runTests` function from the `utils.ts` file to perform the actual test execution.

The `run.ts` file provides functionality to run the Chainlit server for testing purposes. It includes the `runChainlitForTest` function, which is responsible for starting the server with the appropriate configuration.

The `testUtils.ts` file contains various utility functions that are used across different test files. These functions help with common operations like submitting messages, managing chat history, and running the test server.

The `utils.ts` file defines important constants, enums, and utility functions used throughout the testing framework. It includes the `runTests` and `runCommand` functions, which are crucial for test execution and command-line operations.

## Dependencies
The code in this directory relies on several external libraries and frameworks:

1. Cypress: The main testing framework used for end-to-end tests.
2. dotenv: Used for loading environment variables from a .env file.
3. child_process: Node.js module used for spawning child processes and executing shell commands.
4. kill-port: A library used for killing processes on specific ports (particularly on Windows).
5. path: Node.js module used for working with file paths.
6. shell-exec: Used for executing shell commands.

These dependencies are chosen to provide a comprehensive set of tools for managing the test environment, executing tests, and interacting with the system.

## Configuration
The testing framework uses several configuration options and environment variables:

1. SINGLE_TEST: An environment variable that can be set to specify a single test to run.
2. CHAINLIT_PORT: The port number on which the Chainlit server runs (default: 8000).
3. BACKEND_DIR: The directory containing the backend code.
4. E2E_DIR: The directory containing the end-to-end tests.

These configuration options allow for flexibility in test execution and environment setup, making it easier to adapt the tests to different scenarios and development environments.

In conclusion, the `cypress/support` directory provides a comprehensive set of tools and utilities for running end-to-end tests on the Chainlit application. It offers a flexible and robust testing environment that can handle both synchronous and asynchronous test execution, while providing useful helper functions for interacting with the chat interface and managing the test server.