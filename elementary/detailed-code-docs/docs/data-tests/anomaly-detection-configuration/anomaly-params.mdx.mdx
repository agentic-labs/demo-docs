---
title: "anomaly-params.mdx"
---

---
title: Anomaly Tests configuration params
sidebarTitle: "All configuration params"
---

&lt;Tip&gt;
  If your data set has a timestamp column that represents the creation time of a
  field, it is highly recommended configuring it as a `timestamp_column`.
&lt;/Tip&gt;

{/* prettier-ignore */}
&lt;pre&gt;
 &lt;code&gt;
  All anomaly detection tests:
   -- &lt;a href="/data-tests/anomaly-detection-configuration/timestamp-column"&gt;&lt;font color="#CD7D55"&gt;timestamp_column: column name&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/where-expression"&gt;&lt;font color="#CD7D55"&gt;where_expression: sql expression&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/anomaly-sensitivity"&gt;&lt;font color="#CD7D55"&gt;anomaly_sensitivity: int&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/anomaly-direction"&gt;&lt;font color="#CD7D55"&gt;anomaly_direction: [both | spike | drop]&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/ignore_small_changes"&gt;&lt;font color="#CD7D55"&gt;ignore_small_changes:&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/ignore_small_changes"&gt;&lt;font color="#CD7D55"&gt;spike_failure_percent_threshold: int&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/ignore_small_changes"&gt;&lt;font color="#CD7D55"&gt;drop_failure_percent_threshold: int&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/anomaly-exclude-metrics"&gt;&lt;font color="#CD7D55"&gt;anomaly_exclude_metrics: [SQL expression]&lt;/font&gt;&lt;/a&gt;

  Anomaly detection tests with timestamp_column:
   -- &lt;a href="/data-tests/anomaly-detection-configuration/training-period"&gt;&lt;font color="#CD7D55"&gt;training_period: int&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/training-period"&gt;&lt;font color="#CD7D55"&gt;period: [hour | day | week | month]&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/training-period"&gt;&lt;font color="#CD7D55"&gt;count: int&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/detection-period"&gt;&lt;font color="#CD7D55"&gt;detection_period: int&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/detection-period"&gt;&lt;font color="#CD7D55"&gt;period: [hour | day | week | month]&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/detection-period"&gt;&lt;font color="#CD7D55"&gt;count: int&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/time-bucket"&gt;&lt;font color="#CD7D55"&gt;time_bucket:&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/time-bucket"&gt;&lt;font color="#CD7D55"&gt;period: [hour | day | week | month]&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/time-bucket"&gt;&lt;font color="#CD7D55"&gt;count: int&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/seasonality"&gt;&lt;font color="#CD7D55"&gt;seasonality: day_of_week&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/detection-delay"&gt;&lt;font color="#CD7D55"&gt;detection_delay:&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/detection-delay"&gt;&lt;font color="#CD7D55"&gt;period: [hour | day | week | month]&lt;/font&gt;&lt;/a&gt;
        &nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="/data-tests/anomaly-detection-configuration/detection-delay"&gt;&lt;font color="#CD7D55"&gt;count: int&lt;/font&gt;&lt;/a&gt;

  dimension_anomalies, column_anomalies, all_columns_anomalies tests: 
   -- &lt;a href="/data-tests/anomaly-detection-configuration/dimensions"&gt;&lt;font color="#CD7D55"&gt;dimensions: sql expression&lt;/font&gt;&lt;/a&gt;

  volume_anomalies test:
   -- &lt;a href="/data-tests/anomaly-detection-configuration/fail_on_zero"&gt;&lt;font color="#CD7D55"&gt;fail_on_zero: [true | false]&lt;/font&gt;&lt;/a&gt;

  all_columns_anomalies test:
   -- &lt;a href="/data-tests/anomaly-detection-configuration/column-anomalies"&gt;&lt;font color="#CD7D55"&gt;column_anomalies: column monitors list&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/exclude_prefix"&gt;&lt;font color="#CD7D55"&gt;exclude_prefix: string&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/exclude_regexp"&gt;&lt;font color="#CD7D55"&gt;exclude_regexp: regex&lt;/font&gt;&lt;/a&gt;

  dimension_anomalies test:
   -- &lt;a href="/data-tests/anomaly-detection-configuration/exclude_final_results"&gt;&lt;font color="#CD7D55"&gt;exclude_final_results: [SQL where expression on fields value / average]&lt;/font&gt;&lt;/a&gt;

  event_freshness_anomalies:
   -- &lt;a href="/data-tests/anomaly-detection-configuration/event_timestamp_column"&gt;&lt;font color="#CD7D55"&gt;event_timestamp_column: column name&lt;/font&gt;&lt;/a&gt;
   -- &lt;a href="/data-tests/anomaly-detection-configuration/update_timestamp_column"&gt;&lt;font color="#CD7D55"&gt;update_timestamp_column: column name&lt;/font&gt;&lt;/a&gt;
 &lt;/code&gt;
&lt;/pre&gt;

## Example configurations

&lt;CodeGroup&gt;

```yml properties.yml
version: 2

models:
  - name: &lt;model_name&gt;
    config:
      elementary:
        timestamp_column: &lt; model timestamp column &gt;
    tests: &lt; here you will add elementary monitors as tests &gt;

  - name: &lt;your model with no timestamp&gt;
    ## if no timestamp is configured, elementary will monitor without time filtering
    tests: &lt;here you will add elementary monitors as tests&gt;
```

```yml Example
version: 2

models:
  - name: login_events
    config:
      elementary:
        timestamp_column: updated_at
    tests:
      - elementary.freshness_anomalies:
          tags: ["elementary"]
      - elementary.all_columns_anomalies:
          tags: ["elementary"]

  - name: users
    ## if no timestamp is configured, elementary will monitor without time filtering
    tests:
      - elementary.volume_anomalies:
          tags: ["elementary"]
```

```yml sources_properties.yml
sources:
  - name: &lt; some name &gt;
    database: &lt; database &gt;
    schema: &lt; schema &gt;
    tables:
      - name: &lt; table_name &gt;
        ## sources don't have config, so elementary config is placed under 'meta'
        meta:
          elementary:
            timestamp_column: &lt; source timestamp column &gt;
        tests: &lt;here you will add elementary monitors as tests&gt;
```

```yml Example
sources:
  - name: "my_non_dbt_table"
    database: "raw_events"
    schema: "product"
    tables:
      - name: "raw_product_login_events"
        ## sources don't have config, so elementary config is placed under 'meta'
        meta:
          elementary:
            timestamp_column: "loaded_at"
        tests:
          - elementary.volume_anomalies
          - elementary.all_columns_anomalies:
              column_anomalies:
                - null_count
                - missing_count
                - zero_count
        columns:
          - name: user_id
            tests:
              - elementary.column_anomalies
```

&lt;/CodeGroup&gt;
