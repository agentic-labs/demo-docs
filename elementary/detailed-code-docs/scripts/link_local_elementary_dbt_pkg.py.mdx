---
title: "link_local_elementary_dbt_pkg.py"
---

## High-level description
This script, `link_local_elementary_dbt_pkg.py`, is designed to create a symbolic link to a local Elementary dbt package. It replaces the existing Elementary dbt package in the CLI project with a symlink to a specified local package, facilitating development and testing of local package changes.

## Code Structure
The script consists of a main function that performs the linking operation and a conditional block to execute the main function when the script is run directly.

## References
This script references constants from the `elementary.monitor.dbt_project_utils` module, specifically `_DBT_PACKAGE_NAME` and `CLI_DBT_PROJECT_PATH`.

## Symbols

### `main()`
#### Description
The `main()` function is responsible for creating a symbolic link to a local Elementary dbt package. It replaces the existing package in the CLI project with a symlink to the specified local package.

#### Inputs
This function doesn't have explicit inputs, but it relies on command-line arguments.

#### Internal Logic
1. Checks if exactly one command-line argument (the path to the local dbt package) is provided.
2. Resolves the provided path to an absolute path.
3. Removes any existing symlink or directory at the target location.
4. Creates a new symlink pointing to the specified local package.

#### Error Handling
- Raises a `ValueError` if the correct number of command-line arguments is not provided.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| shutil | Used for removing directories |
| sys | Used for accessing command-line arguments |
| pathlib | Used for path manipulations |
| elementary.monitor.dbt_project_utils | Provides constants for package and project paths |

## Error Handling
The script implements basic error handling by checking the number of command-line arguments and raising a `ValueError` with a descriptive message if the correct number of arguments is not provided.

## Performance Considerations
This script performs file system operations, including creating and removing symlinks and directories. While these operations are generally quick, they could potentially be slower on systems with high I/O load or when dealing with large directories.

## TODOs
There are no explicit TODOs in the code.