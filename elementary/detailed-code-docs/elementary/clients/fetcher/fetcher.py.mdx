---
title: "fetcher.py"
---

## High-level description
The `FetcherClient` class in `elementary/clients/fetcher/fetcher.py` is a base class for various fetcher clients in the Elementary project. It provides a simple caching mechanism and a connection to a dbt runner, which is used to execute dbt commands and operations.

## Code Structure
The `FetcherClient` class contains a `dbt_runner` attribute and a `run_cache` attribute. It provides methods to set and get values from the cache.

## Symbols

### `FetcherClient`
#### Description
This class serves as a base for other fetcher clients in the Elementary project. It initializes with a dbt runner and provides a caching mechanism for storing and retrieving data.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dbt_runner | BaseDbtRunner | An instance of a dbt runner used to execute dbt commands |

#### Internal Logic
- Initializes the `dbt_runner` attribute with the provided dbt runner.
- Creates a `run_cache` attribute as a `defaultdict` with a default value of `None`.

### `FetcherClient.set_run_cache`
#### Description
This method sets a value in the run cache for a given key.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| key | str | The key to store the value under |
| value | Any | The value to store in the cache |

### `FetcherClient.get_run_cache`
#### Description
This method retrieves a value from the run cache for a given key.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| key | str | The key to retrieve the value for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | Any | The value stored in the cache for the given key, or None if not found |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| collections.defaultdict | Used to create the run_cache with a default value of None |
| typing | Used for type hinting |
| elementary.clients.dbt.base_dbt_runner.BaseDbtRunner | The base class for the dbt runner used in the FetcherClient |

## References
The `FetcherClient` class is used as a base class in several other fetcher implementations, including:
- `SelectorFetcher`
- `AlertsFetcher`
- `ModelsFetcher`
- `LineageFetcher`
- `SourceFreshnessesFetcher`
- `TestsFetcher`

These subclasses extend the functionality of `FetcherClient` by adding specific methods for fetching different types of data using the dbt runner.