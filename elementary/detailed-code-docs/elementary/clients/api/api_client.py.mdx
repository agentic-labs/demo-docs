---
title: "api_client.py"
---

## High-level description
This code defines the `APIClient` class, which serves as a base class for various API clients in the Elementary project. It provides a simple caching mechanism for storing and retrieving run-related data.

## Code Structure
The `APIClient` class is initialized with a `BaseDbtRunner` instance and contains methods for setting and getting cached run data.

## Symbols

### `APIClient`
#### Description
A base class for API clients that provides a simple caching mechanism.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dbt_runner | BaseDbtRunner | An instance of a dbt runner for executing dbt commands |

#### Internal Logic
- Initializes a `run_cache` using a `defaultdict` with a default value of `None`.
- Provides methods to set and get values in the cache.

### `set_run_cache`
#### Description
Sets a value in the run cache for a given key.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| key | str | The key to store the value under |
| value | Any | The value to store in the cache |

### `get_run_cache`
#### Description
Retrieves a value from the run cache for a given key.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| key | str | The key to retrieve the value for |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| value | Any | The value stored in the cache for the given key |

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| collections.defaultdict | Used to create a dictionary with a default value |
| typing | Used for type hinting |
| elementary.clients.dbt.base_dbt_runner.BaseDbtRunner | Base class for dbt runners |

## References
The `APIClient` class is used as a base class for various other API clients in the Elementary project, such as:
- `AlertsAPI`
- `ModelsAPI`
- `FiltersAPI`
- `LineageAPI`
- `ReportAPI`
- `TestsAPI`
- `InvocationsAPI`
- `SelectorAPI`
- `GroupsAPI`
- `SourceFreshnessesAPI`

These derived classes extend the functionality of `APIClient` to provide specific API implementations for different aspects of the Elementary project.