---
title: "pydantic_shim.py"
---

## High-level description
This code snippet provides a shim for importing pydantic classes, ensuring compatibility with both pydantic versions 1 and 2. It dynamically imports the necessary classes based on the installed pydantic version.

## Code Structure
The code first determines the installed pydantic version. Based on the major version (1 or 2), it imports the required classes from the corresponding pydantic module. If the major version is neither 1 nor 2, it raises a runtime error.

## Symbols
### `pydantic_version`
#### Description
This variable stores the version string of the installed pydantic library, retrieved using `importlib.metadata.version("pydantic")`.

#### Inputs
None

#### Outputs
- `pydantic_version`: string representing the installed pydantic version.

### `pydantic_major`
#### Description
This variable stores the major version number of the installed pydantic library, extracted from the `pydantic_version` string.

#### Inputs
- `pydantic_version`: string representing the installed pydantic version.

#### Outputs
- `pydantic_major`: string representing the major version number of the installed pydantic library.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| importlib.metadata | Used to retrieve the installed pydantic version. |
| pydantic | The core library providing data validation and parsing functionalities. |

## Error Handling
The code raises a `RuntimeError` if the installed pydantic version is neither 1 nor 2, indicating incompatibility.
```python
    raise RuntimeError(
        f"Currently only pydantic 1 and 2 are supported, found pydantic {pydantic_version}"
    )
``` 
