---
title: "schema.py"
---

## High-level description
The code defines an `ExtendedBaseModel` class, which inherits from the `BaseModel` class (likely from the Pydantic library). This extended class provides utility methods for loading data from strings or dictionaries into Python dictionaries or lists, handling potential JSON conversions.

## Code Structure
The `ExtendedBaseModel` class contains two static methods: `_load_var_to_dict` and `_load_var_to_list`. Both methods are utility functions for data loading and are independent of each other.

## References
This code references the following symbols:
- `BaseModel` (from `elementary.utils.pydantic_shim`)
- `json.loads` (from the `json` standard library)
- `try_load_json` (from `elementary.utils.json_utils`)

## Symbols

### `ExtendedBaseModel`
#### Description
This class extends the `BaseModel` class, likely from the Pydantic library, and provides utility methods for loading data from various formats (string, dictionary) into Python dictionaries or lists.

#### Inputs
This class doesn't have an `__init__` method, so it doesn't take direct inputs.

#### Outputs
This class doesn't have explicit return values. It's intended to be used as a base class for other models.

#### Internal Logic
This class inherits from `BaseModel` and defines two static methods:

- `_load_var_to_dict`: This method takes a variable (`var`) as input, which can be a string, a dictionary, or None. It returns a dictionary. If `var` is None, it returns an empty dictionary. If `var` is a string, it attempts to parse it as JSON and returns the resulting dictionary. If `var` is already a dictionary, it returns it directly.
- `_load_var_to_list`: This method takes a variable (`var`) as input, which can be a string, a list, or None. It returns a list. If `var` is None, it returns an empty list. If `var` is a string, it attempts to parse it as JSON. If the parsing results in a dictionary, it wraps it in a list and returns. If the parsing fails or returns None, it returns a list containing the original string. If `var` is already a list, it returns it directly.

## Dependencies
This code depends on the following external libraries:
| Dependency | Purpose |
|:-----------|:--------|
| `json` | Used for JSON encoding and decoding. |
| `elementary.utils.pydantic_shim` | Provides the `BaseModel` class, likely a shim for different Pydantic versions. |
| `elementary.utils.json_utils` | Provides the `try_load_json` function for safe JSON loading. |

