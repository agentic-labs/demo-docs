---
title: "Overview"
---

## High-level description
This directory houses utility macros used for generating and managing alerts within the Elementary monitoring system. These macros provide functionalities such as creating empty alert tables, generating standardized alert objects, determining appropriate expressions for alert timestamps, and filtering for new alerts.

## What does it do?
This code defines how alerts are structured, created, and filtered within the Elementary data pipeline. It sets up placeholder tables to store different types of alerts, defines a standard format for creating new alerts, and ensures that the system can handle both new and existing alerts correctly. 

## Key Files
### empty_alert_tables.sql
This file defines the structure of the tables used to store alerts. It includes definitions for model alerts, source freshness alerts, and a generic alert table (v2). These table definitions ensure that all alerts are stored in a consistent format.

### generate_alert_object.sql
This file defines a macro that generates a standardized alert object. This object contains all the necessary information about an alert, such as its ID, type, detection time, and any associated data. Using this macro ensures that all alerts are created in a consistent and predictable manner.

### get_alerts_model_detected_at_expr.sql
This file handles backward compatibility for the `detected_at` column in the alerts model. It ensures that the column can be treated as both a string and a timestamp, depending on the existing data type. This is important for maintaining compatibility with older versions of the monitoring system.

### get_new_alerts_where_clause.sql
This file defines a macro that generates a SQL WHERE clause for filtering new alerts. This clause takes into account the last alert time and excludes any alerts that have already been processed. This ensures that only new alerts are acted upon.

## Dependencies
This directory relies on the `elementary` package, which likely contains custom dbt macros and functions used within the Elementary monitoring system. This package provides functionalities such as creating empty tables (`empty_table()`), casting data types (`edr_cast_as_string`, `edr_cast_as_timestamp`), manipulating time (`edr_timeadd`), executing queries (`result_value`), and quoting strings (`edr_quote`). 
