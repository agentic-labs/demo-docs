---
title: "Overview"
---

## High-level description
The `elementary/monitor/dbt_project/macros/base_queries` directory houses a collection of SQL macros designed to extract and process data from various dbt (data build tool) and Elementary tables. These macros serve as building blocks for more complex data quality monitoring and analysis tasks within the Elementary framework. They provide functionalities for retrieving information about dbt objects like models, sources, tests, tags, and owners, as well as for querying and aggregating test run results.

## What does it do?
This directory contains SQL code that fetches information about your dbt project and its test results. It helps Elementary understand your project structure, identify owners of different data objects, and track the history of your data quality tests. This information is then used to power Elementary's monitoring and analysis features.

## Key Files
### `current_tests_run_results_query.sql`
This macro generates a SQL query that retrieves and combines test results data from Elementary and dbt tables. It provides a comprehensive view of test executions, including test metadata, execution details, and associated model information. This macro is essential for understanding the historical performance of data quality tests.

### `owners.sql`
This macro retrieves owner information from various dbt objects (models, sources, seeds, and tests) and consolidates it into a list of dictionaries. This information is crucial for understanding the ownership structure of the dbt project and attributing data quality issues to the appropriate teams or individuals.

### `resources.sql`
This file contains macros for retrieving and processing resource information from dbt models and sources. It provides functions to fetch model resources, source resources, combine all resources, and retrieve metadata for various dbt components. This information is essential for understanding the structure and dependencies within the dbt project.

### `tags.sql`
This macro retrieves and combines tags from dbt models, sources, and tests. It provides a way to categorize and filter dbt objects based on user-defined tags, enabling more granular analysis and monitoring of specific subsets of the data pipeline.

### `tests.sql`
This macro retrieves and processes information about dbt tests, models, and sources. It joins these tables to create a comprehensive view of test metadata, including test details, associated resources, and various attributes. This information is crucial for understanding the configuration and purpose of each data quality test.

## Dependencies
The macros in this directory rely on the following dependencies:

- **elementary:** This library provides utility functions for data processing and transformation, such as converting between different data structures.
- **dbt:** These macros are designed to work within a dbt project and utilize dbt's built-in functions and table references.
