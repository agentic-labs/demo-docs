---
title: "Overview"
---

## High-level description
This macro, `validate_alert_statuses_are_updated()`, is designed to check if all non-singular and non-skipped alerts in the Elementary monitoring system have been properly updated with a status of either 'sent' or 'skipped'. It raises a compiler error if any alerts are found that don't meet these criteria.

## Symbols

### `validate_alert_statuses_are_updated()`
#### Description
This macro queries the alerts table, filters out certain types of alerts, and checks if any remaining alerts have not been properly updated. It raises an error if such alerts are found.

#### Internal Logic
1. Executes a SQL query to select alerts that don't have a 'sent' or 'skipped' status.
2. Converts the query results to a list of dictionaries.
3. Filters out singular test alerts and skipped alerts.
4. If any alerts remain after filtering, raises a compiler error.

## Side Effects
This macro may raise a compiler error if it finds alerts that haven't been properly updated.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary | Used for the `agate_to_dicts` function |
| exceptions | Used to raise a compiler error |

## Error Handling
The macro uses `exceptions.raise_compiler_error()` to raise an error if alerts with improper statuses are found.

## Logging
No explicit logging is implemented in this macro.

## TODOs
There are no explicit TODOs in the code.