---
title: "group_of_alerts.py"
---

## High-level description
This code defines a `GroupedByTableAlerts` class that represents a group of alerts related to a specific table or model. It provides functionality to organize and manage different types of alerts (test errors, warnings, failures, and model errors) associated with a particular model or table.

## Code Structure
The main class `GroupedByTableAlerts` contains properties and methods to handle grouped alerts. It uses various alert models (TestAlertModel, ModelAlertModel, SourceFreshnessAlertModel) to represent different types of alerts. The class provides methods to access aggregated information about the alerts and to generate report links.

## Symbols

### `GroupingType`
#### Description
An enumeration that defines the types of alert grouping.

#### Inputs
None

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| BY_ALERT | str | Represents grouping by individual alerts |
| BY_TABLE | str | Represents grouping by table |

### `GroupedByTableAlerts`
#### Description
A class that represents a group of alerts associated with a specific table or model.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| alerts | List[Union[TestAlertModel, ModelAlertModel, SourceFreshnessAlertModel]] | A list of alerts to be grouped |

#### Outputs
None

#### Internal Logic
- Initializes lists for different types of alerts (test errors, warnings, failures, and model errors)
- Sorts the input alerts into appropriate categories using the `_sort_alerts` method
- Provides properties to access aggregated information about the alerts
- Generates report links for the grouped alerts

### `GroupedByTableAlerts.model_unique_id`
#### Description
Property that returns the unique identifier of the model associated with the alerts.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| model_unique_id | Optional[str] | The unique identifier of the model |

### `GroupedByTableAlerts.model`
#### Description
Property that returns the shortened name of the model associated with the alerts.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| model | str | The shortened name of the model |

### `GroupedByTableAlerts.detected_at`
#### Description
Property that returns the earliest detection time among all alerts in the group.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| detected_at | datetime | The earliest detection time |

### `GroupedByTableAlerts.report_url`
#### Description
Property that returns the report URL associated with the alerts.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| report_url | Optional[str] | The report URL |

### `GroupedByTableAlerts.unified_meta`
#### Description
Property that returns the unified metadata for the alerts, prioritizing model-level metadata over test-level metadata.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| unified_meta | Dict | The unified metadata |

### `GroupedByTableAlerts.data`
#### Description
Property that returns a list of data dictionaries for all alerts in the group.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| data | List[Dict] | List of alert data dictionaries |

### `GroupedByTableAlerts.summary`
#### Description
Property that returns a summary string of the grouped alerts.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| summary | str | Summary of the grouped alerts |

### `GroupedByTableAlerts.status`
#### Description
Property that returns the overall status of the grouped alerts.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| status | str | Overall status of the alerts |

### `GroupedByTableAlerts.get_report_link`
#### Description
Method that generates a report link for the grouped alerts.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| report_link | Optional[ReportLinkData] | Report link data |

### `GroupedByTableAlerts._sort_alerts`
#### Description
Private method that sorts the input alerts into appropriate categories.

#### Internal Logic
- Iterates through the input alerts
- Categorizes each alert based on its type and status
- Populates the corresponding alert lists (test_errors, test_warnings, test_failures, model_errors)

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| datetime | Used for handling date and time operations |
| enum | Used for creating the GroupingType enumeration |
| typing | Used for type hinting |
| elementary.monitor.alerts.model_alert | Imports ModelAlertModel |
| elementary.monitor.alerts.source_freshness_alert | Imports SourceFreshnessAlertModel |
| elementary.monitor.alerts.test_alert | Imports TestAlertModel |
| elementary.monitor.data_monitoring.alerts.integrations.utils.report_link | Imports ReportLinkData and get_model_test_runs_link |
| elementary.utils.models | Imports get_shortened_model_name function |

This code provides a structured way to group and manage different types of alerts associated with a specific table or model, making it easier to analyze and report on data quality issues in a data pipeline or data warehouse context.