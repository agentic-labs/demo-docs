---
title: "schema.py"
---

## High-level description
This code defines a Pydantic model `SourceFreshnessResultDBRowSchema` that represents the schema for source freshness result database rows. It includes various fields related to source freshness execution, status, and metadata, along with validators for data formatting and type conversion.

## Code Structure
The main symbol in this code is the `SourceFreshnessResultDBRowSchema` class, which inherits from `ExtendedBaseModel`. It defines the structure of the data and includes several validator methods for specific fields.

## Symbols

### SourceFreshnessResultDBRowSchema
#### Description
This class defines the schema for source freshness result database rows. It inherits from `ExtendedBaseModel` and uses Pydantic for data validation and serialization.

#### Inputs
The class doesn't have explicit inputs, but it defines various fields that can be populated when creating an instance of the class.

#### Outputs
When instantiated, this class produces an object with validated and formatted data according to the defined schema.

#### Internal Logic
The class defines various fields with their types and optional status. It also includes several validator methods using the `@validator` decorator to format and process specific fields:

1. `format_generated_at`: Formats the `generated_at` field to a full ISO format.
2. `format_max_loaded_at`: Formats the `max_loaded_at` field to a full ISO format if it exists.
3. `format_snapshotted_at`: Formats the `snapshotted_at` field to a full ISO format if it exists.
4. `load_meta`: Converts the `meta` field to a dictionary.
5. `load_tags`: Converts the `tags` field to a list.
6. `load_owners`: Converts the `owners` field to a list.
7. `load_error_after`: Converts the `error_after` field to a dictionary.
8. `load_warn_after`: Converts the `warn_after` field to a dictionary.

These validators ensure that the data is properly formatted and converted to the expected types.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| typing | Provides type hinting support |
| elementary.utils.pydantic_shim | Imports the `validator` decorator |
| elementary.utils.schema | Imports the `ExtendedBaseModel` class |
| elementary.utils.time | Imports the `convert_partial_iso_format_to_full_iso_format` function |

## Configuration
The class includes a `Config` inner class with `smart_union = True`, which enables Pydantic's smart union feature for better type inference.

## Error Handling
The code doesn't implement explicit error handling. It relies on Pydantic's built-in validation mechanisms to raise appropriate errors when data doesn't conform to the defined schema.