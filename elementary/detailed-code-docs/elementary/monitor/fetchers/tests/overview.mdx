---
title: "Overview"
---

## High-level description
The `elementary/monitor/fetchers/tests` directory contains code responsible for fetching test results from a dbt project. It utilizes the `elementary.clients.dbt` module to interact with dbt and retrieve test data. The fetched data is then parsed and structured using schemas defined in the `schema.py` file.

## What does it do?
This code defines a process for extracting test results from a dbt project. It fetches both detailed test results and a simplified representation of singular tests. The fetched data can be used to monitor test performance, identify failing tests, and analyze historical test trends.

## Entry points
The main entry point for this directory is the `tests.py` file, which contains the `TestsFetcher` class. This class is responsible for fetching test results from a dbt project using a `BaseDbtRunner` instance.

Data flow:
1. `TestsFetcher` uses `BaseDbtRunner` to execute dbt commands and retrieve test data.
2. The raw JSON responses from dbt are parsed and validated against the schemas defined in `schema.py`.
3. The structured test data is then returned as a list of either `TestResultDBRowSchema` or `NormalizedTestSchema` objects.

## Key Files
### schema.py
This file defines the data structures for representing test results. It includes two main schemas:

- `TestResultDBRowSchema`: Represents a detailed row of test result data, including information like execution time, failure count, and sample data.
- `NormalizedTestSchema`: Represents a simplified view of a test, containing only the unique identifier and artifact type.

These schemas ensure that the fetched test data is structured and consistent, making it easier to process and analyze.
