---
title: "totals_schema.py"
---

## High-level description
This code defines a `TotalsSchema` class that represents a summary of test results or invocations, categorizing them into errors, warnings, passed tests, and failures. It provides methods to increment these counters based on the status of a test or invocation.

## Code Structure
The `TotalsSchema` class is the main symbol in this code. It contains four counters (errors, warnings, passed, failures) and methods to manipulate these counters.

## Symbols

### `TotalsSchema`
#### Description
A Pydantic model that represents a summary of test results or invocations, categorizing them into errors, warnings, passed tests, and failures.

#### Inputs
No direct inputs, but the class is initialized with default values for its counters.

#### Outputs
No direct outputs, but the class provides methods to manipulate and access its counter values.

#### Internal Logic
- The class initializes four counters: errors, warnings, passed, and failures, all set to 0 by default.
- It provides an `add_total` method to increment the appropriate counter based on the status provided.
- Four private methods (`_add_error`, `_add_warning`, `_add_passed`, `_add_failure`) are used to increment the respective counters.

### `TotalsSchema.add_total`
#### Description
Increments the appropriate counter based on the provided status.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| status | str | The status of the test or invocation (e.g., "error", "warn", "fail", "pass") |

#### Internal Logic
- Uses a dictionary `total_adders` to map status strings to their corresponding increment methods.
- Retrieves the appropriate increment method based on the status.
- If a valid status is provided, calls the corresponding increment method.

### `TotalsSchema._add_error`
#### Description
Increments the error counter by 1.

### `TotalsSchema._add_warning`
#### Description
Increments the warning counter by 1.

### `TotalsSchema._add_passed`
#### Description
Increments the passed counter by 1.

### `TotalsSchema._add_failure`
#### Description
Increments the failure counter by 1.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.utils.pydantic_shim | Imports the BaseModel class for creating the Pydantic model |

This code provides a simple and efficient way to keep track of test or invocation results, allowing for easy categorization and counting of different statuses. It can be used in various parts of the Elementary monitoring system to aggregate and summarize test results or invocations.