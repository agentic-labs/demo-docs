---
title: "Overview"
---

## High-level description
This directory contains the API and test-related code for the Elementary data monitoring system. It includes schema definitions for test results, invocations, and metadata, as well as an API class for fetching and processing test data from a dbt project.

## What does it do?
The code in this directory provides a structured way to handle test results and related data in the Elementary system. It defines data models for various aspects of test execution and results, enabling type-safe data handling and validation. Additionally, it offers an API to retrieve and process test data from a dbt project, allowing users to fetch summaries, detailed results, and test runs with various filtering options.

## Key Files

1. `schema.py`:
   - Defines Pydantic models for test results, invocations, and metadata.
   - Provides a structured representation of test-related data.
   - Enables type-safe data handling and validation throughout the application.

2. `tests.py`:
   - Contains the `TestsAPI` class for fetching and processing test data from a dbt project.
   - Offers methods to retrieve test results summaries, detailed test results, and test runs.
   - Implements filtering and processing logic for test-related data.

## Dependencies
The code in this directory relies on several external libraries and internal modules:

1. Pydantic: Used for data validation and settings management using Python type annotations.
2. typing: Provides support for type hints.
3. elementary.utils.pydantic_shim: Custom Pydantic implementation or wrapper.
4. elementary.utils.time: Utility functions for time-related operations.
5. elementary.clients.api.api_client: Base API client class.
6. elementary.monitor.fetchers.tests.tests: TestsFetcher class for raw test data retrieval.
7. elementary.monitor.data_monitoring.schema: Provides schema for selector filters.
8. elementary.utils.log: Logging functionality.

## Configuration
The `TestsAPI` class in `tests.py` accepts several configuration parameters:

1. `days_back`: Number of days to look back for test results (default: 7).
2. `invocations_per_test`: Maximum number of invocations to fetch per test (default: 720).
3. `disable_passed_test_metrics`: Whether to disable fetching metrics for passed tests (default: False).

These parameters allow users to customize the behavior of the API when fetching test data.

The schema definitions in `schema.py` use Pydantic's configuration options, such as `smart_union = True`, to enable smart union type handling.

In summary, this directory provides the core functionality for handling test results and related data in the Elementary data monitoring system. It offers a well-structured API for retrieving and processing test data from dbt projects, along with robust schema definitions for ensuring data integrity and type safety throughout the application.