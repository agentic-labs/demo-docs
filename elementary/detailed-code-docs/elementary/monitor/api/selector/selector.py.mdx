---
title: "selector.py"
---

## High-level description
This code defines a `SelectorAPI` class that provides functionality to fetch and process selector results using dbt. It utilizes a dbt runner to execute selector commands and returns the results in a structured format.

## Code Structure
The `SelectorAPI` class inherits from `APIClient` and uses `SelectorFetcher` to fetch selector results. It provides a method to get selector results and return them in a `SelectorSchema` format.

## References
- `elementary.clients.api.api_client.APIClient`
- `elementary.clients.dbt.base_dbt_runner.BaseDbtRunner`
- `elementary.monitor.api.selector.schema.SelectorSchema`
- `elementary.monitor.fetchers.selector.selector.SelectorFetcher`
- `elementary.utils.log.get_logger`

## Symbols

### `SelectorAPI`
#### Description
A class that provides an API for fetching and processing selector results using dbt.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| dbt_runner | BaseDbtRunner | An instance of a dbt runner for executing dbt commands |

#### Internal Logic
1. Initializes the parent `APIClient` class with the provided `dbt_runner`.
2. Creates an instance of `SelectorFetcher` using the same `dbt_runner`.

### `SelectorAPI.get_selector_results`
#### Description
Fetches selector results for a given selector string and returns them in a structured format.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| selector | str | The selector string to use for fetching results |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | SelectorSchema | A structured representation of the selector results |

#### Internal Logic
1. Calls `self.selector_fetcher.get_selector_results` with the provided selector.
2. Creates and returns a `SelectorSchema` instance with the selector and results.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.clients.api.api_client | Provides the base APIClient class |
| elementary.clients.dbt.base_dbt_runner | Defines the BaseDbtRunner abstract base class |
| elementary.monitor.api.selector.schema | Provides the SelectorSchema class for structuring results |
| elementary.monitor.fetchers.selector.selector | Provides the SelectorFetcher class for fetching selector results |
| elementary.utils.log | Provides logging functionality |

## Logging
The code uses the `get_logger` function from `elementary.utils.log` to create a logger instance for this module. The logger is not directly used in the provided code snippet but is available for use within the module.