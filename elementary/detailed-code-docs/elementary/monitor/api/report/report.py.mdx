---
title: "report.py"
---

## High-level description
The `ReportAPI` class is responsible for fetching and aggregating data from various API endpoints to construct a comprehensive report on data quality and pipeline health. It retrieves information about models, tests, source freshness, lineage, and other relevant metrics, serializes them into a structured format, and returns the compiled report data.

## Code Structure
The `ReportAPI` class interacts with several other API classes, including `TestsAPI`, `SourceFreshnessesAPI`, `ModelsAPI`, `LineageAPI`, `FiltersAPI`, and `InvocationsAPI`. It utilizes these APIs to retrieve data about various aspects of the data pipeline, such as test results, model runs, and lineage information. The `ReportAPI` class then processes and aggregates this data, ultimately returning a `ReportDataSchema` object containing the compiled report data.

## References
- `elementary.monitor.api.tests.tests.TestsAPI`
- `elementary.monitor.api.source_freshnesses.source_freshnesses.SourceFreshnessesAPI`
- `elementary.monitor.api.models.models.ModelsAPI`
- `elementary.monitor.api.lineage.lineage.LineageAPI`
- `elementary.monitor.api.filters.filters.FiltersAPI`
- `elementary.monitor.api.invocations.invocations.InvocationsAPI`
- `elementary.monitor.api.report.schema.ReportDataSchema`

## Symbols

### `ReportAPI`
#### Description
This class is responsible for fetching and aggregating data from various API endpoints to construct a comprehensive report on data quality and pipeline health.

#### Inputs
- `dbt_runner` (BaseDbtRunner): An instance of the DBT runner used to interact with the DBT project.

#### Outputs
- A `ReportDataSchema` object containing the compiled report data.

#### Internal Logic
The `get_report_data` method orchestrates the data fetching and aggregation process. It retrieves data from various API endpoints, including:
    - Test results and runs
    - Source freshness results and runs
    - Models, sources, and exposures
    - Lineage information
    - Filters
    - Invocations

The method then processes and aggregates this data, serializing it into a structured format defined by the `ReportDataSchema` class. Finally, it returns the compiled report data.

## Error Handling
The `get_report_data` method includes a try-except block to handle any exceptions raised during the data fetching and aggregation process. If an exception occurs, an empty `ReportDataSchema` object is returned along with the exception object.
