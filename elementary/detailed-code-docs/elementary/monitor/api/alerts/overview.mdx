---
title: "Overview"
---

## High-level description
This directory contains the API implementation for handling alerts in the Elementary monitoring system. It provides functionality for filtering, fetching, updating, and managing alerts. The code is organized into two main files: `alert_filters.py` and `alerts.py`, which work together to provide a comprehensive alert management system.

## What does it do?
The code in this directory enables the following workflows:

1. Filtering alerts based on various criteria such as tags, owners, models, node names, statuses, and resource types.
2. Fetching new alerts for a specified time range.
3. Retrieving the last sent times for alerts.
4. Marking alerts as skipped or sent.
5. Providing an API interface for interacting with the alert system.

These functionalities allow users of the Elementary monitoring system to efficiently manage and process alerts, ensuring that relevant information is properly filtered and acted upon.

## Key Files

### alert_filters.py
This file contains the implementation of alert filtering functionality. It provides various functions to filter alerts based on different criteria. The main function `filter_alerts` combines individual filtering functions to apply multiple filters on a list of alerts.

Key features:
- Filtering alerts by tags, owners, models, node names, statuses, and resource types.
- Combining multiple filters using the `_find_common_alerts` function.
- Flexible filtering system that can be easily extended with new filter types.

### alerts.py
This file defines the `AlertsAPI` class, which serves as the main interface for interacting with alerts in the Elementary monitoring system. It utilizes the `AlertsFetcher` to perform database operations and provides methods for managing alerts.

Key features:
- Fetching new alerts for a specified number of days.
- Retrieving last sent times for alerts.
- Marking alerts as skipped or sent.
- Integration with dbt runner for executing database operations.

## Dependencies
The code in this directory relies on several external libraries and internal modules:

1. `functools.reduce`: Used for combining multiple filter results.
2. `typing`: Used for type hinting and improving code readability.
3. `elementary.monitor.data_monitoring.schema`: Provides schema classes for filters.
4. `elementary.monitor.fetchers.alerts.schema.pending_alerts`: Imports `PendingAlertSchema` and `AlertTypes`.
5. `elementary.utils.log`: Provides logging functionality.
6. `elementary.clients.api.api_client.APIClient`: Base class for API clients.
7. `elementary.clients.dbt.base_dbt_runner.BaseDbtRunner`: Provides dbt runner functionality.
8. `elementary.config.config.Config`: Configuration management for the Elementary system.
9. `elementary.monitor.fetchers.alerts.alerts.AlertsFetcher`: Handles database operations for alerts.

## Configuration
The `AlertsAPI` class in `alerts.py` requires configuration through the `Config` object, which is passed during initialization. This configuration likely includes database connection details, alert settings, and other system-wide parameters.

While not explicitly shown in the provided code, the filtering functionality in `alert_filters.py` may also rely on configuration settings to determine default filter behavior or to set up allowed filter types.

In summary, this directory provides a robust and flexible system for managing alerts in the Elementary monitoring system. It allows for efficient filtering, fetching, and updating of alerts, which is crucial for maintaining an effective monitoring and alerting pipeline.