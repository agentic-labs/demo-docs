---
title: "Overview"
---

## High-level description
The `tests/tests_with_db/dbt_project/macros` directory houses a collection of SQL and Jinja macros used within a dbt (data build tool) project for testing and utility purposes. These macros provide functionalities such as environment cleanup, data type validation, debugging assistance, and custom materialization definitions.

## What does it do?
This directory acts as a toolbox for managing and testing dbt projects. It provides functions to:

- **Clear the testing environment:** Drop specific schemas to ensure a clean slate for each test run.
- **Create tables with all supported data types:** Useful for testing compatibility across different data warehouses.
- **Trigger debugging output:** Aids in troubleshooting and development within dbt models.
- **Define custom materializations:** Allows for tailored execution logic for tests, particularly with Elementary, a dbt package.

## Key Files
| File | Description |
|---|---|
| `clear_env.sql` | Defines macros to drop schemas, primarily used for cleaning up the testing environment. |
| `create_all_types_table.sql` | Contains macros to create tables with all supported data types for different data warehouses, aiding in compatibility testing. |
| `dbg.sql` | Provides a wrapper macro for dbt's `debug()` function, simplifying the process of adding debug points in dbt code. |
| `dummy_macro.sql` | Demonstrates logging within a dbt macro and tests that logging doesn't disrupt the dbt runner. |
| `generate_schema_name.sql` | Defines a macro to dynamically generate schema names based on target schema and optional custom prefixes or suffixes. |
| `get_anomaly_config.sql` | Simulates a model's context to retrieve anomaly test configurations from the Elementary dbt package. |
| `materializations.sql` | Defines custom materializations for tests, allowing switching between Elementary's custom test materialization and dbt's default. |
| `python.sql` | Contains macros that define Python functions for use in dbt tests, enabling custom Python logic within the dbt framework. |
