---
title: "Overview"
---

## High-level description
This file contains unit tests for the `FetcherClient` class, focusing on testing the caching functionality. The tests verify that the `set_run_cache` and `get_run_cache` methods of the `FetcherClient` work correctly for both existing and non-existing keys.

## Code Structure
The code consists of three main functions: `_initial_fetcher_client()`, which creates a `FetcherClient` instance, and two test functions `test_fetcher_client_set_cache()` and `test_fetcher_client_get_cache()`, which test the caching functionality of the `FetcherClient`.

## References
- `elementary.clients.dbt.factory.create_dbt_runner`
- `elementary.clients.fetcher.fetcher.FetcherClient`

## Symbols

### `_initial_fetcher_client()`
#### Description
This function creates and returns an instance of `FetcherClient` with a mock dbt runner.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| return value | FetcherClient | An instance of FetcherClient |

#### Internal Logic
1. Sets mock project and profiles directories.
2. Creates a dbt runner using `create_dbt_runner()`.
3. Creates and returns a `FetcherClient` instance with the dbt runner.

### `test_fetcher_client_set_cache()`
#### Description
This function tests the `set_run_cache()` method of `FetcherClient`.

#### Internal Logic
1. Creates a `FetcherClient` instance using `_initial_fetcher_client()`.
2. Sets a cache value using `set_run_cache()`.
3. Asserts that the set value can be retrieved from the cache.
4. Asserts that a non-existing key returns `None`.

### `test_fetcher_client_get_cache()`
#### Description
This function tests the `get_run_cache()` method of `FetcherClient`.

#### Internal Logic
1. Creates a `FetcherClient` instance using `_initial_fetcher_client()`.
2. Sets a cache value using `set_run_cache()`.
3. Asserts that the set value can be retrieved using `get_run_cache()`.
4. Asserts that `get_run_cache()` returns `None` for a non-existing key.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.clients.dbt.factory | To create a dbt runner |
| elementary.clients.fetcher.fetcher | To use the FetcherClient class |

## Error Handling
The tests do not implement specific error handling mechanisms. They rely on the default assertion behavior provided by the testing framework.