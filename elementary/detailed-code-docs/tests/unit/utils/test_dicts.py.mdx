---
title: "test_dicts.py"
---

## High-level description
This file contains unit tests for two utility functions related to dictionary manipulation: `flatten_dict_by_key` and `merge_dicts_attribute`. The tests verify the correct behavior of these functions under different scenarios.

## Symbols

### `test_flatten_dict_by_key`
#### Description
This function tests the `flatten_dict_by_key` utility function, which flattens a nested dictionary based on a specified key.

#### Internal Logic
1. Define a nested dictionary `DICT` with a nested dictionary `NESTED_DICT`.
2. Test flattening by an existing nested key:
   - Call `flatten_dict_by_key` with `DICT` and "nested" as arguments.
   - Assert that the resulting dictionary has the correct values and structure.
3. Test flattening by a non-existing key:
   - Call `flatten_dict_by_key` with `DICT` and "nope" as arguments.
   - Assert that the resulting dictionary maintains the original structure.

#### Performance Considerations
The test uses `json.dumps` with `sort_keys=True` to compare dictionary equality, which may have a slight performance impact for large dictionaries.

### `test_merge_dicts_attribute`
#### Description
This function tests the `merge_dicts_attribute` utility function, which merges the values of a specific attribute from multiple dictionaries into a single list.

#### Internal Logic
1. Define three dictionaries with varying structures:
   - `dict_1` with a list attribute
   - `dict_2` with a single value attribute
   - `dict_3` as an empty dictionary
2. Call `merge_dicts_attribute` with the list of dictionaries and "attr" as the attribute key.
3. Assert that the resulting merged and sorted list matches the expected output.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| json | Used for dictionary comparison in `test_flatten_dict_by_key` |
| elementary.utils.dicts | Source of the utility functions being tested |

## Error Handling
These tests do not explicitly handle errors. They rely on the built-in assertion mechanism to verify the correctness of the utility functions' output.