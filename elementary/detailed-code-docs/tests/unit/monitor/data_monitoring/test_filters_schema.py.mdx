---
title: "test_filters_schema.py"
---

## High-level description
This file contains unit tests for the `FiltersSchema` class, specifically testing the `from_cli_params` method. The tests cover various scenarios of creating filter schemas from command-line interface (CLI) parameters, including empty filters, and filters for tags, owners, models, statuses, and resource types.

## Code Structure
The file consists of multiple test functions, each focusing on a specific aspect of the `FiltersSchema.from_cli_params` method. The tests create filter schemas from different CLI parameter combinations and assert the expected outcomes.

## References
The code references the `FiltersSchema` class from the `elementary.monitor.data_monitoring.schema` module.

## Symbols

### `test_empty_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` from an empty CLI parameter.

#### Internal Logic
1. Creates an empty CLI filter tuple.
2. Calls `FiltersSchema.from_cli_params` with the empty filter.
3. Asserts that the resulting schema has empty tags, owners, models, and resource_types.
4. Asserts that the statuses filter contains the default values.

### `test_tags_key_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` with various tag filters.

#### Internal Logic
Tests three scenarios:
1. Single tag
2. Multiple tags in a single filter
3. Multiple tag filters

For each scenario, it asserts the correct number and values of tag filters.

### `test_owners_key_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` with various owner filters.

#### Internal Logic
Similar to the tags test, it checks three scenarios:
1. Single owner
2. Multiple owners in a single filter
3. Multiple owner filters

### `test_models_key_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` with various model filters.

#### Internal Logic
Follows the same pattern as tags and owners tests, checking single and multiple model filters.

### `test_statuses_key_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` with status filters, including error cases.

#### Internal Logic
1. Tests invalid status values, expecting `ValueError` to be raised.
2. Tests valid single and multiple status filters.
3. Asserts the correct number and values of status filters.

### `test_resource_types_key_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` with resource type filters, including error cases.

#### Internal Logic
1. Tests invalid resource type values, expecting `ValueError` to be raised.
2. Tests valid single and multiple resource type filters.
3. Asserts the correct number and values of resource type filters.

### `test_unsupported_key_from_cli_params`
#### Description
Tests the behavior when an unsupported filter key is provided.

#### Internal Logic
1. Creates a filter with an unsupported key.
2. Asserts that the resulting schema ignores the unsupported filter.

### `test_multiple_keys_from_cli_params`
#### Description
Tests the creation of a `FiltersSchema` with multiple filter types.

#### Internal Logic
1. Creates a filter with both tags and owners.
2. Asserts that the resulting schema correctly captures both filter types.

## Dependencies
The code uses the `pytest` library for testing.

## Error Handling
The tests for status and resource type filters include error handling checks, ensuring that `ValueError` is raised for invalid inputs.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.