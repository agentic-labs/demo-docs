---
title: "test_alert_data_schema.py"
---

## High-level description
This file contains unit tests for the `BaseAlertDataSchema` and `TestAlertDataSchema` classes from the `elementary.monitor.fetchers.alerts.schema.alert_data` module. The tests cover various methods and properties of these classes, including metadata flattening, tag and owner validation, and suppression interval handling.

## Code Structure
The test file defines several test functions that use pytest fixtures and parameterization to test different aspects of the alert data schemas. The main symbols being tested are `BaseAlertDataSchema` and `TestAlertDataSchema`.

## Symbols

### `test_flatten_meta`
#### Description
Tests the `_flatten_meta` static method of `BaseAlertDataSchema`.

#### Internal Logic
1. Tests with an empty dictionary
2. Tests with a simple key-value pair
3. Tests with nested dictionaries, including an 'alerts_config' key

### `test_get_alert_meta_attrs`
#### Description
Tests the `_get_alert_meta_attrs` method of `BaseAlertDataSchema` and `TestAlertDataSchema`.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| model_meta | dict | Model metadata |
| test_meta | dict | Test metadata |
| expected | list | Expected output |

#### Internal Logic
Tests various combinations of model and test metadata to ensure the correct attributes are extracted and deduplicated.

### `test_get_suppression_interval`
#### Description
Tests the `get_suppression_interval` method of `BaseAlertDataSchema`.

#### Internal Logic
1. Tests with a suppression interval defined in the alert metadata
2. Tests with no suppression interval in the alert metadata
3. Tests the override behavior

### `test_tags`
#### Description
Tests the `tags` property of `BaseAlertDataSchema`.

#### Internal Logic
Tests various input formats for tags (list, JSON string, comma-separated string) to ensure they are correctly parsed and deduplicated.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| pytest | Testing framework |
| elementary.monitor.fetchers.alerts.schema.alert_data | Module containing the alert data schemas being tested |
| elementary.utils.time | Utility module for datetime operations |

## Error Handling
The tests don't explicitly handle errors but rely on pytest's assertion mechanism to verify the expected behavior of the tested methods.

Your response should not exceed 3000 words or 4000 tokens. Focus on providing clear, concise information that can be directly inferred from the code. Include optional sections only when they provide significant value for understanding the code.