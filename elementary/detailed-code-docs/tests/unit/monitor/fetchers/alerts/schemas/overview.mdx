---
title: "Overview"
---

## High-level description
The `tests/unit/monitor/fetchers/alerts/schemas` directory houses unit tests for data schemas used in fetching and processing alerts within the Elementary Monitor. These schemas define the structure and validation rules for alert data, ensuring data integrity and consistency.

## What does it do?
This directory tests the code responsible for validating and structuring alert data retrieved by the Elementary Monitor. It ensures that the schemas correctly handle various data types, including metadata, tags, and timestamps. This validation is crucial for maintaining data consistency and preventing errors during alert processing.

## Key Files

### `test_alert_data_schema.py`
This file focuses on testing the `BaseAlertDataSchema` and `TestAlertDataSchema` classes. These classes are responsible for defining the basic structure of alert data and how it should be validated. The tests cover:

- **Metadata handling:** Verifying that metadata is correctly flattened and attributes are extracted as expected.
- **Tag processing:** Ensuring that tags, which can be provided in various formats (lists, strings, JSON), are correctly parsed and deduplicated.
- **Suppression interval:** Testing the logic for determining the suppression interval, which dictates how often an alert should be triggered.

### `test_pending_alerts_schema.py`
This file specifically tests the `PendingAlertSchema`, which defines the structure of pending alerts. The tests primarily focus on the automatic population of timestamps (`detected_at`, `created_at`, `updated_at`) when they are not explicitly provided. This ensures that these timestamps are always set to a valid datetime object, preventing potential issues during alert processing and persistence. 
