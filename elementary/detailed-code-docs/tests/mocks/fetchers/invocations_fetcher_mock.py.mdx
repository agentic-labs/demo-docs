---
title: "invocations_fetcher_mock.py"
---

## High-level description
This code defines a `MockInvocationsFetcher` class, which is a mock implementation of the `InvocationsFetcher` class for testing purposes. It initializes the mock fetcher with a `MockDbtRunner` instance, allowing for controlled testing of invocation fetching functionality without relying on actual dbt operations.

## Code Structure
The `MockInvocationsFetcher` class inherits from `InvocationsFetcher` and uses `MockDbtRunner` to simulate dbt runner behavior during tests.

## References
- `elementary.monitor.fetchers.invocations.invocations.InvocationsFetcher`
- `tests.mocks.dbt_runner_mock.MockDbtRunner`

## Symbols

### MockInvocationsFetcher
#### Description
A mock implementation of the `InvocationsFetcher` class used for testing purposes. It initializes with a `MockDbtRunner` instance to simulate dbt operations.

#### Inputs
This class doesn't have any explicit inputs in its constructor.

#### Internal Logic
1. Creates an instance of `MockDbtRunner`.
2. Calls the superclass (`InvocationsFetcher`) constructor with the mock dbt runner.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.monitor.fetchers.invocations.invocations | Provides the base `InvocationsFetcher` class |
| tests.mocks.dbt_runner_mock | Provides the `MockDbtRunner` class for simulating dbt operations |

## Related Code: MockDbtRunner

### MockDbtRunner
#### Description
A mock implementation of the `SubprocessDbtRunner` class used for simulating dbt runner behavior in tests.

#### Inputs
This class doesn't have any explicit inputs in its constructor.

#### Internal Logic
1. Calls the superclass (`SubprocessDbtRunner`) constructor with predefined mock values:
   - `project_dir`: Set to "project_dir"
   - `profiles_dir`: Set to "profiles_dir"
   - `run_deps_if_needed`: Set to False

#### Constants
| Name | Value | Description |
|:-----|:------|:------------|
| MOCK_PROJECT_DIR | "project_dir" | Mock value for the dbt project directory |
| MOCK_PROFILES_DIR | "profiles_dir" | Mock value for the dbt profiles directory |

This mock setup allows for controlled testing of invocation fetching functionality without relying on actual dbt operations or file system interactions.