---
title: "alerts_fetcher_mock.py"
---

## High-level description
This file contains a mock implementation of the AlertsFetcher class, used for testing purposes. It simulates the behavior of fetching and managing alerts in the Elementary monitoring system, providing predefined mock data for different types of alerts (test, model, and source freshness).

## Code Structure
The main class `MockAlertsFetcher` inherits from `AlertsFetcher` and overrides its methods to return mock data. The file also defines several constants containing mock data for different types of alerts.

## Symbols

### `MockAlertsFetcher`
#### Description
A mock implementation of the AlertsFetcher class used for testing purposes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| None | N/A | The constructor doesn't take any arguments |

#### Internal Logic
- Initializes a `MockDbtRunner` and `Config` object.
- Overrides the `query_pending_alerts` and `query_last_alert_times` methods to return mock data.

### `query_pending_alerts`
#### Description
Returns a list of mock pending alerts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| *args | Any | Ignored in this mock implementation |
| **kwargs | Any | Ignored in this mock implementation |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| pending_alerts | List[PendingAlertSchema] | A list of mock pending alerts |

#### Internal Logic
- Creates mock pending alerts for tests, models, and source freshness checks.
- Converts the mock data into `PendingAlertSchema` objects.

### `query_last_alert_times`
#### Description
Returns a dictionary of mock last alert times for different alert classes.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| *args | Any | Ignored in this mock implementation |
| **kwargs | Any | Ignored in this mock implementation |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| last_alert_times | Dict[str, str] | A dictionary of alert class IDs and their last alert times |

#### Internal Logic
- Creates a dictionary with mock last alert times for various alert classes.
- Uses `CURRENT_DATETIME_UTC` to generate relative timestamps.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| datetime | Used for working with dates and times |
| typing | Used for type hinting |
| elementary.config.config | Imports the Config class |
| elementary.monitor.fetchers.alerts.alerts | Imports the AlertsFetcher class |
| elementary.monitor.fetchers.alerts.schema.pending_alerts | Imports alert-related schemas |
| elementary.utils.time | Imports time-related utilities |
| tests.mocks.dbt_runner_mock | Imports the MockDbtRunner class |

## Constants
The file defines several constants containing mock data for different types of alerts:
- `CURRENT_DATETIME_UTC`: The current UTC datetime
- `CURRENT_TIMESTAMP_UTC`: The current UTC timestamp as a string
- `PENDDING_TEST_ALERTS_MOCK_DATA`: Mock data for test alerts
- `PENDDING_MODEL_ALERTS_MOCK_DATA`: Mock data for model alerts
- `PENDDING_SOURCE_FRESHNESS_ALERTS_MOCK_DATA`: Mock data for source freshness alerts

These constants are used to populate the mock data returned by the `MockAlertsFetcher` methods.