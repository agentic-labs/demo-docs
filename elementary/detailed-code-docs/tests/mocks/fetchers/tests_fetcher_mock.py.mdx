---
title: "tests_fetcher_mock.py"
---

## High-level description
This code defines a `MockTestsFetcher` class that simulates the behavior of a `TestsFetcher` for testing purposes. It provides mock test result data in the form of `TestResultDBRowSchema` objects, representing both Elementary and dbt test results.

## Code Structure
The `MockTestsFetcher` class inherits from `TestsFetcher` and overrides the `get_all_test_results_db_rows` method to return predefined mock data. It uses a `MockDbtRunner` instance in its initialization.

## References
- `elementary.monitor.fetchers.tests.schema.TestResultDBRowSchema`
- `elementary.monitor.fetchers.tests.tests.TestsFetcher`
- `tests.mocks.dbt_runner_mock.MockDbtRunner`

## Symbols

### MockTestsFetcher
#### Description
A mock implementation of the `TestsFetcher` class used for testing purposes. It provides predefined test result data without actually querying a database.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| N/A | N/A | The class doesn't take any inputs in its constructor. |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| test_results | List[TestResultDBRowSchema] | A list of mock test result objects. |

#### Internal Logic
1. Initializes with a `MockDbtRunner` instance.
2. Overrides the `get_all_test_results_db_rows` method to return predefined mock data.
3. Creates two lists of mock test results: `ELEMENTARY_TEST_RESULT_DB_ROWS` and `DBT_TEST_RESULT_DB_ROWS`.
4. Combines and returns both lists of mock test results.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.monitor.fetchers.tests.schema | Provides the TestResultDBRowSchema class |
| elementary.monitor.fetchers.tests.tests | Provides the TestsFetcher base class |
| tests.mocks.dbt_runner_mock | Provides the MockDbtRunner class |

## Error Handling
This mock class doesn't implement specific error handling mechanisms. It's designed to provide predefined data for testing purposes.

## API/Interface Reference
| Method | Description |
|:-------|:------------|
| get_all_test_results_db_rows | Returns a list of mock TestResultDBRowSchema objects representing both Elementary and dbt test results. |

The mock data includes various test scenarios with different attributes such as test types, statuses, and metadata. This allows for comprehensive testing of code that depends on test result data without the need for actual database queries or test executions.