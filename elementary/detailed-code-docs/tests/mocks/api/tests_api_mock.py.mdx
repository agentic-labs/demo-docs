---
title: "tests_api_mock.py"
---

## High-level description
This code defines a `MockTestsAPI` class that simulates the behavior of a TestsAPI for testing purposes. It provides mock data and implementations for various test-related operations, such as retrieving test results and summaries.

## Code Structure
The `MockTestsAPI` class inherits from `TestsAPI` and overrides some of its methods to provide mock data. It uses `MockDbtRunner` and `MockTestsFetcher` to simulate the behavior of the actual DBT runner and test fetcher.

## Symbols

### MockTestsAPI
#### Description
A mock implementation of the TestsAPI class used for testing purposes.

#### Internal Logic
- Initializes with a `MockDbtRunner` and `MockTestsFetcher`.
- Overrides the `_get_test_results_db_rows` method to return mock test result data.

### _get_test_results_db_rows
#### Description
Overridden method that returns a list of mock `TestResultDBRowSchema` objects.

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| test_results | List[TestResultDBRowSchema] | A list of mock test result objects |

#### Internal Logic
- Creates and returns a list of `TestResultDBRowSchema` objects with predefined mock data for both Elementary and DBT tests.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.monitor.api.tests.tests | Imports TestsAPI base class |
| tests.mocks.dbt_runner_mock | Imports MockDbtRunner |
| tests.mocks.fetchers.tests_fetcher_mock | Imports MockTestsFetcher |

## Related Code
The provided related code snippets include test cases for the `MockTestsAPI` class, demonstrating how it's used to test various filtering scenarios for test results summaries. These test cases cover filtering by tags, owners, and models, as well as scenarios with no filters applied.

The `MockTestsFetcher` class is also provided, which is used by `MockTestsAPI` to generate mock test result data. This class overrides the `get_all_test_results_db_rows` method to return predefined mock data.

Overall, this mock implementation allows for testing the TestsAPI functionality without relying on actual database connections or real test executions, providing a controlled environment for unit and integration tests.