---
title: "alerts_api_mock.py"
---

## High-level description
This code defines a mock implementation of the AlertsAPI class for testing purposes. It simulates the behavior of fetching and managing alerts without actually interacting with a real database or external systems.

## Code Structure
The `MockAlertsAPI` class inherits from `AlertsAPI` and overrides its initialization and methods. It uses mock data and a `MockDbtRunner` to simulate the behavior of the real `AlertsAPI`.

## Symbols

### MockAlertsAPI
#### Description
A mock implementation of the AlertsAPI class used for testing purposes.

#### Inputs
None specific to the constructor, but it inherits from `AlertsAPI`.

#### Internal Logic
- Initializes with a `MockDbtRunner` and a default `Config` object.
- Overrides the `alerts_fetcher` with a `MockAlertsFetcher` instance.

### get_new_alerts
#### Description
Simulates fetching new alerts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| days_back | int | Number of days to look back for alerts |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| pending_alerts | List[PendingAlertSchema] | List of simulated pending alerts |

#### Internal Logic
Returns a list of mock pending alerts from the `MockAlertsFetcher`.

### get_alerts_last_sent_times
#### Description
Simulates fetching the last sent times for alerts.

#### Inputs
| Name | Type | Description |
|:-----|:-----|:------------|
| days_back | int | Number of days to look back for alert sent times |

#### Outputs
| Name | Type | Description |
|:-----|:-----|:------------|
| last_sent_times | Dict[str, datetime] | Dictionary of alert IDs and their last sent times |

#### Internal Logic
Returns a dictionary of mock last sent times for alerts from the `MockAlertsFetcher`.

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.config.config | Imports the Config class |
| elementary.monitor.api.alerts.alerts | Imports the AlertsAPI class |
| tests.mocks.dbt_runner_mock | Imports the MockDbtRunner class |
| tests.mocks.fetchers.alerts_fetcher_mock | Imports the MockAlertsFetcher class |

This mock implementation is crucial for testing the AlertsAPI functionality without relying on actual database connections or external systems. It allows for controlled and predictable behavior during unit tests.