---
title: "test_tests_api.py"
---

## High-level description
This file contains integration tests for the `TestsAPI` class, specifically focusing on the `get_test_results_summary` method. It uses a mock implementation of the API to test various filtering scenarios and verify the correctness of the returned test result summaries.

## Code Structure
The file consists of a single test function `test_get_test_results_summary()` that creates an instance of `MockTestsAPI` and tests different filtering scenarios using the `get_test_results_summary` method.

## Symbols

### test_get_test_results_summary
#### Description
This function tests the `get_test_results_summary` method of the `TestsAPI` class using a mock implementation. It verifies the behavior of the method with various filter conditions, including no filter, tag filters, owner filters, and model filters.

#### Internal Logic
1. Create an instance of `MockTestsAPI`.
2. Test with no filter:
   - Verify that the correct number of unique test results are returned.
   - Ensure all returned objects are instances of `TestResultSummarySchema`.
3. Test with tag filters:
   - Filter by "awesome-o" tag and verify the correct number and IDs of results.
   - Filter by "awesome" tag and verify the correct number and IDs of results.
   - Filter by a non-existent tag and verify an empty result set.
4. Test with owner filters:
   - Filter by owner "Jeff" and verify the correct number and IDs of results.
   - Filter by owner "Joe" and verify the correct number and IDs of results.
5. Test with model filters:
   - Filter by model "model_id_1" and verify the correct number and IDs of results.
   - Filter by model "model_id_2" and verify the correct number and IDs of results.

For each test case, the function asserts:
- The correct number of results is returned.
- All returned objects are instances of `TestResultSummarySchema`.
- The correct `elementary_unique_id`s are present in the results (where applicable).

## Dependencies
| Dependency | Purpose |
|:-----------|:--------|
| elementary.monitor.api.tests.schema | Provides the `TestResultSummarySchema` class used for type checking |
| elementary.monitor.data_monitoring.schema | Provides the `SelectorFilterSchema` class used for filtering |
| tests.mocks.api.tests_api_mock | Provides the `MockTestsAPI` class used for testing |

## Notes
- The test uses a mock implementation of the `TestsAPI` class, which likely contains predefined test data for various scenarios.
- The test covers different filtering options but does not test all possible combinations or edge cases.
- The test assumes that the mock implementation correctly simulates the behavior of the actual `TestsAPI` class.